"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[6731],{2687:(e,t,r)=>{r.d(t,{N5:()=>a});var n=r(50076),i=(r(81806),r(76460)),s=r(69728);const o=()=>i.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class c{constructor(){this._includedModules=new Map}include(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}class a extends c{constructor(){super(...arguments),this.vertex=new l,this.fragment=new l,this.attributes=new p,this.varyings=new f,this.extensions=new m,this.outputs=new y}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.extensions.generateSource(e),n=this.attributes.generateSource(e),i=this.varyings.generateSource(e),s="vertex"===e?this.vertex:this.fragment,o=s.uniforms.generateSource(),c=s.code.generateSource(),a=s.main.generateSource(t),u="vertex"===e?b:g,h=s.constants.generateSource(),d=this.outputs.generateSource(e);return`#version 300 es\n${r.join("\n")}\n${u}\n${h.join("\n")}\n${o.join("\n")}\n${n.join("\n")}\n${i.join("\n")}\n${d.join("\n")}\n${c.join("\n")}\n${a.join("\n")}`}generateBind(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[s.c.Bind];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[s.c.Bind];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return t=>{for(let i=0;i<n;++i)r[i](e,t)}}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[s.c.Pass];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[s.c.Pass];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return(t,i)=>{for(let s=0;s<n;++s)r[s](e,t,i)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[s.c.Draw];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[s.c.Draw];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return(t,i,s)=>{for(let o=0;o<n;++o)r[o](e,s,t,i)}}}class u{constructor(e){this._stage=e,this._entries=new Map}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const n of t)this._add(n);return this._stage}get(e){return this._entries.get(e)}_add(e){if(null!=e){if(this._entries.has(e.name)&&!this._entries.get(e.name).equals(e))throw new n.A(`Duplicate uniform name ${e.name} for different uniform type`);this._entries.set(e.name,e)}else o().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((e=>null!=e.arraySize?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`))}get entries(){return Array.from(this._entries.values())}}class h{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(e){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(e)throw new n.A("Shader does not contain main function body.");return[]}}class d{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class l extends c{constructor(){super(...arguments),this.uniforms=new u(this),this.main=new h(this),this.code=new d(this),this.constants=new _(this)}get builder(){return this}}class p{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class f{constructor(){this._entries=new Map}add(e,t){this._entries.has(e)?o().warn(`Ignoring duplicate varying ${t} ${e}`):this._entries.set(e,t)}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push("vertex"===e?`out ${r} ${n};`:`in ${r} ${n};`))),t}}class m{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?m.ALLOWLIST_VERTEX:m.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}m.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],m.ALLOWLIST_VERTEX=[];class y{constructor(){this._entries=new Map}add(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this._entries.get(r);n?.name!==e||n?.type!==t?this._entries.set(r,{name:e,type:t}):o().warn(`Fragment shader output location ${r} occupied`)}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:y.DEFAULT_NAME,type:y.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}y.DEFAULT_TYPE="vec4",y.DEFAULT_NAME="fragColor";class _{constructor(e){this._stage=e,this._entries=new Set}add(e,t,r){let n="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":n=_._numberToFloatStr(r);break;case"int":n=_._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])},                            ${_._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])},                            ${_._numberToFloatStr(r[2])},                            ${_._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])},                             ${_._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])},                             ${_._numberToIntStr(r[2])},                             ${_._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${t}(${Array.prototype.map.call(r,(e=>_._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const g="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n#endif",b="precision highp float;\nprecision highp sampler2D;"},6951:(e,t,r)=>{r.d(t,{Y7:()=>A,HS:()=>E,mm:()=>S,A:()=>I,k2:()=>N,ZA:()=>x,E8:()=>T,hF:()=>g,C5:()=>_,uK:()=>v,Pi:()=>b});var n=r(35143),i=(r(81806),r(76460)),s=r(88685),o=r(60984);function c(e,t,r){const n=t.split("\n");for(const i of n)if(i.trim().length){{let t="";null!=r&&(t+=`/*id:${r??"000"}*/   `),e.body+=t.padEnd(14)}e.body+=" ".repeat(e.indent)+i+"\n"}}class a{write(e){for(const t of e.rootOutputNodes())e.shouldPruneOutputNode(t)||(t.variableName=this._write(e,t.node));return e}_createVarName(e,t){let r="";return"boolean"!=typeof t&&"number"!=typeof t&&t.debugInfo.name&&(r=`${t.debugInfo.name}_`),`${r}v${e.varCount++}`}_write(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"==typeof t)return t.toString();if("boolean"==typeof t)return t.toString();let n=e.getEmit(t);if(n)return n;switch(t.shaderType){case"scope-node":n=this._writeScopeNode(e,t);break;case"primitive-node":n=this._writePrimitiveNode(e,t,r);break;case"function-node":n=this._writeFunctionNode(e,t);break;case"property-access-node":n=this._writePropertyAccessNode(e,t);break;case"property-access-2d-node":n=this._writePropertyAccess2DNode(e,t);break;case"text-node":n=t.text;break;case"block-node":n=this._writeBlockNode(e,t);break;case"condition-node":n=this._writeConditionNode(e,t)}return e.setEmit(t,n),n}_writeScopeNode(e,t){const r=new t.child.constructor;r.setDebugName(t.debugInfo.name);const n=this._write(e,r,!0);return c(e,`{ /*ScopeStart: ${t.uid} ${t.debugInfo.name}*/`),e.indent+=2,c(e,`${n} = ${this._write(e,t.child)};`),e.indent-=2,c(e,`} /*ScopeEnd: ${t.uid} ${t.debugInfo.name}*/`),n}_writeConditionNode(e,t){const r=new t.ifTrue.constructor,n=this._write(e,r,!0);c(e,`if (${this._write(e,t.condition)}) {`),e.indent+=2;const i=e.createSubgraphContext(),s=this._write(i,t.ifTrue);if(e.body+=i.body,s&&c(e,`${n} = ${s};`),e.indent-=2,c(e,"}"),t.ifFalse){c(e,"else {"),e.indent+=2;const r=e.createSubgraphContext(),i=this._write(r,t.ifFalse);e.body+=r.body,i&&c(e,`${n} = ${i};`),e.indent-=2,c(e,"}")}return n}_writeBlockNode(e,t){const{captureList:r,generator:n,returnType:i}=t,s={};for(const c in r){if(!r[c])continue;const t=this._write(e,r[c]);s[c]=t}const o=new i,a=this._write(e,o,!0);if(s.out=a,t.subgraph){const r=e.createSubgraphContext(),n=this._write(r,t.subgraph.child),i=r.body;s.subgraph={varName:n,body:i}}const u=n(s);return c(e,"{\n"),e.indent+=2,c(e,u),e.indent-=2,c(e,"}\n"),a}_writePropertyAccessNode(e,t){const r=this._write(e,t.target);return"string"==typeof t.property&&t.property.includes("[")?`${r}${t.property}`:"string"!=typeof t.property?`${r}[${this._write(e,t.property)}]`:`${r}.${t.property}`}_writePropertyAccess2DNode(e,t){return`${this._write(e,t.target)}[${this._write(e,t.x)}][${this._write(e,t.y)}]`}_writeFunctionNode(e,t){const r=t.returnType.type;if(t.isInfix){const[n,i]=t.children.map((t=>this._write(e,t))),s=this._createVarName(e,t);return c(e,`${r.padEnd(5)} ${s} = ${n} ${t.token} ${i};`,t.uid),s}const n=t.children.map((t=>this._write(e,t))).join(", "),i=this._createVarName(e,t);return c(e,`${r.padEnd(5)} ${i} = ${t.token}(${n});`,t.uid),i}_writePrimitiveNode(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.getInput(t);if(n)return n.isUsed=!0,n.variableName;const i=1===t.children.length&&t.children[0]?.type===t.type;if(!t.isMutable&&(t.isImplicit||i))return this._write(e,t.children[0]);const s=this._createVarName(e,t);if(r)return c(e,`${t.type.padEnd(5)} ${s};`,t.uid),s;const o=!t.debugInfo.name&&!t.isMutable;if(o&&"float"===t.type&&"number"==typeof t.children[0])return Number.isInteger(t.children[0])?t.children[0].toFixed(1):t.children[0].toString();if(o&&"int"===t.type&&"number"==typeof t.children[0]&&Number.isInteger(t.children[0]))return t.children[0].toString();const a=t.children.map((t=>this._write(e,t))).join(", ");return"array"===t.type?(c(e,`${t.type.padEnd(5)} ${s} = [${a}];`,t.uid),s):o?`${t.type}(${a})`:(c(e,`${t.type.padEnd(5)} ${s} = ${t.type}(${a});`,t.uid),s)}}var u=r(22881);class h{constructor(e,t,r){this.variableName=e,this.variableInputType=t,this.node=r,this.type="shader-input",this.isUsed=!1}clone(){return new h(this.variableName,this.variableInputType,(0,u.vA)(this.node))}}class d{constructor(e,t,r){this.outVariableName=e,this.outVariableType=t,this.node=r,this.type="shader-output"}clone(){const e=new d(this.outVariableName,this.outVariableType,(0,u.vA)(this.node));return e.variableName=this.variableName,e}}class l{static createVertex(e,t,r,n,i,s){const o=[];for(const a in e){const t=e[a],n=r.get(a);n?o.push(new h(n,"builtin",t)):o.push(new h("a_"+a,"in",t))}for(const a of n){const e=a.uniformHydrated;o.push(new h(a.uniformName,"uniform",e))}const c=[];for(const a in t){const e=t[a];"glPosition"===a?c.push(new d("gl_Position","builtin",e)):"glPointSize"===a?c.push(new d("gl_PointSize","builtin",e)):c.push(new d("v_"+a,"out",e))}return new l(o,c,i,s)}static createFragment(e,t,r,n,i,s){const o=[],c=Array.from(i.rootOutputNodes());for(const u in e){const t=e[u],n=r.get(u);if(n){o.push(new h(n,"builtin",t));continue}const i=c.find((e=>e.node===t));i&&o.push(new h(i.outVariableName,"in",t))}for(const u of n){const e=u.uniformHydrated;o.push(new h(u.uniformName,"uniform",e))}const a=[];for(const u in t){const e=t[u],n=r.get(u);"discard"===u?a.push(new d(null,"discard",e)):n?a.push(new d(n,"builtin",e)):a.push(new d(u,"out",e))}return new l(o,a,s)}constructor(e,t,r,n){this.type="shader-graph-context",this.indent=0,this.body="",this.varCount=0,this._inputShaderTypesByNodeUid=new Map,this._nodeEmitMap=new Map;for(const i of e)this._inputShaderTypesByNodeUid.set(i.node.uid,i);this._outputShaderTypes=t,this._transformFeedbackBindings=r,this._transformFeedbackNames=new Set(r.map((e=>"v_"+e.propertyKey))),this._usedInFragmentShader=n}shouldPruneOutputNode(e){return!!this._usedInFragmentShader&&"builtin"!==e.outVariableType&&!this._transformFeedbackNames.has(e.outVariableName)&&!this._usedInFragmentShader.has(e.node.uid)}setEmit(e,t){this._nodeEmitMap.set(e.uid,t)}getEmit(e){return this._nodeEmitMap.get(e.uid)}inputs(){return this._inputShaderTypesByNodeUid.values()}getInput(e){return this._inputShaderTypesByNodeUid.get(e.uid)}*rootOutputNodes(){for(const e of this._outputShaderTypes)yield e}*nodes(){const e=[];for(const t of this._outputShaderTypes.values())e.push(t.node);for(;e.length;){const t=e.pop();"number"!=typeof t&&"boolean"!=typeof t&&e.push(...t.children.filter(Boolean)),yield t}}*nodesOfTypeOrFunction(){for(const e of this.nodes())"number"!=typeof e&&"boolean"!=typeof e&&(yield e)}createSubgraphContext(){const e=this.clone();return e.body="",e.indent=this.indent+2,e._nodeEmitMap=new Map(this._nodeEmitMap),e}clone(){const e=new l([],this._outputShaderTypes,this._transformFeedbackBindings,this._usedInFragmentShader);return e._inputShaderTypesByNodeUid=this._inputShaderTypesByNodeUid,e.indent=this.indent,e.body=this.body,e.varCount=this.varCount,e._nodeEmitMap=this._nodeEmitMap,e}insertVertexShader(e){e.vertex.code.add(""),this._insertInputs(e,"vertex"),e.vertex.code.add(""),e.vertex.code.add("// OUTPUTS: "),e.vertex.code.add("// --------------------------------------------------------- ");for(const t of this.rootOutputNodes()){const r="builtin"===t.outVariableType;this.shouldPruneOutputNode(t)||(r?e.vertex.code.add(`// ${t.outVariableType.padEnd(7)} ${t.node.type.padEnd(9)} ${t.outVariableName};`):e.vertex.code.add(`${t.outVariableType.padEnd(10)} ${t.node.type.padEnd(9)} ${t.outVariableName};`))}e.vertex.code.add(""),e.vertex.code.add("void main() {"),e.vertex.code.add("  "+this.body.split("\n").join("\n  "));for(const t of this.rootOutputNodes())this.shouldPruneOutputNode(t)||e.vertex.code.add(`  ${t.outVariableName} = ${t.variableName};`);e.vertex.code.add("}")}insertFragmentShader(e){this._insertInputs(e,"fragment"),e.fragment.code.add(""),e.fragment.code.add("// OUTPUTS: "),e.fragment.code.add("// --------------------------------------------------------- ");let t=0;for(const r of this.rootOutputNodes())"builtin"===r.outVariableType?e.fragment.code.add(`// ${r.outVariableType.padEnd(7)} ${r.node.type.padEnd(9)} ${r.outVariableName};`):e.outputs.add(r.outVariableName,r.node.type,t++);e.fragment.code.add(""),e.fragment.code.add("void main() {"),e.fragment.code.add("  "+this.body.split("\n").join("\n  "));for(const r of this.rootOutputNodes())"discard"===r.outVariableType?(e.fragment.code.add("  // TODO: Should ensure codegen for discard appears first in fragment shader"),e.fragment.code.add(`  if (${r.variableName}) {`),e.fragment.code.add("    discard;"),e.fragment.code.add("  }"),e.fragment.code.add("  ")):e.fragment.code.add(`  ${r.outVariableName} = ${r.variableName};`);e.fragment.code.add("}")}_insertInputs(e,t){e[t].code.add("// INPUTS: "),e[t].code.add("// --------------------------------------------------------- ");for(const r of this.inputs())r.isUsed&&"builtin"!==r.variableInputType&&("array"===r.node.type?e[t].code.add(`${r.variableInputType.padEnd(10)} ${r.node.elementType.type.padEnd(9)} ${r.variableName}[${r.node.size}];`):"array-2d"===r.node.type?e[t].code.add(`${r.variableInputType.padEnd(10)} ${r.node.elementType.type.padEnd(9)} ${r.variableName}[${r.node.size}]; // Emulated 2D Array. Not supported by ES3.0`):e[t].code.add(`${r.variableInputType.padEnd(10)} ${r.node.type.padEnd(9)} ${r.variableName};`))}}var p=r(78492),f=r(2687);function m(e){return new e}function y(e,t,r){const n=e.constructor[t]??[];e.constructor.hasOwnProperty(t)||Object.defineProperty(e.constructor,t,{value:n.slice()}),e.constructor[t].push(r)}function _(e,t){return(r,n)=>{y(r,"locations",{typeCtor:t,propertyKey:n,parameterIndex:null,index:e})}}const g=e=>(t,r,n)=>{y(t,"inputs",{inputCtor:e,propertyKey:r,parameterIndex:n})},b=e=>(t,r)=>{y(t,"uniforms",{typeCtor:e,propertyKey:r})},v=e=>(t,r)=>{y(t,"options",{typeCtor:e,propertyKey:r})},T=(e,t)=>{y(e,"defines",{propertyKey:t})};const w=(e,t)=>(r,n)=>{r.constructor.builtins.push({builtin:e,propertyKey:n,typeCtor:t})};class x{}x.builtins=[],(0,n._)([w("gl_VertexID",o.Ai)],x.prototype,"glVertexID",void 0);class A{}class E{}E.builtins=[],(0,n._)([w("gl_FragCoord",o.Zb)],E.prototype,"glFragCoord",void 0),(0,n._)([w("gl_PointCoord",o.ZY)],E.prototype,"glPointCoord",void 0);class S{}(0,n._)([(e=>(t,r)=>{y(t,"builtins",{builtin:e,propertyKey:r})})("gl_FragDepth")],S.prototype,"glFragDepth",void 0);class N{constructor(){this.type="uniform-group"}get _uniforms(){return this.constructor.uniforms??[]}}class I{constructor(){this.logShader=!1,this.computeAttributes={}}get vertexInput(){const e=this._shaderModuleClass.inputs.findLast((e=>"vertex"===e.propertyKey&&0===e.parameterIndex));if(!e)throw new Error("Unable to find vertex input parameter");return e}get computeInput(){return this._shaderModuleClass.inputs.findLast((e=>"vertex"===e.propertyKey&&1===e.parameterIndex))}get fragmentInput(){const e=this._shaderModuleClass.inputs.findLast((e=>"fragment"===e.propertyKey));if(!e)throw new Error("Unable to find fragment input parameter");return e}get transformFeedbackBindings(){return this.fragmentInput.inputCtor.transformFeedbackBindings??[]}get locations(){return[...this.vertexInput.inputCtor.locations,...this.computeInput?.inputCtor.locations??[]]}get locationsMap(){const e=new Map,t=new Set;for(const r of this.locations)t.has(r.index)?i.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.GraphShaderModule").warnOnce("mapview-rendering",`Unable to assigned attribute ${r.propertyKey} to ${r.index}. Index already in use`,{locationsMap:e}):(e.set(r.propertyKey,r.index),t.add(r.index));return e}get locationInfo(){if(!this._locationInfo){const e=this.locationsMap,t=Array.from(e.entries()).map((e=>{let[t,r]=e;return`${t}.${r}`})).join("."),r=(0,s.Wm)(t),n=this.computeAttributes;this._locationInfo={hash:r,stringHash:t,locations:e,computeAttributeMap:n}}return this._locationInfo}get renamedLocationsMap(){const e=new Map;for(const t of this.locations)e.set("a_"+t.propertyKey,t.index);return e}get optionPropertyKeys(){if(!this._optionPropertyKeys){const e=new Set;for(const t of this._options)e.add(t.propertyKey);this._optionPropertyKeys=e}return this._optionPropertyKeys}get _shaderModuleClass(){return this.constructor}get _defines(){return this._shaderModuleClass.defines??[]}get _options(){return this._shaderModuleClass.options??[]}get _uniforms(){return this._shaderModuleClass.uniforms??[]}getProgram(e,t,r,n){try{const{vertex:i,fragment:s,uniformBindings:o}=this._generateShaders(e,t,r,n);return new p.K(i,s,this.renamedLocationsMap,this.locationInfo,o,this.transformFeedbackBindings)}catch(i){return new p.K("","",this.renamedLocationsMap,this.locationInfo,[],this.transformFeedbackBindings)}}getDebugUniformClassInfo(e){const t=this._options.find((t=>t.propertyKey===e));if(t)return{type:"option",className:t.typeCtor};const r=this._uniforms.find((t=>t.propertyKey===e));if(!r)throw new Error(`Unable to find uniform class type for property: ${e}`);return{type:"required",className:r.typeCtor}}getShaderKey(e,t,r,n){const i=Object.keys(e).map((t=>`${t}.${e[t]}`)).join("."),s=Object.keys(r).map((e=>`${e}.${r[e]}`)).join("."),o=Object.keys(n).map((e=>`${e}.${n[e]}`)).join("."),c=Object.keys(t).filter((e=>this.optionPropertyKeys.has(e)&&t[e])).join(".");return`${this.type}.${i}.${s}.${o}.${c}`}_generateShaders(e,t,r,n){const i=[];this._setDefines(r),this._setOptionalUniforms(i,t),this._setRequiredUniforms(i);const s=this._hydrateVertexInput(n),o=this._injectPackPrecisionFactor(s,e),c=this._hydrateComputeInput(),h=c&&this._injectComputePackPrecisionFactor(c,e),d=this.vertex(o,h),p=this._hydrateFragmentInput(d),f=this.fragment(p),m=new Set;for(const a in f){const e=f[a];(0,u.rz)(m,e)}const y=this._getVertexInputBuiltins(),_=l.createVertex({...s,...c},d,y,i,this.transformFeedbackBindings,m);(new a).write(_);const g=this._getFragmentInputBuiltins(f);g.set("glPointCoord","gl_PointCoord");const b=l.createFragment(p,f,g,i,_,this.transformFeedbackBindings);(new a).write(b);const v=this._createShaderBuilder(_,b),T=v.generate("vertex"),w=v.generate("fragment");return this.logShader&&(console.log(T),console.log(w)),{vertex:T,fragment:w,uniformBindings:i}}_setDefines(e){for(const t in e)this[t]=e[t]}_setOptionalUniforms(e,t){for(const r of this._options)t[r.propertyKey]?this[r.propertyKey]=this._hydrateUniformGroup(e,r):this[r.propertyKey]=null}_setRequiredUniforms(e){for(const t of this._uniforms)this[t.propertyKey]=this._hydrateUniformGroup(e,t)}_hydrateUniformGroup(e,t){const r=new(0,t.typeCtor);for(const n of r._uniforms??[]){const i=m(n.typeCtor),s=`u_${t.propertyKey}_${n.propertyKey}`,o=i.type,c=[t.propertyKey,n.propertyKey].join(".");if("type"in n.typeCtor&&"array"===n.typeCtor.type){const t=i;e.push({shaderModulePath:c,uniformName:s,uniformType:o,uniformArrayLength:t.size,uniformArrayElementType:t.elementType.type,uniformHydrated:i})}else if("type"in n.typeCtor&&"array-2d"===n.typeCtor.type){const t=i;e.push({shaderModulePath:c,uniformName:s,uniformType:o,uniformArrayLength:t.size,uniformArrayElementType:t.elementType.type,uniformHydrated:i})}else e.push({shaderModulePath:c,uniformName:s,uniformType:o,uniformHydrated:i});r[n.propertyKey]=i}return r}_hydrateVertexInput(e){const t=this.vertexInput.inputCtor,r=t.locations.reduce(((t,r)=>!1===e[r.propertyKey]?t:{...t,[r.propertyKey]:m(r.typeCtor)}),{});for(const{propertyKey:n,typeCtor:i}of t.builtins){const e=m(i);r[n]=e}return r}_hydrateComputeInput(){return null==this.computeInput?null:this.computeInput.inputCtor.locations.reduce(((e,t)=>({...e,[t.propertyKey]:m(t.typeCtor)})),{})}_injectPackPrecisionFactor(e,t){const r={};for(const n in e){const i=e[n],s=t[n];if(s){if("float"!==i.type&&"vec2"!==i.type&&"vec3"!==i.type&&"vec4"!==i.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${i.type}`);r[n]=i.divide(new o.nt(s))}else r[n]=i}return r}_injectComputePackPrecisionFactor(e,t){const r={},n=new Map;for(const i in this.computeAttributes)for(const e of this.computeAttributes[i]??[])n.set(e,i);for(const i in e){const s=e[i],c=n.get(i);if(!c)continue;const a=t[c];if(a){if("float"!==s.type&&"vec2"!==s.type&&"vec3"!==s.type&&"vec4"!==s.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${s.type}`);r[i]=s.divide(new o.nt(a))}else r[i]=s}return r}_hydrateFragmentInput(e){const t={};for(const r in e)t[r]=e[r];for(const{propertyKey:r,typeCtor:n}of E.builtins){const e=m(n);t[r]=e}return t}_getVertexInputBuiltins(){const e=this.vertexInput.inputCtor,t=new Map;for(const{builtin:r,propertyKey:n}of e.builtins)t.set(n,r);return t}_getFragmentInputBuiltins(e){const t=e.constructor,r=new Map;for(const n of t.builtins??[])r.set(n.propertyKey,n.builtin);return r}_createShaderBuilder(e,t){const r=new f.N5;return this._insertDebugInfo(r),e.insertVertexShader(r),t.insertFragmentShader(r),r}_insertDebugInfo(e){e.vertex.code.add("// DEFINES: "),e.vertex.code.add("// --------------------------------------------------------- ");for(const t of this._defines)this[t.propertyKey]?e.vertex.code.add(`//   ${t.propertyKey}: true`):e.vertex.code.add(`//   ${t.propertyKey}: false`);e.vertex.code.add(""),e.vertex.code.add("// OPTIONS: "),e.vertex.code.add("// --------------------------------------------------------- ");for(const t of this._options)this[t.propertyKey]?e.vertex.code.add(`//   ${t.propertyKey}: true`):e.vertex.code.add(`//   ${t.propertyKey}: false`)}}},12331:(e,t,r)=>{r.d(t,{H:()=>d});r(81806);var n=r(76460),i=r(30726),s=r(76718),o=r(61678),c=r(93345),a=r(89179),u=r(62881),h=r(80895);class d{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._context=e,this._glName=null,this._colorAttachments=new Map,this._depthStencilBuffer=null,this._depthStencilTexture=null,this._initialized=!1,e.instanceCounter.increment(c.vt.FramebufferObject,this);const n=l(t)?t:new h.g(this._context,t);if(this._colorAttachments.set(c.Nm.COLOR_ATTACHMENT0,n),this._validateTextureDescriptor(n.descriptor),this._validateColorAttachmentPoint(c.Nm.COLOR_ATTACHMENT0),null!=r)if(function(e){return l(e)||null!=e&&"pixelFormat"in e}(r))this._depthStencilTexture=l(r)?r:new h.g(this._context,r),this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else{const e=function(e){return null!=e&&"type"in e&&e.type===a.p.RenderBuffer}(r)?r:new u.l(this._context,r);this._depthStencilBuffer=e,this._validateRenderBufferDescriptor(e.descriptor)}}dispose(){if(0===this._colorAttachments.size&&!this._glName)return;const e=this._context.getBoundFramebufferObject();this._colorAttachments.forEach(((e,t)=>this.detachColorTexture(t)?.dispose())),this.detachDepthStencilBuffer()?.dispose(),this.detachDepthStencilTexture()?.dispose(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(e),this._context.instanceCounter.decrement(c.vt.FramebufferObject,this)}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(c.Nm.COLOR_ATTACHMENT0)}get depthStencil(){return this._depthStencilTexture||this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){const e=this._colorAttachments.get(c.Nm.COLOR_ATTACHMENT0);return e?.descriptor?.width??0}get height(){const e=this._colorAttachments.get(c.Nm.COLOR_ATTACHMENT0);return e?.descriptor?.height??0}get usedMemory(){return[...this._colorAttachments].reduce(((e,t)=>{let[r,n]=t;return e+n.usedMemory}),this.depthStencil?.usedMemory??0)}getColorTexture(e){const t=this._colorAttachments.get(e);return t&&l(t)?t:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Nm.COLOR_ATTACHMENT0;if(!e)return;this._validateColorAttachmentPoint(t);const r=e.descriptor;this._validateTextureDescriptor(r),this.detachColorTexture(t)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(e.glName,t)),this._colorAttachments.set(t,e)}detachColorTexture(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.Nm.COLOR_ATTACHMENT0;const t=this._colorAttachments.get(e);if(t){if(this._initialized){const t=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),this._framebufferTexture2D(null,e),this._context.bindFramebuffer(t)}return this._colorAttachments.delete(e),t}}setColorTextureTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Nm.COLOR_ATTACHMENT0;const r=this._colorAttachments.get(t);r&&this._framebufferTexture2D(r.glName,t,e)}attachDepthStencil(e){if(e)switch(e.type){case a.p.Texture:return this._attachDepthStencilTexture(e);case a.p.RenderBuffer:return this._attachDepthStencilBuffer(e)}}_attachDepthStencilTexture(e){if(null==e)return;const t=e.descriptor;t.pixelFormat!==c.Ab.DEPTH_STENCIL&&t.pixelFormat!==c.Ab.DEPTH24_STENCIL8&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),t.dataType!==c.ld.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._validateTextureDescriptor(t),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(e.glName,c.nI)),this._depthStencilTexture?.dispose(),this._depthStencilTexture=e}detachDepthStencilTexture(){const e=this._depthStencilTexture;if(e&&this._initialized){const e=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),this._framebufferTexture2D(null,c.nI),this._context.bindFramebuffer(e)}return this._depthStencilTexture=null,e}_attachDepthStencilBuffer(e){if(null==e)return;const t=e.descriptor;if(this._validateRenderBufferDescriptor(t),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const r=this._context.gl,n=this._getGLAttachmentPoint(t);r.framebufferRenderbuffer(c.R.FRAMEBUFFER,n,r.RENDERBUFFER,e.glName)}this._depthStencilBuffer=e}detachDepthStencilBuffer(){const e=this._depthStencilBuffer;if(e&&this._initialized){const t=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this);const r=this._context.gl,n=this._getGLAttachmentPoint(e.descriptor);r.framebufferRenderbuffer(c.R.FRAMEBUFFER,n,r.RENDERBUFFER,null),this._context.bindFramebuffer(t)}return this._depthStencilBuffer=null,e}copyToTexture(e,t,r,n,i,s,o){(e<0||t<0||i<0||s<0)&&console.error("Offsets cannot be negative!"),(r<=0||n<=0)&&console.error("Copy width and height must be greater than zero!");const a=o.descriptor;o.descriptor.target!==c.Ap.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!"),(null==a?.width||null==a?.height||e+r>this.width||t+n>this.height||i+r>a.width||s+n>a.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const u=this._context,d=u.bindTexture(o,h.g.TEXTURE_UNIT_FOR_UPDATES);u.setActiveTexture(h.g.TEXTURE_UNIT_FOR_UPDATES),u.bindFramebuffer(this),u.gl.copyTexSubImage2D(c.Ap.TEXTURE_2D,0,i,s,e,t,r,n),u.bindTexture(d,h.g.TEXTURE_UNIT_FOR_UPDATES)}readPixels(e,t,r,n,i,s,o){(r<=0||n<=0)&&console.error("Copy width and height must be greater than zero!"),o||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(e,t,r,n,i,s,o)}async readPixelsAsync(e,t,r,n,i,o,a){const{gl:u}=this._context,h=s.g.createPixelPack(this._context,c._U.STREAM_READ,a.byteLength);this._context.bindBuffer(h);const d=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),u.readPixels(e,t,r,n,i,o,0),this._context.unbindBuffer(c.NZ.PIXEL_PACK_BUFFER),this._context.bindFramebuffer(d),await h.getSubDataAsync(a),h.dispose()}resize(e,t){if(this.width===e&&this.height===t)return;const r={width:e,height:t};p(r,this._context.parameters.maxTextureSize),this._colorAttachments.forEach((e=>e.resize(r.width,r.height))),this._depthStencilTexture?.resize(r.width,r.height),this._initialized&&(p(r,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(r.width,r.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}initializeAndBind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.R.FRAMEBUFFER;const t=this._context.gl;if(this._initialized)return void t.bindFramebuffer(e,this.glName);this._glName&&t.deleteFramebuffer(this._glName);const r=t.createFramebuffer();if(t.bindFramebuffer(e,r),this._colorAttachments.forEach(((t,r)=>this._framebufferTexture2D(t.glName,r,f(t),e))),this._depthStencilBuffer){const r=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);t.framebufferRenderbuffer(e,r,t.RENDERBUFFER,this._depthStencilBuffer.glName)}else this._depthStencilTexture&&this._framebufferTexture2D(this._depthStencilTexture.glName,t.DEPTH_STENCIL_ATTACHMENT,f(this._depthStencilTexture),e);(0,o.en)()&&t.checkFramebufferStatus(e)!==t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=r,this._initialized=!0}_framebufferTexture2D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Nm.COLOR_ATTACHMENT0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.Ap.TEXTURE_2D,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.R.FRAMEBUFFER,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this._context.gl.framebufferTexture2D(n,t,r,e,i)}_disposeDepthStencilAttachments(){const e=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);const t=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);e.framebufferRenderbuffer(c.R.FRAMEBUFFER,t,e.RENDERBUFFER,null)}this._depthStencilBuffer=(0,i.WD)(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,e.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture=(0,i.WD)(this._depthStencilTexture))}_validateTextureDescriptor(e){e.target!==c.Ap.TEXTURE_2D&&e.target!==c.Ap.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!"),p(e,this._context.parameters.maxTextureSize),this._validateBufferDimensions(e)}_validateRenderBufferDescriptor(e){p(e,this._context.parameters.maxRenderbufferSize),this._validateBufferDimensions(e)}_validateBufferDimensions(e){e.width<=0&&(e.width=this.width),e.height<=0&&(e.height=this.height),this.width>0&&this.height>0&&(this.width===e.width&&this.height===e.height||console.error("Attachment size must match framebuffer size!"))}_getGLAttachmentPoint(e){switch(e.internalFormat){case c.yQ.DEPTH_COMPONENT16:case c.yQ.DEPTH_COMPONENT24:case c.yQ.DEPTH_COMPONENT32F:return this._context.gl.DEPTH_ATTACHMENT;case c.yQ.DEPTH24_STENCIL8:case c.yQ.DEPTH32F_STENCIL8:case c.yQ.DEPTH_STENCIL:return this._context.gl.DEPTH_STENCIL_ATTACHMENT;case c.yQ.STENCIL_INDEX8:return this._context.gl.STENCIL_ATTACHMENT}}_validateColorAttachmentPoint(e){if(-1===d._MAX_COLOR_ATTACHMENTS){const{gl:e}=this._context;d._MAX_COLOR_ATTACHMENTS=e.getParameter(e.MAX_COLOR_ATTACHMENTS)}const t=e-c.Nm.COLOR_ATTACHMENT0;t+1>d._MAX_COLOR_ATTACHMENTS&&n.A.getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${t+1}. Implementation supports up to ${d._MAX_COLOR_ATTACHMENTS} color attachments`)}}function l(e){return null!=e&&"type"in e&&e.type===a.p.Texture}function p(e,t){const r=Math.max(e.width,e.height);if(r>t){n.A.getLogger("esri.views.webgl.FramebufferObject").warn(`Resizing FBO attachment size ${e.width}x${e.height} to device limit ${t}`);const i=t/r;return e.width=Math.round(e.width*i),e.height=Math.round(e.height*i),!1}return!0}function f(e){return e.descriptor.target===c.Ap.TEXTURE_CUBE_MAP?c.Ap.TEXTURE_CUBE_MAP_POSITIVE_X:c.Ap.TEXTURE_2D}d._MAX_COLOR_ATTACHMENTS=-1},22881:(e,t,r)=>{function n(e,t){const r=[];for(r.push(t);r.length;){const t=r.pop();if("object"==typeof t&&!e.has(t.uid)){e.add(t.uid);for(const e of t.children)r.push(e)}}}r.d(t,{XL:()=>h,aw:()=>l,ff:()=>u,rR:()=>d,rz:()=>n,vA:()=>s,vL:()=>o,zg:()=>a});class i{constructor(){this.uid=i.NodeCount++,this._debugName=null,this._isMutable=!1,this.isImplicit=!1}get isMutable(){return this._isMutable}setMutable(){return this._isMutable=!0,this}setDebugName(e){return e=function(e){return e.split(" ").map(((e,t)=>t>0?e.charAt(0).toUpperCase()+e.slice(1):e)).join("")}(e),this._debugName=e,this.isImplicit&&this.children[0]instanceof i&&this.children[0].setDebugName(e),this}get debugInfo(){return{name:this._debugName??""}}cloneInto(e){e._debugName=this._debugName,e._isMutable=this._isMutable,e.isImplicit=this.isImplicit,e.uid=this.uid}}function s(e){return"object"==typeof e?e.clone():e}i.NodeCount=0;class o extends i{constructor(){super(...arguments),this.shaderType="primitive-node"}}class c extends i{constructor(e){super(),this.child=e,this.shaderType="scope-node"}get children(){return[this.child]}clone(){const e=new c(s(this.child));return this.cloneInto(e),e}}class a extends i{constructor(e,t,r){super(),this.property=e,this.target=t,this.returnType=r,this.shaderType="property-access-node"}get children(){const e=[this.target];return"string"!=typeof this.property&&e.push(this.property),e}clone(){const e=new a(this.property,s(this.target),this.returnType);return this.cloneInto(e),e}}class u extends i{constructor(e,t,r,n){super(),this.x=e,this.y=t,this.target=r,this.returnType=n,this.shaderType="property-access-2d-node"}get children(){return[this.target,this.x,this.y]}clone(){const e=new u(this.x,this.y,s(this.target),this.returnType);return this.cloneInto(e),e}}class h extends i{constructor(e,t,r){super(),this.condition=e,this.ifTrue=t,this.ifFalse=r,this.shaderType="condition-node"}get children(){return[this.condition,this.ifTrue,this.ifFalse]}clone(){const e=s(this.ifTrue),t=this.ifFalse?s(this.ifFalse):null,r=new h(this.condition,e,t);return this.cloneInto(r),r}}class d extends i{constructor(e,t,r,n){super(),this.captureList=e,this.returnType=t,this.generator=n,this.shaderType="block-node",r&&(this.subgraph=new c(r))}get children(){return Object.keys(this.captureList).map((e=>this.captureList[e])).concat(this.subgraph??[])}clone(){const e={};for(const r in this.captureList)e[r]=s(this.captureList[r]);const t=new d(e,this.returnType,this.subgraph?s(this.subgraph.child):this.subgraph,this.generator);return this.cloneInto(t),t}}class l extends i{constructor(e,t,r,n,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(),this.token=e,this._children=t,this.isInfix=r,this.isPropertyAccess=n,this.returnType=i,this.isTernary=s,this.shaderType="function-node"}get children(){return this._children}clone(){const e=new l(this.token,this._children.map(s),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);return this.cloneInto(e),e}}},32743:(e,t,r)=>{var n;r.d(t,{N:()=>n}),function(e){e[e.AnimatedMarker=0]="AnimatedMarker",e[e.Blend=1]="Blend",e[e.ComplexFill=2]="ComplexFill",e[e.ComplexOutlineFill=3]="ComplexOutlineFill",e[e.DotDensity=4]="DotDensity",e[e.Fill=5]="Fill",e[e.GradientFill=6]="GradientFill",e[e.GradientStroke=7]="GradientStroke",e[e.Grid=8]="Grid",e[e.Heatmap=9]="Heatmap",e[e.Label=10]="Label",e[e.Line=11]="Line",e[e.Magnifier=12]="Magnifier",e[e.Marker=13]="Marker",e[e.OutlineFill=14]="OutlineFill",e[e.Overlay=15]="Overlay",e[e.PatternFill=16]="PatternFill",e[e.PatternOutlineFill=17]="PatternOutlineFill",e[e.PieChart=18]="PieChart",e[e.Test=19]="Test",e[e.Text=20]="Text",e[e.TexturedLine=21]="TexturedLine",e[e.Bitmap=22]="Bitmap"}(n||(n={}))},60984:(e,t,r)=>{r.d(t,{$5:()=>_e,$I:()=>H,AU:()=>Ue,Ai:()=>O,Bw:()=>Re,F8:()=>je,Gb:()=>le,Io:()=>Fe,LC:()=>me,LI:()=>ze,MM:()=>ge,My:()=>w,Ny:()=>j,Om:()=>$e,PM:()=>Ve,RI:()=>Me,RZ:()=>He,S8:()=>Oe,Sj:()=>pe,T9:()=>De,TF:()=>Ke,Tk:()=>oe,U:()=>K,US:()=>Ge,Uo:()=>Te,Wh:()=>G,Xe:()=>ye,ZY:()=>S,Zb:()=>I,Zc:()=>q,aX:()=>be,eB:()=>N,eR:()=>W,fV:()=>X,gn:()=>Ie,j1:()=>ce,jc:()=>Ce,jh:()=>Le,jk:()=>Pe,ln:()=>Z,lw:()=>ae,mk:()=>Se,n7:()=>ke,nf:()=>fe,nt:()=>E,om:()=>se,or:()=>ve,qE:()=>Ne,rY:()=>Ee,tn:()=>we,w0:()=>Q,x:()=>R,z7:()=>A,ze:()=>ie,zi:()=>Be});var n,i,s,o,c,a,u,h,d,l,p,f,m,y,_=r(35143),g=r(22881);function b(e){return new Proxy(e,{get(t,r){if("constructor"===r)return new Proxy(t.constructor,{construct:(e,t,r)=>b(new e(...t))});if(r in t)return t[r];if("string"==typeof r){const t=function(e){const t=[["float","vec2","vec3","vec4"],["int","ivec2","ivec3","ivec4"],["uint","uvec2","uvec3","uvec4"],["bool","bvec2","bvec3","bvec4"]];for(const r of t)if(r.includes(e))return r.map((e=>V[e]));throw new Error("Unable to find type family")}(e.type);return Y(e,r,t[r.length-1])}}})}function v(e){return new Proxy(e,{construct:(e,t,r)=>b(new e(...t))})}class T extends Error{}let w=n=class extends g.vL{constructor(e,t){super(),this.elementType=e,this.size=t,this.children=[],this.type="array"}clone(){const e=new n(this.elementType,this.size);return super.cloneInto(e),e}get(e,t){const r=new O(e),n=null!=t?new O(t):null;return null!=n?J(this,r,n,function(e){switch(e.type){case"bool":case"bvec2":case"bvec3":case"bvec4":return R;case"float":case"vec2":case"vec3":case"vec4":return E;case"int":case"ivec2":case"ivec3":case"ivec4":return O;case"uint":case"uvec2":case"uvec3":case"uvec4":return F;default:throw new Error("Unable to handle type")}}(this.elementType.constructor)):Y(this,r,this.elementType.constructor)}last(){return this.get(this.size-1)}first(){return this.get(0)}findIndex(e,t,r){return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.size;const i=new O(r).setMutable().setDebugName("FindIndexIterator"),s=t(e.get(i)).setDebugName("FindIndexPredicate"),o=se({iter:i},O,s,(e=>{let{out:t,iter:r,subgraph:i}=e;return`\n${t} = -1;\n\nfor (; ${r} < ${n}; ${r}++) {\n\n${i.body}\n\n  if (${i.varName}) {\n    ${t} = ${r};\n    break;\n  }\n\n}\n`})).setDebugName("FindIndexBlock");return o}(this,e,t,r)}glslFindIndex(e,t,r){return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.size;const i=se({array:e},O,null,(e=>{let{out:i,array:s}=e;return`\n${i} = -1;\nfor (int i = ${r}; i < ${n}; i++) {\n  bool condition;\n  ${t({array:s,i:"i",out:"condition"})}\n  if (condition) {\n    ${i} = i;\n    break;\n  }\n}\n`})).setDebugName("GlslFindIndexBlock");return i}(this,e,t,r)}static ofType(e,t){const r={construct:(r,i)=>new n(new e,t)};return new Proxy(n,r)}};w.type="array",w=n=(0,_._)([function(e){return new Proxy(e,{construct:(e,t,r)=>function(e){return new Proxy(e,{get(t,r){if(r in t)return t[r];if("string"==typeof r){const t=parseInt(r,10);if(!isNaN(t))return Y(e,`[${t}]`,e.elementType.constructor)}}})}(new e(...t))})}],w);class x extends g.vL{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.elementType=e,this.xSize=t,this.ySize=r,this.isRowMajor=n,this.children=[],this.type="array-2d"}clone(){const e=new x(this.elementType,this.xSize,this.ySize,this.isRowMajor);return super.cloneInto(e),e}get size(){return this.xSize*this.ySize}get(e,t){return this.isRowMajor?this._getRowMajor(e,t):this._getColumnMajor(e,t)}_getColumnMajor(e,t){const r=new O(e);return Y(this,new O(t).add(r.multiply(this.xSize)),this.elementType.constructor)}_getRowMajor(e,t){const r=new O(e),n=new O(t);return Y(this,r.add(n.multiply(this.ySize)),this.elementType.constructor)}static ofType(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Proxy(w,{construct:(i,s)=>new x(new e,t,r,n)})}}x.type="array-2d";class A extends g.vL{constructor(){super(...arguments),this.type="sampler2D",this.children=[]}clone(){const e=new A;return e.children=this.children.map(g.vA),super.cloneInto(e),e}}A.type="sampler2D";class E extends g.vL{constructor(e){super(),this.type="float",this.children=[e]}clone(){const e=new E((0,g.vA)(this.children[0]));return super.cloneInto(e),e}multiply(e){return ae(this,"number"==typeof e?L(e,E):e)}divide(e){return ue(this,"number"==typeof e?L(e,E):e)}add(e){return he(this,"number"==typeof e?L(e,E):e)}subtract(e){return de(this,"number"==typeof e?L(e,E):e)}}E.type="float";let S=i=class extends g.vL{constructor(e,t){super(),this.type="vec2",this.children=[e,t].filter((e=>null!=e))}clone(){const e=new i((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]));return super.cloneInto(e),e}get 0(){return Y(this,"[0]",E)}get 1(){return Y(this,"[1]",E)}get 2(){throw new T}get 3(){throw new T}multiply(e){return ae(this,"number"==typeof e?L(e,E):e)}divide(e){return ue(this,"number"==typeof e?L(e,E):e)}add(e){return he(this,"number"==typeof e?L(e,E):e)}subtract(e){return de(this,"number"==typeof e?L(e,E):e)}};S.type="vec2",S=i=(0,_._)([v],S);let N=s=class extends g.vL{constructor(e,t,r){super(),this.type="vec3",this.children=[e,t,r].filter((e=>null!=e))}get 0(){return Y(this,"[0]",E)}get 1(){return Y(this,"[1]",E)}get 2(){return Y(this,"[2]",E)}get 3(){throw new T}clone(){const e=new s((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]));return super.cloneInto(e),e}multiply(e){return ae(this,"number"==typeof e?L(e,E):e)}divide(e){return ue(this,"number"==typeof e?L(e,E):e)}add(e){return he(this,"number"==typeof e?L(e,E):e)}subtract(e){return de(this,"number"==typeof e?L(e,E):e)}};N.type="vec3",N=s=(0,_._)([v],N);let I=o=class extends g.vL{constructor(e,t,r,n){super(),this.type="vec4",this.children=[e,t,r,n].filter((e=>null!=e))}clone(){const e=new o((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(e),e}get 0(){return Y(this,"[0]",E)}get 1(){return Y(this,"[1]",E)}get 2(){return Y(this,"[2]",E)}get 3(){return Y(this,"[3]",E)}multiply(e){return ae(this,"number"==typeof e?L(e,E):e)}divide(e){return ue(this,"number"==typeof e?L(e,E):e)}add(e){return he(this,"number"==typeof e?L(e,E):e)}subtract(e){return de(this,"number"==typeof e?L(e,E):e)}};I.type="vec4",I=o=(0,_._)([v],I);let F=c=class extends g.vL{constructor(e){super(),this.type="uint",this.children=[e]}clone(){const e=new c((0,g.vA)(this.children[0]));return super.cloneInto(e),e}};F.type="uint",F=c=(0,_._)([v],F);let $=a=class extends g.vL{constructor(e,t){super(),this.type="uvec2",this.children=[e,t].filter((e=>null!=e))}clone(){const e=new a((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]));return super.cloneInto(e),e}};$.type="uvec2",$=a=(0,_._)([v],$);let M=u=class extends g.vL{constructor(e,t,r){super(),this.type="uvec3",this.children=[e,t,r].filter((e=>null!=e))}clone(){const e=new u((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]));return super.cloneInto(e),e}};M.type="uvec3",M=u=(0,_._)([v],M);let C=h=class extends g.vL{constructor(e,t,r,n){super(),this.type="uvec4",this.children=[e,t,r,n].filter((e=>null!=e))}clone(){const e=new h((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(e),e}};C.type="uvec4",C=h=(0,_._)([v],C);class R extends g.vL{constructor(e){super(),this.type="bool",this.children=[e]}and(e){return Te(this,e)}or(e){return ve(this,e)}clone(){const e=new R((0,g.vA)(this.children[0]));return super.cloneInto(e),e}}R.type="bool";let D=d=class extends g.vL{constructor(e,t){super(),this.type="bvec2",this.children=[e,t].filter((e=>null!=e))}all(){return xe(this)}any(){return Ae(this)}clone(){const e=new d((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]));return super.cloneInto(e),e}};D.type="bvec2",D=d=(0,_._)([v],D);let P=l=class extends g.vL{constructor(e,t,r){super(),this.type="bvec3",this.children=[e,t,r].filter((e=>null!=e))}all(){return xe(this)}any(){return Ae(this)}clone(){const e=new l((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]));return super.cloneInto(e),e}};function L(e,t){return"number"==typeof e?new t(e):e}P.type="bvec3",P=l=(0,_._)([v],P);let B=p=class extends g.vL{constructor(e,t,r,n){super(),this.type="bvec4",this.children=[e,t,r,n].filter((e=>null!=e))}all(){return xe(this)}any(){return Ae(this)}clone(){const e=new p((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(e),e}};B.type="bvec4",B=p=(0,_._)([v],B);class O extends g.vL{constructor(e){super(),this.type="int",this.children=[e]}multiply(e){return ae(this,L(e,O))}add(e){return he(this,L(e,O))}subtract(e){return de(this,L(e,O))}divide(e){return ue(this,L(e,O))}clone(){const e=new O((0,g.vA)(this.children[0]));return super.cloneInto(e),e}}O.type="int";let U=f=class extends g.vL{constructor(e,t){super(),this.type="ivec2",this.children=[e,t].filter((e=>null!=e))}clone(){const e=new f((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]));return super.cloneInto(e),e}};U.type="ivec2",U=f=(0,_._)([v],U);let k=m=class extends g.vL{constructor(e,t,r){super(),this.type="ivec3",this.children=[e,t,r].filter((e=>null!=e))}clone(){const e=new m((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]));return super.cloneInto(e),e}};k.type="ivec3",k=m=(0,_._)([v],k);let z=y=class extends g.vL{constructor(e,t,r,n){super(),this.type="ivec4",this.children=[e,t,r,n].filter((e=>null!=e))}clone(){const e=new y((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(e),e}};z.type="ivec4",z=y=(0,_._)([v],z);class j extends g.vL{constructor(e,t,r,n){super(),this.type="mat2",this.children=[e,t,r,n]}clone(){const e=new j((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(e),e}get(e,t){return J(this,new O(e),new O(t),E)}multiply(e){return ae(this,e)}}j.type="mat2";class K extends g.vL{static identity(){return new K(1,0,0,0,1,0,0,0,1)}static fromRotation(e){const t=je(e),r=Ie(e);return new K(r,t,0,ie(t),r,0,0,0,1)}constructor(e,t,r,n,i,s,o,c,a){super(),this.type="mat3",this.children=[e,t,r,n,i,s,o,c,a]}add(e){return he(this,e)}multiply(e){return ae(this,e)}get(e,t){return J(this,new O(e),new O(t),E)}clone(){const e=new K((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]),(0,g.vA)(this.children[4]),(0,g.vA)(this.children[5]),(0,g.vA)(this.children[6]),(0,g.vA)(this.children[7]),(0,g.vA)(this.children[8]));return super.cloneInto(e),e}}K.type="mat3";class H extends g.vL{static identity(){return new H(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}constructor(e,t,r,n,i,s,o,c,a,u,h,d,l,p,f,m){super(),this.type="mat4",this.children=[e,t,r,n,i,s,o,c,a,u,h,d,l,p,f,m]}static fromColumns(e,t,r,n){return new H(e.x,e.y,e.z,e.w,t.x,t.y,t.z,t.w,r.x,r.y,r.z,r.w,n.x,n.y,n.z,n.w)}multiply(e){return ae(this,e)}get(e,t){return J(this,new O(e),new O(t),E)}clone(){const e=new H((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]),(0,g.vA)(this.children[4]),(0,g.vA)(this.children[5]),(0,g.vA)(this.children[6]),(0,g.vA)(this.children[7]),(0,g.vA)(this.children[8]),(0,g.vA)(this.children[9]),(0,g.vA)(this.children[10]),(0,g.vA)(this.children[11]),(0,g.vA)(this.children[12]),(0,g.vA)(this.children[13]),(0,g.vA)(this.children[14]),(0,g.vA)(this.children[15]));return super.cloneInto(e),e}}H.type="mat4";const V={float:E,vec2:S,vec3:N,vec4:I,int:O,ivec2:U,ivec3:k,ivec4:z,uint:F,uvec2:$,uvec3:M,uvec4:C,bool:R,bvec2:D,bvec3:P,bvec4:B},G=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new O(...t)},X=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new E(...t)},q=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new S(...t)},W=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new N(...t)},Z=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new I(...t)},Q=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new K(...t)};function Y(e,t,r){const n=new r(new g.zg(t,e,r));return n.isImplicit=!0,n}function J(e,t,r,n){const i=new n(new g.ff(t,r,e,n));return i.isImplicit=!0,i}function ee(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n){const i=new n,s=new n(new g.aw(e,[t,r],!0,!1,i));return s.isImplicit=!0,s}if("float"===t.type||"int"===t.type){const n=new r.constructor(new g.aw(e,[t,r],!0,!1,r.constructor));return n.isImplicit=!0,n}if(("mat2"===t.type||"mat3"===t.type||"mat4"===t.type)&&"float"!==r.type){const n=new r.constructor(new g.aw(e,[t,r],!0,!1,r.constructor));return n.isImplicit=!0,n}const i=new t.constructor(new g.aw(e,[t,r],!0,!1,t.constructor));return i.isImplicit=!0,i}function te(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.constructor;const n=new r(new g.aw(e,[t],!1,!1,r));return n.isImplicit=!0,n}function re(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.constructor;const i=new n(new g.aw(e,[t,r],!1,!1,n));return i.isImplicit=!0,i}function ne(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.constructor;const s=new i(new g.aw(e,[t,r,n],!1,!1,i));return s.isImplicit=!0,s}function ie(e){return ae(e,X(-1))}function se(e,t,r,n){return new t(new g.rR(e,t,r,n))}function oe(e,t,r){const n="function"==typeof t?t():t,i="function"==typeof r?r():r,s=new n.constructor(new g.XL(e,n,i));return s.isImplicit=!0,s}function ce(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map((e=>{let[t,r]=e;return"function"==typeof r?[t,r()]:[t,r]})),i=n[0][1].constructor,s=n.findIndex((e=>!0===e[0]));if(-1===s)throw new Error("A cond must have a fallthrough case with `true`/; ");const o=n.slice(0,s),c=n[s][1],a=new i(o.reduceRight(((e,t)=>oe(t[0],t[1],e)),c));return a.isImplicit=!0,a}function ae(e,t){return ee("*",e,t)}function ue(e,t){return ee("/",e,t)}function he(e,t){return ee("+",e,t)}function de(e,t){return ee("-",e,t)}function le(e,t){return ee("%",e,t)}function pe(e,t){return ee(">>",e,t)}function fe(e,t){return ee("&",e,t)}function me(e,t){return ee("==",e,t,R)}function ye(e,t){return ee("<",e,t,R)}function _e(e,t){return ee("<=",e,t,R)}function ge(e,t){return ee(">",e,t,R)}function be(e,t){return ee(">=",e,t,R)}function ve(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=1?t[0]:t.slice(1).reduce(((e,t)=>function(e,t){return ee("||",e,t,R)}(e,t)),t[0])}function Te(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=1?t[0]:t.slice(1).reduce(((e,t)=>function(e,t){return ee("&&",e,t,R)}(e,t)),t[0])}function we(e){return te("abs",e)}function xe(e){return te("all",e,R)}function Ae(e){return te("any",e,R)}function Ee(e,t){return null==t?te("atan",e):re("atan",e,t,e.constructor)}function Se(e){return te("ceil",e)}function Ne(e,t,r){return ne("clamp",e,t,r,e.constructor)}function Ie(e){return te("cos",e)}function Fe(e,t){return re("distance",e,t,E)}function $e(e,t){return re("dot",e,t,E)}function Me(e){return te("floor",e)}function Ce(e){return te("fract",e)}function Re(e){return te("length",e,E)}function De(e,t){return re("max",e,t)}function Pe(e,t){return re("min",e,t)}function Le(e,t,r){return ne("mix",e,t,r)}function Be(e,t){return re("mod",e,t)}function Oe(e){return te("normalize",e)}function Ue(e){return"bool"===e.type?te("!",e):te("not",e)}function ke(e,t){return re("pow",e,t)}function ze(e){return te("round",e)}function je(e){return te("sin",e)}function Ke(e,t,r){return ne("smoothstep",e,t,r)}function He(e){return te("sqrt",e)}function Ve(e,t){return re("step",e,t,t.constructor)}function Ge(e,t){return re("texture",e,t,I)}},62881:(e,t,r)=>{r.d(t,{l:()=>o});var n=r(93345),i=r(89179),s=r(88800);class o{constructor(e,t){this._context=e,this._descriptor=t,this.type=i.p.RenderBuffer,this._context.instanceCounter.increment(n.vt.Renderbuffer,this);const r=this._context.gl;this.glName=r.createRenderbuffer(),this._context.bindRenderbuffer(this);const{width:s,height:o,internalFormat:c,multisampled:a}=t;a?r.renderbufferStorageMultisample(r.RENDERBUFFER,this.samples,c,s,o):r.renderbufferStorage(r.RENDERBUFFER,c,s,o),this._context.bindRenderbuffer(null)}get descriptor(){return this._descriptor}get samples(){const e=this._descriptor.samples,t=this._context.parameters.maxSamples;return e?Math.min(e,t):t}get usedMemory(){return(0,s.e)(this._descriptor)}resize(e,t){const r=this._descriptor;if(r.width===e&&r.height===t)return;r.width=e,r.height=t;const n=this._context.gl;this._context.bindRenderbuffer(this),r.multisampled?n.renderbufferStorageMultisample(n.RENDERBUFFER,this.samples,r.internalFormat,r.width,r.height):n.renderbufferStorage(n.RENDERBUFFER,r.internalFormat,r.width,r.height),this._context.bindRenderbuffer(null)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(n.vt.Renderbuffer,this),this._context=null)}}},69728:(e,t,r)=>{var n;r.d(t,{c:()=>n}),function(e){e[e.Bind=0]="Bind",e[e.Pass=1]="Pass",e[e.Draw=2]="Draw"}(n||(n={}))},70479:(e,t,r)=>{r.d(t,{j:()=>i});var n=r(61551);class i{constructor(){this.drawPhase=n.S5.MAP|n.S5.HITTEST|n.S5.HIGHLIGHT|n.S5.DEBUG}startup(){}shutdown(e){}}},78492:(e,t,r)=>{r.d(t,{K:()=>d});var n=r(50076),i=r(76460),s=r(48611),o=(r(81806),r(47249),r(61678),r(93345),r(12331),r(44488)),c=(r(89179),r(80895)),a=r(96673);function u(e,t,r){const n=new a.R(t.width,t.height);return n.dataType=t.dataType,t.depth&&(n.depth=t.depth),t.flipped&&(n.flipped=t.flipped),t.hasMipmap&&(n.hasMipmap=t.hasMipmap),n.internalFormat=t.internalFormat,t.isImmutable&&(n.isImmutable=t.isImmutable),t.isOpaque&&(n.isOpaque=t.isOpaque),t.maxAnisotropy&&(n.maxAnisotropy=t.maxAnisotropy),n.pixelFormat=t.pixelFormat,t.preMultiplyAlpha&&(n.preMultiplyAlpha=t.preMultiplyAlpha),t.samplingMode&&(n.samplingMode=t.samplingMode),t.target&&(n.target=t.target),n.uniform=t.uniform,t.unpackAlignment&&(n.unpackAlignment=t.unpackAlignment),t.wrapMode&&(n.wrapMode=t.wrapMode),new c.g(e,n,r)}function h(e,t,r){const s=t.length;if(s!==r){const o=new n.A("Invalid Uniform",`Invalid length, expected ${r} but got ${s}`,{uniformName:e,values:t});i.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram").errorOnce(o)}}class d{constructor(e,t,r,n,i,s){this._program=null,this._vao=null,this._temporaryTextures=[],this.vertexShader=e,this.fragmentShader=t,this._locations=r,this._locationInfo=n,this._uniformBindings=i,this._transformFeedbackBindings=s}destroy(){this._program&&this._program.dispose(),this.cleanupTemporaryTextures()}get locations(){return this._locations}get locationInfo(){return this._locationInfo}setUniforms(e){this._uniforms=e}cleanupTemporaryTextures(){for(const e of this._temporaryTextures)e.dispose();this._temporaryTextures=[]}bind(e){const t=this._uniforms;if(!this._program){const t=new Map;for(const[e,n]of this._locations)t.set(e,n);const r=[];for(const e of this._transformFeedbackBindings??[]){const{index:t,propertyKey:n}=e;r[t]=`v_${n}`}this._program=new o.B(e,this.vertexShader,this.fragmentShader,t,new Map,r)}const r=this._program;e.useProgram(r);for(const n of this._uniformBindings){const{shaderModulePath:i,uniformName:o,uniformType:c,uniformArrayLength:a}=n,d=(0,s.wc)(i,t);if(null==d){if("sampler2D"===c)continue;throw new Error(`Failed to find uniform value for ${i}`)}switch("array"===c||"array-2d"===c?n.uniformArrayElementType:c){case"sampler2D":{const{unit:t,texture:n}=d;if(r.setUniform1i(o,t),"type"in n)e.bindTexture(n,t);else{const r=u(e,n.descriptor,n.data);e.bindTexture(r,t)}break}case"int":if(!a){r.setUniform1i(o,d);break}h(n.uniformName,d,a),r.setUniform1iv(o,d);break;case"float":if(!a){r.setUniform1f(o,d);break}h(n.uniformName,d,a),r.setUniform1fv(o,d);break;case"vec2":if(!a){r.setUniform2f(o,d[0],d[1]);break}h(n.uniformName,d,a),r.setUniform2fv(o,d.flat());break;case"vec3":if(!a){r.setUniform3f(o,d[0],d[1],d[2]);break}h(n.uniformName,d,a),r.setUniform3fv(o,d.flat());break;case"vec4":if(!a){r.setUniform4f(o,d[0],d[1],d[2],d[3]);break}h(n.uniformName,d,a),r.setUniform4fv(o,d.flat());break;case"mat3":r.setUniformMatrix3fv(o,d);break;case"mat4":r.setUniformMatrix4fv(o,d);break;default:throw new Error(`Unable to set uniform for type ${c}`)}}}}},88800:(e,t,r)=>{r.d(t,{e:()=>s,q:()=>i});var n=r(27207);class i{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;this.internalFormat=e,this.width=t,this.height=r,this.multisampled=!1,this.samples=1}}function s(e){return e.width<=0||e.height<=0||null==e.internalFormat?0:e.width*e.height*(0,n.IB)(e.internalFormat)}}}]);
//# sourceMappingURL=6731.21a748a1.chunk.js.map