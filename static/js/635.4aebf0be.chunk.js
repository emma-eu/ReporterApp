"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[635],{55:(e,t,i)=>{i.d(t,{cZ:()=>D,XW:()=>j,fe:()=>k});var r,n=i(3825),s=i(50076),o=i(87663),a=(i(98618),i(1484)),l=i(13312);class p{constructor(){this.version="",this.queryResult=new d}}class d{constructor(){this.featureResult=new u}}class u{constructor(){this.objectIdFieldName="",this.uniqueIdField=new c,this.globalIdFieldName="",this.geohashFieldName="",this.geometryProperties=new h,this.geometryType=null,this.spatialReference=new l.A,this.exceededTransferLimit=!1,this.hasZ=!1,this.hasM=!1,this.transform=new y,this.fields=[],this.fieldNameToAttributeIndexMap={},this.values=[],this.features=[],this.geometryFields=[]}}class c{constructor(){this.name="",this.isSystemMaintained=!1}}class h{constructor(){this.shapeAreaFieldName="",this.shapeLengthFieldName="",this.units=""}}class y{constructor(){this.quantizeOriginPosition="upperLeft",this.scale=new m,this.translate=new f}}class m{constructor(){this.xScale=0,this.yScale=0,this.mScale=0,this.zScale=0}}class f{constructor(){this.xTranslate=0,this.yTranslate=0,this.mTranslate=0,this.zTranslate=0}}class g{constructor(){this.name="",this.fieldType="esriFieldTypeString",this.alias="",this.sqlType="sqlTypeVarchar",this.domain="",this.defaultValue=""}}class _{constructor(){this.attributes=[],this.compressedGeometry=new b,this.centroid=new b,this.aggregateGeometries=[]}}class b{constructor(){this.geometryType=null,this.lengths=[],this.coords=[]}}!function(e){e.ELEMENTUID="ELEMENTUID",e.TYPENAME="TYPENAME"}(r||(r={}));const T=[r.ELEMENTUID,r.TYPENAME];var E,w;!function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME"}(E||(E={})),function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME",e[e.FROMUID=2]="FROMUID",e[e.TOUID=3]="TOUID"}(w||(w={}));var v,I,A,M,S=i(57502),N=i(31830);function R(e){const t=new b;t.geometryType=N.bV[e.geometry_type.value];const i=[],r=[];for(let n=0;n<e.lengths.length;n++)i.push(e.lengths[n]);for(let n=0;n<e.coords.length;n++)r.push(e.coords[n]);return t.lengths=i,t.coords=r,t}function L(e){const t=new g;return t.name=e.name,t.alias=e.alias,t.fieldType=N.r5[e.field_type.value],t.sqlType=A[e.sql_type.value],t.domain=e.domain,t.defaultValue=e.default_value,t}function C(e){const t=L(e);return t.geometryType=N.bV[e.geometry_type.value],t}function x(e){const t=new y;t.quantizeOriginPosition=I[e.quantizeOriginPosition.value];const i=t.scale,r=e.scale;i.xScale=r.xScale,i.yScale=r.yScale,i.mScale=r.mScale,i.zScale=r.zScale;const n=t.translate,s=e.translate;return n.xTranslate=s.xTranslate,n.yTranslate=s.yTranslate,n.mTranslate=s.mTranslate,n.zTranslate=s.zTranslate,t}async function D(e,t){t??=!1;const i={generateAllSublayers:t,namedTypeDefinitions:new Map};return await async function(e){const t=await(0,n.A)(e,{responseType:"array-buffer"}),i=await t.data;return async function(e){const t=new((await(0,S.I)()).MapOfObjectIdentifierSetsDecoder),i=t.decode(new Uint8Array(e)),r=new Map;if(0!==i.error_code)throw new s.A("knowledge-graph:layer-support-utils",i.error_message);const n=t.get_map_of_identifier_sets(),o=n.keys,a=o.size();for(let l=0;l<a;l++){const e=o.get(l),t=n.query_identifier_set(e),i=[];if(t.id_array_type.value===M.GLOBALID_ARRAY){const e=t.get_globalid_array(),r=e.count();for(let t=0;t<r;t++)i.push(e.get_globalid_at(t))}else if(t.id_array_type.value===M.IDENTIFIER_ARRAY){const e=t.get_identifier_array(),r=e.count();for(let t=0;t<r;t++)i.push(e.get_identifier_at(t).toString())}else if(t.id_array_type.value===M.STRING_ARRAY){const e=t.get_string_array(),r=e.count();for(let t=0;t<r;t++)i.push(e.get_string_at(t))}else{if(t.id_array_type.value!==M.OID_ARRAY)throw new s.A("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const e=t.get_oid_array(),r=e.count();for(let t=0;t<r;t++)i.push(e.get_objectid_at(t).toString())}}r.set(e,i)}return t.delete(),r}(new Uint8Array(i))}(e).then((e=>{!function(e,t){for(const[i,r]of e){const e=(0,o.tE)(t.namedTypeDefinitions,i,(()=>({useAllData:!1,members:new Map})));for(const t of r)e.members.has(t)||e.members.set(t,{id:t})}}(e,i)})),i}async function k(e){const t=await(0,S.I)(),i=new t.MapOfObjectIdentifierSets;!function(e,t,i){for(const[r,n]of i.namedTypeDefinitions){if(!n.members||n.useAllData)continue;const i=n.members.keys();let s=!1,o=!0;const a=new t.ObjectIdArray,l=new t.StringArray,p=new t.GlobalIdArray,d=new t.IdentifierArray,u=new t.ObjectIdentifierSet;for(const e of i)o&&(s=!isNaN(Number(e)),o=!1),s?a.add_objectid(Number(e)):(l.add_string(e),p.add_globalid(e)),d.add_identifier(e);u.set_oid_array(a),u.set_string_array(l),u.set_globalid_array(p),u.set_identifier_array(d),a.delete(),l.delete(),p.delete(),d.delete(),e.put_identifier_set(r,u),u.delete()}}(i,t,e);const r=new t.MapOfObjectIdentifierSetsEncoder;try{r.set_map_of_identifier_sets(i),r.encode();const e=r.get_encoding_result();if(0!==e.error.error_code)throw new s.A("knowledge-graph:layer-support-utils",e.error.error_message);const t=structuredClone(e.get_byte_buffer());return r.delete(),t}finally{i.delete()}}async function O(e){const t=await(0,n.A)(e,{responseType:"array-buffer"});return async function(e){const t=new((await(0,S.I)()).FeatureCollectionDecoder),i=t.decode(new Uint8Array(e));if(0!==i.error_code)throw new s.A("knowledge-graph:layer-support-utils",i.error_message);const r=t.get_feature_collection(),n=function(e){const t=new p;t.version=e.version;const i=e.get_query_result();if(0!==i.results_type.value)throw new Error("Got a non-feature collection type");const r=i.get_feature_result(),n=t.queryResult.featureResult;n.objectIdFieldName=r.objectid_field_name,n.exceededTransferLimit=r.exceeded_transfer_limit,n.hasM=r.has_m,n.hasZ=r.has_z,n.geometryType=N.bV[r.geometry_type.value],n.globalIdFieldName=r.globalid_field_name,n.geohashFieldName=r.geohash_field_name;const s=n.uniqueIdField,o=r.unique_id_field;s.name=o.name,s.isSystemMaintained=o.isSystemMaintained;const a=n.geometryProperties,l=r.geometry_properties;a.shapeAreaFieldName=l.shapeAreaFieldName,a.shapeLengthFieldName=l.shapeLengthFieldName,a.units=l.units;const d=n.spatialReference,u=r.spatial_reference;d.wkid=u.wkid,d.latestWkid=u.latestWkid,d.vcsWkid=u.vcsWkid,d.latestVcsWkid=u.latestVcsWkid,d.wkt=u.wkt,n.transform=x(r.transform);const c=n.fields,h=n.fieldNameToAttributeIndexMap,y=r.fields,m=y.size();for(let p=0;p<m;p++){const e=y.get(p),t=L(e);c.push(t),h[t.name]=p,e.delete()}y.delete();const f=n.values,g=r.values_count();for(let p=0;p<g;p++)f.push(r.get_value_at(p));const b=n.features,E=r.features,w=E.size();if(w>0)for(const p of T)if(void 0===h[p])throw new Error(`Feature collection missing required attribute: ${p}`);for(let p=0;p<w;p++){const e=new _,t=E.get(p),i=e.attributes,r=t.attributes_count();for(let l=0;l<r;l++)i.push(t.get_attribute_at(l));const n=t.get_compressed_geometry();n&&(e.compressedGeometry=R(n),e.centroid=R(t.get_centroid()));const s=e.aggregateGeometries,o=t.aggregate_geometries,a=o.size();for(let l=0;l<a;l++){const e=o.get(l),t=R(e);s.push(t),e.delete()}o.delete(),b.push(e),t.delete()}E.delete();const v=n.geometryFields,I=r.geometry_fields,A=I.size();for(let p=0;p<A;p++){const e=I.get(p),t=C(e);v.push(t),e.delete()}return I.delete(),t}(r);return t.delete(),n}(await t.data)}function F(e,t){if(!e?.queryResult?.featureResult)return t;const i=e.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const n of e.queryResult.featureResult.features){const e=n.attributes[i[r.TYPENAME]],s=(0,o.tE)(t.namedTypeDefinitions,e,(()=>({useAllData:!1,members:new Map}))),l=n.attributes[i[r.ELEMENTUID]];if(n.compressedGeometry?.coords?.length>0){let e=n.compressedGeometry.lengths;"esriGeometryPoint"===n.compressedGeometry.geometryType&&(e=[]),s.members.set(l,{id:l,linkChartLocation:new a.A(e,n.compressedGeometry.coords)})}else s.members.set(l,{id:l})}return t}!function(e){e[e.featureResult=0]="featureResult",e[e.countResult=1]="countResult",e[e.idsResult=2]="idsResult"}(v||(v={})),function(e){e[e.upperLeft=0]="upperLeft",e[e.lowerLeft=1]="lowerLeft"}(I||(I={})),function(e){e[e.sqlTypeBigInt=0]="sqlTypeBigInt",e[e.sqlTypeBinary=1]="sqlTypeBinary",e[e.sqlTypeBit=2]="sqlTypeBit",e[e.sqlTypeChar=3]="sqlTypeChar",e[e.sqlTypeDate=4]="sqlTypeDate",e[e.sqlTypeDecimal=5]="sqlTypeDecimal",e[e.sqlTypeDouble=6]="sqlTypeDouble",e[e.sqlTypeFloat=7]="sqlTypeFloat",e[e.sqlTypeGeometry=8]="sqlTypeGeometry",e[e.sqlTypeGUID=9]="sqlTypeGUID",e[e.sqlTypeInteger=10]="sqlTypeInteger",e[e.sqlTypeLongNVarchar=11]="sqlTypeLongNVarchar",e[e.sqlTypeLongVarbinary=12]="sqlTypeLongVarbinary",e[e.sqlTypeLongVarchar=13]="sqlTypeLongVarchar",e[e.sqlTypeNChar=14]="sqlTypeNChar",e[e.sqlTypeNVarChar=15]="sqlTypeNVarChar",e[e.sqlTypeOther=16]="sqlTypeOther",e[e.sqlTypeReal=17]="sqlTypeReal",e[e.sqlTypeSmallInt=18]="sqlTypeSmallInt",e[e.sqlTypeSqlXml=19]="sqlTypeSqlXml",e[e.sqlTypeTime=20]="sqlTypeTime",e[e.sqlTypeTimestamp=21]="sqlTypeTimestamp",e[e.sqlTypeTimestamp2=22]="sqlTypeTimestamp2",e[e.sqlTypeTinyInt=23]="sqlTypeTinyInt",e[e.sqlTypeVarbinary=24]="sqlTypeVarbinary",e[e.sqlTypeVarchar=25]="sqlTypeVarchar"}(A||(A={})),function(e){e[e.OID_ARRAY=0]="OID_ARRAY",e[e.GLOBALID_ARRAY=1]="GLOBALID_ARRAY",e[e.STRING_ARRAY=2]="STRING_ARRAY",e[e.IDENTIFIER_ARRAY=3]="IDENTIFIER_ARRAY"}(M||(M={}));const j={fetchAndConvertSerializedLinkChart:e=>async function(e){const t=[],i={generateAllSublayers:!1,namedTypeDefinitions:new Map};return e.entitiesUrl&&t.push(O(e.entitiesUrl).then((e=>{F(e,i)}))),e.relationshipsUrl&&t.push(O(e.relationshipsUrl).then((e=>{F(e,i)}))),await Promise.all(t),i}(e)}},2948:(e,t,i)=>{i.d(t,{MY:()=>f,Td:()=>y,UT:()=>m,e$:()=>_,iW:()=>g,qN:()=>u});var r=i(69539),n=i(95114),s=i(57491),o=i(47703),a=i(89465),l=i(86659);const p={initializeLayersFromClientData:async(e,t,i)=>{if(t||(t=[...e.layers,...e.tables].map((e=>e.graphTypeName))),0===t?.length)return;const r=new Map;for(const s of t)r.set(s,d(e,s));const n=await(0,o.fetchClientDataAtKeys)(e.dataManager.knowledgeGraph,Array.from(r.values()),{requestOptions:{signal:i?.signal}});for(const s of[...e.layers,...e.tables]){const t=s.objectType.name;if(null==t)continue;const i=n.get(d(e,t));if(i){const e=JSON.parse(i);null===e||"object"!=typeof e||e.hasOwnProperty("showLabels")||(e.showLabels=!1),s.read(e,{origin:"service"})}}}},d=(e,t)=>"knowledge-graph"===e.type?`${t}/Map`:`${t}/LinkChart/LinkChartSubLayer`;async function u(e,t,i){return p.initializeLayersFromClientData(e,t,i)}const c=["#4a0932","#b31515","#18382e","#a64f1b","#102432","#8c213f","#ed9310","#2c6954","#144d59","#ffc730","#75351e","#454f4b","#78b1c2","#191921","#8f8f82","#9be0c0","#dbb658","#87b051","#11495c","#c43541","#9c5596","#44498b","#ad9d63","#86afb3","#5c98ca","#b0bfa2","#73241f","#b86b53","#d9d78c","#3e756d","#f260a1","#a0d17d","#c27c30","#eb82eb","#ffdf3c","#ffb259","#ab52b3","#3cccb4","#0095ba","#d92b30"],h="#8f8f82";function y(e){return e<0||e>=c.length?new r.A(h):new r.A(c[e])}function m(e){const t=e.toArray();return new a.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,style:"solid",width:.75,color:t},{type:"CIMVectorMarker",enable:!0,size:6,markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-10,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[1.96,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:t}]}}]}]}}})}function f(e){let t="ESRI__ID",i=4;for(const r of e)if(r.name){if("name"===r.name.toLowerCase()){t=r.name;break}r.name.toLowerCase().includes("name")?(t=r.name,i=2):"esriFieldTypeString"===r.fieldType&&i>3&&(t=r.name,i=3)}return t}function g(e,t,i){const r={color:[80,80,80],haloColor:[255,255,255],haloSize:.7,font:{size:10,weight:"normal"}},o=new n.A({labelExpressionInfo:new s.A({expression:"ESRI__ID"===i?`${t}`:`$feature.${i}`}),labelPlacement:"above-center",symbol:new l.A(r)}),a=new n.A({labelExpressionInfo:new s.A({expression:`'${t}' + IIf($feature.ESRI__AggregationCount>1, ' (' + $feature.ESRI__AggregationCount + ')', '')`}),labelPlacement:"center-along",labelPosition:"parallel",repeatLabel:!1,symbol:new l.A({...r,yoffset:"12px"})});return"entity"===e?[o]:[a]}function _(e,t,i){const r={color:[255,255,255],haloColor:[0,0,0],haloSize:.7,font:{size:10,weight:"bold"}},o="ESRI__ID"===i?`${e}`:`$feature.${i}`;return"point"===t?[new n.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"above-center",symbol:new l.A(r)})]:"polyline"===t?[new n.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"center-along",repeatLabel:!0,symbol:new l.A(r)})]:"polygon"===t?[new n.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"always-horizontal",symbol:new l.A(r)})]:null}},5364:(e,t,i)=>{i.d(t,{C:()=>p,X:()=>l});var r=i(35143),n=i(94643),s=i(3975),o=(i(81806),i(76460),i(46053)),a=(i(47249),i(85842));let l=class extends n.A{constructor(e){super(e),this.addHandles([this.on("before-add",(e=>{null==e.item&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(n.A.ofType(this.itemType.Type))(e):new n.A(e)}};function p(e,t){return{type:e,cast:s.H,set(i){const r=(0,s.V)(i,this._get(t),e);r.owner=this,this._set(t,r)}}}(0,r._)([(0,o.MZ)()],l.prototype,"owner",null),l=(0,r._)([(0,a.$)("esri.core.support.OwningCollection")],l)},5551:(e,t,i)=>{i.d(t,{A:()=>l});var r=i(35143),n=i(91967),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842));let a=class extends n.A{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,r._)([(0,s.MZ)()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,r._)([(0,s.MZ)()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),a=(0,r._)([(0,o.$)("esri.views.support.debugFlags")],a);const l=new a},5682:(e,t,i)=>{i.d(t,{j:()=>o});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===e.minScale&&i.maxScale===e.maxScale?i:e}};return(0,r._)([(0,n.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,r._)([(0,n.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,r._)([(0,s.$)("esri.layers.mixins.ScaleRangeLayer")],t),t}},6127:(e,t,i)=>{i.d(t,{m:()=>r});const r=new(i(45802).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},8893:(e,t,i)=>{i.d(t,{k5:()=>d,aq:()=>p,Wq:()=>u});i(39356);var r=i(50076),n=(i(19247),i(65215),i(23701),i(63733),i(33750),i(85646),i(45802));(0,n.O)()({none:"none",startAndEnd:"start-and-end",startOnly:"start-only"}),(0,n.O)()({absoluteValue:"absolute-value",multiplier:"multiplier"});const s=new Map([["basic-grid","basic-grid"],["geographic-organic-standard","geographic-organic-standard"],["hierarchical-bottom-to-top","hierarchical-bottom-to-top"],["hierarchical-top-to-bottom","hierarchical-bottom-to-top"],["organic-community","organic-community"],["organic-fusiform","organic-standard"],["organic-leaf-circle","organic-standard"],["organic-standard","organic-standard"],["radial-node-centric","radial-root-centric"],["radial-root-centric","radial-root-centric"],["tree-bottom-to-top","tree-left-to-right"],["tree-left-to-right","tree-left-to-right"],["tree-right-to-left","tree-left-to-right"],["tree-top-to-bottom","tree-left-to-right"],["chronological-mono-timeline","chronological-mono-timeline"],["chronological-multi-timeline","chronological-multi-timeline"]]);var o=i(47703),a=i(35380);i(89465),i(86875),i(86659);function l(e,t){const i=new Map;if(t.dataModel?.relationshipTypes)for(const r of t.dataModel.relationshipTypes)r.name&&i.set(r.name,[]);for(const r of e)i.has(r.typeName)&&i.get(r.typeName)?.push(r.id);return i}async function p(e,t,i){const r=[],n=l(e,t),s={},p=[];for(const[o,a]of n){if(a.length<1)continue;const e=`${o}_ids`;s[e]=a,p.push(`MATCH (n)-[r:${o}]->(m) WHERE id(r) in $${e} RETURN id(n), labels(n)[0], id(m), labels(m)[0]`)}if(0===p.length)return[];const d=p.join(" UNION "),u=new a.A({openCypherQuery:d,bindParameters:s}),c=(await(0,o.executeQueryStreaming)(t,u,i?.requestOptions)).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await c.read();if(e)break;for(const i of t)r.push({id:i[0],typeName:i[1]}),r.push({id:i[2],typeName:i[3]})}return r}const d=e=>s.get(e)??"radial-root-centric";function u(e){if(!e.spatialReference.isWGS84)throw new r.A("knowledge-graph:layer-support-utils","The utilsExtentToInBoundsRings function only supports WGS84 spatial references.");return e.clone().normalize().map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}},9505:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),o=i(19247),a=i(27544);let l=class extends a.A{constructor(e){super(e),this.layoutGeometry=null}};(0,r._)([(0,n.MZ)({type:o.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.Entity")],l);const p=l},12718:(e,t,i)=>{i.d(t,{P:()=>w});var r=i(35143),n=i(91967),s=i(50076),o=i(76460),a=i(87663),l=i(50346),p=i(34154),d=i(46053),u=(i(81806),i(47249),i(85842)),c=i(76797),h=i(65215),y=i(9624),m=i(80963),f=i(21009),g=i(33750),_=i(8893),b=i(47703),T=i(35380),E=i(97015);let w=class extends n.A{constructor(e){super(e),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const t=new Map;e.knowledgeGraph.dataModel.entityTypes?.forEach((i=>{i.name&&(t.set(i.name,"entity"),this._processingCacheUpdatesLookup.set(i.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(i.name),i.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(i.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((i=>{i.name&&(t.set(i.name,"relationship"),this._processingCacheUpdatesLookup.set(i.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(i.name),i.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(i.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((i,r)=>{if("entity"===t.get(r))this.entityTypeNames.add(r);else{if("relationship"!==t.get(r))return o.A.getLogger(this).warn(`A named type, ${r}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(r);this.relationshipTypeNames.add(r)}const n=new Map;i.members?.forEach((e=>{(0,a.tE)(this.memberIdTypeLookup,e.id,(()=>new Set)).add(r);const t=this.getById(e.id);t&&n.set(e.id,t)})),this.sublayerCaches.set(r,n)}))}addToLayer(e){e.forEach((e=>{let{typeName:t,id:i}=e;if(!this.inclusionModeDefinition)throw new s.A("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){const e=this.inclusionModeDefinition.namedTypeDefinitions.get(t);e.members||(e.members=new Map),e.members.set(i,{id:i}),(0,a.tE)(this.memberIdTypeLookup,i,(()=>new Set)).add(t)}}else{const e=new Map;e.set(i,{id:i}),this.inclusionModeDefinition.namedTypeDefinitions.set(t,{useAllData:!1,members:e}),(0,a.tE)(this.memberIdTypeLookup,i,(()=>new Set)).add(t)}}))}getById(e){return g.A.getInstance().readFromStoreById(e)}async getData(e,t,i){if(t.objectType.name&&this.inclusionModeDefinition?.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(t.objectType.name))return[];let r;if(r=e||new E.A({where:"1=1",outFields:["*"]}),"link-chart"===t.parentCompositeLayer.type){const e=t.parentCompositeLayer,i=this._processingCacheUpdatesLookup.get(t.objectType.name??""),n=r.outFields;n&&1===n.length&&n[0]===f.dr&&"1=1"===r.where||await Promise.all(i??[]);const s=this.sublayerCaches.has(t.objectType.name??"")?Array.from(this.sublayerCaches.get(t.objectType.name)?.values()):[],o=[];return s.forEach((i=>{if(this.relationshipTypeNames.has(t.objectType.name)){i.geometry=e.relationshipLinkChartDiagramLookup.get(i.attributes[t.objectIdField]);const r=this.memberIdTypeLookup.get(i.attributes[f.Cz]),n=this.memberIdTypeLookup.get(i.attributes[f.KQ]),s=this._isEndEntitySpatial(r,i,f.Cz),o=this._isEndEntitySpatial(n,i,f.KQ);i.attributes[f.BL]=Number(s&&o)}else{i.geometry=e.entityLinkChartDiagramLookup.get(i.attributes[t.objectIdField]);const r=this.geographicLookup.get(t.objectType.name);r&&i.attributes[r.name]?i.attributes[f.BL]=1:i.attributes[f.BL]=0}i.attributes[f.T1]=i.geometry,o.push(i)})),o}return this.retrieveDataFromService(r,t,i)}async getConnectedRecordIds(e,t,i){const r=[];let n="";const s=this._getNamedTypeIdMapFromNodeIds(e);if(t&&0!==t?.length){for(const e of t)n=n+e+"|";n=n.slice(0,-1)}const o={},a=[];for(const[d,u]of s){const e=`${d}_ids`;o[e]=u,t&&0!==t?.length?a.push(`MATCH (n:${d}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r:${n}]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`):a.push(`MATCH (n:${d}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`)}if(!a.length)return r;const l=a.join(" UNION "),p=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new T.A({openCypherQuery:l,bindParameters:o}),{signal:i?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await p.read();if(e)break;for(let i=0;i<t.length;i++){const e=t[i];r.push({id:e[0],typeName:e[1]}),r.push({id:e[2],typeName:e[3]})}}return r}async getRelationshipsBetweenNodes(e,t,i){const r=this._getNamedTypeIdMapFromNodeIds(e);if(0===r.size)return[];const n={relationshipExclusionIds:t,possibleConnectionEntityIds:e},s=[];for(const[p,d]of r.entries()){const e=`${p}_ids`;n[e]=d,s.push(`MATCH (n:${p}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]->(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const o=s.join(" UNION "),a=[],l=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new T.A({openCypherQuery:o,bindParameters:n}),{signal:i?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await l.read();if(e)break;for(let i=0;i<t.length;i++){const e=t[i];a.push({id:e[0],typeName:e[1]})}}return a}async getRelationshipsFromNodes(e,t,i,r){const n=this._getNamedTypeIdMapFromNodeIds(e);if(0===n.size||0===t.length)return[];const s={relationshipExclusionIds:i,possibleConnectionEntityIds:t},o=[];for(const[u,c]of n.entries()){const e=`${u}_ids`;s[e]=c,o.push(`MATCH (n:${u}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]-(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const a=o.join(" UNION "),l=new Map,p=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new T.A({openCypherQuery:a,bindParameters:s}),{signal:r?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await p.read();if(e)break;for(let i=0;i<t.length;i++){const e=t[i];let r=l.get(e[1]);r||(r=new Set,l.set(e[1],r)),r.add(e[0])}}const d=[];for(const[u,c]of l)for(const e of c)d.push({id:e,typeName:u});return d}async refreshCacheContent(e,t,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4?arguments[4]:void 0;const o=g.A.getInstance(),p=[],d=new Map,u=new Map;this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&u.set(e.name,e)})),this.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&u.set(e.name,e)})),e||this.inclusionModeDefinition?e?e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const t of this.memberIdTypeLookup.get(e))d.has(t)?d.get(t)?.push(e):d.set(t,[e])})):this.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e.useAllData?d.set(t,null):e.members&&e.members.forEach((e=>{d.has(t)&&null!==d.get(t)?d.get(t)?.push(e.id):d.set(t,[e.id])}))})):(this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&d.set(e.name,null)})),this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&d.set(e.name,null)})));for(const[l,c]of d){const e=new Set(c),d=new Promise(((p,d)=>{(async()=>{const p=new Set,d=[];let h,y="",m=!1;if(t||u.get(l)?.properties?.forEach((e=>{e.name&&p.add(e.name)})),i&&this.geographicLookup.has(l)){const e=this.geographicLookup.get(l)?.name;e&&p.add(e)}if(this.entityTypeNames.has(l))y=`MATCH (n:${l}) ${c?"WHERE id(n) IN $ids ":""}return ID(n)`,p.forEach((e=>{y+=`, n.${e}`,d.push(e)}));else{if(!this.relationshipTypeNames.has(l))throw new s.A("knowledge-graph:layer-data-manager",`The graph type of ${l} could not be determined. Was this type set in the KG data model and inclusion definition?`);m=!0,y=`MATCH ()-[n:${l}]->() ${c?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,p.forEach((e=>{y+=`, n.${e}`,d.push(e)}))}h=new T.A(c?{openCypherQuery:y,bindParameters:{ids:c}}:{openCypherQuery:y});const g=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,h,{signal:n?.signal})).resultRowsStream.getReader();for(;;){const{done:t,value:i}=await g.read();if(t)break;const n=[];for(let r=0;r<i.length;r++){const t=i[r];let s=0,o=0;const l={properties:{}};for(l.id=t[s],s++,o++,m&&(l.originId=t[s],s++,o++,l.destinationId=t[s],s++,o++,(0,a.tE)(this.nodeConnectionsLookup,l.originId,(()=>new Set)).add(l.id),(0,a.tE)(this.nodeConnectionsLookup,l.destinationId,(()=>new Set)).add(l.id),(0,a.tE)(this.relationshipConnectionsLookup,l.id,(()=>[l.originId,l.destinationId])));s<t.length;s++)l.properties[d[s-o]]=t[s];e.delete(l.id),n.push(l)}const s=o.writeToStore(n,f.dr,this.geographicLookup.get(l)?.name);this.sublayerCaches.has(l)||this.sublayerCaches.set(l,new Map),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.has(l)&&this.inclusionModeDefinition?.namedTypeDefinitions.set(l,{useAllData:!1,members:new Map}),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members&&(this.inclusionModeDefinition.namedTypeDefinitions.get(l).members=new Map);const p=this.sublayerCaches.get(l);s.forEach((e=>{p?.set(e.attributes[f.dr],e),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members.has(e.attributes[f.dr])&&(this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members.set(e.attributes[f.dr],{id:e.attributes[f.dr]}),(0,a.tE)(this.memberIdTypeLookup,e.attributes[f.dr],(()=>new Set)).add(l))}))}const _=this.inclusionModeDefinition?.namedTypeDefinitions.get(l);if(_)for(const t of e)_.members?.delete(t)})().then((()=>{p(null)})).catch((e=>{"AbortError"===e.name?p(null):d(e)}))}));p.push(d),this._processingCacheUpdatesLookup.get(l)?.push(d)}if(await Promise.all(p),n?.signal?.aborted)throw(0,l.NK)()}removeFromLayer(e){const t=new Set,i=new Set(e.map((e=>e.id)));for(const r of e)t.add(r.typeName),1===this.memberIdTypeLookup.get(r.id)?.size?this.memberIdTypeLookup.delete(r.id):this.memberIdTypeLookup.get(r.id)?.delete(r.typeName),this.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{t===r.typeName&&e.members?.has(r.id)&&e.members.delete(r.id)}));t.forEach((e=>{this.sublayerCaches.get(e)?.forEach(((t,r)=>{i.has(r)&&this.sublayerCaches.get(e)?.delete(r)}))}))}async retrieveDataFromService(e,t,i){const r=g.A.getInstance(),n=new Set,o=[];let a,l="",d=[];const u="relationship"===t.graphType,E=this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData,w=t.parentCompositeLayer.sublayerIdsCache.get(t.objectType.name);let v=!E&&w?Array.from(w).sort():null;if(this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData)this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData&&null!=e.objectIds&&(v=e.objectIds);else if(null!=e.objectIds&&v&&v.length>0){const t=e.objectIds;e.objectIds=v.filter((e=>t.includes(e)))}else if(null!=e.objectIds)v=e.objectIds;else{if(this.inclusionModeDefinition?.namedTypeDefinitions.has(t.objectType.name)&&(!this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members||this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members?.size<1))return e.objectIds=[],[];e.objectIds=v}if(null!=e.outFields){const i=e.outFields;i.includes("*")?t.fields.forEach((e=>{n.add(e.name)})):i.forEach((e=>{e!==f.dr&&e!==t.geometryFieldName&&n.add(e)}))}if(null!=e.geometry){const i=e.geometry;let r;const d=t.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,f=d?.spatialReference,g=d?.serviceCapabilities?.geometryCapabilities;let b=g?.geometryMaxBoundingRectangleSizeX,E=g?.geometryMaxBoundingRectangleSizeY;if("point"===i.type){let e=i;e.spatialReference?.isWGS84||(await(0,y.initializeProjection)(e.spatialReference,m.KK),e=(0,y.project)(e,m.KK)),r=new c.A({spatialReference:m.KK,xmin:e.x-1e-4,ymin:e.y-1e-4,xmax:e.x+1e-4,ymax:e.y+1e-4})}else i?.extent?.spatialReference&&!i.spatialReference?.isWGS84?(await(0,y.initializeProjection)(i.extent.spatialReference,m.KK),r=(0,y.project)(i.extent,m.KK)):r=i.extent;if(b&&E&&f){if(4326!==f.wkid){const e=new c.A({spatialReference:f,xmax:b,ymax:E}),t=(0,y.project)(e,m.KK);b=t.xmax,E=t.ymax}if(r.xmax-r.xmin>b)throw new s.A("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${b}\xb0 latitude, limit exceeded`);if(r.ymax-r.ymin>E)throw new s.A("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${E}\xb0 longitude, limit exceeded`)}if(null!=e.where&&"1=1"!==e.where){const i=await(0,p.GP)(e.where.toUpperCase(),t.fieldsIndex);t.fields.forEach((e=>{i.fieldNames.includes(e.name)&&n.add(e.name)}))}l=u?`Match ()-[n:${t.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${t.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n)`,t.geometryFieldName&&n.add(t.geometryFieldName),n.forEach((e=>{l+=`, n.${e}`,o.push(e)})),a=new T.A({openCypherQuery:l,bindParameters:{param_filter_geom:new h.A({rings:(0,_.Wq)(r)})}})}else{let i="";if(null!=e.where&&"1=1"!==e.where){const r=await(0,p.GP)(e.where,t.fieldsIndex);t.fields.forEach((e=>{r.fieldNames.includes(e.name)&&n.add(e.name)}));const s=new Set(["column-reference","string","number","binary-expression"]),o=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let a=!1;const l=e=>{if("column-reference"===e.type)return`n.${e.column}`;if("string"===e.type)return`'${e.value}'`;if("number"===e.type)return`${e.value}`;if("binary-expression"===e.type&&s.has(e.left.type)&&s.has(e.right.type)&&o.has(e.operator))return`${l(e.left)} ${e.operator} ${l(e.right)}`;if("binary-expression"===e.type&&"LIKE"===e.operator){let t="";if("function"===e.left.type&&"column-reference"===e.left.args.value[0].type)t+=`lower(n.${e.left.args.value[0].column})`;else{if("column-reference"!==e.left.type)return a=!0,"";t+=`lower(n.${e.left.column})`}if(t+=" CONTAINS (","string"!==e.right.type)return a=!0,"";{let i=e.right.value;"%"===i.charAt(0)&&(i=i.slice(1)),"%"===i.charAt(i.length-1)&&(i=i.slice(0,-1)),t+=`'${i.toLowerCase()}')`}return t}return a=!0,""};i=l(r.parseTree),a&&(i="")}let r="";r=u?`Match ()-[n:${t.objectType.name}]->()`:`Match (n:${t.objectType.name})`;let s=!1;v&&(s=!0,r+=" WHERE ID(n) IN $ids"),i&&(r+=s?" AND":" WHERE",r+=` ${i}`),r+=" return ID(n)",u&&(r+=", id(startNode(n)), id(endNode(n))"),e.returnGeometry&&t.geometryFieldName&&n.add(t.geometryFieldName),n.forEach((e=>{r+=`, n.${e}`,o.push(e)})),a=new T.A(v?{openCypherQuery:r,bindParameters:{ids:v}}:{openCypherQuery:r})}const I=(await(0,b.executeQueryStreaming)(t.parentCompositeLayer.dataManager.knowledgeGraph,a,i)).resultRowsStream.getReader();for(;;){const{done:e,value:i}=await I.read();if(e)break;const n=[];for(let t=0;t<i.length;t++){const e=i[t];let r=0,s=0;const a={properties:{}};for(a.id=e[r],r++,s++,u&&(a.originId=e[r],r++,s++,a.destinationId=e[r],r++,s++);r<e.length;r++)a.properties[o[r-s]]=e[r];n.push(a)}d=d.concat(r.writeToStore(n,f.dr,t.parentCompositeLayer.dataManager.geographicLookup.get(t.objectType.name)?.name))}return d}_isEndEntitySpatial(e,t,i){for(const r of e??[])if(this.entityTypeNames.has(r)){const e=this.geographicLookup.get(r),n=e&&this.sublayerCaches.get(r)?.get(t.attributes[i]);if(e&&n?.attributes[e.name])return!0}return!1}_getNamedTypeIdMapFromNodeIds(e){const t=new Map;return e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const i of this.memberIdTypeLookup.get(e)){if(!this.entityTypeNames.has(i))return;t.has(i)?t.get(i)?.push(e):t.set(i,[e])}})),t}};(0,r._)([(0,d.MZ)()],w.prototype,"knowledgeGraph",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"inclusionModeDefinition",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"entityTypeNames",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"relationshipTypeNames",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"geographicLookup",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"sublayerCaches",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"nodeConnectionsLookup",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"relationshipConnectionsLookup",void 0),(0,r._)([(0,d.MZ)()],w.prototype,"memberIdTypeLookup",void 0),w=(0,r._)([(0,u.$)("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],w)},12831:(e,t,i)=>{i.d(t,{A:()=>l});var r=i(35143),n=i(42553),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842));let a=class extends n.A{constructor(e){super(e),this.properties=null}};(0,r._)([(0,s.MZ)({json:{write:!0}})],a.prototype,"properties",void 0),a=(0,r._)([(0,o.$)("esri.rest.knowledgeGraph.GraphObject")],a);const l=a},21009:(e,t,i)=>{i.d(t,{BL:()=>l,Cz:()=>n,KQ:()=>s,M1:()=>a,T1:()=>o,dr:()=>r});const r="ESRI__ID",n="ESRI__OriginID",s="ESRI__DestID",o="ESRI__LayoutGeometry",a="ESRI__AggregationCount",l="LC.ESRI__IsSpatial"},21617:(e,t,i)=>{i.d(t,{J:()=>T});var r=i(35143),n=(i(81806),i(76460)),s=i(50346),o=i(46053),a=i(21403),l=(i(47249),i(85842)),p=i(80979),d=i(94643),u=i(68134),c=i(49281);const h=new d.A,y=new WeakMap;function m(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function f(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:f(t,e%t):0}let g=0,_=0;function b(){const e=Date.now();let t=!1;for(const i of h){const r=i.deref();r?r.refreshInterval&&e-(y.get(r)??0)+5>=6e4*r.refreshInterval&&(y.set(r,e),r.refresh(e)):t=!0}if(t)for(let i=h.length-1;i>=0;i--)h.at(i).deref()||h.removeAt(i)}(0,c.fm)((()=>{const e=Date.now();let t=0;for(const i of h){const r=i.deref();r&&(t=f(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?y.get(r)||y.set(r,e):y.delete(r))}if(t!==_){if(_=t,clearInterval(g),0===_)return void(g=0);g=setInterval(b,_)}}),u.OH);const T=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,s.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){m(e)&&h.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=h.find((t=>t.deref()===e));t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,s.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{n.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,r._)([(0,o.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:p.K}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,a.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],t),t}},22856:(e,t,i)=>{i.d(t,{G:()=>r});const r=Symbol("Yield")},23908:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),o=i(23701),a=i(27544);let l=class extends a.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],l.prototype,"originId",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],l.prototype,"destinationId",void 0),(0,r._)([(0,n.MZ)({type:o.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.Relationship")],l);const p=l},25515:(e,t,i)=>{i.d(t,{A:()=>T});var r=i(35143),n=i(3825),s=i(50076),o=i(54099),a=i(5632),l=i(49304),p=i(76460),d=i(50346),u=i(90534),c=i(46053),h=(i(81806),i(47249),i(85842)),y=i(76797),m=i(13312),f=i(86560);var g=i(59187);let _=0,b=class extends(o.A.EventedMixin(a.A.IdentifiableMixin(l.A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new y.A(-180,-90,180,90,m.A.WGS84),this.id=Date.now().toString(16)+"-layer-"+_++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=m.A.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([i.e(652),i.e(2544)]).then(i.bind(i,62544))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await Promise.all([i.e(9624),i.e(652),i.e(2487)]).then(i.bind(i,2487));try{return await r(t)}catch(n){const e=t?.portalItem,i=e?.id||"unset",r=e?.portal?.url||f.A.portalUrl;throw p.A.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+r+"', id: '"+i+"')",n),n}}(e)}initialize(){this.when().catch((e=>{(0,d.zf)(e)||p.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,u.An)(this.url)}createLayerView(e,t){return Promise.reject(new s.A("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,n.A)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.A("layer:no-attribution-data","Layer does not have attribution data")}};(0,r._)([(0,c.MZ)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,r._)([(0,c.MZ)({readOnly:!0})],b.prototype,"effectiveVisible",null),(0,r._)([(0,c.MZ)({type:y.A})],b.prototype,"fullExtent",void 0),(0,r._)([(0,c.MZ)({readOnly:!0})],b.prototype,"hasAttributionData",null),(0,r._)([(0,c.MZ)({type:String,clonable:!1})],b.prototype,"id",void 0),(0,r._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,r._)([(0,c.MZ)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,r._)([(0,c.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,r._)([(0,c.MZ)({clonable:!1})],b.prototype,"parent",void 0),(0,r._)([(0,c.MZ)({readOnly:!0})],b.prototype,"parsedUrl",null),(0,r._)([(0,c.MZ)({type:Boolean,readOnly:!0})],b.prototype,"persistenceEnabled",void 0),(0,r._)([(0,c.MZ)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,r._)([(0,c.MZ)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,r._)([(0,c.MZ)({type:m.A})],b.prototype,"spatialReference",void 0),(0,r._)([(0,c.MZ)({type:String})],b.prototype,"title",void 0),(0,r._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,r._)([(0,c.MZ)()],b.prototype,"url",void 0),(0,r._)([(0,c.MZ)({type:g.A})],b.prototype,"visibilityTimeExtent",void 0),(0,r._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0),b=(0,r._)([(0,h.$)("esri.layers.Layer")],b);const T=b},27544:(e,t,i)=>{i.d(t,{A:()=>l});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),o=i(12831);let a=class extends o.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"typeName",void 0),(0,r._)([(0,n.MZ)({type:String,json:{write:!0}})],a.prototype,"id",void 0),a=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphNamedObject")],a);const l=a},30218:(e,t,i)=>{i.d(t,{FJ:()=>T,Dp:()=>E,KV:()=>w});var r=i(35143),n=i(48611),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),a=i(80979),l=i(69098),p=i(94643),d=i(42553),u=i(17707),c=i(68002),h=i(49723);const y={write:{overridePolicy:(e,t,i)=>({enabled:!i||"scale"===i.filterMode})}};let m=class extends(l.A.ClonableMixin(d.A)){constructor(e){super(e),this.id=(0,h.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],m.prototype,"id",void 0),(0,r._)([(0,s.MZ)({type:Number,json:y})],m.prototype,"maxScale",void 0),(0,r._)([(0,s.MZ)({type:Number,json:y})],m.prototype,"minScale",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],m.prototype,"title",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],m.prototype,"where",void 0),m=(0,r._)([(0,o.$)("esri.layers.support.DisplayFilter")],m);const f=m;var g=i(64810);let _=class extends(l.A.ClonableMixin(d.A)){constructor(e){super(e),this.activeFilterId=null,this.filters=new(p.A.ofType(f)),this.mode="manual"}writeFilters(e,t,i,r){const n=e.toArray();"scale"===this.mode&&n.sort(((e,t)=>{const i=(0,c.oW)(t.minScale,e.minScale),r=e.maxScale-t.maxScale;return 0===i?r:i})),t[i]=n.map((e=>e.toJSON(r)))}write(e,t){return super.write(e,(0,g.mW)(this,t))}};(0,r._)([(0,s.MZ)({type:String,json:{write:{overridePolicy:(e,t,i)=>({enabled:"manual"===i.filterMode,isRequired:!0})}}})],_.prototype,"activeFilterId",void 0),(0,r._)([(0,s.MZ)({type:p.A.ofType(f),nonNullable:!0,json:{write:!0}})],_.prototype,"filters",void 0),(0,r._)([(0,u.K)("filters")],_.prototype,"writeFilters",null),(0,r._)([(0,s.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],_.prototype,"mode",void 0),_=(0,r._)([(0,o.$)("esri.layers.support.DisplayFilterInfo")],_);const b=_,T=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,r._)([(0,s.MZ)(E)],t.prototype,"displayFilterEnabled",void 0),(0,r._)([(0,s.MZ)(w)],t.prototype,"displayFilterInfo",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.DisplayFilteredLayer")],t),t},E={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:a.K,writer(e,t,i){(0,n.sM)(i,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},w={type:b,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:a.K},origins:{"web-scene":{write:!1,read:!1}}}}},30973:(e,t,i)=>{i.d(t,{DQ:()=>d,tn:()=>p});var r=i(16868),n=i(53430),s=i(75900),o=(i(56362),i(87015),i(81940),i(6929)),a=(i(7198),i(93616),i(53539),i(91904),i(40585)),l=i(17542);function p(e,t){let{displayField:i,editFieldsInfo:a,fields:l,objectIdField:p,title:d}=e;if(!l)return null;const u=h({editFieldsInfo:a,fields:l,objectIdField:p},t);if(!u.length)return null;const c=function(e){const t=(0,n.mB)(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}({titleBase:d,fields:l,displayField:i}),y=[new o.A,new s.A];return new r.A({title:c,content:y,fieldInfos:u})}function d(e){const{title:t,graphic:i}=e??{},{attributes:r,sourceLayer:n}=i??{},s=n&&"displayField"in n?n.displayField:null,o=s?r?.[s]:null,a=null!=o?JSON.stringify(o):null,l=i?.getObjectId()?.toString();return t||a||l||""}const u=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,n.Bz)(e,t);function c(e,t){return"oid"===e.type?-1:"oid"===t.type?1:m(e)?-1:m(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h(e,t){const i=t?.visibleFieldNames;return function(e){let{fields:t,ignoreFieldTypes:i,sortDisabled:r}=e;const n=t;return i&&(t=t.filter((e=>!i.includes(e.type)))),t===n&&(t=t.slice()),!0!==r&&t.sort(c),t}({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||f,sortDisabled:t?.sortDisabled}).map((t=>new a.A({fieldName:t.name,isEditable:(0,n.R$)(t,e),label:t.alias,format:y(t),visible:u(t,{...e,visibleFieldNames:i})})))}function y(e){switch(e.type){case"small-integer":case"integer":case"single":return new l.A({digitSeparator:!0,places:0});case"double":return new l.A({digitSeparator:!0,places:2});case"string":return(0,n.JL)(e.name)?new l.A({digitSeparator:!0,places:0}):void 0;default:return}}function m(e){if("name"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return"name"===t}const f=["geometry","blob","raster","guid","xml"]},32173:(e,t,i)=>{i.d(t,{A:()=>p});var r,n=i(35143),s=(i(76460),i(81806),i(47249),i(50076),i(6409)),o=i(85842),a=i(44631);let l=r=class extends a.A{constructor(e){super(e),this.type="inherited"}clone(){return new r}};(0,n._)([(0,s.e)({inherited:"inherited"})],l.prototype,"type",void 0),l=r=(0,n._)([(0,o.$)("esri.layers.support.InheritedDomain")],l);const p=l},33750:(e,t,i)=>{i.d(t,{A:()=>a});var r=i(19902),n=i(98618),s=i(20176),o=i(21009);class a{constructor(){this._featureLookup=new Map}static getInstance(){return a.instance||(a.instance=new a),a.instance}static resetInstance(){a.instance&&(a.instance=null)}deleteFromStore(e){e.forEach((e=>{this._featureLookup.delete(e)}))}readFromStoreByList(e){const t=[];return e.forEach((e=>{const i=this.readFromStoreById(e);i&&t.push(i)})),t}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(e,t,i){const a=[];return e.forEach((e=>{if(!e?.id)return;e.properties||(e.properties=[]);let l,p=null;if(i&&e.properties[i]&&(p=(0,n.Ux)(e.properties[i])),"originId"in e&&"destinationId"in e&&(e.properties[o.Cz]=e.originId,e.properties[o.KQ]=e.destinationId),e.properties[t]=e.id,e.id&&this._featureLookup.has(e.id)&&this._featureLookup.get(e.id).attributes){const n=this._featureLookup.get(e.id),o=JSON.parse(JSON.stringify(Object.assign(n.attributes,e.properties)));i&&e.properties[i]&&(o[i]=(0,r.rS)(e.properties[i])),l=new s.Om(p?JSON.parse(JSON.stringify(p)):n?.geometry?JSON.parse(JSON.stringify(n.geometry)):null,o,null,e.properties[t])}else l=new s.Om(p?JSON.parse(JSON.stringify(p)):null,e.properties,null,e.properties[t]);this._featureLookup.set(`${e.typeName?`${e.typeName}__${e.id}`:e.id}`,l),a.push(l)})),a}}},35380:(e,t,i)=>{i.d(t,{A:()=>u});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),o=i(13312),a=i(91967);let l=class extends a.A{constructor(e){super(e),this.openCypherQuery=""}};(0,r._)([(0,n.MZ)()],l.prototype,"openCypherQuery",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphQuery")],l);const p=l;let d=class extends p{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,r._)([(0,n.MZ)()],d.prototype,"bindParameters",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"bindGeometryQuantizationParameters",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"outputQuantizationParameters",void 0),(0,r._)([(0,n.MZ)({type:o.A})],d.prototype,"outputSpatialReference",void 0),(0,r._)([(0,n.MZ)()],d.prototype,"provenanceBehavior",void 0),d=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],d);const u=d},37534:(e,t,i)=>{i.d(t,{Rr:()=>l,fY:()=>d,ne:()=>p});var r=i(35143),n=i(48611),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),a=i(51162);function l(e,t,i){if(!e)return null;const r=e.find((e=>!!e.field));if(!r)return null;const n=new a.A;return n.read(r,i),[n]}const p={type:[a.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:l},write:{writer:function(e,t,i,r){const s=e.find((e=>!!e.field));s&&(0,n.sM)(i,[s.toJSON()],t)}}}},d=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,r._)([(0,s.MZ)(p)],t.prototype,"orderBy",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.OrderedLayer")],t),t}},38156:(e,t,i)=>{i.d(t,{A:()=>a});var r=i(35143),n=(i(76460),i(81806),i(47249),i(50076),i(85842)),s=i(12831);let o=class extends s.A{constructor(e){super(e)}};o=(0,r._)([(0,n.$)("esri.rest.knowledgeGraph.ObjectValue")],o);const a=o},40296:(e,t,i)=>{i.d(t,{F0:()=>a,Vx:()=>d,e2:()=>c,f:()=>h});var r=i(81806),n=i(53084),s=i(8298),o=i(44460);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.Cb:"esriGeometryPolyline"===e?o.yM:o.WR}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let p=1;function d(e,t){if((0,r.A)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this${u(t)} = null;`;for(const t in e)i+=`this${u(t)} = ${JSON.stringify(e[t])};`;const r=new Function(`\n      return class AttributesClass$${p++} {\n        constructor() {\n          ${i};\n        }\n      }\n    `)();return()=>new r}catch(i){return()=>({[t]:null,...e})}}function u(e){return l.test(e)?`.${e}`:`["${e}"]`}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,n.o8)(e)}}]}function h(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:s.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},44135:(e,t,i)=>{i.d(t,{A:()=>f});var r,n=i(35143),s=i(45802),o=i(42553),a=i(46053),l=i(40565),p=(i(81806),i(47249),i(6409)),d=i(28379),u=i(85842),c=i(76866),h=i(6127);const y=new s.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m=r=class extends o.A{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,t){let{description:i}=t,r=null;try{r=i?JSON.parse(i):null}catch(n){}return r?.value??null}readValueType(e,t){let{description:i}=t,r=null;try{r=i?JSON.parse(i):null}catch(n){}return r?y.fromJSON(r.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],m.prototype,"alias",void 0),(0,n._)([(0,a.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],m.prototype,"defaultValue",void 0),(0,n._)([(0,a.MZ)()],m.prototype,"description",void 0),(0,n._)([(0,d.w)("description")],m.prototype,"readDescription",null),(0,n._)([(0,a.MZ)({types:c.gK,json:{read:{reader:c.rS},write:!0}})],m.prototype,"domain",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),(0,n._)([(0,a.MZ)({type:l.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],m.prototype,"length",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"nullable",void 0),(0,n._)([(0,p.e)(h.m)],m.prototype,"type",void 0),(0,n._)([(0,a.MZ)()],m.prototype,"valueType",void 0),(0,n._)([(0,d.w)("valueType",["description"])],m.prototype,"readValueType",null),(0,n._)([(0,a.MZ)({type:Boolean,json:{read:!1}})],m.prototype,"visible",void 0),m=r=(0,n._)([(0,u.$)("esri.layers.support.Field")],m);const f=m},44631:(e,t,i)=>{i.d(t,{A:()=>u});var r=i(35143),n=i(45802),s=i(42553),o=i(46053),a=(i(81806),i(76460),i(47249),i(6409)),l=i(85842);const p=new n.J({inherited:"inherited",codedValue:"coded-value",range:"range"});let d=class extends s.A{constructor(e){super(e),this.name=null,this.type=null}};(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,r._)([(0,a.e)(p),(0,o.MZ)({json:{write:{isRequired:!0}}})],d.prototype,"type",void 0),d=(0,r._)([(0,l.$)("esri.layers.support.Domain")],d);const u=d},50654:(e,t,i)=>{i.d(t,{A:()=>d});var r,n=i(35143),s=i(46053),o=(i(81806),i(76460),i(47249),i(6409)),a=i(85842),l=i(44631);let p=r=class extends l.A{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,n._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]},isRequired:!0}}})],p.prototype,"maxValue",void 0),(0,n._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]},isRequired:!0}}})],p.prototype,"minValue",void 0),(0,n._)([(0,o.e)({range:"range"})],p.prototype,"type",void 0),p=r=(0,n._)([(0,a.$)("esri.layers.support.RangeDomain")],p);const d=p},51162:(e,t,i)=>{i.d(t,{A:()=>u});var r,n=i(35143),s=i(45802),o=i(42553),a=i(46053),l=(i(81806),i(76460),i(47249),i(85842));const p=new s.J({asc:"ascending",desc:"descending"});let d=r=class extends o.A{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new r({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"valueExpression",void 0),(0,n._)([(0,a.MZ)({type:p.apiValues,json:{type:p.jsonValues,read:p.read,write:p.write}})],d.prototype,"order",void 0),d=r=(0,n._)([(0,l.$)("esri.layers.support.OrderByInfo")],d);const u=d},59649:(e,t,i)=>{i.d(t,{A:()=>s});var r=i(99486),n=i(99702);class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.values().next().value;this._peeker=e,this._observable=new n.I,this._items=new Set}get length(){return(0,r.gc)(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return(0,r.gc)(this._observable),this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach((t=>{e(t)||this._items.delete(t)})),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){(0,r.gc)(this._observable),yield*this._items}}},59752:(e,t,i)=>{i.d(t,{Bb:()=>S,W6:()=>r,mj:()=>g,nu:()=>N});var r,n=i(88321),s=(i(81806),i(76460)),o=i(30726),a=i(32634),l=i(30015),p=i(50346),d=i(68134),u=i(75540),c=i(91417),h=i(84031),y=i(5551),m=i(98476),f=i(22856);function g(){return new A.Scheduler}!function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"}(r||(r={}));const _=new Map([[r.RESOURCE_CONTROLLER_IMMEDIATE,0],[r.RESOURCE_CONTROLLER,4],[r.SLIDE,0],[r.STREAM_DATA_LOADER,0],[r.ELEVATION_QUERY,0],[r.TERRAIN_SURFACE,1],[r.SURFACE_GEOMETRY_UPDATES,1],[r.LOD_RENDERER,2],[r.GRAPHICS_CORE,2],[r.I3S_CONTROLLER,2],[r.POINT_CLOUD_LAYER,2],[r.FEATURE_TILE_FETCHER,2],[r.CLOUDS_GENERATOR,2],[r.OVERLAY,4],[r.STAGE,4],[r.GRAPHICS_DECONFLICTOR,4],[r.FILTER_VISIBILITY,4],[r.SCALE_VISIBILITY,4],[r.FRUSTUM_VISIBILITY,4],[r.POINT_OF_INTEREST_FREQUENT,6],[r.POINT_OF_INTEREST_INFREQUENT,30],[r.LABELER,8],[r.FEATURE_QUERY_ENGINE,8],[r.FEATURE_TILE_TREE,16],[r.FEATURE_TILE_TREE_ACTIVE,0],[r.ELEVATION_ALIGNMENT,12],[r.ELEVATION_ALIGNMENT_SCENE,14],[r.TEXT_TEXTURE_ATLAS,12],[r.TEXTURE_UNLOAD,12],[r.LINE_OF_SIGHT_TOOL,16],[r.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[r.SNAPPING,0],[r.SHADOW_ACCUMULATOR,30],[r.MAPVIEW_FETCH_QUEUE,0],[r.MAPVIEW_LAYERVIEW_UPDATE,2],[r.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,0]]);function b(e){return _.has(e)?_.get(e):"number"==typeof e?e:1}const T=(0,c.l5)(6.5),E=(0,c.l5)(1),w=(0,c.l5)(30),v=(0,c.l5)(1e3/30),I=(0,c.l5)(100);var A,M;!function(e){e.Scheduler=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((e=>e.needsUpdate))}constructor(){this._updating=(0,u.v)(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new a.A("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=m.M.INTERACTING,this._tasks=new l.A,this._runQueue=new l.A,this._load=0,this._idleStateCallbacks=new l.A,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,d.wB)((()=>y.A.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),d.Vh);for(const e of Object.keys(r))this.performanceInfo.tasks.set(r[e],new a.A(r[e]))}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),(0,o.xt)(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())})))}registerTask(e,i){const r=new t(this,e,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new a.A(e)),r}registerIdleStateCallbacks(e,t){const i={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(i),this.state===m.M.IDLE&&this._idleUpdatesStartFired&&i.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(i),set idleBegin(e){r._idleUpdatesStartFired&&(i.idleEnd(),r._state===m.M.IDLE&&e()),i.idleBegin=e},set idleEnd(e){i.idleEnd=e}}}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==m.M.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return this._state}frame(e){this._startFrameTaskTimes();const t=this._updateBudget(e);if(t){const e=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-e)}else this._recordFrameTaskTimes(0);return t}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let t=T,i=e.frameDuration,r=E;switch(this.state){case m.M.IDLE:t=(0,c.l5)(0),i=(0,c.l5)(Math.max(I,e.frameDuration)),r=w;break;case m.M.INTERACTING:i=(0,c.l5)(Math.max(v,e.frameDuration));case m.M.ANIMATING:}return i=(0,c.l5)(i-e.elapsedFrameTime-t),this.state!==m.M.IDLE&&i<E&&!this._forceTask?(this._forceTask=!0,!1):(i=(0,c.l5)(Math.max(i,r)),this._budget.reset(i,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case m.M.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case m.M.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset((0,c.l5)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e),this._updatingChanged()}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return M.SCHEDULED;let t=M.IDLE;return this._tasks.forAll((i=>{i.name===e&&i.needsUpdate&&(i.schedulePriority<=1?t=M.READY:t!==M.READY&&(t=M.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((i=>{i.name===e&&(t+=i.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t="";return e.forEach(((e,i)=>{t+=e>1?` ${e}x ${i}`:` ${i}`})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{0===e.basePriority&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((i=>{i.needsUpdate&&0!==i.schedulePriority&&0!==i.basePriority&&i.blockFrame!==this._frameNumber&&(e=!0,t=Math.max(t,i.basePriority),1===i.schedulePriority?(i.schedulePriority=0,this._runQueue.push(i)):--i.schedulePriority)})),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do{for(;this._runQueue.length>0;){const t=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===f.G&&(i.blockFrame=this._frameNumber)}catch(e){s.A.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,e),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,r.I3S_CONTROLLER,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const n=this._budget.now()-t;if(i.runtime+=n,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+n),this._budget.remaining<=0)return void this._updatingChanged()}}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(r))this._frameTaskTimes.set(r[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).push(e))),this.performanceInfo.total.push(e)}get test(){return this._test}};class t{get task(){return this._task.value}get updating(){return this._queue.running}constructor(e,t,i){this._scheduler=e,this.name=t,this.blockFrame=0,this.runtime=0,this._queue=new h.T,this._handles=new n.A,this._basePriority=b(t),this.schedulePriority=this._basePriority,this._task=(0,u.v)(null!=i?i:this._queue),this._handles.add((0,d.z7)((()=>this.task.running),(t=>e.taskRunningChanged(t))))}remove(){this.processQueue(S),this._scheduler.removeTask(this),this.schedule=N.schedule,this.reschedule=N.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const t=b(e);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,i){return this._queue.push(e,t,i)}reschedule(e,t,i){return this._queue.unshift(e,t,i)}processQueue(e){return this._queue.runTask(e)}}class i{constructor(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=m.M.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i}(A||(A={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(M||(M={}));const S=(()=>{const e=new A.Budget;return e.enabled=!1,e})();const N=new class{remove(){}processQueue(){}schedule(e,t,i){try{if((0,p.G4)(t)){const e=(0,p.NK)();return i?Promise.resolve(i(e)):Promise.reject(e)}return(0,p.z7)(e(S))}catch(r){return Promise.reject(r)}}reschedule(e,t,i){return this.schedule(e,t,i)}}},63733:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),o=i(5364),a=i(25515),l=i(65624),p=i(5682),d=i(64519),u=i(731);let c=class extends((0,l.dM)((0,p.j)(a.A))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new d.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,r._)([(0,n.MZ)({type:u.A})],c.prototype,"elevationInfo",void 0),(0,r._)([(0,n.MZ)((0,o.C)(d.Y,"graphics"))],c.prototype,"graphics",void 0),(0,r._)([(0,n.MZ)({type:["show","hide"]})],c.prototype,"listMode",void 0),(0,r._)([(0,n.MZ)()],c.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],c.prototype,"type",void 0),(0,r._)([(0,n.MZ)({constructOnly:!0})],c.prototype,"internal",void 0),c=(0,r._)([(0,s.$)("esri.layers.GraphicsLayer")],c);const h=c},64519:(e,t,i)=>{i.d(t,{Y:()=>p});var r=i(35143),n=i(39356),s=(i(76460),i(40565)),o=(i(81806),i(47249),i(50076),i(29101)),a=i(85842),l=i(5364);let p=class extends l.X{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};(0,r._)([(0,o.u)({Type:n.A,ensureType:(0,s.dp)(n.A)})],p.prototype,"itemType",void 0),p=(0,r._)([(0,a.$)("esri.support.GraphicsCollection")],p)},65460:(e,t,i)=>{i.d(t,{BI:()=>f,D3:()=>y,XJ:()=>m,lc:()=>h,mX:()=>_,rU:()=>g,tH:()=>v});var r=i(88685);const n="__begin__",s="__end__",o=new RegExp(n,"ig"),a=new RegExp(s,"ig"),l=new RegExp("^"+n,"i"),p=new RegExp(s+"$","i"),d='"',u=d+" + ",c=" + "+d;function h(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function y(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function m(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=h(e.labelExpression),t.type="conventional"),t}function f(e){const t=m(e);switch(t.type){case"conventional":return _(t.expression);case"arcade":return t.expression}return null}function g(e){const t=m(e);switch(t.type){case"conventional":return function(e){const t=e?.match(b);return t?.[1].trim()||null}(t.expression);case"arcade":return v(t.expression)}return null}function _(e){let t;return e?(t=(0,r.HC)(e,(e=>n+'$feature["'+e+'"]'+s)),t=l.test(t)?t.replace(l,""):d+t,t=p.test(t)?t.replace(p,""):t+d,t=t.replaceAll(o,u).replaceAll(a,c)):t='""',t}const b=/^\s*\{([^}]+)\}\s*$/i;const T=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,E=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,w=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function v(e){if(!e)return null;let t=T.exec(e)||E.exec(e);return t?t[1]||t[3]:(t=w.exec(e),t?t[2]:null)}},65624:(e,t,i)=>{i.d(t,{LF:()=>d,dM:()=>u,sU:()=>l});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),o=i(80979),a=i(44081);const l={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:o.K}},"portal-item":{read:!0,write:{layerContainerTypes:o.K}}}}},p={read:{reader:a.LF},write:{allowNull:!0,writer:a.M9,layerContainerTypes:o.K}},d={json:{read:!1,write:!1,origins:{"web-map":p,"portal-item":p}}},u=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,n.MZ)(l)],t.prototype,"blendMode",void 0),(0,r._)([(0,n.MZ)(d)],t.prototype,"effect",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.BlendLayer")],t),t}},68325:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(35143),n=i(42553),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),a=i(12831);let l=class extends n.A{constructor(e){super(e),this.path=[]}};(0,r._)([(0,s.MZ)({type:[a.A],json:{write:!0}})],l.prototype,"path",void 0),l=(0,r._)([(0,o.$)("esri.rest.knowledgeGraph.Path")],l);const p=l},72599:(e,t,i)=>{i.d(t,{A:()=>c});var r,n=i(35143),s=i(53084),o=i(46053),a=(i(81806),i(76460),i(6409)),l=i(85842),p=i(92115),d=i(44631);let u=r=class extends d.A{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some((e=>(String(e.code)===i&&(t=e.name),!!t)))}return t}clone(){return new r({codedValues:(0,s.o8)(this.codedValues),name:this.name})}};(0,n._)([(0,o.MZ)({type:[p.H],json:{write:{isRequired:!0}}})],u.prototype,"codedValues",void 0),(0,n._)([(0,a.e)({codedValue:"coded-value"})],u.prototype,"type",void 0),u=r=(0,n._)([(0,l.$)("esri.layers.support.CodedValueDomain")],u);const c=u},75540:(e,t,i)=>{i.d(t,{v:()=>a});var r=i(53084),n=i(99486),s=i(99702);class o{constructor(e,t){this._observable=new s.I,this._value=e,this._equalityFunction=t}get value(){return(0,n.gc)(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.gh;return new o(e,t)}},76350:(e,t,i)=>{i.d(t,{p:()=>l});var r=i(81806),n=i(76460),s=i(44135),o=i(1900),a=i(53430);function l(){return{fields:{type:[s.A],value:null,set:function(e){if(e&&(0,r.A)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");n.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return o.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const i=this.fieldsIndex?.has(t);i||n.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,a.DB)(this.fieldsIndex,e)}}}}},76866:(e,t,i)=>{i.d(t,{gK:()=>a,rS:()=>l});i(81806);var r=i(72599),n=i(44631),s=i(32173),o=i(50654);const a={key:"type",base:n.A,typeMap:{range:o.A,"coded-value":r.A,inherited:s.A}};function l(e){if(!e?.type)return null;switch(e.type){case"range":return o.A.fromJSON(e);case"codedValue":return r.A.fromJSON(e);case"inherited":return s.A.fromJSON(e)}return null}},78817:(e,t,i)=>{i.d(t,{B:()=>h,e:()=>y});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(28379)),o=i(85842),a=i(80979),l=i(53430),p=i(83982),d=i(90115),u=i(59187),c=i(93030);const h={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:a.K}}},y=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const i=t.timeInfo.exportOptions;if(!i)return null;const r=i.timeOffset,n=d.j.fromJSON(i.timeOffsetUnits);return r&&n?new c.A({value:r,unit:n}):null}set timeInfo(e){(0,l.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,n.MZ)({type:u.A,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,n.MZ)({type:c.A})],t.prototype,"timeOffset",void 0),(0,r._)([(0,s.w)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,n.MZ)({value:null,type:p.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,n.MZ)(h)],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.TemporalLayer")],t),t}},83716:(e,t,i)=>{i.d(t,{A:()=>re});var r=i(35143),n=i(16868),s=i(53084),o=i(76460),a=i(77717),l=(i(16783),i(46053)),p=(i(81806),i(85842)),d=i(17707),u=i(49140),c=i(76797),h=i(19247),y=i(65215),m=i(23701),f=i(9624),g=i(13312),_=i(80963),b=i(31608),T=i(25515),E=i(72547),w=i(48094),v=i(40296),I=i(21009);i(47249);const A=(0,i(76350).p)(),M=e=>{let t=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,r._)([(0,l.MZ)(A.fields)],t.prototype,"fields",void 0),(0,r._)([(0,l.MZ)(A.fieldsIndex)],t.prototype,"fieldsIndex",void 0),t=(0,r._)([(0,p.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],t),t};var S=i(2948),N=i(65624),R=i(30218),L=i(74440),C=i(52908),x=i(37534),D=i(21617),k=i(5682),O=i(78817),F=i(95363),j=i(54490),U=i(44135),P=i(53430),Z=i(95114),G=i(27937),$=i(83982),q=i(5766),V=i(86616),B=i(49176),Q=i(77725),H=i(97015),z=i(30973),W=i(94439),J=i(59989);function Y(e){if(!e.json)return e;e.json.write=K(e.json.write);const t=e.json.origins;if(!t)return e;let i;for(i in t){const e=t[i];e&&(e.write=K(e.write))}return e}function K(e){return"object"==typeof e&&e?(!1!==e.enabled&&(e.overridePolicy=function(e){const{target:t,writer:i,overridePolicy:r,...n}=e;return function(e,t){const i=ee.call(this,e,t);return i.enabled?{...n,...i}:i}}(e)),e):!0===e?X():e}function X(){return{overridePolicy:ee}}function ee(e,t){const i=!!this.geometryType;let r={enabled:i};return i&&(r={...r,...te.call(this,e,t)}),r}function te(e,t){return{ignoreOrigin:this.originIdOf(t)>u.Gr.DEFAULTS}}let ie=class extends(M((0,R.FJ)((0,C.J)((0,L.F)((0,N.dM)((0,x.fY)((0,O.e)((0,k.j)((0,D.J)((0,a.P)(T.A))))))))))){constructor(e){var t;super(e),t=this,this.blendMode="normal",this.capabilities=(0,v.f)(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.displayFilterEnabled=!0,this.displayFilterInfo=null,this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=I.dr,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new J.A(e.port1,{channel:e,client:{queryFeatures:function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=H.A.fromJSON(e);return t.queryFeaturesJSON(r,i)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}get fields(){const e=[];return this.objectType?.properties?.forEach((t=>{const i="esriFieldTypeOID"===t.fieldType?"esriFieldTypeInteger":t.fieldType;e.push(U.A.fromJSON({name:t.name,type:i,alias:t.alias,defaultValue:t.defaultValue,editable:t.editable,nullable:t.nullable}))})),e.push(U.A.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),U.A.fromJSON({name:I.M1,type:"esriFieldTypeInteger",alias:I.M1,editable:!1}),U.A.fromJSON({name:I.BL,type:"esriFieldTypeInteger",alias:I.BL,editable:!1})),e}get geometryType(){if("link-chart"===this.parentCompositeLayer?.type)return"relationship"===this.graphType?"polyline":"point";const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.geometryType;return t&&"esriGeometryNull"!==t?b.gy.fromJSON(t):null}get geometryFieldName(){if("link-chart"===this.parentCompositeLayer?.type)return I.T1;const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name);return e?.name??null}get graphTypeName(){return this.objectType?.name}get hasM(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,i=t?this.objectType?.properties?.[t]:null;return i?.hasM??!1}get hasZ(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,i=t?this.objectType?.properties?.[t]:null;return i?.hasZ??!1}set labelingInfo(e){this._set("labelingInfo",e)}get labelingInfo(){if(this._isOverridden("labelingInfo"))return this._get("labelingInfo");const e=this.objectType.properties?(0,S.MY)(this.objectType.properties):"ESRI__ID";return"link-chart"===this.parentCompositeLayer.type?(0,S.iW)(this.graphType,this.graphTypeName,e):(0,S.e$)(this.graphTypeName,this.geometryType,e)}set renderer(e){(0,P.yp)(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const e=this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel,t=[...e?.entityTypes??[],...e?.relationshipTypes??[]].map((e=>e.name)).indexOf(this.graphTypeName),i=(0,S.Td)(t);if("link-chart"===this.parentCompositeLayer?.type){if("relationship"===this.graphType)return new q.A({type:"simple",symbol:(0,S.UT)(i)});const e=(0,V.r)((0,v.F0)(b.gy.toJSON("point")).renderer);return(0,W.dt)(e.symbol,i),e}const r=(0,V.r)((0,v.F0)(b.gy.toJSON(this.geometryType)).renderer);return(0,W.dt)(r.symbol,i),r}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??g.A.WGS84}set timeInfo(e){this._set("timeInfo",e)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(e){this._set("title",e)}writeTitle(e,t){t.title=e??"Layer"}createPopupTemplate(e){return(0,z.tn)(this,e)}createQuery(){return new H.A({where:"1=1",outFields:["*"]})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){return null}async queryFeatures(e,t){await this.load();const{resolvedQuery:i,queryEngine:r}=await this._setupQueryObjects(e),n=Q.A.fromJSON(await r.executeQuery(i.toJSON(),t?.signal));return n.features.forEach((e=>{e.sourceLayer=this})),n}async queryFeaturesJSON(e,t){await this.load();const{resolvedQuery:i,queryEngine:r}=await this._setupQueryObjects(e);return await r.executeQuery(i.toJSON(),t?.signal)}async queryFeatureCount(e,t){await this.load();const{resolvedQuery:i,queryEngine:r}=await this._setupQueryObjects(e);return r.executeQueryForCount(i.toJSON(),t?.signal)}async queryExtent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;await this.load();const i={...e,returnGeometry:!0},{resolvedQuery:r,queryEngine:n}=await this._setupQueryObjects(i),s=await n.executeQueryForExtent(r.toJSON(),t?.signal);let o;return o=null!=s.extent?.xmin&&null!=s.extent?.xmax&&null!=s.extent?.ymin&&null!=s.extent?.ymax?new c.A(s.extent):new c.A,{count:s.count,extent:o}}async queryObjectIds(e,t){await this.load();const i=H.A.from(e);let r;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)r=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(i,this,t);r=this.loadQueryEngine(e)}return await r.executeQueryForIds(i.toJSON(),t?.signal)}loadQueryEngine(e){const t=new E.A({geometryType:b.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),i=new w.do({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:b.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:this.timeInfo?.toJSON(),featureStore:t});return i.featureStore.addMany(e),i}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new H.A({where:"1=1",outFields:[I.dr]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}load(e){return this.addResolvingPromise(this.parent.load(e).then((()=>(0,P.sv)(this.timeInfo,this.fieldsIndex)))),Promise.resolve(this)}async _setupQueryObjects(e,t){const i=H.A.from(e),r=i.geometry;if(r&&!r.spatialReference?.isWGS84&&(await(0,f.initializeProjection)(r.spatialReference,_.KK),i.geometry=(0,f.project)(r instanceof y.A||r instanceof m.A||r instanceof h.A?r:r.extent,_.KK)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)return{resolvedQuery:i,queryEngine:this._cachedQueryEngine};const n=await this.parentCompositeLayer.dataManager.getData(i,this,t);return{resolvedQuery:i,queryEngine:this.loadQueryEngine(n)}}};(0,r._)([(0,l.MZ)(Y((0,s.o8)(N.sU)))],ie.prototype,"blendMode",void 0),(0,r._)([(0,l.MZ)()],ie.prototype,"capabilities",void 0),(0,r._)([(0,l.MZ)({json:{origins:{"web-scene":{write:!1}},write:X()}})],ie.prototype,"charts",void 0),(0,r._)([(0,l.MZ)({readOnly:!0})],ie.prototype,"defaultPopupTemplate",null),(0,r._)([(0,l.MZ)({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],ie.prototype,"definitionExpression",void 0),(0,r._)([(0,l.MZ)()],ie.prototype,"displayField",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(R.Dp)))],ie.prototype,"displayFilterEnabled",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(R.KV)))],ie.prototype,"displayFilterInfo",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(N.LF)))],ie.prototype,"effect",void 0),(0,r._)([(0,l.MZ)()],ie.prototype,"elevationInfo",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(L.Y)))],ie.prototype,"featureEffect",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(j.d)))],ie.prototype,"featureReduction",null),(0,r._)([(0,l.MZ)()],ie.prototype,"fields",null),(0,r._)([(0,l.MZ)()],ie.prototype,"geometryType",null),(0,r._)([(0,l.MZ)()],ie.prototype,"geometryFieldName",null),(0,r._)([(0,l.MZ)({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],ie.prototype,"graphType",void 0),(0,r._)([(0,l.MZ)({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],ie.prototype,"graphTypeName",null),(0,r._)([(0,l.MZ)()],ie.prototype,"hasM",null),(0,r._)([(0,l.MZ)()],ie.prototype,"hasZ",null),(0,r._)([(0,l.MZ)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],ie.prototype,"id",void 0),(0,r._)([(0,l.MZ)({type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",default:!1,write:{overridePolicy(){return{enabled:!!this.geometryType,alwaysWriteDefaults:!0,ignoreOrigin:!0}}}}})],ie.prototype,"labelsVisible",void 0),(0,r._)([(0,l.MZ)({type:[Z.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:function(e,t,i){const r=[["ESRI__AGGREGATION_COUNT",I.M1],["ESRI__ORIGIN_ID",I.Cz],["ESRI__DESTINATION_ID",I.KQ],["ESRI__LAYOUT_GEOMETRY",I.T1]];try{for(const t of e)for(const[e,i]of r)t.labelExpression=t.labelExpression?.replaceAll(e,i),t.labelExpressionInfo?.expression&&(t.labelExpressionInfo.expression=t.labelExpressionInfo.expression.replaceAll(e,i))}catch(n){o.A.getLogger(this).warn("Error updating labelingInfo",n)}return(0,G.w)(e,t,i)},write:X()}})],ie.prototype,"labelingInfo",null),(0,r._)([(0,l.MZ)({readOnly:!0,json:{read:!1,write:{writer(e,t){switch(this.parentCompositeLayer?.type){case"link-chart":t.layerType="LinkChartSubLayer";break;case"knowledge-graph":t.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],ie.prototype,"layerType",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(F.fV)))],ie.prototype,"legendEnabled",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(F.hG)))],ie.prototype,"maxScale",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(F.hn)))],ie.prototype,"minScale",void 0),(0,r._)([(0,l.MZ)()],ie.prototype,"objectIdField",void 0),(0,r._)([(0,l.MZ)()],ie.prototype,"objectType",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(F.ke)))],ie.prototype,"opacity",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(x.ne)))],ie.prototype,"orderBy",void 0),(0,r._)([(0,l.MZ)({clonable:!1})],ie.prototype,"parent",void 0),(0,r._)([(0,l.MZ)()],ie.prototype,"parentCompositeLayer",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(F.M6)))],ie.prototype,"popupEnabled",void 0),(0,r._)([(0,l.MZ)({type:n.A,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],ie.prototype,"popupTemplate",void 0),(0,r._)([(0,l.MZ)({type:Number,json:{write:{overridePolicy:te}}})],ie.prototype,"refreshInterval",void 0),(0,r._)([(0,l.MZ)({types:B.Hg,json:{name:"layerDefinition.drawingInfo.renderer",write:X()}})],ie.prototype,"renderer",null),(0,r._)([(0,l.MZ)()],ie.prototype,"source",void 0),(0,r._)([(0,l.MZ)()],ie.prototype,"spatialReference",null),(0,r._)([(0,l.MZ)({type:$.A,json:{name:"layerDefinition.timeInfo",write:!0,origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:!0},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:!0}}}})],ie.prototype,"timeInfo",null),(0,r._)([(0,l.MZ)({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],ie.prototype,"title",null),(0,r._)([(0,d.K)("title")],ie.prototype,"writeTitle",null),(0,r._)([(0,l.MZ)({json:{read:!1}})],ie.prototype,"type",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(O.B)))],ie.prototype,"useViewTime",void 0),(0,r._)([(0,l.MZ)({type:Boolean,json:{name:"visibility",write:X()}})],ie.prototype,"visible",void 0),ie=(0,r._)([(0,p.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],ie);const re=ie},83982:(e,t,i)=>{i.d(t,{A:()=>m});var r=i(35143),n=i(69098),s=i(42553),o=i(46053),a=(i(81806),i(76460),i(47249),i(28379)),l=i(85842),p=i(17707),d=i(59187),u=i(93030),c=i(67478);function h(e,t){return u.A.fromJSON({value:e,unit:t})}let y=class extends(n.A.ClonableMixin(s.A)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?d.A.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?h(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?h(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,r._)([(0,o.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],y.prototype,"cumulative",void 0),(0,r._)([(0,o.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],y.prototype,"endField",void 0),(0,r._)([(0,o.MZ)({type:d.A,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"fullTimeExtent",void 0),(0,r._)([(0,a.w)("fullTimeExtent",["timeExtent"])],y.prototype,"readFullTimeExtent",null),(0,r._)([(0,p.K)("fullTimeExtent")],y.prototype,"writeFullTimeExtent",null),(0,r._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"hasLiveData",void 0),(0,r._)([(0,o.MZ)({type:u.A,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"interval",void 0),(0,r._)([(0,a.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],y.prototype,"readInterval",null),(0,r._)([(0,p.K)("interval")],y.prototype,"writeInterval",null),(0,r._)([(0,o.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],y.prototype,"startField",void 0),(0,r._)([(0,o.MZ)((0,c.P6)("timeReference",!0))],y.prototype,"timeZone",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"trackIdField",void 0),(0,r._)([(0,o.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],y.prototype,"useTime",void 0),(0,r._)([(0,o.MZ)({type:[Date],json:{read:!1}})],y.prototype,"stops",void 0),y=(0,r._)([(0,l.$)("esri.layers.support.TimeInfo")],y);const m=y},84031:(e,t,i)=>{i.d(t,{T:()=>o});var r=i(50346),n=i(75540),s=i(22856);class o{constructor(){this._tasks=new Array,this._runningTasks=(0,n.v)(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(0===this.length)return s.G;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return++this._runningTasks.value,new Promise(((r,n)=>this._tasks.push(new a(r,n,e,t,i)))).finally((()=>--this._runningTasks.value))}unshift(e,t,i){return++this._runningTasks.value,new Promise(((r,n)=>this._tasks.unshift(new a(r,n,e,t,i)))).finally((()=>--this._runningTasks.value))}_process(e){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const i=(0,r.G4)(t.signal);if(i&&!t.abortCallback)t.reject((0,r.NK)());else{const n=i?t.abortCallback?.((0,r.NK)()):t.callback(e);(0,r.$X)(n)?n.then(t.resolve,t.reject):t.resolve(n)}}catch(o){t.reject(o)}return!0}cancelAll(){const e=(0,r.NK)();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0}}class a{constructor(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.resolve=e,this.reject=t,this.callback=i,this.signal=r,this.abortCallback=n}}},85646:(e,t,i)=>{i.d(t,{$C:()=>g,Hh:()=>o,J:()=>p,JT:()=>l,Tu:()=>m,Wg:()=>f,Xq:()=>b,i6:()=>T,pM:()=>y,tx:()=>a,vJ:()=>_});var r=i(28899);let n,s=null;function o(){return n||(n=i.e(3884).then(i.bind(i,83884)).then((e=>e.l)).then((e=>{let{default:t}=e;return t({locateFile:e=>(0,r.s)(`esri/libs/linkchartlayout/${e}`)})})).then((e=>{!function(e){s=e}(e)})),n)}var a,l,p,d;!function(e){e[e.None=0]="None",e[e.IsMovable=1]="IsMovable",e[e.IsGeographic=2]="IsGeographic",e[e.IsRoot=4]="IsRoot",e[e.IsOld=8]="IsOld"}(a||(a={})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Canceled=2]="Canceled"}(l||(l={})),function(e){e[e.Regular=0]="Regular",e[e.Curved=1]="Curved",e[e.Recursive=2]="Recursive"}(p||(p={})),function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.top=2]="top",e[e.bottom=3]="bottom"}(d||(d={}));const u={none:0,"start-only":1,"start-and-end":2};function c(e){const t={timeDirection:"right",timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:"start-and-end",showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0,...e?.toJSON()??{},eventsTicksVisualization:e?.eventsTicksVisualization??"start-and-end"};return{...t,timeDirection:{value:d[t.timeDirection]??d.right},eventsTicksVisualization:{value:u[t.eventsTicksVisualization]??u["start-and-end"]}}}function h(e,t,i,r,n,o){const a=i.length,p=n.length,d=Float64Array.BYTES_PER_ELEMENT,u=Uint32Array.BYTES_PER_ELEMENT,c=Uint8Array.BYTES_PER_ELEMENT,h=16+a*(c+2*d)+p*(2*u),y=s._malloc(h);try{const c=y+16-y%16,h=c+a*d,m=h+a*d,f=m+p*u,g=f+p*u,_=()=>[s.HEAPF64.subarray(c>>3,(c>>3)+a),s.HEAPF64.subarray(h>>3,(h>>3)+a),s.HEAPU32.subarray(m>>2,(m>>2)+p),s.HEAPU32.subarray(f>>2,(f>>2)+p),s.HEAPU8.subarray(g,g+a)],[b,T,E,w,v]=_();b.set(i),T.set(r),E.set(n),w.set(o),v.set(t);const I=e(a,g,c,h,p,m,f);let A=null,M=null;if(I.value===l.Success){const e=s.getLayoutLinksTypes(),t=s.getLayoutLinksVerticesEndIndices(),i=s.getLayoutLinksVertices(),r=s.countLayoutLinksVertices();!p||e&&t?r&&!i?I.value=l.Error:(A={types:new Uint8Array(s.HEAPU8.subarray(e,e+p)),vertexEndIndex:new Uint32Array(s.HEAPU32.subarray(t>>2,(t>>2)+p)),vertices:new Float64Array(s.HEAPF64.subarray(i>>3,(i>>3)+2*r))},M=s.getAuxiliaryGraphicElements()):I.value=l.Error}const[S,N,R,L,C]=_();return i.set(S),r.set(N),n.set(R),o.set(L),t.set(C),{status:I.value,links:A,graphics:M}}finally{s._free(y),s.cleanupLayout()}}var y,m,f,g,_,b,T,E,w;!function(e){e.getMinIdealEdgeLength=function(){return s.getMinIdealEdgeLength()},e.apply=function(e,t,i,r,n,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;return h(((t,i,r,n,o,d,u)=>s.applyForceDirectedLayout(e,t,i,r,n,o,d,u,a,l,p)),t,i,r,n,o)}}(y||(y={})),function(e){e.apply=function(e,t,i,r,n,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;return h(((t,i,r,n,o,d,u)=>s.applyCommunityLayout(e,t,i,r,n,o,d,u,a,l,p)),t,i,r,n,o)}}(m||(m={})),function(e){e.apply=function(e,t,i,r,n,o){return h(((t,i,r,n,o,a,l)=>s.applySimpleLayout(e,t,i,r,n,o,a,l)),t,i,r,n,o)}}(f||(f={})),function(e){e.apply=function(e,t,i,r,n,o){return h(((t,i,r,n,o,a,l)=>s.applyHierarchicalLayout(e,t,i,r,n,o,a,l)),t,i,r,n,o)}}(g||(g={})),function(e){e.apply=function(e,t,i,r,n,o){return h(((t,i,r,n,o,a,l)=>s.applyRadialTreeLayout(e,t,i,r,n,o,a,l)),t,i,r,n,o)}}(_||(_={})),function(e){e.apply=function(e,t,i,r,n,o){return h(((t,i,r,n,o,a,l)=>s.applySmartTreeLayout(e,t,i,r,n,o,a,l)),t,i,r,n,o)}}(b||(b={})),function(e){e.apply=function(e,t,i,r,n,o,a,p,d,u,y,m){return h(((t,i,r,a,p,h,f)=>{if(n.length!==t)return{value:l.Error};if(o.length!==t)return{value:l.Error};if(d.length!==p)return{value:l.Error};if(u.length!==p)return{value:l.Error};const g=Float64Array.BYTES_PER_ELEMENT,_=16,b=s._malloc(_+t*g),T=s._malloc(_+t*g),E=s._malloc(_+p*g),w=s._malloc(_+p*g),v=b+_-b%_,I=T+_-T%_,A=E+_-E%_,M=w+_-w%_;try{return s.HEAPF64.subarray(v>>3,(v>>3)+t).set(n),s.HEAPF64.subarray(I>>3,(I>>3)+t).set(o),s.HEAPF64.subarray(A>>3,(A>>3)+p).set(d),s.HEAPF64.subarray(M>>3,(M>>3)+p).set(u),s.applyChronologicalLayout(e,t,i,r,a,v,I,p,h,f,A,M,y,c(m))}finally{s._free(b),s._free(T),s._free(E),s._free(w)}}),t,i,r,a,p)}}(T||(T={})),function(e){e[e.Undirected=0]="Undirected",e[e.Directed=1]="Directed",e[e.Reversed=2]="Reversed"}(E||(E={})),function(e){e[e.ByCC_Raw=0]="ByCC_Raw",e[e.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",e[e.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(w||(w={}))},90115:(e,t,i)=>{i.d(t,{j:()=>r});const r=(0,i(45802).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},92115:(e,t,i)=>{i.d(t,{H:()=>l});var r,n=i(35143),s=i(42553),o=i(46053),a=(i(81806),i(76460),i(47249),i(85842));let l=r=class extends s.A{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,n._)([(0,o.MZ)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"name",void 0),(0,n._)([(0,o.MZ)({type:[String,Number],json:{write:{isRequired:!0}}})],l.prototype,"code",void 0),l=r=(0,n._)([(0,a.$)("esri.layers.support.CodedValue")],l)},93030:(e,t,i)=>{i.d(t,{A:()=>c});var r=i(35143),n=i(69098),s=i(42553),o=i(18288),a=i(46053),l=(i(81806),i(76460),i(47249),i(6409)),p=i(85842),d=i(90115);let u=class extends(n.A.ClonableMixin(s.A)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,o.t)(this.value,this.unit,"milliseconds")}};(0,r._)([(0,l.e)(d.j,{nonNullable:!0})],u.prototype,"unit",void 0),(0,r._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),u=(0,r._)([(0,p.$)("esri.time.TimeInterval")],u);const c=u},98476:(e,t,i)=>{var r;i.d(t,{M:()=>r}),function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"}(r||(r={}))}}]);
//# sourceMappingURL=635.4aebf0be.chunk.js.map