"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[14410,31933],{3454:(e,t,i)=>{i.d(t,{j:()=>s});var n=i(31633),o=i(14556);const s={unknown:1,inches:(0,n.oU)(1,"meters","inches"),feet:(0,n.oU)(1,"meters","feet"),"us-feet":(0,n.oU)(1,"meters","us-feet"),yards:(0,n.oU)(1,"meters","yards"),miles:(0,n.oU)(1,"meters","miles"),"nautical-miles":(0,n.oU)(1,"meters","nautical-miles"),millimeters:(0,n.oU)(1,"meters","millimeters"),centimeters:(0,n.oU)(1,"meters","centimeters"),decimeters:(0,n.oU)(1,"meters","decimeters"),meters:(0,n.oU)(1,"meters","meters"),kilometers:(0,n.oU)(1,"meters","kilometers"),"decimal-degrees":1/(0,n.vl)(1,"meters",o.$O.radius)}},10286:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(35143),o=i(91967),s=i(46053),r=(i(81806),i(76460),i(47249),i(85842));let l=class extends o.A{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"colorSelection",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"dynamicScaleToggle",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"gridEnabledToggle",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"numericInputs",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"gridSnapEnabledToggle",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"lineIntervalInput",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"outOfScaleWarning",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"placementButtons",void 0),(0,n._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"rotateWithMapToggle",void 0),l=(0,n._)([(0,r.$)("esri.widgets.support.GridControls.VisibleElements")],l);const a=l},12254:(e,t,i)=>{function n(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,n=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);i.push(...n)}}i.d(t,{U:()=>n})},15011:(e,t,i)=>{i.d(t,{EB:()=>h,Im:()=>m,Mj:()=>p,Ui:()=>g,w2:()=>y});var n=i(91967),o=i(94643),s=i(39314);const r=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function l(e){return e instanceof n.A}function a(e){return e instanceof o.A?Object.keys(e.items):l(e)?(0,s.oY)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof o.A?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function u(e,t){const i=e.diff;if(i&&"function"==typeof i)return i(e,t);const n=a(e),o=a(t);if(0===n.length&&0===o.length)return;if(!n.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const s=o.filter((e=>!n.includes(e))),p=n.filter((e=>!o.includes(e))),h=n.filter((i=>o.includes(i)&&c(e,i)!==c(t,i))).concat(s,p).sort(),y=d(e);if(y&&r.has(y)&&h.length)return{type:"complete",oldValue:e,newValue:t};let g;const m=l(e)&&l(t);for(const r of h){const n=c(e,r),o=c(t,r);let s;if((m||"function"!=typeof n&&"function"!=typeof o)&&n!==o&&(null!=n||null!=o)){if(i&&i[r]&&"function"==typeof i[r])s=i[r]?.(n,o);else if(n instanceof Date&&o instanceof Date){if(n.getTime()===o.getTime())continue;s={type:"complete",oldValue:n,newValue:o}}else s="object"==typeof n&&"object"==typeof o&&d(n)===d(o)?u(n,o):{type:"complete",oldValue:n,newValue:o};null!=s&&(null!=g?g.diff[r]=s:g={type:"partial",diff:{[r]:s}})}}return g}function p(e,t){return h(e,t)}function h(e,t){if(null==e)return!1;const i=t.split(".");let n=e;for(const o of i){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;{const e=n.diff[o];if(!e)return!1;n=e}}return!0}function y(e,t){if(!e)return!1;if("partial"===e.type){const i=Object.keys(e.diff);return 1===i.length&&i[0]===t}return!1}function g(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:u(e,t)}function m(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case"partial":for(const t in e.diff)if(!m(e.diff[t]))return!1;return!0}}},19555:(e,t,i)=>{i.d(t,{$A:()=>M,Bw:()=>m,C:()=>o,Cc:()=>w,Io:()=>y,Ln:()=>h,Om:()=>f,Re:()=>l,S8:()=>b,T9:()=>u,Vj:()=>O,WQ:()=>r,ZF:()=>T,aI:()=>L,e$:()=>S,g7:()=>Z,hG:()=>g,hZ:()=>s,hs:()=>p,jb:()=>I,jk:()=>d,l0:()=>C,m3:()=>_,t2:()=>k,xg:()=>P,ze:()=>v});var n=i(53494);function o(e,t){return e[0]=t[0],e[1]=t[1],e}function s(e,t,i){return e[0]=t,e[1]=i,e}function r(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function l(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function a(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function c(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function d(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function u(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function p(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function h(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e}function y(e,t){const i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)}function g(e,t){const i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function m(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function _(e){const t=e[0],i=e[1];return t*t+i*i}function v(e,t){return e[0]=-t[0],e[1]=-t[1],e}function b(e,t){const i=t[0],n=t[1];let o=i*i+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e}function f(e,t){return e[0]*t[0]+e[1]*t[1]}function M(e,t,i){const n=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=n,e}function w(e,t,i,n){const o=t[0],s=t[1];return e[0]=o+n*(i[0]-o),e[1]=s+n*(i[1]-s),e}function T(e,t,i){const n=t[0],o=t[1];return e[0]=i[0]*n+i[2]*o,e[1]=i[1]*n+i[3]*o,e}function C(e,t,i){const n=t[0],o=t[1];return e[0]=i[0]*n+i[2]*o+i[4],e[1]=i[1]*n+i[3]*o+i[5],e}function S(e,t,i,n){const o=t[0]-i[0],s=t[1]-i[1],r=Math.sin(n),l=Math.cos(n);return e[0]=o*l-s*r+i[0],e[1]=o*r+s*l+i[1],e}function Z(e,t){const i=e[0],n=e[1],o=t[0],s=t[1];let r=i*i+n*n;r>0&&(r=1/Math.sqrt(r));let l=o*o+s*s;l>0&&(l=1/Math.sqrt(l));const a=(i*o+n*s)*r*l;return a>1?0:a<-1?Math.PI:Math.acos(a)}function k(e,t){return e[0]===t[0]&&e[1]===t[1]}function L(e,t){const i=e[0],o=e[1],s=t[0],r=t[1],l=(0,n.FD)();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-r)<=l*Math.max(1,Math.abs(o),Math.abs(r))}function O(e,t,i,n,o){let s=t[0]-i[0],r=t[1]-i[1];const l=(n[0]*s+n[1]*r)*(o-1);return s=n[0]*l,r=n[1]*l,e[0]=t[0]+s,e[1]=t[1]+r,e}const E=m,I=l,A=a,x=c,P=y,B=g,V=_;Object.freeze(Object.defineProperty({__proto__:null,add:r,angle:Z,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},copy:o,cross:M,dist:P,distance:y,div:x,divide:c,dot:f,equals:L,exactEquals:k,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},len:E,length:m,lerp:w,max:u,min:d,mul:A,multiply:a,negate:v,normalize:b,projectAndScale:O,random:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=2*(0,n.Ov)()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e},rotate:S,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:p,scaleAndAdd:h,set:s,sqrDist:B,sqrLen:V,squaredDistance:g,squaredLength:_,str:function(e){return"vec2("+e[0]+", "+e[1]+")"},sub:I,subtract:l,transformMat2:T,transformMat2d:C,transformMat3:function(e,t,i){const n=t[0],o=t[1];return e[0]=i[0]*n+i[3]*o+i[6],e[1]=i[1]*n+i[4]*o+i[7],e},transformMat4:function(e,t,i){const n=t[0],o=t[1];return e[0]=i[0]*n+i[4]*o+i[12],e[1]=i[1]*n+i[5]*o+i[13],e}},Symbol.toStringTag,{value:"Module"}))},19898:(e,t,i)=>{i.d(t,{R:()=>o});var n=i(50076);let o=class e{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.major=e,this.minor=t,this._context=i}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",i=this._context&&this._context+" ";throw new n.A(t+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[o,s]=t.split("."),r=/^\s*\d+\s*$/;if(!o?.match||!r.test(o))throw new n.A((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s?.match||!r.test(s))throw new n.A((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const l=parseInt(o,10),a=parseInt(s,10);return new e(l,a,i)}}},25515:(e,t,i)=>{i.d(t,{A:()=>f});var n=i(35143),o=i(3825),s=i(50076),r=i(54099),l=i(5632),a=i(49304),c=i(76460),d=i(50346),u=i(90534),p=i(46053),h=(i(81806),i(47249),i(85842)),y=i(76797),g=i(13312),m=i(86560);var _=i(59187);let v=0,b=class extends(r.A.EventedMixin(l.A.IdentifiableMixin(a.A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new y.A(-180,-90,180,90,g.A.WGS84),this.id=Date.now().toString(16)+"-layer-"+v++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=g.A.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([i.e(70652),i.e(62544)]).then(i.bind(i,62544))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:n}=await Promise.all([i.e(9624),i.e(70652),i.e(2487)]).then(i.bind(i,2487));try{return await n(t)}catch(o){const e=t?.portalItem,i=e?.id||"unset",n=e?.portal?.url||m.A.portalUrl;throw c.A.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+i+"')",o),o}}(e)}initialize(){this.when().catch((e=>{(0,d.zf)(e)||c.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,u.An)(this.url)}createLayerView(e,t){return Promise.reject(new s.A("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,o.A)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.A("layer:no-attribution-data","Layer does not have attribution data")}};(0,n._)([(0,p.MZ)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,n._)([(0,p.MZ)({readOnly:!0})],b.prototype,"effectiveVisible",null),(0,n._)([(0,p.MZ)({type:y.A})],b.prototype,"fullExtent",void 0),(0,n._)([(0,p.MZ)({readOnly:!0})],b.prototype,"hasAttributionData",null),(0,n._)([(0,p.MZ)({type:String,clonable:!1})],b.prototype,"id",void 0),(0,n._)([(0,p.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,n._)([(0,p.MZ)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,n._)([(0,p.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,n._)([(0,p.MZ)({clonable:!1})],b.prototype,"parent",void 0),(0,n._)([(0,p.MZ)({readOnly:!0})],b.prototype,"parsedUrl",null),(0,n._)([(0,p.MZ)({type:Boolean,readOnly:!0})],b.prototype,"persistenceEnabled",void 0),(0,n._)([(0,p.MZ)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,n._)([(0,p.MZ)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,n._)([(0,p.MZ)({type:g.A})],b.prototype,"spatialReference",void 0),(0,n._)([(0,p.MZ)({type:String})],b.prototype,"title",void 0),(0,n._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,n._)([(0,p.MZ)()],b.prototype,"url",void 0),(0,n._)([(0,p.MZ)({type:_.A})],b.prototype,"visibilityTimeExtent",void 0),(0,n._)([(0,p.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0),b=(0,n._)([(0,h.$)("esri.layers.Layer")],b);const f=b},31933:(e,t,i)=>{i.d(t,{BR:()=>b,CF:()=>v,Eq:()=>y,F2:()=>d,Ov:()=>g,Qz:()=>c,Rv:()=>l,Sv:()=>u,TU:()=>h,V0:()=>r,W_:()=>m,XX:()=>p,cM:()=>a,tk:()=>f,wI:()=>_,yZ:()=>s});var n=i(55171),o=i(3825);function s(e){return null!=e&&"object"==typeof e&&"type"in e&&"feature"===e.type}function r(e){return null!=e&&"object"==typeof e&&"type"in e&&"graphics"===e.type}function l(e){return null!=e&&"object"==typeof e&&"type"in e&&"map-notes"===e.type&&"sublayers"in e}function a(e){return null!=e&&"object"==typeof e&&"type"in e&&"knowledge-graph"===e.type&&"layers"in e}function c(e){return null!=e&&"object"==typeof e&&"type"in e&&"link-chart"===e.type&&"layers"in e}function d(e){return null!=e&&"object"==typeof e&&"type"in e&&"subtype-group"===e.type&&"sublayers"in e}function u(e){return"subtype-sublayer"===e?.type}const p={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function h(e){const t=e?.type;return"building-scene"===t||"integrated-mesh"===t||"point-cloud"===t||"scene"===t}function y(e){return"integrated-mesh"===e||"integrated-mesh-3dtiles"===e}function g(e){return"feature"===e?.type&&!e.url&&"memory"===e.source?.type}function m(e){const t=e?.type;return("feature"===t||"subtype-group"===t||"oriented-imagery"===t)&&"feature-layer"===e?.source?.type}async function _(e,t){const i=n.id?.findServerInfo(e);if(null!=i?.currentVersion)return i.owningSystemUrl||null;const s=e.toLowerCase().indexOf("/rest/services");if(-1===s)return null;const r=`${e.slice(0,s)}/rest/info`,l=null!=t?t.signal:null,{data:a}=await(0,o.A)(r,{query:{f:"json"},responseType:"json",signal:l});return a?.owningSystemUrl||null}function v(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function b(e){return v(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function f(e){return!!function(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}},42052:(e,t,i)=>{function n(e){return null!=e&&"object"==typeof e&&"declaredClass"in e&&"esri.WebMap"===e.declaredClass}i.d(t,{Y:()=>o,r:()=>n});const o=new(i(90761).R)(2,33)},43047:(e,t,i)=>{i.d(t,{a:()=>b,b:()=>d,c:()=>o,d:()=>p,e:()=>f,f:()=>y,g:()=>r,h:()=>m,j:()=>h,l:()=>_,n:()=>g,s:()=>s,t:()=>v});var n=i(53494);function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e,t,i,n,o){return e[0]=t,e[1]=i,e[2]=n,e[3]=o,e}function r(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function l(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function a(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function c(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function d(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function u(e,t){const i=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(i*i+n*n+o*o+s*s)}function p(e,t){const i=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],s=t[3]-e[3];return i*i+n*n+o*o+s*s}function h(e){const t=e[0],i=e[1],n=e[2],o=e[3];return Math.sqrt(t*t+i*i+n*n+o*o)}function y(e){const t=e[0],i=e[1],n=e[2],o=e[3];return t*t+i*i+n*n+o*o}function g(e,t){const i=t[0],n=t[1],o=t[2],s=t[3];let r=i*i+n*n+o*o+s*s;return r>0&&(r=1/Math.sqrt(r),e[0]=i*r,e[1]=n*r,e[2]=o*r,e[3]=s*r),e}function m(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function _(e,t,i,n){const o=t[0],s=t[1],r=t[2],l=t[3];return e[0]=o+n*(i[0]-o),e[1]=s+n*(i[1]-s),e[2]=r+n*(i[2]-r),e[3]=l+n*(i[3]-l),e}function v(e,t,i){const n=t[0],o=t[1],s=t[2],r=t[3];return e[0]=i[0]*n+i[4]*o+i[8]*s+i[12]*r,e[1]=i[1]*n+i[5]*o+i[9]*s+i[13]*r,e[2]=i[2]*n+i[6]*o+i[10]*s+i[14]*r,e[3]=i[3]*n+i[7]*o+i[11]*s+i[15]*r,e}function b(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function f(e,t){const i=e[0],o=e[1],s=e[2],r=e[3],l=t[0],a=t[1],c=t[2],d=t[3],u=(0,n.FD)();return Math.abs(i-l)<=u*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-a)<=u*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(s-c)<=u*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(r-d)<=u*Math.max(1,Math.abs(r),Math.abs(d))}const M=l,w=a,T=c,C=u,S=p,Z=h,k=y;Object.freeze(Object.defineProperty({__proto__:null,add:r,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:o,copyVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:C,distance:u,div:T,divide:c,dot:m,equals:f,exactEquals:b,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:Z,length:h,lerp:_,max:function(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e},min:function(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e},mul:w,multiply:a,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:g,random:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=n.Ov;let o,s,r,l,a,c;do{o=2*i()-1,s=2*i()-1,a=o*o+s*s}while(a>=1);do{r=2*i()-1,l=2*i()-1,c=r*r+l*l}while(c>=1);const d=Math.sqrt((1-a)/c);return e[0]=t*o,e[1]=t*s,e[2]=t*r*d,e[3]=t*l*d,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:d,scaleAndAdd:function(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e},set:s,sqrDist:S,sqrLen:k,squaredDistance:p,squaredLength:y,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:M,subtract:l,transformMat4:v,transformQuat:function(e,t,i){const n=t[0],o=t[1],s=t[2],r=i[0],l=i[1],a=i[2],c=i[3],d=c*n+l*s-a*o,u=c*o+a*n-r*s,p=c*s+r*o-l*n,h=-r*n-l*o-a*s;return e[0]=d*c+h*-r+u*-a-p*-l,e[1]=u*c+h*-l+p*-r-d*-a,e[2]=p*c+h*-a+d*-l-u*-r,e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},44680:(e,t,i)=>{function n(){return[1,0,0,0,1,0,0,0,1]}function o(e,t,i,n,o,s,r,l,a){return[e,t,i,n,o,s,r,l,a]}i.d(t,{fA:()=>o,vt:()=>n,zK:()=>s});const s=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:n,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},47818:(e,t,i)=>{function n(e){return null!=e&&"object"==typeof e&&"2d"===e.type&&"linkchart"===e.view2dType}i.d(t,{O:()=>n})},55855:(e,t,i)=>{function n(){return[0,0,0,0]}function o(e){return[e[0],e[1],e[2],e[3]]}function s(e,t,i,n){return[e,t,i,n]}function r(e,t,i,n){return[e,t,i,n]}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];const i=Math.min(4,e.length);for(let n=0;n<i;++n)t[n]=e[n];return t}function a(){return[0,0,0,0]}function c(){return s(1,1,1,1)}function d(){return s(1,0,0,0)}function u(){return s(0,1,0,0)}function p(){return s(0,0,1,0)}function h(){return s(0,0,0,1)}i.d(t,{CN:()=>r,Un:()=>g,ci:()=>l,fA:()=>s,o8:()=>o,uY:()=>y,vt:()=>n});const y=[0,0,0,0],g=c(),m=d(),_=u(),v=p(),b=h();Object.freeze(Object.defineProperty({__proto__:null,ONES:g,UNIT_W:b,UNIT_X:m,UNIT_Y:_,UNIT_Z:v,ZEROS:y,clone:o,create:n,createView:function(e,t){return new Float64Array(e,t,4)},freeze:r,fromArray:l,fromValues:s,ones:c,unitW:h,unitX:d,unitY:u,unitZ:p,zeros:a},Symbol.toStringTag,{value:"Module"}))},56807:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ut});var n=i(35143),o=(i(11265),i(18690)),s=i(54901),r=i(76460),l=i(30726),a=i(50346),c=i(68134),d=i(46053),u=(i(81806),i(85842)),p=i(73265),h=i(25329),y=i(14240),g=i(91967),m=(i(47249),i(10286));let _=class extends g.A{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new m.A({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"enabledToggle",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"featureEnabledToggle",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"gridEnabledToggle",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"header",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"layerList",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"gridControls",void 0),(0,n._)([(0,d.MZ)({type:m.A,nonNullable:!0})],_.prototype,"gridControlsElements",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"layerListToggleLayersButton",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],_.prototype,"selfEnabledToggle",void 0),_=(0,n._)([(0,u.$)("esri.widgets.support.SnappingControls.VisibleElements")],_);const v=_;let b=class extends g.A{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"point",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"polyline",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"polygon",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"rectangle",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"circle",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"multipoint",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"mesh",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"freehandPolyline",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"freehandPolygon",void 0),b=(0,n._)([(0,u.$)("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],b);let f=class extends g.A{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};(0,n._)([(0,d.MZ)({nonNullable:!0})],f.prototype,"rectangle-selection",void 0),(0,n._)([(0,d.MZ)({nonNullable:!0})],f.prototype,"lasso-selection",void 0),(0,n._)([(0,d.MZ)({nonNullable:!0})],f.prototype,"custom-selection",void 0),f=(0,n._)([(0,u.$)("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],f);let M=class extends g.A{constructor(e){super(e),this.createTools=new b,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new f,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new v,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};(0,n._)([(0,d.MZ)({type:b,nonNullable:!0})],M.prototype,"createTools",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"directionModePicker",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"duplicateButton",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"deleteButton",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"selectionCountLabel",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"labelsToggle",void 0),(0,n._)([(0,d.MZ)({type:f,nonNullable:!0})],M.prototype,"selectionTools",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"settingsMenu",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"snappingControls",void 0),(0,n._)([(0,d.MZ)({type:v,nonNullable:!0})],M.prototype,"snappingControlsElements",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"tooltipsToggle",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"undoRedoMenu",void 0),M=(0,n._)([(0,u.$)("esri.widgets.Sketch.VisibleElements")],M);var w=i(21270);const T=1,C={s:32,m:48,l:64},S={horizontal:{s:16,m:16,l:24},vertical:{s:16,m:24,l:40}},Z={splitButton:{horizontal:"chevron-down",vertical:"ellipsis"},overflow:"ellipsis"};function k(e,t){return e.vnodeSelector===t?[e]:e.children?.flatMap((e=>k(e,t)))??[]}const L=e=>{let t=class extends e{constructor(){super(...arguments),this.priority=0,this.scale="m",this.slot=void 0,this.lastActiveKey=null,this.layout="horizontal"}destroy(){this.measurementManager?.managedElements.remove(this),this.measurementManager=null}set measurementManager(e){const t=this._get("measurementManager");e!==t&&(t&&t.managedElements.remove(this),this._set("measurementManager",e),e?.managedElements.add(this))}set budgetedLength(e){this.budgetedLength!==e&&(this._set("budgetedLength",e),this.scheduleRender())}get actionChildren(){return this.children?.flatMap((e=>k(e,"calcite-action")))??[]}get activeChildElement(){const e=this.actionChildren.find((e=>!0===e.properties?.active));return e?(this._set("lastActiveKey",e.properties?.key),e):this.lastActiveKey?this.actionChildren.find((e=>e.properties?.key===this.lastActiveKey)):void 0}_handleClick(e){e?.dataset&&"dataset"in e&&e.dataset.actionKey&&(this.lastActiveKey=e.dataset.actionKey)}};return(0,n._)([(0,d.MZ)()],t.prototype,"priority",void 0),(0,n._)([(0,d.MZ)()],t.prototype,"measurementManager",null),(0,n._)([(0,d.MZ)()],t.prototype,"budgetedLength",null),(0,n._)([(0,d.MZ)()],t.prototype,"actionChildren",null),(0,n._)([(0,d.MZ)()],t.prototype,"activeChildElement",null),(0,n._)([(0,d.MZ)()],t.prototype,"scale",void 0),(0,n._)([(0,d.MZ)()],t.prototype,"slot",void 0),(0,n._)([(0,d.MZ)()],t.prototype,"lastActiveKey",void 0),(0,n._)([(0,d.MZ)()],t.prototype,"layout",void 0),t=(0,n._)([(0,u.$)("esri.widgets.Sketch.support.ResponsiveToolbar.ToolbarGroupBase")],t),t};var O=i(76099),E=i(54761);const I=Symbol("on-resize-handle-key");let A=class extends(L(h.A)){constructor(e){super(e),this._measuredWidth=0,this._measuredHeight=0,this._measuredElement=null}destroy(){this._measuredElement=null}get lengthOptions(){return["horizontal"===this.layout?this._measuredWidth:this._measuredHeight]}render(){return(0,E.K)("div",{afterCreate:e=>{this._measuredElement=e.firstElementChild,this.addHandles((0,O.EV)(this._measuredElement,(()=>{this._measuredWidth=this._measuredElement?.clientWidth??0,this._measuredHeight=this._measuredElement?.clientHeight??0})),I)},afterRemoved:()=>this.removeHandles(I)},this.children)}};(0,n._)([(0,d.MZ)()],A.prototype,"_measuredWidth",void 0),(0,n._)([(0,d.MZ)()],A.prototype,"_measuredHeight",void 0),(0,n._)([(0,d.MZ)()],A.prototype,"lengthOptions",null),(0,n._)([(0,d.MZ)()],A.prototype,"_measuredElement",void 0),A=(0,n._)([(0,u.$)("esri.widgets.Sketch.support.ResponsiveToolbar.MeasuredContentGroup")],A);const x=A;var P=i(94126),B=i(63582);let V=class extends(L(h.A)){constructor(e){super(e),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return(0,P.W)({action:()=>Promise.all([i.e(49408),i.e(85375)]).then(i.bind(i,85375)),"action-group":()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(3671),i.e(97577)]).then(i.bind(i,97577)),"action-menu":()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(3671)]).then(i.bind(i,3671))})}get minimumLength(){const{actionChildren:e,scale:t}=this;return e.length?this.allowCollapse?T+C[t]*Math.min(e.length,2):T+C[t]*e.length:0}get lengthOptions(){const{actionChildren:e,scale:t,minimumLength:i,allowCollapse:n,priority:o}=this,s=[i];if(e.length<=2||!n||o<1)return s;for(let r=1;r<e.length-1;r++)s.push(i+C[t]*r);return s}render(){if(!this.actionChildren.length)return(0,E.K)(E.w,null,void 0);const{budgetedLength:e,actionChildren:t,activeChildElement:i,layout:n,slot:o,scale:s}=this,r=Math.floor(e/C[s]),l=[],a=[];if(r>=t.length)l.push(...t);else{const e=i??l.at(0);if(l.push(...t.slice(0,r-1)),a.push(...t.slice(r-1)),e&&a.includes(e)){const[t]=a.splice(a.indexOf(e),1),i=l.pop();l.push(t),i&&a.unshift(i)}}return(0,E.K)("calcite-action-group",{key:"overflow-button-group",layout:n,onclick:e=>this._handleClick(e.target),slot:o},l.map((e=>this._renderManagedAction(e))),a.length>0?(0,E.K)("calcite-action-menu",{key:"split-button-dropdown",label:this.messagesCommon.more,overlayPositioning:"fixed"},(0,E.K)("calcite-action",{icon:Z.overflow,key:"split-button-dropdown-trigger",scale:s,slot:"trigger",text:this.messagesCommon.more}),a.map((e=>this._renderManagedAction(e)))):void 0)}_renderManagedAction(e){return(0,E.K)("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};V.vnodeSelector="calcite-action-group",(0,n._)([(0,d.MZ)()],V.prototype,"allowCollapse",void 0),(0,n._)([(0,d.MZ)()],V.prototype,"minimumLength",null),(0,n._)([(0,d.MZ)(),(0,B.G)("esri/t9n/common")],V.prototype,"messagesCommon",void 0),(0,n._)([(0,d.MZ)()],V.prototype,"lengthOptions",null),V=(0,n._)([(0,u.$)("esri.widgets.Sketch.support.ResponsiveToolbar.OverflowGroup")],V);const $=V;var D=i(94643);let R=class extends g.A{constructor(){super(...arguments),this.measuredElement=null,this.managedElements=new D.A,this.availableLength=0,this.layout="horizontal",this._resizeObserver=new ResizeObserver((()=>{this._measure()}))}get _sortedElements(){return[...this.managedElements].sort(((e,t)=>t.priority-e.priority))}connect(e){this._resizeObserver.disconnect(),this.measuredElement=e,this._resizeObserver.observe(e),this._measure()}allocate(){const e=new Map,{availableLength:t,_sortedElements:i}=this;let n=0;for(const o of i){const t=o.lengthOptions[0];e.set(o,t),n+=t}for(const o of i)for(;n<t;){const i=e.get(o);if(!i)break;const s=o.lengthOptions.find((e=>e>i));if(!s)break;const r=n-i+s;if(r>t)break;e.set(o,s),n=r}for(const[o,s]of e)o.budgetedLength=s}_measure(){const e=this.measuredElement;this.availableLength=e?"horizontal"===this.layout?e.clientWidth??0:e.clientHeight??0:0,this.allocate()}destroy(){this._resizeObserver.disconnect()}};(0,n._)([(0,d.MZ)()],R.prototype,"measuredElement",void 0),(0,n._)([(0,d.MZ)()],R.prototype,"managedElements",void 0),(0,n._)([(0,d.MZ)()],R.prototype,"_sortedElements",null),(0,n._)([(0,d.MZ)()],R.prototype,"availableLength",void 0),(0,n._)([(0,d.MZ)()],R.prototype,"layout",void 0),R=(0,n._)([(0,u.$)("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbarManager")],R);const K=R,N="esri-split-button--split-part";let z=class extends(L(h.A)){constructor(e){super(e),this.messagesCommon=null}loadDependencies(){return(0,P.W)({action:()=>Promise.all([i.e(49408),i.e(85375)]).then(i.bind(i,85375)),"action-group":()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(3671),i.e(97577)]).then(i.bind(i,97577)),"action-menu":()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(3671)]).then(i.bind(i,3671))})}get minimumLength(){const e=this.actionChildren;return e.length?1===e.length?C[this.scale]+T:C[this.scale]+S[this.layout][this.scale]+T:0}get lengthOptions(){const{actionChildren:e,minimumLength:t,layout:i,scale:n,priority:o}=this;if(e.length<2||o<0)return[t];const s=T+C[n]*e.length;return[T+C[n]+S[i][n],s]}render(){if(!this.actionChildren.length)return(0,E.K)(E.w,null,void 0);const{actionChildren:e,minimumLength:t,budgetedLength:i,layout:n,slot:o}=this,s=e.length<2||i>t;return(0,E.K)("calcite-action-group",{key:"split-button-group",layout:n,onclick:e=>this._handleClick(e.target),slot:o},s?this._renderUnSplit():this._renderSplit())}_renderSplit(){const{activeChildElement:e,layout:t,actionChildren:i,scale:n,messagesCommon:o}=this,s=e??i.at(0);if(!s)return;const r=i.filter((e=>e!==s));return[this._renderManagedAction(s),(0,E.K)("calcite-action-menu",{key:"split-button-dropdown",label:o.more,overlayPositioning:"fixed",placement:"horizontal"===t?"bottom-end":"right-end"},(0,E.K)("calcite-action",{class:`${N}--${t}--${this.scale}`,compact:"horizontal"===t,icon:Z.splitButton[t],key:"split-button-dropdown-trigger",scale:n,slot:"trigger",text:o.more}),r?.map((e=>this._renderManagedAction(e))))]}_renderUnSplit(){return this.actionChildren.map((e=>this._renderManagedAction(e)))}_renderManagedAction(e){return(0,E.K)("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};z.vnodeSelector="calcite-action-group",(0,n._)([(0,d.MZ)()],z.prototype,"minimumLength",null),(0,n._)([(0,d.MZ)()],z.prototype,"lengthOptions",null),(0,n._)([(0,d.MZ)(),(0,B.G)("esri/t9n/common")],z.prototype,"messagesCommon",void 0),z=(0,n._)([(0,u.$)("esri.widgets.Sketch.support.ResponsiveToolbar.SplitButton")],z);const F="esri-responsive-toolbar",H={rulerBase:`${F}__ruler`,rulerBarHorizontal:`${F}__ruler--bar`,rulerBarVertical:`${F}__ruler--bar--vertical`,rulerPadVertical:`${F}__ruler--pad--vertical`,rulerPadHorizontal:`${F}__ruler--pad--horizontal`,bar:`${F}__bar`,barHorizontal:`${F}__bar--horizontal`,barVertical:`${F}__bar--vertical`,pad:`${F}__pad`,padVertical:`${F}__pad--vertical`,padHorizontal:`${F}__pad--horizontal`};let G=class extends h.A{constructor(e){super(e),this.scale="m",this.barStyle="floating",this._measurementManager=new K,this._managedWidgets=new Map}loadDependencies(){return(0,P.W)({"action-bar":()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(3671),i.e(143)]).then(i.bind(i,143)),"action-pad":()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(3671),i.e(4535)]).then(i.bind(i,4535))})}destroy(){this._measurementManager=(0,l.pR)(this._measurementManager),this._managedWidgets.forEach((e=>e.destroy())),this._managedWidgets.clear()}set layout(e){const t=this._get("layout");this._set("layout",e),this._measurementManager&&(this._measurementManager.layout=e),t!==e&&this.scheduleRender()}render(){const{layout:e,scale:t,barStyle:i}=this,n={layout:e,scale:t,expandDisabled:!0,key:"measured-toolbar"},o="docked"===i?"vertical"===e?H.rulerBarVertical:H.rulerBarHorizontal:"horizontal"===e?H.rulerPadHorizontal:H.rulerPadVertical;return(0,E.K)("div",null,(0,E.K)("div",{afterCreate:e=>{this._measurementManager?.connect(e)},class:this.classes(H.rulerBase,o)}),"docked"===i?(0,E.K)("calcite-action-bar",{...n,classes:{[H.barHorizontal]:"horizontal"===this.layout,[H.barVertical]:"vertical"===this.layout,[H.bar]:!0},overflowActionsDisabled:!0},this._renderChildren()):(0,E.K)("calcite-action-pad",{...n,class:this.classes(H.pad,"horizontal"===e?H.padHorizontal:H.padVertical)},this._renderChildren()))}_renderChildren(){if(!this.children)return;const e=this.children.filter((e=>void 0!==e.properties?.key&&"group-kind"in e.properties)),t=new Set,i=e.map((e=>{const i=e.properties,n=i.key;t.add(n);const o="docked"===this.barStyle?i.slot??void 0:void 0,s=i.priority??0,r=i["group-kind"]??"overflow-group",l=i["allow-collapse"]??!0,a=this._managedWidgets.get(n);if(a)return a.children=e.children,a.priority=s,"allowCollapse"in a&&(a.allowCollapse=l),a.slot=o,a.layout=this.layout,a.scale=this.scale,a.measurementManager=this._measurementManager,a;const c={scale:this.scale,priority:s,measurementManager:this._measurementManager,children:e.children,slot:o,layout:this.layout};switch(r){case"split-button":{const e=new z({...c});return this._managedWidgets.set(n,e),e}case"overflow-group":{const e=new $({...c,allowCollapse:l});return this._managedWidgets.set(n,e),e}case"measured-content":{const e=new x({...c});return this._managedWidgets.set(n,e),e}}})).filter(o.Ru);return Array.from(this._managedWidgets.keys()).filter((e=>!t.has(e))).forEach((e=>{this._managedWidgets.get(e)?.destroy(),this._managedWidgets.delete(e)})),this._measurementManager?.allocate(),i.map((e=>e.render()))}};(0,n._)([(0,d.MZ)()],G.prototype,"scale",void 0),(0,n._)([(0,d.MZ)({value:"horizontal"})],G.prototype,"layout",null),(0,n._)([(0,d.MZ)()],G.prototype,"barStyle",void 0),(0,n._)([(0,d.MZ)()],G.prototype,"_measurementManager",void 0),(0,n._)([(0,d.MZ)()],G.prototype,"_managedWidgets",void 0),G=(0,n._)([(0,u.$)("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbar")],G);const j=G;var W=i(63241),U=i(21403),q=i(98108),Q=i(54099),J=i(31933),Y=i(69120),X=i(90992),ee=i(98773),te=i(76931),ie=i(19247),ne=i(65215),oe=i(5262),se=i(99809),re=i(87273),le=i(66812),ae=i(48384),ce=i(42151),de=i(46975),ue=i(2413);let pe=class extends g.A{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:ue.qv};const t=(0,ue.eV)((0,ue.Jf)((0,ue.vt)(ue.qv),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(const i of this.coordinates)e.push([Math.floor(i[0]-t[0])+.5,Math.floor(i[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){const{coordinates:e,rect:t}=this._renderCoordinates,i=(0,ue.VL)(t),n=(0,ue.uJ)(t);return(0,E.K)("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:i+"px",height:n+"px",visibility:this.visible?"visible":"hidden"}},(0,E.K)("svg",{height:n,styles:{display:"block"},width:i},(0,E.K)("polygon",{fill:this._fillStyle,points:e.map((e=>{let[t,i]=e;return`${t},${i}`})).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),(0,E.K)("polygon",{fill:"transparent",points:e.map((e=>{let[t,i]=e;return`${t},${i}`})).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};(0,n._)([(0,d.MZ)()],pe.prototype,"coordinates",void 0),(0,n._)([(0,d.MZ)()],pe.prototype,"strokeDash",void 0),(0,n._)([(0,d.MZ)()],pe.prototype,"strokeWidth",void 0),(0,n._)([(0,d.MZ)()],pe.prototype,"strokeColor",void 0),(0,n._)([(0,d.MZ)()],pe.prototype,"strokeDashColor",void 0),(0,n._)([(0,d.MZ)()],pe.prototype,"fillColor",void 0),(0,n._)([(0,d.MZ)()],pe.prototype,"visible",void 0),(0,n._)([(0,d.MZ)()],pe.prototype,"isDecoration",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],pe.prototype,"_strokeStyle",null),(0,n._)([(0,d.MZ)({readOnly:!0})],pe.prototype,"_strokeBackgroundStyle",null),(0,n._)([(0,d.MZ)({readOnly:!0})],pe.prototype,"_fillStyle",null),(0,n._)([(0,d.MZ)({readOnly:!0})],pe.prototype,"_renderCoordinates",null),pe=(0,n._)([(0,u.$)("esri.views.overlay.OutlineOverlayItem")],pe);const he=pe;let ye=class extends(Q.A.EventedMixin(de.g)){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=e=>this.drawOperation.on(e,(t=>{this._updateVisuals(),this.emit(e,t)}));this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=(0,l.pR)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){return this.drawOperation?.updating??!1}get cursor(){return"point"===this.geometryType?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new re.O0({view:e,manipulators:this.manipulators,geometryType:ge(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new le.Sl,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(!e?.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:t}=e,i=e.committableVertex,n=e.committedVertices.slice();null!=i&&n.push(t.pointToArray(i));const o=n.length;switch(this.geometryType){case"circle":case"rectangle":{const t=new ce.vz(se.zK,le.Sl.spatialReference),i="circle"===this.geometryType?ae.zV:ae.GF,s="circle"===this.geometryType?ae.zd:ae._T;if(1===o&&e.isCompleted){const e=n[0],o=t.makeMapPoint(e[0]+me,e[1]);return i([e,o],t,!0)?.geometry.rings[0]??[]}if(2===o){const e="rectangle"!==this.geometryType,o=this.centeredToggled!==e,r="rectangle"!==this.geometryType;return(this.uniformSizeToggled!==r?i(n,t,o)?.geometry.rings[0]:s(n,t,o)?.geometry.rings[0])??[]}return[]}}return n}_updateVisuals(){if(!this._overlayItem){const e=new he({strokeDash:[5],strokeDashColor:[255,255,255,255]});this.view.overlay?.addItem(e),this.addHandles((0,s.hA)((()=>{this.view.overlay?.removeItem(e),e?.destroy(),this._overlayItem=void 0}))),this._overlayItem=e}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function ge(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}(0,n._)([(0,d.MZ)({value:!1})],ye.prototype,"centeredToggled",null),(0,n._)([(0,d.MZ)()],ye.prototype,"drawOperation",void 0),(0,n._)([(0,d.MZ)({value:!0})],ye.prototype,"enabled",null),(0,n._)([(0,d.MZ)({value:!1})],ye.prototype,"uniformSizeToggled",null),(0,n._)([(0,d.MZ)({constructOnly:!0})],ye.prototype,"geometryType",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],ye.prototype,"mode",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],ye.prototype,"type",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],ye.prototype,"updating",null),(0,n._)([(0,d.MZ)({constructOnly:!0,nonNullable:!0})],ye.prototype,"view",void 0),(0,n._)([(0,d.MZ)()],ye.prototype,"cursor",null),ye=(0,n._)([(0,u.$)("esri.views.draw.DrawScreenTool")],ye);const me=48;var _e=i(82307),ve=i(53430),be=i(4955),fe=i(55754);async function Me(){return async function(){return i.e(1669).then(i.bind(i,1669))}().then((e=>{let{contains:t,intersects:i,overlaps:n,simplify:o}=e;return{contains:t,intersects:i,overlaps:n,simplify:o}}))}async function we(e){const{currentSelection:t,selector:i,signal:n,sources:o,view:s}=e;if(!o?.length)return{added:[],removed:[]};const{layers:r,layerViews:l,graphicsLayers:c}=function(e){const t=[],i=[],n=[];return e.forEach((e=>{(0,J.yZ)(e)?t.push(e):((0,J.cM)(e)||(0,J.Qz)(e))&&e.layers?.length?t.push(...e.layers.toArray()):(0,J.Rv)(e)&&e.sublayers?.length?n.push(...e.sublayers.toArray()):(0,J.V0)(e)?n.push(e):(0,X.lO)(e)&&i.push(e)})),{layers:t,layerViews:i,graphicsLayers:n}}(o),d=(await(0,a.qr)(Promise.all([Ce(i,r,s,n),Se(i,l,s,n),Te(i,c,s)]),n)).flat();if(!t)return{added:d,removed:[]};const u=t.toArray(),p=d.filter((e=>!ke(u,e))),h=u.filter((e=>!ke(d,e)));return t.removeMany(h),t.addMany(p),{added:p,removed:h}}const Te=async(e,t,i)=>async function(e){const{selector:t,candidates:i,view:n}=e;if(!i?.length||!t)return[];const{spatialReference:o}=n,s=t,r=await Me();return i.filter((e=>e.geometry&&"mesh"!==e.geometry.type&&r.intersects(o,s,e.geometry)))}({candidates:t.flatMap((e=>e.graphics.toArray()))??[],selector:e,view:i}),Ce=async(e,t,i,n)=>{const o=await(0,a.QZ)(async function(e){const{layers:t,selector:i,signal:n,view:o}=e;return(0,a.qr)(Promise.allSettled(t.map((async e=>e.queryFeatures(function(e,t,i,n){const{outFields:o,geometry:s}=Le(t,i,n);return e.outFields=o,e.geometry=s,e.returnGeometry=!0,e.outSpatialReference=n.spatialReference,e}(e.createQuery(),i,e,o),{signal:n}).then((e=>{let{features:t}=e;return t}))))),n)}({selector:e,signal:n,layers:t,view:i}));return o?Ze(o):[]},Se=async(e,t,i,n)=>{const o=await(0,a.QZ)(async function(e){const{layerViews:t,selector:i,signal:n,view:o}=e;return(0,a.qr)(Promise.allSettled(t.map((async e=>{const t=e.createQuery(),{geometry:s}=Le(i,e.layer,o);return t.outFields=["*"],t.geometry=s,t.returnGeometry=!0,t.outSpatialReference=o.spatialReference,e.queryFeatures(t,{signal:n}).then((e=>{let{features:t}=e;return t}))}))),n)}({selector:e,signal:n,layerViews:t,view:i}));return o?Ze(o):[]};function Ze(e){const t=[];for(let i=0;i<e.length;i++){const n=e[i];"fulfilled"===n.status&&t.push(...n.value)}return t}function ke(e,t){if(e.includes(t))return!0;const i=t.getObjectId(),n=null!=i,{layer:o,uid:s}=t;return n?e.some((e=>{if(o===e.layer)return i===e.getObjectId()})):e.some((e=>{if(o===e.layer)return s===e.uid}))}function Le(e,t,i){const n="renderer"in t?(0,be.o)({renderer:t.renderer}):0,o="point"===e.type?(0,fe.V)(e,n,i):e,s="displayField"in t?t.displayField:null,r=(0,ve.mB)({displayField:s,fields:t.fields}),l=[t.objectIdField];if(null!=r&&t.fieldsIndex.has(r)&&l.push(r),"globalIdField"in t&&null!=t.globalIdField&&t.fieldsIndex.has(t.globalIdField)&&l.push(t.fieldsIndex.get(t.globalIdField).name),(0,J.F2)(t)&&null!=t.subtypeField&&t.fieldsIndex.has(t.subtypeField)&&l.push(t.fieldsIndex.get(t.subtypeField).name),"utilityNetworks"in i.map&&i.map.utilityNetworks?.length&&((0,J.F2)(t)||"feature"===t.type)){const e=t.fieldsIndex.get("assetgroup"),i=t.fieldsIndex.get("assettype");e?.name&&l.push(e.name),i?.name&&l.push(i.name)}return{geometry:o,outFields:l}}let Oe=class extends Q.A.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new D.A,this.sources=null,this._process=(0,a.sg)((async(e,t)=>{const{callback:i,selector:n,completed:o}=e,s=(0,ee.UT)((async e=>{const{options:t,sources:s,selection:r,view:l}=this;if((s?.length||l?.selectionManager.sources.length)&&l){if(n&&null!=s){const i=await we({currentSelection:r,selector:n,signal:e,sources:s,view:l});o&&!1!==t?.persistSelection&&l.selectionManager?.updateSelection({current:r.toArray(),...i})}i&&i()}else r.removeAll()}));return(0,a.u7)(t,(()=>s.abort())),this._processTask=s,s.promise}),100)}initialize(){this._setup()}cancel(){this.removeAllHandles(),this._processTask?.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const t=this.options,i=t?.createTool??"rectangle",n=t?.mode??("polygon"===i?"click":"hybrid"),o=Symbol();this._tool=new ye({view:e,mode:n,geometryType:i}),t?.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],(()=>(0,a.QZ)(this._process({selector:this._selectionArea})))),o),this.addHandles([e.on("key-down",(e=>{if(!e.repeat)switch(e.key){case _e.NE.constraint:this._tool.uniformSizeToggled=!0,e.stopPropagation();break;case _e.NE.center:this._tool.centeredToggled=!0,e.stopPropagation()}})),e.on("key-up",(e=>{switch(e.key){case _e.NE.constraint:this._tool.uniformSizeToggled=!1,e.stopPropagation();break;case _e.NE.center:this._tool.centeredToggled=!1,e.stopPropagation()}})),this._tool.on("complete",(async e=>{this.removeHandles(o);const t=()=>{this.removeAllHandles(),this.emit("complete",{aborted:e.aborted,selection:this.selection.toArray()})};e.aborted?(this.cancel(),this.selection.removeAll(),t()):await this._process({selector:this._selectionArea,callback:t,completed:!0})}))],o),this.addHandles((0,s.hA)((()=>e.tools.remove(this._tool)))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=(0,te.tc)(),t=this._tool.coordinates,i=this.view.spatialReference,n=t=>{e.x=t[0],e.y=t[1];const{x:i,y:n}=this.view.toMap(e);return[i,n]};if(0===t.length)return;if(1===t.length||t.every((e=>{let[i,n]=e;return i===t[0][0]&&n===t[0][1]}))){const[e,o]=n(t[0]);return new ie.A({x:e,y:o,spatialReference:i})}const o=t.map(n);return 0!==o.length?((0,oe.$3)(o)||o.reverse(),new ne.A({spatialReference:i,rings:[o]})):void 0}};(0,n._)([(0,d.MZ)()],Oe.prototype,"options",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],Oe.prototype,"selection",void 0),(0,n._)([(0,d.MZ)()],Oe.prototype,"sources",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],Oe.prototype,"view",void 0),Oe=(0,n._)([(0,u.$)("esri.widgets.support.Selector2D.SelectionOperation")],Oe);const Ee=Oe;let Ie=class extends Q.A.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.layerViewPreferenceEnabled=!0,this.sources=null}initialize(){this.addHandles([(0,c.wB)((()=>this._sources),(e=>{this.activeOperation&&(this.activeOperation.sources=e)}))])}destroy(){this._operationHandlesGroup=(0,l.xt)(this._operationHandlesGroup)}get _sources(){const{layerViewPreferenceEnabled:e,sources:t,view:i}=this;return i&&t?.length?t.flatMap((t=>{if((0,X.lO)(t))return t;if((0,J.cM)(t)||(0,J.Qz)(t)){const n=t.layers||[],o=n.map((t=>{const n=(0,Y.i)(i,t)||void 0;return e&&(0,X.lO)(n)?n:t}));return o.length?o.toArray():n.length?n.toArray():t}if(!e)return t;const n=(0,Y.i)(i,t)||void 0;return(0,X.lO)(n)?n:t})):[]}get layers(){return(0,W.Lx)(r.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){(0,W.Lx)(r.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:t}=this,i=!e?.length&&!t?.selectionManager.sources.length;return this.activeOperation?"active":t?.ready&&!i?"ready":"disabled"}cancel(){"active"===this.state&&(this.activeOperation?.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:t,state:i,view:n}=this,o=!t?.length&&!n?.selectionManager.sources.length;if("disabled"===i||o||!this.view)return;"active"===i&&this.cancel();const r=new Ee({view:this.view,sources:t,options:e});return this._operationHandlesGroup=(0,s.vE)([r.selection.on("change",(e=>this.emit("selection-change",e))),r.once("complete",(e=>this._onOperationComplete(e)))]),this._set("activeOperation",r),r}_onOperationComplete(e){this._operationHandlesGroup=(0,l.xt)(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};(0,n._)([(0,d.MZ)()],Ie.prototype,"_sources",null),(0,n._)([(0,d.MZ)({readOnly:!0})],Ie.prototype,"activeOperation",void 0),(0,n._)([(0,d.MZ)()],Ie.prototype,"layers",null),(0,n._)([(0,d.MZ)()],Ie.prototype,"layerViewPreferenceEnabled",void 0),(0,n._)([(0,d.MZ)()],Ie.prototype,"sources",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],Ie.prototype,"state",null),(0,n._)([(0,d.MZ)()],Ie.prototype,"view",void 0),Ie=(0,n._)([(0,u.$)("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],Ie);const Ae=Ie,xe={lassoTool:!0,rectangleTool:!0},Pe="esri-selection-toolbar",Be={base:Pe,container:`${Pe}__container`,toolButton:`${Pe}__tool-button`};let Ve=class extends h.A{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.defaultLassoToolOptions={createTool:"polygon",mode:"freehand"},this.defaultRectangleToolOptions={createTool:"rectangle"},this.messages=null,this.toolConfigs=[],this.viewModel=new Ae,this.visibleElements={...xe},this.scale="s",this.layout="horizontal",this._viewModelHandlesGroup=(0,s.vE)([this.viewModel.on("complete",(e=>{this._set("activeToolInfo",null),this.emit("complete",e)}))])}destroy(){this._viewModelHandlesGroup=(0,l.xt)(this._viewModelHandlesGroup)}loadDependencies(){return(0,P.W)({action:()=>Promise.all([i.e(49408),i.e(85375)]).then(i.bind(i,85375))})}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return(0,W.Lx)(r.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){(0,W.Lx)(r.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get layerViewPreferenceEnabled(){return this.viewModel.layerViewPreferenceEnabled}set layerViewPreferenceEnabled(e){this.viewModel.layerViewPreferenceEnabled=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...xe,...e}}get state(){return this.viewModel.state}get visibleToolCount(){const{view:e,toolConfigs:t,visibleElements:i}=this;return(t?.length??0)+("2d"===e?.type?(i.lassoTool?1:0)+(i.rectangleTool?1:0):0)}activate(e){if(this.cancel(),"disabled"!==this.state)switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return(0,E.K)("div",{"aria-label":this.label,class:this.classes(Be.base,q.D.widget)},(0,E.K)("div",{class:Be.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){if("2d"===this.view?.type)return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){if(this.toolConfigs?.length)return this.toolConfigs.map((e=>{let{toolName:t,icon:i,toolKey:n}=e;return this._renderToolWithTooltip(t,n,i)}))}_renderLassoTool(){const{messages:e,visibleElements:t}=this;if(!t.lassoTool)return;const i=e.selectByLasso;return this._renderToolWithTooltip("lasso","lasso","lasso-select",i)}_renderRectangleTool(){const{messages:e,visibleElements:t}=this;if(!t.rectangleTool)return;const i=e.selectByRectangle;return this._renderToolWithTooltip("rectangle","rectangle","cursor-marquee",i)}_renderToolWithTooltip(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;const o=`${this.id}-tool-${t}`;return(0,E.K)("calcite-action",{active:this.activeToolInfo?.toolName===e,bind:this,class:Be.toolButton,disabled:"disabled"===this.state,icon:i||"selection",id:o,key:o,onclick:()=>this._toggleTool(e),scale:this.scale,text:n,title:n})}_activateTool(e){const t=this._getToolOptions(e);if(!t)return;const i=this.viewModel.activate(t);i&&this._set("activeToolInfo",{toolName:e,operation:i})}_toggleTool(e){if(this.activeToolInfo){const t=this.activeToolInfo.toolName;if(this.cancel(),t===e)return}this._activateTool(e)}_getToolOptions(e){return"lasso"===e?this.defaultLassoToolOptions:"rectangle"===e?this.defaultRectangleToolOptions:this.toolConfigs.find((t=>t.toolName===e))}};(0,n._)([(0,d.MZ)({readOnly:!0})],Ve.prototype,"activeToolInfo",void 0),(0,n._)([(0,d.MZ)()],Ve.prototype,"defaultLassoToolOptions",void 0),(0,n._)([(0,d.MZ)()],Ve.prototype,"defaultRectangleToolOptions",void 0),(0,n._)([(0,d.MZ)()],Ve.prototype,"label",null),(0,n._)([(0,d.MZ)()],Ve.prototype,"layers",null),(0,n._)([(0,d.MZ)()],Ve.prototype,"layerViewPreferenceEnabled",null),(0,n._)([(0,d.MZ)(),(0,B.G)("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],Ve.prototype,"messages",void 0),(0,n._)([(0,d.MZ)()],Ve.prototype,"sources",null),(0,n._)([(0,d.MZ)()],Ve.prototype,"toolConfigs",void 0),(0,n._)([(0,d.MZ)()],Ve.prototype,"view",null),(0,n._)([(0,d.MZ)()],Ve.prototype,"viewModel",void 0),(0,n._)([(0,d.MZ)()],Ve.prototype,"visibleElements",void 0),(0,n._)([(0,U.w)("visibleElements")],Ve.prototype,"castVisibleElements",null),(0,n._)([(0,d.MZ)()],Ve.prototype,"scale",void 0),(0,n._)([(0,d.MZ)()],Ve.prototype,"state",null),(0,n._)([(0,d.MZ)()],Ve.prototype,"layout",void 0),(0,n._)([(0,d.MZ)()],Ve.prototype,"visibleToolCount",null),Ve=(0,n._)([(0,u.$)("esri.widgets.support.SelectionToolbar")],Ve);const $e=Ve;var De=i(97513),Re=i(45755),Ke=i(71981);let Ne=class extends g.A{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],Ne.prototype,"directionModePicker",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],Ne.prototype,"header",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],Ne.prototype,"labelsToggle",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],Ne.prototype,"tooltipsToggle",void 0),Ne=(0,n._)([(0,u.$)("esri.widgets.support.SketchTooltipControls.VisibleElements")],Ne);const ze=Ne,Fe="esri-sketch-tooltip-controls",He={base:Fe,block:`${Fe}__block`,blockContent:`${Fe}__block-content`,hintIcon:`${Fe}__hint-icon`,radioButtonLabelWrapper:`${Fe}__radio-button-label-wrapper`};let Ge=class extends h.A{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new ze,this.sketchOptions=new De.A,this.viewType=void 0,this._onTooltipsEnabledChange=e=>{this.sketchOptions.tooltips.enabled=e},this._onLabelsEnabledChange=e=>{this.sketchOptions.labels.enabled=e},this._onDirectionModeChange=e=>{this.sketchOptions.values.directionMode=e.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([(0,P.W)({block:()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(3671),i.e(586),i.e(75502)]).then(i.bind(i,75502)),label:()=>i.e(11839).then(i.bind(i,11839)),icon:()=>i.e(16702).then(i.bind(i,16702)),"radio-button":()=>i.e(2599).then(i.bind(i,2599)),"radio-button-group":()=>i.e(43953).then(i.bind(i,43953))}),(0,Ke.m)()])}render(){const{label:e,visibleElements:t}=this,i=this._renderContent();return(0,E.K)("div",{"aria-label":e,class:this.classes(He.base,q.D.widget)},i?(0,E.K)("calcite-block",{class:He.block,heading:t.header?this.label:"",key:"content-block",label:this.label,open:!0},(0,E.K)("div",{class:He.blockContent,key:"content"},i)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,i=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&"2d"!==t?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(o.Ru);return 0===i.length?null:i}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return(0,E.K)(Ke.o,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return(0,E.K)(Ke.o,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:i}=t.values;return(0,E.K)("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,(0,E.K)("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:i,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",i,e.directionModeRelative),this._renderDirectionModeOption("absolute",i,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,i){return(0,E.K)("calcite-label",{key:e,layout:"inline",scale:"s"},(0,E.K)("calcite-radio-button",{checked:e===t,scale:"s",value:e}),(0,E.K)("div",{class:He.radioButtonLabelWrapper,key:"label-wrapper"},(0,E.K)("calcite-icon",{icon:Re.N[e],scale:"s"}),i))}};(0,n._)([(0,d.MZ)()],Ge.prototype,"label",null),(0,n._)([(0,d.MZ)({type:ze,nonNullable:!0})],Ge.prototype,"visibleElements",void 0),(0,n._)([(0,d.MZ)(),(0,B.G)("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],Ge.prototype,"messages",void 0),(0,n._)([(0,d.MZ)({nonNullable:!0,type:De.A})],Ge.prototype,"sketchOptions",void 0),(0,n._)([(0,d.MZ)({type:String})],Ge.prototype,"viewType",void 0),Ge=(0,n._)([(0,u.$)("esri.widgets.support.SketchTooltipControls")],Ge);const je=Ge;var We=i(90632),Ue=i(50076),qe=i(3589),Qe=i(83973);const Je="hide";function Ye(e){return e?.listMode??void 0}function Xe(e){if(!e)return"inherited";const t=function(e){const t=ot(e);return null!=t&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}(nt(e)?e.layer:e);return null!=t?t?"independent":"inherited":"visibilityMode"in e&&null!=e.visibilityMode?e.visibilityMode:"independent"}function et(e){if(e&&(!("type"in e)||"wmts"!==e.type))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function tt(e){return Ye(e)!==Je}function it(e){const t=e?.layer;return t&&"layers"in t?t.layers:null}function nt(e){return null!=e&&"layer"in e&&null!=e.layer}function ot(e){return e&&"capabilities"in e&&null!=e.capabilities&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}var st=i(47818),rt=i(5632),lt=i(17879),at=i(50037),ct=i(16700),dt=i(76192),ut=i(95752);let pt=class extends(rt.A.IdentifiableMixin(h.A)){constructor(e,t){super(e,t),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([(0,c.wB)((()=>this._canCreateLegend),(()=>this._createLegend()),c.Vh),(0,c.wB)((()=>[this._legend,this._legendOptions]),(()=>this._updateLegend()),c.Vh)])}destroy(){this._legend=(0,l.pR)(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const i="legend";return e===i||null!=e&&!!Array.isArray(e)&&e.includes(i)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,i=e?.view;return t&&i?{view:i,layerInfos:[t]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||"subtype-sublayer"===e.type)return null;const t=nt(e)?e:null,i=e?.parent,n=null!=i&&"type"in i&&"map-image"===i.type?t?.source:null;return n&&i?{layer:i,title:"",sublayerIds:[n.mapLayerId]}:{layer:e,title:""}}get disabled(){const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return(0,E.K)("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i,open:n}=this;return e&&!i&&n?"legend"===e&&t?(0,E.K)("div",{key:"legend-widget"},t.render()):"string"==typeof e?(0,E.K)("div",{innerHTML:e,key:e}):(0,ut.p4)(e)?(0,E.K)("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?(0,E.K)("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map((e=>this._renderContent(e))):this._renderContent(e):null}async _createLegend(){if((0,l.pR)(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await Promise.all([i.e(97763),i.e(79788),i.e(35039),i.e(49176),i.e(86300),i.e(47951),i.e(44040)]).then(i.bind(i,6655)),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return"legend"===e?this._legend:(0,ut.p4)(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map((e=>this._getWidget(e))).find((e=>e)):this._getWidget(e)}};(0,n._)([(0,d.MZ)()],pt.prototype,"_legend",void 0),(0,n._)([(0,d.MZ)()],pt.prototype,"_canCreateLegend",null),(0,n._)([(0,d.MZ)()],pt.prototype,"_legendOptions",null),(0,n._)([(0,d.MZ)()],pt.prototype,"_legendLayerInfo",null),(0,n._)([(0,d.MZ)()],pt.prototype,"className",void 0),(0,n._)([(0,d.MZ)()],pt.prototype,"content",void 0),(0,n._)([(0,d.MZ)()],pt.prototype,"disabled",null),(0,n._)([(0,d.MZ)()],pt.prototype,"flowEnabled",void 0),(0,n._)([(0,d.MZ)()],pt.prototype,"icon",null),(0,n._)([(0,d.MZ)()],pt.prototype,"image",void 0),(0,n._)([(0,d.MZ)()],pt.prototype,"listItem",void 0),(0,n._)([(0,d.MZ)()],pt.prototype,"open",void 0),(0,n._)([(0,d.MZ)()],pt.prototype,"title",null),(0,n._)([(0,d.MZ)()],pt.prototype,"visible",void 0),pt=(0,n._)([(0,u.$)("esri.widgets.LayerList.ListItemPanel")],pt);const ht=pt;var yt;const gt=D.A.ofType({key:"type",defaultKeyValue:"button",base:at.A,typeMap:{button:ct.A,toggle:dt.A}}),mt=D.A.ofType(gt),_t="layer",vt="child-list-mode";let bt=yt=class extends(rt.A.IdentifiableMixin(g.A)){constructor(e){super(e),this.actionsSections=new mt,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(D.A.ofType(yt)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([(0,c.wB)((()=>[this.layer,this.layer?.listMode,this.listModeDisabled]),(()=>this._watchLayerProperties(this.layer)),c.Vh),(0,c.wB)((()=>this.checkPublishStatusEnabled),(e=>this._updateChildrenPublishing(e)),c.Vh),(0,c.wB)((()=>this.view),(e=>this._updateChildrenView(e)),c.Vh),(0,c.wB)((()=>this.panel),(e=>this._setListItemOnPanel(e)),c.Vh)]),"function"==typeof this.listItemCreatedFunction){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||"sublayer"===e.type)return null;const i="subtype-sublayer"===e.type?e.parent:e;return t.allLayerViews.find((e=>e.layer===i))??null}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new ht(e):null}get sortable(){return"knowledge-graph-sublayer"!==this.layer?.type&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=(0,lt.Jt)(this,"layer.layer");return(!e||e&&(0,lt.Jt)(this,"layer.layer.loaded"))&&(0,lt.Jt)(this,"layer.title")||(0,lt.Jt)(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&"publishing"===e.publishingInfo?.status)}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:n}=this;return!n&&!t&&(e?e.updating:"loading"===i?.loadStatus||!1)}get visible(){return!!this.layer?.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!function(e,t){if(!e||null==t||isNaN(t))return!1;const i=function(e){return null!=e&&"minScale"in e&&null!=e.minScale?e.minScale:void 0}(e),n=function(e){return null!=e&&"maxScale"in e&&null!=e.maxScale?e.maxScale:void 0}(e),o=null!=i&&!isNaN(i)&&i>0&&t>i,s=null!=n&&!isNaN(n)&&n>0&&t<n;return o||s}(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return Xe(this.layer)}clone(){return new yt({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){this.children?.forEach((t=>t.checkPublishStatusEnabled=e))}_updateChildrenView(e){const t=this.children;t&&t.forEach((t=>t.view=e))}_createChildren(e){const{listModeDisabled:t,children:i}=this,n=e.filter((e=>!i.some((t=>t.layer===e))));i.addMany(this._createChildItems(n,t))}_destroyChildren(e){const{children:t}=this,i=t.filter((t=>!!t.layer&&!e.includes(t.layer)));t.destroyMany(i)}_sortChildren(e){this.children.sort(((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer)))}_destroyAllChildren(){this.removeHandles(vt),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(vt),this.listModeDisabled||this.addHandles(e.toArray().map((t=>(0,c.wB)((()=>t.listMode),(()=>this._compileChildren(e))))),vt)}_compileChildren(e){const t=this.listModeDisabled?e:e?.filter((e=>"hide"!==Ye(e)));e?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",(()=>this._compileChildren(e))),_t)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map((e=>t||tt(e)?new yt({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null)).filter(o.Ru)}_watchLayerProperties(e){if(this.removeHandles(_t),this.removeHandles(vt),!e)return;if("hide-children"===(!this.listModeDisabled&&Ye(e)))return void this.children.destroyAll();const t=et(e);t&&this.addHandles((0,c.wB)((()=>e[t]),(i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)}),c.Vh),_t)}};(0,n._)([(0,d.MZ)({type:mt})],bt.prototype,"actionsSections",void 0),(0,n._)([(0,d.MZ)()],bt.prototype,"actionsOpen",void 0),(0,n._)([(0,d.MZ)()],bt.prototype,"checkPublishStatusEnabled",void 0),(0,n._)([(0,d.MZ)({type:D.A.ofType(bt)})],bt.prototype,"children",void 0),(0,n._)([(0,d.MZ)()],bt.prototype,"childrenSortable",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"connectionStatus",null),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"error",null),(0,n._)([(0,d.MZ)()],bt.prototype,"hidden",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"incompatible",null),(0,n._)([(0,d.MZ)()],bt.prototype,"layer",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"layerView",null),(0,n._)([(0,d.MZ)()],bt.prototype,"listItemCreatedFunction",void 0),(0,n._)([(0,d.MZ)({nonNullable:!0})],bt.prototype,"listModeDisabled",void 0),(0,n._)([(0,d.MZ)()],bt.prototype,"open",void 0),(0,n._)([(0,d.MZ)({type:ht})],bt.prototype,"panel",void 0),(0,n._)([(0,U.w)("panel")],bt.prototype,"castPanel",null),(0,n._)([(0,d.MZ)()],bt.prototype,"parent",void 0),(0,n._)([(0,d.MZ)({value:!0})],bt.prototype,"sortable",null),(0,n._)([(0,d.MZ)()],bt.prototype,"title",null),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"publishing",null),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"updating",null),(0,n._)([(0,d.MZ)()],bt.prototype,"view",void 0),(0,n._)([(0,d.MZ)()],bt.prototype,"visible",null),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"visibleAtCurrentScale",null),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"visibleAtCurrentTimeExtent",null),(0,n._)([(0,d.MZ)({readOnly:!0})],bt.prototype,"visibilityMode",null),bt=yt=(0,n._)([(0,u.$)("esri.widgets.LayerList.ListItem")],bt);const ft=bt,Mt="view",wt="view-layers",Tt="map-layers",Ct="layer-views",St="layer-list-mode",Zt=D.A.ofType(ft);let kt=class extends Q.A.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new Zt,this.view=null}initialize(){this.addHandles([(0,c.wB)((()=>!0===this.view?.ready),(()=>this._viewHandles()),c.Vh),(0,c.wB)((()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled]),(()=>this._recompileList())),(0,c.wB)((()=>(0,st.O)(this.view)?this.view.inGeographicLayout:null),(()=>this._compileList()))],Mt)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten((e=>e.children)).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,n){const o=e?.layer;if(!o||"subtype-sublayer"===o.type||"sublayer"===o.type)return;const s=this.view?.map?.layers,r=t?it(t):s,l=i?it(i):s;if(!r||!l)return;const{operationalItems:a}=this,c=t?.children||a,d=i?.children||a,u=l.length-n;e.parent=i||null,c.remove(e),r.remove(o),d.includes(e)||d.add(e,u),l.includes(o)||l.add(o,u),this._compileList()}_createLayerViewHandles(e){this.removeHandles(Ct),this._compileList(),e&&this.addHandles(e.on("change",(()=>this._compileList())),Ct)}_createMapLayerHandles(e){this.removeHandles(Tt),this._compileList(),e&&this.addHandles(e.on("change",(()=>this._compileList())),Tt)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:n,listModeDisabled:o}=this;return new ft({checkPublishStatusEnabled:n,listModeDisabled:o,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter((e=>"hide"!==Ye(e))):void 0}_watchLayersListMode(e){this.removeHandles(St),e&&!this.listModeDisabled&&this.addHandles((0,c.wB)((()=>e.filter((e=>"listMode"in e)).map((e=>e.listMode)).toArray()),(()=>this._compileList())),St)}_compileList(){const e=this.view?.map?.layers,t=(0,st.O)(this.view)&&!this.view.inGeographicLayout?e?.filter((e=>{let{type:t}=e;return"link-chart"===t})):e;this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach((e=>{t.some((t=>t.layer===e))||t.add(this._createListItem(e))}))}_removeItems(e){const{operationalItems:t}=this,i=[];t.forEach((t=>{t&&e&&e.includes(t.layer)||i.push(t)})),t.destroyMany(i)}_sortItems(e){const{operationalItems:t}=this;t.sort(((t,i)=>{const n=e.indexOf(t.layer),o=e.indexOf(i.layer);return n>o?-1:n<o?1:0}))}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Tt,Ct,wt]),e?.ready?this.addHandles([(0,c.wB)((()=>this.view?.map?.allLayers),(e=>this._createMapLayerHandles(e)),c.Vh),(0,c.wB)((()=>this.view?.allLayerViews),(e=>this._createLayerViewHandles(e)),c.Vh)],wt):this._removeAllItems()}};(0,n._)([(0,d.MZ)()],kt.prototype,"checkPublishStatusEnabled",void 0),(0,n._)([(0,d.MZ)()],kt.prototype,"listItemCreatedFunction",void 0),(0,n._)([(0,d.MZ)({nonNullable:!0})],kt.prototype,"listModeDisabled",void 0),(0,n._)([(0,d.MZ)({type:Zt})],kt.prototype,"operationalItems",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],kt.prototype,"state",null),(0,n._)([(0,d.MZ)()],kt.prototype,"totalItems",null),(0,n._)([(0,d.MZ)()],kt.prototype,"view",void 0),kt=(0,n._)([(0,u.$)("esri.widgets.LayerList.LayerListViewModel")],kt);const Lt=kt,Ot=e=>Et(e)||It(e),Et=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},It=e=>{const t=et(e);if(null!=t&&e.hasOwnProperty(t)&&null!=e[t])for(const i of e[t])if(Ot(i))return!0;return!1},At=(e,t)=>null!=t&&null!=e&&(t.test(e.title)?"self":!!e.children.some((e=>!1!==At(e,t)))&&"children");var xt;let Pt=xt=class extends ft{constructor(e){super(e),this.children=new D.A,this.parent=null}get enabled(){const{children:e}=this;if(0===e.length)return null!=this.featureSource&&this.featureSource.enabled?"enabled":"disabled";let t=!1,i=!1;for(const n of e){if("indeterminate"===n.enabled)return n.enabled;if("enabled"===n.enabled?t=!0:"disabled"===n.enabled&&(i=!0),i&&t)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap((e=>[e.layer?.id,...e.childLayerIds]))}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find((t=>t.layer===e))}_initializeChildLayers(e){if(!e)return;const t=e.filter(Ot);super._initializeChildLayers(t)}_createChildItems(e){return e.map((e=>tt(e)?new xt({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null)).filter(o.Ru).reverse()}};(0,n._)([(0,d.MZ)()],Pt.prototype,"enabled",null),(0,n._)([(0,d.MZ)()],Pt.prototype,"children",void 0),(0,n._)([(0,d.MZ)()],Pt.prototype,"childLayerIds",null),(0,n._)([(0,d.MZ)()],Pt.prototype,"featureSource",null),(0,n._)([(0,d.MZ)({constructOnly:!0})],Pt.prototype,"getFeatureSnappingSources",void 0),(0,n._)([(0,d.MZ)()],Pt.prototype,"parent",void 0),Pt=xt=(0,n._)([(0,u.$)("esri.widgets.support.SnappingControls.SnappingListItem")],Pt);let Bt=class extends Lt{constructor(){super(...arguments),this.featureSnappingSources=new D.A}get operationalItemsFlat(){return this.operationalItems.flatten((e=>e.children))}get selectableItems(){return this.operationalItemsFlat.filter((e=>!e.children?.length))}_compileList(){const e=this.view?.map?.layers;if(!e)return;const t=e.filter(Ot);this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(e){return new Pt({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};(0,n._)([(0,d.MZ)()],Bt.prototype,"featureSnappingSources",void 0),(0,n._)([(0,d.MZ)()],Bt.prototype,"operationalItems",void 0),(0,n._)([(0,d.MZ)()],Bt.prototype,"operationalItemsFlat",null),(0,n._)([(0,d.MZ)()],Bt.prototype,"selectableItems",null),Bt=(0,n._)([(0,u.$)("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Bt);let Vt=class extends g.A{constructor(e){super(e),this.layerListViewModel=new Bt,this.snappingOptions=new Qe.A,this.view=null}initialize(){this.addHandles([(0,c.wB)((()=>({viewModel:this.layerListViewModel,view:this.view})),(e=>{let{viewModel:t,view:i}=e;t.view=i}),c.Vh),(0,c.wB)((()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources})),(e=>{let{viewModel:t,sources:i}=e;t.featureSnappingSources=i}),c.Vh)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every((e=>"enabled"===e.enabled))}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every((e=>!e.enabled))}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter((e=>"enabled"===e.enabled)).length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e?.forEach((e=>t?this.enableSnappingForLayer(e):this.disableSnappingForLayer(e)))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach((t=>{let{layer:i}=t;const n=i?.id;e?this.enableSnappingForLayer(n):this.disableSnappingForLayer(n)}))}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)tt(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find((t=>t.layer.id===e))}_makeSnappingSourceForLayer(e){const t=this.layerListViewModel.operationalItemsFlat.find((t=>t.layer?.id===e))?.layer;if(!t)throw new Ue.A("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if("group"===t.type)return;const i=new qe.A({layer:t});return this.snappingOptions.featureSources.add(i),i}};(0,n._)([(0,d.MZ)()],Vt.prototype,"allLayersEnabled",null),(0,n._)([(0,d.MZ)()],Vt.prototype,"allLayersDisabled",null),(0,n._)([(0,d.MZ)({constructOnly:!0})],Vt.prototype,"layerListViewModel",void 0),(0,n._)([(0,d.MZ)()],Vt.prototype,"layersEnabledCount",null),(0,n._)([(0,d.MZ)({type:Qe.A,nonNullable:!0})],Vt.prototype,"snappingOptions",void 0),(0,n._)([(0,d.MZ)()],Vt.prototype,"state",null),(0,n._)([(0,d.MZ)()],Vt.prototype,"view",void 0),Vt=(0,n._)([(0,u.$)("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],Vt);const $t=Vt,Dt="esri-snapping-controls",Rt={base:Dt,container:`${Dt}__container`,item:`${Dt}__item`,toggleBlock:`${Dt}__toggle-block`,layerListBlock:`${Dt}__layer-list-block`,layerList:`${Dt}__layer-list`,layerListFilter:`${Dt}__layer-list__filter`,layerListButton:`${Dt}__layer-list__button`,layerListItem:`${Dt}__layer-list__item`,layerListGroup:`${Dt}__layer-list__group`,nestedContainer:`${Dt}__nested-container`};let Kt=class extends h.A{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new v,this._enableSnappingSwitchChange=e=>{this.snappingOptions.enabled=e},this._featureEnabledSwitchChange=e=>{this.snappingOptions.featureEnabled=e},this._gridEnabledSwitchChange=e=>{this.snappingOptions.gridEnabled=e,e&&this._startLoadGrid()},this._selfEnabledSwitchChange=e=>{this.snappingOptions.selfEnabled=e},this._onToggleLayersButtonClick=e=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),(0,O.Z6)(e.target)};const{snappingOptions:i,view:n,viewModel:o}=e;this.viewModel=o??(this._defaultViewModel=new $t({snappingOptions:i,view:n}))}normalizeCtorArgs(e){const{snappingOptions:t,view:i,viewModel:n,...o}=e;return o}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=(0,l.pR)(this._defaultViewModel))}loadDependencies(){return Promise.all([(0,P.W)({block:()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(3671),i.e(586),i.e(75502)]).then(i.bind(i,75502)),button:()=>Promise.all([i.e(49408),i.e(43285),i.e(11823)]).then(i.bind(i,43285)),input:()=>Promise.all([i.e(49408),i.e(90169),i.e(38841)]).then(i.bind(i,38841)),list:()=>Promise.all([i.e(49408),i.e(90169),i.e(38841),i.e(81349)]).then(i.bind(i,81349)),"list-item":()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(586),i.e(25412)]).then(i.bind(i,70205)),checkbox:()=>i.e(64990).then(i.bind(i,64990)),loader:()=>i.e(35688).then(i.bind(i,35688))}),(0,Ke.m)()])}initialize(){this.addHandles((0,c.wB)((()=>"2d"===this.view?.type&&!!this.view.grid),(e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)})))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(null!=this._defaultViewModel&&this._defaultViewModel===e||(this._defaultViewModel=(0,l.pR)(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return(0,E.K)("div",{"aria-label":e,class:this.classes(Rt.base,q.D.widget)},(0,E.K)("div",{class:Rt.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList(),"2d"===this.view?.type&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,i=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&"2d"===t?.type?this._renderGridEnabledToggle():null].filter(o.Ru),n=[e.enabledToggle?this._renderEnabledToggle():null,i.length>0?(0,E.K)("div",{class:Rt.nestedContainer},i):null].filter(o.Ru);return 0===n.length?null:(0,E.K)("calcite-block",{class:Rt.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",label:this.label,open:!0},n)}_renderEnabledToggle(){return(0,E.K)(Ke.o,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return(0,E.K)(Ke.o,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return(0,E.K)(Ke.o,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return(0,E.K)(Ke.o,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,i=t.layerListViewModel.operationalItems.length>9?(0,E.K)("calcite-input",{class:Rt.layerListFilter,clearable:!0,placeholder:e?.searchLayers,onCalciteInputInput:e=>{let{currentTarget:{value:t}}=e;this._layerListFilter=""===t?null:new RegExp(t,"i")}}):null,n=this._secondaryElementsDisabled,o=this.layerListOpen&&!n,s=t.layerListViewModel.operationalItems?.find((e=>!!e.children.length));return(0,E.K)("calcite-block",{class:Rt.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:o,onCalciteBlockToggle:e=>this.layerListOpen=e.currentTarget.open},i,this._renderToggleLayersButton(),(0,E.K)("calcite-list",{class:Rt.layerList,displayMode:s?"nested":"flat",label:e?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){const{view:e,visibleElements:t,snappingManager:i,snappingOptions:n,_openAndReady:o}=this,{gridEnabled:s,enabled:r}=n;(o||"2d"===e?.type&&e.grid)&&this._startLoadGrid();const l=this._gridLoadTask?.value,a=l&&"2d"===e?.type&&(0,E.K)(l,{snappingManager:i,snappingOptions:n,view:e,visibleElements:t.gridControlsElements});return(0,E.K)("calcite-block",{class:Rt.layerListBlock,collapsible:!0,disabled:!s||!r,heading:this.messages.gridOptionsHeading,key:"grid-block",open:o,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},a??(0,E.K)("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){!this._gridLoadTask&&this.visibleElements.gridControls&&"2d"===this.view?.type&&(this._gridLoadTask=(0,ee.UT)((async()=>(await Promise.all([i.e(97763),i.e(89150),i.e(41376),i.e(35941),i.e(67853),i.e(83664),i.e(20180)]).then(i.bind(i,29083))).default)))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map((e=>{switch(t?At(e,t):null){case"children":{const i=e.children.filter((e=>!1!==At(e,t)));return this._renderLayerListItemGroup(e,i)}case"self":case null:return this._renderLayerListItemOrGroup(e);case!1:return"self"===At(e.parent,t)?this._renderLayerListItemOrGroup(e):null}})).toArray().filter(o.Ru)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,i=e?t.disableAllLayers:t.enableAllLayers;return(0,E.K)("calcite-button",{appearance:"transparent",class:Rt.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},i)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,i=e.title||t,n=()=>{this.viewModel.toggleSnappingForLayers([e.layer?.id],"enabled"!==e.enabled)};return(0,E.K)("calcite-list-item",{class:Rt.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:i,onCalciteListItemSelect:e=>{e.stopPropagation(),n()}},(0,E.K)("calcite-checkbox",{checked:"enabled"===e.enabled,slot:"actions-start",onCalciteCheckboxChange:n}))}_renderLayerListItemGroup(e,t){const{messages:i}=this,{children:n,title:o}=e,s=o||i.untitledLayer,r=o&&""!==o?o:(0,We.c)(),l=!!t?.length,a=t??n,c=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,"enabled"!==e.enabled)},d=a?.find((e=>!!e.children.length));return(0,E.K)("calcite-list-item",{class:Rt.layerListGroup,key:r,label:s,open:l,onCalciteListItemSelect:e=>{e.stopPropagation(),c()}},(0,E.K)("calcite-checkbox",{checked:"enabled"===e.enabled,indeterminate:"indeterminate"===e.enabled,slot:"actions-start",onCalciteCheckboxChange:c}),(0,E.K)("calcite-list",{displayMode:d?"nested":"flat",label:i?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(a)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};(0,n._)([(0,d.MZ)()],Kt.prototype,"_defaultViewModel",void 0),(0,n._)([(0,d.MZ)()],Kt.prototype,"_layerListFilter",void 0),(0,n._)([(0,d.MZ)()],Kt.prototype,"_gridLoadTask",void 0),(0,n._)([(0,d.MZ)()],Kt.prototype,"_openAndReady",null),(0,n._)([(0,d.MZ)()],Kt.prototype,"label",null),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],Kt.prototype,"layerListOpen",void 0),(0,n._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],Kt.prototype,"gridOptionsOpen",void 0),(0,n._)([(0,d.MZ)(),(0,B.G)("esri/widgets/support/SnappingControls/t9n/SnappingControls")],Kt.prototype,"messages",void 0),(0,n._)([(0,d.MZ)(),(0,B.G)("esri/t9n/common")],Kt.prototype,"messagesCommon",void 0),(0,n._)([(0,d.MZ)()],Kt.prototype,"snappingOptions",null),(0,n._)([(0,d.MZ)()],Kt.prototype,"snappingManager",void 0),(0,n._)([(0,d.MZ)()],Kt.prototype,"view",null),(0,n._)([(0,d.MZ)()],Kt.prototype,"viewModel",null),(0,n._)([(0,d.MZ)({type:v,nonNullable:!0})],Kt.prototype,"visibleElements",void 0),(0,n._)([(0,d.MZ)()],Kt.prototype,"_enabledToggleDisabled",null),(0,n._)([(0,d.MZ)()],Kt.prototype,"_secondaryElementsDisabled",null),Kt=(0,n._)([(0,u.$)("esri.widgets.support.SnappingControls")],Kt);const Nt=Kt;var zt=i(12254),Ft=i(39348);const Ht="esri-sketch",Gt={base:Ht,vertical:`${Ht}--vertical`,docked:`${Ht}-bar`,floating:`${Ht}-pad`,chipHorizontal:`${Ht}__selection-count-chip--horizontal`,chipVertical:`${Ht}__selection-count-chip--vertical`,chipVerticalSmall:`${Ht}__selection-count-chip--vertical--s`,popoverWrapper:`${Ht}__popover-wrapper`},jt={point:"pin",polyline:"line",polygon:"polygon",rectangle:"rectangle",circle:"circle",multipoint:"pins",mesh:"i3-d-building",freehandPolygon:"freehand-area",freehandPolyline:"freehand"};let Wt=class extends h.A{constructor(e,t){super(e,t),this._activeCustomToolOptions=null,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.customToolOptions=null,this.customActions=null,this.toolbarKind="floating",this.contextualToolLocation="separate",this.groupCollapsePriorities=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new M,this._defaultViewModel=null,this._calcitePopoverReferenceElement=null,this._relativeLocation="top",this._popoverOpen=!1,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=e?.viewModel||(this._defaultViewModel=new y.A({creationMode:e?.creationMode??"continuous"}))}initialize(){const{layer:e,view:t}=this,i=new $e({view:"2d"===t?.type?t:null,sources:e?[e]:null,scale:this.scale});this.addHandles([(0,c.wB)((()=>this.viewModel),(e=>{this._viewModelHandlesGroup=(0,l.xt)(this._viewModelHandlesGroup),e&&(this._viewModelHandlesGroup=(0,s.vE)([e.on("create",(()=>this.scheduleRender())),e.on("update",(()=>this.scheduleRender())),e.on("delete",(e=>this.emit("delete",e))),e.on("undo",(()=>this.scheduleRender())),e.on("redo",(()=>this.scheduleRender())),(0,c.wB)((()=>e.layer),(e=>{this._selectionToolbar&&(this._selectionToolbar.sources=e?[e]:null)})),(0,c.wB)((()=>e.view),(e=>{this._selectionToolbar&&(this._selectionToolbar.view="2d"===e?.type?e:null)})),(0,c.wB)((()=>e.state),(()=>this.notifyChange("state")))]))}),c.pc),(0,c.z7)((()=>i.activeToolInfo),(()=>this.viewModel.cancel())),i.on("complete",(e=>this._onSelectionOperationComplete(e))),(0,c.wB)((()=>{const{selectionTools:e}=this.visibleElements;return{lassoTool:!!e?.["lasso-selection"],rectangleTool:!!e?.["rectangle-selection"]}}),(e=>{Object.assign(i.visibleElements,e)}),c.pc)]),this._selectionToolbar=i}loadDependencies(){return(0,P.W)({action:()=>Promise.all([i.e(49408),i.e(85375)]).then(i.bind(i,85375)),chip:()=>Promise.all([i.e(49408),i.e(10239)]).then(i.bind(i,10239)),popover:()=>Promise.all([i.e(49408),i.e(65251),i.e(85375),i.e(67696),i.e(51866)]).then(i.bind(i,51866))})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=(0,l.xt)(this._viewModelHandlesGroup)}get activeTool(){const e=this._selectionToolbar?.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}const t=this._effectiveAvailableCreateTools,{activeTool:i,activeCreateToolDrawMode:n}=this.viewModel;return"polygon"===i&&"freehand"===n&&t?.includes("freehandPolygon")?"freehandPolygon":"polyline"===i&&"freehand"===n&&t?.includes("freehandPolyline")?"freehandPolyline":this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get creationMode(){return this.viewModel.creationMode}set creationMode(e){this.viewModel.creationMode=e}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}set layout(e){this._set("layout",e),this._selectionToolbar&&(this._selectionToolbar.layout=e)}set scale(e){this._set("scale",e),this._selectionToolbar&&(this._selectionToolbar.scale=e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){return this._selectionToolbar?.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const t=this._get("viewModel");e!==t&&(t&&t===this._defaultViewModel&&(0,l.pR)(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,view:t,visibleElements:i}=this,n=e?.filter((e=>!!i.createTools?.[e]));return"3d"===t?.type?n?.filter((e=>"multipoint"!==e)):n}create(e,t,i){const n=i?.createOptions??t;return this._activeCustomToolOptions=i,(0,a.QZ)(this.viewModel.create(e,n))}update(e,t){return(0,a.QZ)(this.viewModel.update(e,t))}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}dismissFloatingElements(){this._popoverOpen=!1}render(){const{toolbarKind:e,layout:t,scale:i}=this,n=this.customActions?.filter((e=>"selection-toolbar"===e.position));return(0,E.K)("div",null,(0,E.K)("div",{classes:{[Gt.base]:!0,[Gt.floating]:"floating"===e,[Gt.docked]:"docked"===e,[Gt.vertical]:"vertical"===t}},(0,E.K)(j,{barStyle:e,layout:t,scale:i},this._renderSelectionSetItemGroupInline(),(0,E.K)("div",{"group-kind":"split-button",key:"selection-split-button",priority:this.groupCollapsePriorities?.get("selectionTools")??w.Jl.Low},this._renderDefaultSelectionButton(),this._selectionToolbar?.render(),n?.map((e=>this._renderToolbarItem(e)))),this._renderCreateToolActionGroup(),this._renderUndoRedoMenuItemGroup(),this._renderSettingsMenuItemGroup()),this._renderSelectionSetToolbar(),this._renderSettingsMenuPopover()))}_renderSettingsMenuPopover(){const{messagesCommon:e,snappingOptions:t,view:i,viewModel:n,visibleElements:o}=this;if(!this._calcitePopoverReferenceElement)return;const s={directionModePicker:o.directionModePicker,labelsToggle:o.labelsToggle,tooltipsToggle:o.tooltipsToggle},r="horizontal"===this.layout?"top"===this._relativeLocation?"bottom-end":"top-end":"right-end";return(0,E.K)("calcite-popover",{closable:!0,focusTrapDisabled:!0,heading:e.settings,label:e.settings,open:this._popoverOpen,overlayPositioning:"fixed",placement:r,referenceElement:this._calcitePopoverReferenceElement,scale:this.scale,onCalcitePopoverBeforeClose:()=>this._popoverOpen=!1,onCalcitePopoverBeforeOpen:e=>this._remeasurePopoverSizes(e.currentTarget),onCalcitePopoverClose:()=>this._refocusOnView()},(0,E.K)("div",{class:Gt.popoverWrapper},Object.values(s).includes(!0)?(0,E.K)(je,{sketchOptions:n.sketchOptions,viewType:i?.type,visibleElements:new ze(s)}):void 0,o.snappingControls&&i&&t?(0,E.K)(Nt,{snappingManager:this.viewModel.snappingManager,snappingOptions:t,view:i,visibleElements:o.snappingControlsElements}):void 0))}_renderSelectionSetToolbar(){if("separate"!==this.contextualToolLocation)return;const e=this._renderSelectionSetItemGroup();return e?.length?(0,E.K)(j,{barStyle:this.toolbarKind,layout:this.layout,scale:this.scale},e):void 0}_renderSelectionSetItemGroupInline(){return"separate"===this.contextualToolLocation?[]:this._renderSelectionSetItemGroup()}_renderUndoRedoMenuItemGroup(){return(0,E.K)("div",{"group-kind":"split-button",key:"undo-redo-menu",priority:this.groupCollapsePriorities?.get("undoRedo")??w.Jl.Medium,slot:"actions-end"},this._renderUndoButton(),this._renderRedoButton())}_renderSettingsMenuItemGroup(){const e=[],t=[];this.customActions?.forEach((i=>{"settings-before"===i.position?t.push(i):"settings-after"===i.position&&e.push(i)}));const i=[...t.map((e=>this._renderToolbarItem(e))),this._renderSettingsMenuButton(),...e.map((e=>this._renderToolbarItem(e)))].filter(o.Ru);if(i.length)return(0,E.K)("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"settings-menu",priority:this.groupCollapsePriorities?.get("settings")??w.Jl.Max,slot:"actions-end"},i)}_renderSelectionSetItemGroup(){if(!this.updateGraphics.length)return[];const e="inline-end"===this.contextualToolLocation?"actions-end":void 0,t=this.customActions?.filter((e=>"before-selection-set"===e.position)),i=this.customActions?.filter((e=>"after-selection-set"===e.position)),n=this.groupCollapsePriorities?.get("selectionSet")??w.Jl.High;return[(0,E.K)("div",{"group-kind":"measured-content",key:"selection-count-chip-group",priority:n,slot:e},this._renderFeatureCountChip()),(0,E.K)("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"selection-set-tool-group",priority:n,slot:e},t?.map((e=>this._renderToolbarItem(e))),this._renderDuplicateButton(),this._renderDeleteButton(),i?.map((e=>this._renderToolbarItem(e))))]}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return[];const{messages:e,state:t}=this;return this._renderToolbarItem({id:"pointer-select",text:e.selectFeature,icon:"cursor",onclick:this._activateDefaultSelectTool,active:"ready"===t})}_renderCreateToolActionGroup(){const e=this._effectiveAvailableCreateTools?.flatMap((e=>this._renderBuiltInCreateToolItem(e)))??[],t=this.customToolOptions?.flatMap((e=>this._renderCustomToolItem(e)))??[];return(0,E.K)("div",{"group-kind":"overflow-group",key:"create-tools-group",priority:this.groupCollapsePriorities?.get("createTools")??w.Jl.High},e,t)}_renderBuiltInCreateToolItem(e){return this._renderToolbarItem({id:`${e}-button`,text:this.messages.draw[e],icon:jt[e],onclick:()=>this._activateCreateTool(e),active:this.activeTool===e&&!this._activeCustomToolOptions})}_renderCustomToolItem(e){const{toolKey:t}=e;return this._renderToolbarItem({id:`custom-${e.toolKey}`,text:e.label,icon:e.icon,onclick:()=>this._activateCreateTool(e.toolName,null,e),active:this._activeCustomToolOptions?.toolKey===t})}_renderUndoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"undo-button",text:this.messages.undo,icon:"undo",disabled:!this.viewModel.canUndo(),onclick:this.undo,flipRTL:!0}):[]}_renderRedoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"redo-button",text:this.messages.redo,icon:"redo",disabled:!this.viewModel.canRedo(),onclick:this.redo,flipRTL:!0}):[]}_renderSettingsMenuButton(){return this.visibleElements.settingsMenu?this._renderToolbarItem({id:"settings-menu-action",text:this.messagesCommon.settings,icon:"gear",active:this._popoverOpen,onclick:()=>this._popoverOpen=!this._popoverOpen,afterCreate:e=>this._calcitePopoverReferenceElement=e,afterUpdate:e=>this._calcitePopoverReferenceElement=e,afterRemoved:()=>this._calcitePopoverReferenceElement=null}):[]}_renderFeatureCountChip(){if(!this.visibleElements.selectionCountLabel)return[];const{layout:e,messages:t,scale:i,id:n,updateGraphics:{length:o}}=this,s=(0,Ft.V)(t.selectedCount,{count:o}),r="s"===i?99:999,l=o>r?(0,Ft.V)(t.selectedCountTruncated,{truncated:r}):o,a="s"===i&&"vertical"===e,c=a?`${n}-selection-chip-small`:`${n}-selection-chip`;return[a?(0,E.K)("span",{classes:{[Gt.chipVertical]:!0,[Gt.chipVerticalSmall]:"s"===this.scale},id:c,tabIndex:0,title:s},l):(0,E.K)("calcite-chip",{appearance:"outline",class:"horizontal"===e?Gt.chipHorizontal:Gt.chipVertical,id:c,kind:"brand",label:s,scale:"l"===i?"m":"s",tabIndex:0,title:"vertical"===e?s:void 0},"vertical"===e?l:s)]}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return[];const{messages:e}=this;return this._renderToolbarItem({id:"duplicate",text:this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature,icon:"copy",onclick:this._onDuplicateSelect})}_renderDeleteButton(){if(!this.visibleElements.deleteButton)return[];const{messages:e}=this,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return this._renderToolbarItem({id:"delete",text:t,icon:"trash",onclick:this.delete})}_renderToolbarItem(e){let{id:t,text:i,icon:n,disabled:o,onclick:s,active:r,flipRTL:l,afterCreate:a,afterUpdate:c,afterRemoved:d}=e;const u=`${this.id}-${t}`;return[(0,E.K)("calcite-action",{active:r,afterCreate:a,afterRemoved:d,afterUpdate:c,bind:this,"data-testid":t,disabled:o||"disabled"===this.state,icon:n,iconFlipRtl:l??!1,id:u,key:t,onclick:s,scale:this.scale,text:i,title:i})]}_remeasurePopoverSizes(e){try{const t=e.parentElement,i=this?.view?.container?.getBoundingClientRect(),n=t?.style;if(!(t&&i&&n&&this.view?.container?.contains(t)))return;const o=this._calcitePopoverReferenceElement;if(!o)return;const{bottom:s,top:r}=o.getBoundingClientRect();if("horizontal"===this.layout){const e=s<i.height/2;e!==("top"===this._relativeLocation)&&(this._relativeLocation=e?"top":"bottom"),e?(n?.setProperty("--sketch-view-height-offset",s-i.top+"px"),n?.setProperty("--sketch-view-margin-offset","30px")):(n?.setProperty("--sketch-view-height-offset",i.bottom-r+"px"),n?.setProperty("--sketch-view-margin-offset","15px"))}else"vertical"===this.layout&&(n.setProperty("--sketch-view-height-offset","15px"),n.setProperty("--sketch-view-margin-offset","15px"));const l=e.shadowRoot?.querySelector("div.header")?.getBoundingClientRect().height;n.setProperty("--sketch-popover-header-offset",`${l}px`)}catch(t){r.A.getLogger(this.declaredClass).warnOnce("Sketch failed to lay out settings menu.",t)}}_activateCreateTool(e,t,i){const n=this._activeCustomToolOptions;if(i||n){if(i?.toolKey===n?.toolKey)return void this.cancel()}else if(this.activeTool===e)return void this.cancel();this._selectionToolbar?.cancel(),this.create(e,t,i)}_onDuplicateSelect(){const e=this.duplicate(),t=this.viewModel.activeTool;"transform"!==t&&"reshape"!==t||this.update(e,{tool:t})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:i}=e;if(!e.aborted&&i.length){const e=t.tool,n=i.length>1&&"reshape"===e?"transform":e;this.update(i,{...t,tool:n})}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}_refocusOnView(){this.activeTool&&this.view?.focus()}};(0,n._)([(0,d.MZ)()],Wt.prototype,"_activeCustomToolOptions",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"activeTool",null),(0,n._)([(0,d.MZ)({readOnly:!0})],Wt.prototype,"activeTooltip",null),(0,n._)([(0,d.MZ)({cast:e=>{if(!e?.length)return null;const t=new Set(["point","polyline","polygon","rectangle","circle","multipoint","freehandPolyline","freehandPolygon","mesh"]);return e.filter((e=>t.has(e)))}})],Wt.prototype,"availableCreateTools",void 0),(0,n._)([(0,d.MZ)({readOnly:!0})],Wt.prototype,"createGraphic",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"creationMode",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"customToolOptions",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"customActions",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"defaultCreateOptions",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"defaultUpdateOptions",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"icon",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"label",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"labelOptions",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"layer",null),(0,n._)([(0,d.MZ)({type:["horizontal","vertical"],value:"horizontal"})],Wt.prototype,"layout",null),(0,n._)([(0,d.MZ)({value:"m"})],Wt.prototype,"scale",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"toolbarKind",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"contextualToolLocation",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"groupCollapsePriorities",void 0),(0,n._)([(0,d.MZ)(),(0,B.G)("esri/widgets/Sketch/t9n/Sketch")],Wt.prototype,"messages",void 0),(0,n._)([(0,d.MZ)(),(0,B.G)("esri/t9n/common")],Wt.prototype,"messagesCommon",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"snappingOptions",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"state",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"tooltipOptions",null),(0,n._)([(0,d.MZ)({readOnly:!0})],Wt.prototype,"updateGraphics",null),(0,n._)([(0,d.MZ)({type:p.A,nonNullable:!0})],Wt.prototype,"valueOptions",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"view",null),(0,n._)([(0,d.MZ)({type:y.A}),(0,zt.U)(["create","update","undo","redo"])],Wt.prototype,"viewModel",null),(0,n._)([(0,d.MZ)({type:M,nonNullable:!0})],Wt.prototype,"visibleElements",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"_effectiveAvailableCreateTools",null),(0,n._)([(0,d.MZ)()],Wt.prototype,"_defaultViewModel",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"_calcitePopoverReferenceElement",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"_relativeLocation",void 0),(0,n._)([(0,d.MZ)()],Wt.prototype,"_popoverOpen",void 0),Wt=(0,n._)([(0,u.$)("esri.widgets.Sketch")],Wt);const Ut=Wt},59649:(e,t,i)=>{i.d(t,{A:()=>s});var n=i(99486),o=i(99702);class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.values().next().value;this._peeker=e,this._observable=new o.I,this._items=new Set}get length(){return(0,n.gc)(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return(0,n.gc)(this._observable),this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach((t=>{e(t)||this._items.delete(t)})),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){(0,n.gc)(this._observable),yield*this._items}}},60008:(e,t,i)=>{i.d(t,{A6:()=>m,B8:()=>h,Xd:()=>d,Xr:()=>y,Yc:()=>I,hZ:()=>v,lw:()=>u,t2:()=>O,x8:()=>c});var n=i(44680),o=i(4336),s=i(9392),r=i(53494),l=i(20664),a=i(43047);function c(e,t,i){i*=.5;const n=Math.sin(i);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(i),e}function d(e,t){const i=2*Math.acos(t[3]),n=Math.sin(i/2);return n>(0,r.FD)()?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),i}function u(e,t,i){const n=t[0],o=t[1],s=t[2],r=t[3],l=i[0],a=i[1],c=i[2],d=i[3];return e[0]=n*d+r*l+o*c-s*a,e[1]=o*d+r*a+s*l-n*c,e[2]=s*d+r*c+n*a-o*l,e[3]=r*d-n*l-o*a-s*c,e}function p(e,t,i,n){const o=t[0],s=t[1],l=t[2],a=t[3];let c,d,u,p,h,y=i[0],g=i[1],m=i[2],_=i[3];return d=o*y+s*g+l*m+a*_,d<0&&(d=-d,y=-y,g=-g,m=-m,_=-_),1-d>(0,r.FD)()?(c=Math.acos(d),u=Math.sin(c),p=Math.sin((1-n)*c)/u,h=Math.sin(n*c)/u):(p=1-n,h=n),e[0]=p*o+h*y,e[1]=p*s+h*g,e[2]=p*l+h*m,e[3]=p*a+h*_,e}function h(e,t){const i=t[0],n=t[1],o=t[2],s=t[3],r=i*i+n*n+o*o+s*s,l=r?1/r:0;return e[0]=-i*l,e[1]=-n*l,e[2]=-o*l,e[3]=s*l,e}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function g(e,t){const i=t[0]+t[4]+t[8];let n;if(i>0)n=Math.sqrt(i+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);const o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*s+s]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+s]-t[3*s+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[s]=(t[3*s+i]+t[3*i+s])*n}return e}function m(e,t,i,n){const o=.5*Math.PI/180;t*=o,i*=o,n*=o;const s=Math.sin(t),r=Math.cos(t),l=Math.sin(i),a=Math.cos(i),c=Math.sin(n),d=Math.cos(n);return e[0]=s*a*d-r*l*c,e[1]=r*l*d+s*a*c,e[2]=r*a*c-s*l*d,e[3]=r*a*d+s*l*c,e}const _=a.c,v=a.s,b=a.g,f=u,M=a.b,w=a.h,T=a.l,C=a.j,S=C,Z=a.f,k=Z,L=a.n,O=a.a,E=a.e;function I(e,t,i){const n=(0,l.f)(t,i);return n<-.999999?((0,l.e)(A,x,t),(0,l.H)(A)<1e-6&&(0,l.e)(A,P,t),(0,l.n)(A,A),c(e,A,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,l.e)(A,t,i),e[0]=A[0],e[1]=A[1],e[2]=A[2],e[3]=1+n,L(e,e))}const A=(0,s.vt)(),x=(0,s.fA)(1,0,0),P=(0,s.fA)(0,1,0);const B=(0,o.vt)(),V=(0,o.vt)();const $=(0,n.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:b,calculateW:function(e,t){const i=t[0],n=t[1],o=t[2];return e[0]=i,e[1]=n,e[2]=o,e[3]=Math.sqrt(Math.abs(1-i*i-n*n-o*o)),e},conjugate:y,copy:_,dot:w,equals:E,exactEquals:O,fromEuler:m,fromMat3:g,getAxisAngle:d,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:h,len:S,length:C,lerp:T,mul:f,multiply:u,normalize:L,random:function(e){const t=r.Ov,i=t(),n=t(),o=t(),s=Math.sqrt(1-i),l=Math.sqrt(i);return e[0]=s*Math.sin(2*Math.PI*n),e[1]=s*Math.cos(2*Math.PI*n),e[2]=l*Math.sin(2*Math.PI*o),e[3]=l*Math.cos(2*Math.PI*o),e},rotateX:function(e,t,i){i*=.5;const n=t[0],o=t[1],s=t[2],r=t[3],l=Math.sin(i),a=Math.cos(i);return e[0]=n*a+r*l,e[1]=o*a+s*l,e[2]=s*a-o*l,e[3]=r*a-n*l,e},rotateY:function(e,t,i){i*=.5;const n=t[0],o=t[1],s=t[2],r=t[3],l=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*l,e[1]=o*a+r*l,e[2]=s*a+n*l,e[3]=r*a-o*l,e},rotateZ:function(e,t,i){i*=.5;const n=t[0],o=t[1],s=t[2],r=t[3],l=Math.sin(i),a=Math.cos(i);return e[0]=n*a+o*l,e[1]=o*a-n*l,e[2]=s*a+r*l,e[3]=r*a-s*l,e},rotationTo:I,scale:M,set:v,setAxes:function(e,t,i,n){const o=$;return o[0]=i[0],o[3]=i[1],o[6]=i[2],o[1]=n[0],o[4]=n[1],o[7]=n[2],o[2]=-t[0],o[5]=-t[1],o[8]=-t[2],L(e,g(e,o))},setAxisAngle:c,slerp:p,sqlerp:function(e,t,i,n,o,s){return p(B,t,o,s),p(V,i,n,s),p(e,B,V,2*s*(1-s)),e},sqrLen:k,squaredLength:Z,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},71981:(e,t,i)=>{i.d(t,{m:()=>s,o:()=>a});var n=i(94126),o=(i(76099),i(54761));const s=()=>(0,n.W)({icon:()=>i.e(16702).then(i.bind(i,16702)),label:()=>i.e(11839).then(i.bind(i,11839)),switch:()=>i.e(8989).then(i.bind(i,8989)),tooltip:()=>Promise.all([i.e(65251),i.e(31748)]).then(i.bind(i,31748))}),r="esri-labeled-switch",l={label:`${r}__label`,labelContent:`${r}__label-content`,iconInfo:`${r}__icon_info`,iconWarning:`${r}__icon_warning`,tooltip:`${r}__tooltip`};function a(e){let{checked:t,disabled:i,hint:n,key:s,label:r,onChange:a,hintIcon:c,hintKind:d}=e;return(0,o.K)("calcite-label",{class:l.label,disabled:i,key:s,layout:"inline-space-between",scale:"s"},n?(0,o.K)("div",{class:l.labelContent,key:"label-content"},(0,o.K)("div",null,r),(0,o.K)("calcite-icon",{class:"warning"!==d?l.iconInfo:l.iconWarning,icon:c??"information",id:s,scale:"s",tabIndex:0}),(0,o.K)("calcite-tooltip",{class:l.tooltip,overlayPositioning:"fixed",referenceElement:s},n)):r,(0,o.K)("calcite-switch",{checked:t,disabled:i,scale:"s",onCalciteSwitchChange:e=>a(e.currentTarget.checked)}))}},73582:(e,t,i)=>{i.d(t,{hr:()=>o,ie:()=>c,uC:()=>l,wf:()=>a});var n=i(15941);class o{constructor(e,t){this.min=e,this.max=t,this.range=t-e}normalize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(this.range,this.min,this.max,e,t,i)}clamp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,n.qE)(e-t,this.min,this.max)+t}monotonic(e,t,i){return e<t?t:t+r(this.range,e-t,i)}minimalMonotonic(e,t,i){return s(this.range,e,e+this.range,t,i)}center(e,t,i){return t=this.monotonic(e,t,i),this.normalize((e+t)/2,i)}diff(e,t,i){return this.monotonic(e,t,i)-e}shortestSignedDiff(e,t){e=this.normalize(e);const i=(t=this.normalize(t))-e,n=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(i)<Math.abs(n)?i:n}contains(e,t,i){return t=this.minimalMonotonic(e,t),(i=this.minimalMonotonic(e,i))>e&&i<t}}function s(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(n-=o)<t?n+=r(e,t-n):n>i&&(n-=r(e,n-i)),s&&n===i&&(n=t),n+o}function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.ceil((t-i)/e)*e+i}const l=new o(0,2*Math.PI),a=new o(-Math.PI,Math.PI),c=new o(0,360)},74e3:(e,t,i)=>{i.d(t,{CI:()=>s,fk:()=>r});i(81806);var n=i(15941),o=i(80963);function s(e,t){return e===t||null!=e&&null!=t&&(0,o.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function r(e,t,i){return e===t||null!=e&&null!=t&&(0,o.aI)(e.spatialReference,t.spatialReference)&&(0,n.Sp)(e.x,t.x,i)&&(0,n.Sp)(e.y,t.y,i)&&(0,n.Sp)(e.z??0,t.z??0,i)&&(0,n.Sp)(e.m??0,t.m??0,i)}},90761:(e,t,i)=>{i.d(t,{R:()=>o});var n=i(19898);class o extends n.R{constructor(e,t){super(e,t,"webmap")}}},90992:(e,t,i)=>{i.d(t,{E5:()=>s,JU:()=>o,Of:()=>n,g7:()=>r,lO:()=>l});i(50076);function n(e){return e&&"function"==typeof e.highlight}function o(e,t,i){return null==e||e>=i&&(0===t||e<=t)}function s(e,t){if(t&&e){const{minScale:i,maxScale:n}=e;if(function(e,t){return null!=e&&e>0||null!=t&&t>0}(i,n))return o(t,i,n)}return!0}function r(e){return!e?.minScale||!e.maxScale||e.minScale>=e.maxScale}function l(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}},94967:(e,t,i)=>{i.d(t,{$0:()=>u,B8:()=>r,CV:()=>p,D_:()=>o,Tl:()=>d,e$:()=>a,hZ:()=>s,hs:()=>c,kN:()=>h,lw:()=>l});var n=i(53494);function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function s(e,t,i,n,o,s,r){return e[0]=t,e[1]=i,e[2]=n,e[3]=o,e[4]=s,e[5]=r,e}function r(e,t){const i=t[0],n=t[1],o=t[2],s=t[3],r=t[4],l=t[5];let a=i*s-n*o;return a?(a=1/a,e[0]=s*a,e[1]=-n*a,e[2]=-o*a,e[3]=i*a,e[4]=(o*l-s*r)*a,e[5]=(n*r-i*l)*a,e):null}function l(e,t,i){const n=t[0],o=t[1],s=t[2],r=t[3],l=t[4],a=t[5],c=i[0],d=i[1],u=i[2],p=i[3],h=i[4],y=i[5];return e[0]=n*c+s*d,e[1]=o*c+r*d,e[2]=n*u+s*p,e[3]=o*u+r*p,e[4]=n*h+s*y+l,e[5]=o*h+r*y+a,e}function a(e,t,i){const n=t[0],o=t[1],s=t[2],r=t[3],l=t[4],a=t[5],c=Math.sin(i),d=Math.cos(i);return e[0]=n*d+s*c,e[1]=o*d+r*c,e[2]=n*-c+s*d,e[3]=o*-c+r*d,e[4]=l,e[5]=a,e}function c(e,t,i){const n=t[0],o=t[1],s=t[2],r=t[3],l=t[4],a=t[5],c=i[0],d=i[1];return e[0]=n*c,e[1]=o*c,e[2]=s*d,e[3]=r*d,e[4]=l,e[5]=a,e}function d(e,t,i){const n=t[0],o=t[1],s=t[2],r=t[3],l=t[4],a=t[5],c=i[0],d=i[1];return e[0]=n,e[1]=o,e[2]=s,e[3]=r,e[4]=n*c+s*d+l,e[5]=o*c+r*d+a,e}function u(e,t){const i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=-i,e[3]=n,e[4]=0,e[5]=0,e}function p(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function h(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function y(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}const g=l,m=y;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,t){const i=e[0],o=e[1],s=e[2],r=e[3],l=e[4],a=e[5],c=t[0],d=t[1],u=t[2],p=t[3],h=t[4],y=t[5],g=(0,n.FD)();return Math.abs(i-c)<=g*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-d)<=g*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-u)<=g*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(r-p)<=g*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(l-h)<=g*Math.max(1,Math.abs(l),Math.abs(h))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},fromRotation:u,fromScaling:p,fromTranslation:h,identity:o,invert:r,mul:g,multiply:l,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e},multiplyScalarAndAdd:function(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e[4]=t[4]+i[4]*n,e[5]=t[5]+i[5]*n,e},rotate:a,scale:c,set:s,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:m,subtract:y,translate:d},Symbol.toStringTag,{value:"Module"}))},95752:(e,t,i)=>{i.d(t,{p4:()=>n,xk:()=>o});i(20459),i(54761),i(76099);function n(e){return e&&"function"==typeof e.render}function o(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);
//# sourceMappingURL=14410.d6dc3e3c.chunk.js.map