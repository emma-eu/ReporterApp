"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[15082,73836],{55:(e,t,n)=>{n.d(t,{cZ:()=>R,XW:()=>j,fe:()=>O});var r,i=n(3825),s=n(50076),o=n(87663),a=(n(98618),n(1484)),l=n(13312);class u{constructor(){this.version="",this.queryResult=new c}}class c{constructor(){this.featureResult=new d}}class d{constructor(){this.objectIdFieldName="",this.uniqueIdField=new p,this.globalIdFieldName="",this.geohashFieldName="",this.geometryProperties=new h,this.geometryType=null,this.spatialReference=new l.A,this.exceededTransferLimit=!1,this.hasZ=!1,this.hasM=!1,this.transform=new y,this.fields=[],this.fieldNameToAttributeIndexMap={},this.values=[],this.features=[],this.geometryFields=[]}}class p{constructor(){this.name="",this.isSystemMaintained=!1}}class h{constructor(){this.shapeAreaFieldName="",this.shapeLengthFieldName="",this.units=""}}class y{constructor(){this.quantizeOriginPosition="upperLeft",this.scale=new f,this.translate=new m}}class f{constructor(){this.xScale=0,this.yScale=0,this.mScale=0,this.zScale=0}}class m{constructor(){this.xTranslate=0,this.yTranslate=0,this.mTranslate=0,this.zTranslate=0}}class g{constructor(){this.name="",this.fieldType="esriFieldTypeString",this.alias="",this.sqlType="sqlTypeVarchar",this.domain="",this.defaultValue=""}}class _{constructor(){this.attributes=[],this.compressedGeometry=new b,this.centroid=new b,this.aggregateGeometries=[]}}class b{constructor(){this.geometryType=null,this.lengths=[],this.coords=[]}}!function(e){e.ELEMENTUID="ELEMENTUID",e.TYPENAME="TYPENAME"}(r||(r={}));const w=[r.ELEMENTUID,r.TYPENAME];var T,I;!function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME"}(T||(T={})),function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME",e[e.FROMUID=2]="FROMUID",e[e.TOUID=3]="TOUID"}(I||(I={}));var v,E,M,A,S=n(57502),k=n(31830);function N(e){const t=new b;t.geometryType=k.bV[e.geometry_type.value];const n=[],r=[];for(let i=0;i<e.lengths.length;i++)n.push(e.lengths[i]);for(let i=0;i<e.coords.length;i++)r.push(e.coords[i]);return t.lengths=n,t.coords=r,t}function x(e){const t=new g;return t.name=e.name,t.alias=e.alias,t.fieldType=k.r5[e.field_type.value],t.sqlType=M[e.sql_type.value],t.domain=e.domain,t.defaultValue=e.default_value,t}function L(e){const t=x(e);return t.geometryType=k.bV[e.geometry_type.value],t}function C(e){const t=new y;t.quantizeOriginPosition=E[e.quantizeOriginPosition.value];const n=t.scale,r=e.scale;n.xScale=r.xScale,n.yScale=r.yScale,n.mScale=r.mScale,n.zScale=r.zScale;const i=t.translate,s=e.translate;return i.xTranslate=s.xTranslate,i.yTranslate=s.yTranslate,i.mTranslate=s.mTranslate,i.zTranslate=s.zTranslate,t}async function R(e,t){t??=!1;const n={generateAllSublayers:t,namedTypeDefinitions:new Map};return await async function(e){const t=await(0,i.A)(e,{responseType:"array-buffer"}),n=await t.data;return async function(e){const t=new((await(0,S.I)()).MapOfObjectIdentifierSetsDecoder),n=t.decode(new Uint8Array(e)),r=new Map;if(0!==n.error_code)throw new s.A("knowledge-graph:layer-support-utils",n.error_message);const i=t.get_map_of_identifier_sets(),o=i.keys,a=o.size();for(let l=0;l<a;l++){const e=o.get(l),t=i.query_identifier_set(e),n=[];if(t.id_array_type.value===A.GLOBALID_ARRAY){const e=t.get_globalid_array(),r=e.count();for(let t=0;t<r;t++)n.push(e.get_globalid_at(t))}else if(t.id_array_type.value===A.IDENTIFIER_ARRAY){const e=t.get_identifier_array(),r=e.count();for(let t=0;t<r;t++)n.push(e.get_identifier_at(t).toString())}else if(t.id_array_type.value===A.STRING_ARRAY){const e=t.get_string_array(),r=e.count();for(let t=0;t<r;t++)n.push(e.get_string_at(t))}else{if(t.id_array_type.value!==A.OID_ARRAY)throw new s.A("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const e=t.get_oid_array(),r=e.count();for(let t=0;t<r;t++)n.push(e.get_objectid_at(t).toString())}}r.set(e,n)}return t.delete(),r}(new Uint8Array(n))}(e).then((e=>{!function(e,t){for(const[n,r]of e){const e=(0,o.tE)(t.namedTypeDefinitions,n,(()=>({useAllData:!1,members:new Map})));for(const t of r)e.members.has(t)||e.members.set(t,{id:t})}}(e,n)})),n}async function O(e){const t=await(0,S.I)(),n=new t.MapOfObjectIdentifierSets;!function(e,t,n){for(const[r,i]of n.namedTypeDefinitions){if(!i.members||i.useAllData)continue;const n=i.members.keys();let s=!1,o=!0;const a=new t.ObjectIdArray,l=new t.StringArray,u=new t.GlobalIdArray,c=new t.IdentifierArray,d=new t.ObjectIdentifierSet;for(const e of n)o&&(s=!isNaN(Number(e)),o=!1),s?a.add_objectid(Number(e)):(l.add_string(e),u.add_globalid(e)),c.add_identifier(e);d.set_oid_array(a),d.set_string_array(l),d.set_globalid_array(u),d.set_identifier_array(c),a.delete(),l.delete(),u.delete(),c.delete(),e.put_identifier_set(r,d),d.delete()}}(n,t,e);const r=new t.MapOfObjectIdentifierSetsEncoder;try{r.set_map_of_identifier_sets(n),r.encode();const e=r.get_encoding_result();if(0!==e.error.error_code)throw new s.A("knowledge-graph:layer-support-utils",e.error.error_message);const t=structuredClone(e.get_byte_buffer());return r.delete(),t}finally{n.delete()}}async function F(e){const t=await(0,i.A)(e,{responseType:"array-buffer"});return async function(e){const t=new((await(0,S.I)()).FeatureCollectionDecoder),n=t.decode(new Uint8Array(e));if(0!==n.error_code)throw new s.A("knowledge-graph:layer-support-utils",n.error_message);const r=t.get_feature_collection(),i=function(e){const t=new u;t.version=e.version;const n=e.get_query_result();if(0!==n.results_type.value)throw new Error("Got a non-feature collection type");const r=n.get_feature_result(),i=t.queryResult.featureResult;i.objectIdFieldName=r.objectid_field_name,i.exceededTransferLimit=r.exceeded_transfer_limit,i.hasM=r.has_m,i.hasZ=r.has_z,i.geometryType=k.bV[r.geometry_type.value],i.globalIdFieldName=r.globalid_field_name,i.geohashFieldName=r.geohash_field_name;const s=i.uniqueIdField,o=r.unique_id_field;s.name=o.name,s.isSystemMaintained=o.isSystemMaintained;const a=i.geometryProperties,l=r.geometry_properties;a.shapeAreaFieldName=l.shapeAreaFieldName,a.shapeLengthFieldName=l.shapeLengthFieldName,a.units=l.units;const c=i.spatialReference,d=r.spatial_reference;c.wkid=d.wkid,c.latestWkid=d.latestWkid,c.vcsWkid=d.vcsWkid,c.latestVcsWkid=d.latestVcsWkid,c.wkt=d.wkt,i.transform=C(r.transform);const p=i.fields,h=i.fieldNameToAttributeIndexMap,y=r.fields,f=y.size();for(let u=0;u<f;u++){const e=y.get(u),t=x(e);p.push(t),h[t.name]=u,e.delete()}y.delete();const m=i.values,g=r.values_count();for(let u=0;u<g;u++)m.push(r.get_value_at(u));const b=i.features,T=r.features,I=T.size();if(I>0)for(const u of w)if(void 0===h[u])throw new Error(`Feature collection missing required attribute: ${u}`);for(let u=0;u<I;u++){const e=new _,t=T.get(u),n=e.attributes,r=t.attributes_count();for(let l=0;l<r;l++)n.push(t.get_attribute_at(l));const i=t.get_compressed_geometry();i&&(e.compressedGeometry=N(i),e.centroid=N(t.get_centroid()));const s=e.aggregateGeometries,o=t.aggregate_geometries,a=o.size();for(let l=0;l<a;l++){const e=o.get(l),t=N(e);s.push(t),e.delete()}o.delete(),b.push(e),t.delete()}T.delete();const v=i.geometryFields,E=r.geometry_fields,M=E.size();for(let u=0;u<M;u++){const e=E.get(u),t=L(e);v.push(t),e.delete()}return E.delete(),t}(r);return t.delete(),i}(await t.data)}function D(e,t){if(!e?.queryResult?.featureResult)return t;const n=e.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const i of e.queryResult.featureResult.features){const e=i.attributes[n[r.TYPENAME]],s=(0,o.tE)(t.namedTypeDefinitions,e,(()=>({useAllData:!1,members:new Map}))),l=i.attributes[n[r.ELEMENTUID]];if(i.compressedGeometry?.coords?.length>0){let e=i.compressedGeometry.lengths;"esriGeometryPoint"===i.compressedGeometry.geometryType&&(e=[]),s.members.set(l,{id:l,linkChartLocation:new a.A(e,i.compressedGeometry.coords)})}else s.members.set(l,{id:l})}return t}!function(e){e[e.featureResult=0]="featureResult",e[e.countResult=1]="countResult",e[e.idsResult=2]="idsResult"}(v||(v={})),function(e){e[e.upperLeft=0]="upperLeft",e[e.lowerLeft=1]="lowerLeft"}(E||(E={})),function(e){e[e.sqlTypeBigInt=0]="sqlTypeBigInt",e[e.sqlTypeBinary=1]="sqlTypeBinary",e[e.sqlTypeBit=2]="sqlTypeBit",e[e.sqlTypeChar=3]="sqlTypeChar",e[e.sqlTypeDate=4]="sqlTypeDate",e[e.sqlTypeDecimal=5]="sqlTypeDecimal",e[e.sqlTypeDouble=6]="sqlTypeDouble",e[e.sqlTypeFloat=7]="sqlTypeFloat",e[e.sqlTypeGeometry=8]="sqlTypeGeometry",e[e.sqlTypeGUID=9]="sqlTypeGUID",e[e.sqlTypeInteger=10]="sqlTypeInteger",e[e.sqlTypeLongNVarchar=11]="sqlTypeLongNVarchar",e[e.sqlTypeLongVarbinary=12]="sqlTypeLongVarbinary",e[e.sqlTypeLongVarchar=13]="sqlTypeLongVarchar",e[e.sqlTypeNChar=14]="sqlTypeNChar",e[e.sqlTypeNVarChar=15]="sqlTypeNVarChar",e[e.sqlTypeOther=16]="sqlTypeOther",e[e.sqlTypeReal=17]="sqlTypeReal",e[e.sqlTypeSmallInt=18]="sqlTypeSmallInt",e[e.sqlTypeSqlXml=19]="sqlTypeSqlXml",e[e.sqlTypeTime=20]="sqlTypeTime",e[e.sqlTypeTimestamp=21]="sqlTypeTimestamp",e[e.sqlTypeTimestamp2=22]="sqlTypeTimestamp2",e[e.sqlTypeTinyInt=23]="sqlTypeTinyInt",e[e.sqlTypeVarbinary=24]="sqlTypeVarbinary",e[e.sqlTypeVarchar=25]="sqlTypeVarchar"}(M||(M={})),function(e){e[e.OID_ARRAY=0]="OID_ARRAY",e[e.GLOBALID_ARRAY=1]="GLOBALID_ARRAY",e[e.STRING_ARRAY=2]="STRING_ARRAY",e[e.IDENTIFIER_ARRAY=3]="IDENTIFIER_ARRAY"}(A||(A={}));const j={fetchAndConvertSerializedLinkChart:e=>async function(e){const t=[],n={generateAllSublayers:!1,namedTypeDefinitions:new Map};return e.entitiesUrl&&t.push(F(e.entitiesUrl).then((e=>{D(e,n)}))),e.relationshipsUrl&&t.push(F(e.relationshipsUrl).then((e=>{D(e,n)}))),await Promise.all(t),n}(e)}},2948:(e,t,n)=>{n.d(t,{MY:()=>m,Td:()=>y,UT:()=>f,e$:()=>_,iW:()=>g,qN:()=>d});var r=n(69539),i=n(95114),s=n(57491),o=n(47703),a=n(89465),l=n(86659);const u={initializeLayersFromClientData:async(e,t,n)=>{if(t||(t=[...e.layers,...e.tables].map((e=>e.graphTypeName))),0===t?.length)return;const r=new Map;for(const s of t)r.set(s,c(e,s));const i=await(0,o.fetchClientDataAtKeys)(e.dataManager.knowledgeGraph,Array.from(r.values()),{requestOptions:{signal:n?.signal}});for(const s of[...e.layers,...e.tables]){const t=s.objectType.name;if(null==t)continue;const n=i.get(c(e,t));if(n){const e=JSON.parse(n);null===e||"object"!=typeof e||e.hasOwnProperty("showLabels")||(e.showLabels=!1),s.read(e,{origin:"service"})}}}},c=(e,t)=>"knowledge-graph"===e.type?`${t}/Map`:`${t}/LinkChart/LinkChartSubLayer`;async function d(e,t,n){return u.initializeLayersFromClientData(e,t,n)}const p=["#4a0932","#b31515","#18382e","#a64f1b","#102432","#8c213f","#ed9310","#2c6954","#144d59","#ffc730","#75351e","#454f4b","#78b1c2","#191921","#8f8f82","#9be0c0","#dbb658","#87b051","#11495c","#c43541","#9c5596","#44498b","#ad9d63","#86afb3","#5c98ca","#b0bfa2","#73241f","#b86b53","#d9d78c","#3e756d","#f260a1","#a0d17d","#c27c30","#eb82eb","#ffdf3c","#ffb259","#ab52b3","#3cccb4","#0095ba","#d92b30"],h="#8f8f82";function y(e){return e<0||e>=p.length?new r.A(h):new r.A(p[e])}function f(e){const t=e.toArray();return new a.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,style:"solid",width:.75,color:t},{type:"CIMVectorMarker",enable:!0,size:6,markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-10,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[1.96,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:t}]}}]}]}}})}function m(e){let t="ESRI__ID",n=4;for(const r of e)if(r.name){if("name"===r.name.toLowerCase()){t=r.name;break}r.name.toLowerCase().includes("name")?(t=r.name,n=2):"esriFieldTypeString"===r.fieldType&&n>3&&(t=r.name,n=3)}return t}function g(e,t,n){const r={color:[80,80,80],haloColor:[255,255,255],haloSize:.7,font:{size:10,weight:"normal"}},o=new i.A({labelExpressionInfo:new s.A({expression:"ESRI__ID"===n?`${t}`:`$feature.${n}`}),labelPlacement:"above-center",symbol:new l.A(r)}),a=new i.A({labelExpressionInfo:new s.A({expression:`'${t}' + IIf($feature.ESRI__AggregationCount>1, ' (' + $feature.ESRI__AggregationCount + ')', '')`}),labelPlacement:"center-along",labelPosition:"parallel",repeatLabel:!1,symbol:new l.A({...r,yoffset:"12px"})});return"entity"===e?[o]:[a]}function _(e,t,n){const r={color:[255,255,255],haloColor:[0,0,0],haloSize:.7,font:{size:10,weight:"bold"}},o="ESRI__ID"===n?`${e}`:`$feature.${n}`;return"point"===t?[new i.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"above-center",symbol:new l.A(r)})]:"polyline"===t?[new i.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"center-along",repeatLabel:!0,symbol:new l.A(r)})]:"polygon"===t?[new i.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"always-horizontal",symbol:new l.A(r)})]:null}},5364:(e,t,n)=>{n.d(t,{C:()=>u,X:()=>l});var r=n(35143),i=n(94643),s=n(3975),o=(n(81806),n(76460),n(46053)),a=(n(47249),n(85842));let l=class extends i.A{constructor(e){super(e),this.addHandles([this.on("before-add",(e=>{null==e.item&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(i.A.ofType(this.itemType.Type))(e):new i.A(e)}};function u(e,t){return{type:e,cast:s.H,set(n){const r=(0,s.V)(n,this._get(t),e);r.owner=this,this._set(t,r)}}}(0,r._)([(0,o.MZ)()],l.prototype,"owner",null),l=(0,r._)([(0,a.$)("esri.core.support.OwningCollection")],l)},5551:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(35143),i=n(91967),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842));let a=class extends i.A{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,r._)([(0,s.MZ)()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,r._)([(0,s.MZ)()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),a=(0,r._)([(0,o.$)("esri.views.support.debugFlags")],a);const l=new a},5682:(e,t,n)=>{n.d(t,{j:()=>o});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===e.minScale&&n.maxScale===e.maxScale?n:e}};return(0,r._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,r._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,r._)([(0,i.MZ)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,r._)([(0,s.$)("esri.layers.mixins.ScaleRangeLayer")],t),t}},6127:(e,t,n)=>{n.d(t,{m:()=>r});const r=new(n(45802).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},8893:(e,t,n)=>{n.d(t,{k5:()=>c,aq:()=>u,Wq:()=>d});n(39356);var r=n(50076),i=(n(19247),n(65215),n(23701),n(63733),n(33750),n(85646),n(45802));(0,i.O)()({none:"none",startAndEnd:"start-and-end",startOnly:"start-only"}),(0,i.O)()({absoluteValue:"absolute-value",multiplier:"multiplier"});const s=new Map([["basic-grid","basic-grid"],["geographic-organic-standard","geographic-organic-standard"],["hierarchical-bottom-to-top","hierarchical-bottom-to-top"],["hierarchical-top-to-bottom","hierarchical-bottom-to-top"],["organic-community","organic-community"],["organic-fusiform","organic-standard"],["organic-leaf-circle","organic-standard"],["organic-standard","organic-standard"],["radial-node-centric","radial-root-centric"],["radial-root-centric","radial-root-centric"],["tree-bottom-to-top","tree-left-to-right"],["tree-left-to-right","tree-left-to-right"],["tree-right-to-left","tree-left-to-right"],["tree-top-to-bottom","tree-left-to-right"],["chronological-mono-timeline","chronological-mono-timeline"],["chronological-multi-timeline","chronological-multi-timeline"]]);var o=n(47703),a=n(35380);n(89465),n(86875),n(86659);function l(e,t){const n=new Map;if(t.dataModel?.relationshipTypes)for(const r of t.dataModel.relationshipTypes)r.name&&n.set(r.name,[]);for(const r of e)n.has(r.typeName)&&n.get(r.typeName)?.push(r.id);return n}async function u(e,t,n){const r=[],i=l(e,t),s={},u=[];for(const[o,a]of i){if(a.length<1)continue;const e=`${o}_ids`;s[e]=a,u.push(`MATCH (n)-[r:${o}]->(m) WHERE id(r) in $${e} RETURN id(n), labels(n)[0], id(m), labels(m)[0]`)}if(0===u.length)return[];const c=u.join(" UNION "),d=new a.A({openCypherQuery:c,bindParameters:s}),p=(await(0,o.executeQueryStreaming)(t,d,n?.requestOptions)).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await p.read();if(e)break;for(const n of t)r.push({id:n[0],typeName:n[1]}),r.push({id:n[2],typeName:n[3]})}return r}const c=e=>s.get(e)??"radial-root-centric";function d(e){if(!e.spatialReference.isWGS84)throw new r.A("knowledge-graph:layer-support-utils","The utilsExtentToInBoundsRings function only supports WGS84 spatial references.");return e.clone().normalize().map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}},9505:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(19247),a=n(27544);let l=class extends a.A{constructor(e){super(e),this.layoutGeometry=null}};(0,r._)([(0,i.MZ)({type:o.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.Entity")],l);const u=l},11265:(e,t,n)=>{n(65256),n(50265),n(39348),n(38042);var r=n(63860),i=n(3825),s=n(50076);async function o(e){if(null!=l.fetchBundleAsset)return l.fetchBundleAsset(e);const t=await(0,i.A)(e,{responseType:"text"});return JSON.parse(t.data)}class a{constructor(e){let t,{base:n="",pattern:r,location:i=new URL(window.location.href)}=e;t="string"==typeof i?e=>new URL(e,new URL(i,window.location.href)).href:i instanceof URL?e=>new URL(e,i).href:i,this.pattern="string"==typeof r?new RegExp(`^${r}`):r,this.getAssetUrl=t,n=n?n.endsWith("/")?n:n+"/":"",this.matcher=new RegExp(`^${n}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return async function(e,t,n,i){const a=t.exec(n);if(!a)throw new s.A("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${t}"`);const l=a[1]?`${a[1]}/`:"",u=a[2],c=(0,r.xO)(i),d=`${l}${u}.json`,p=c?`${l}${u}_${c}.json`:d;let h;try{h=await o(e(p))}catch(y){if(p===d)throw new s.A("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:y});try{h=await o(e(d))}catch(y){throw new s.A("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:y})}}return h}(this.getAssetUrl,this.matcher,e,t)}}const l={};var u=n(28899);(0,r.ao)(function(e){return new a(e)}({pattern:"esri/",location:u.s}))},12718:(e,t,n)=>{n.d(t,{P:()=>I});var r=n(35143),i=n(91967),s=n(50076),o=n(76460),a=n(87663),l=n(50346),u=n(34154),c=n(46053),d=(n(81806),n(47249),n(85842)),p=n(76797),h=n(65215),y=n(9624),f=n(80963),m=n(21009),g=n(33750),_=n(8893),b=n(47703),w=n(35380),T=n(97015);let I=class extends i.A{constructor(e){super(e),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const t=new Map;e.knowledgeGraph.dataModel.entityTypes?.forEach((n=>{n.name&&(t.set(n.name,"entity"),this._processingCacheUpdatesLookup.set(n.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(n.name),n.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(n.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((n=>{n.name&&(t.set(n.name,"relationship"),this._processingCacheUpdatesLookup.set(n.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(n.name),n.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(n.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((n,r)=>{if("entity"===t.get(r))this.entityTypeNames.add(r);else{if("relationship"!==t.get(r))return o.A.getLogger(this).warn(`A named type, ${r}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(r);this.relationshipTypeNames.add(r)}const i=new Map;n.members?.forEach((e=>{(0,a.tE)(this.memberIdTypeLookup,e.id,(()=>new Set)).add(r);const t=this.getById(e.id);t&&i.set(e.id,t)})),this.sublayerCaches.set(r,i)}))}addToLayer(e){e.forEach((e=>{let{typeName:t,id:n}=e;if(!this.inclusionModeDefinition)throw new s.A("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){const e=this.inclusionModeDefinition.namedTypeDefinitions.get(t);e.members||(e.members=new Map),e.members.set(n,{id:n}),(0,a.tE)(this.memberIdTypeLookup,n,(()=>new Set)).add(t)}}else{const e=new Map;e.set(n,{id:n}),this.inclusionModeDefinition.namedTypeDefinitions.set(t,{useAllData:!1,members:e}),(0,a.tE)(this.memberIdTypeLookup,n,(()=>new Set)).add(t)}}))}getById(e){return g.A.getInstance().readFromStoreById(e)}async getData(e,t,n){if(t.objectType.name&&this.inclusionModeDefinition?.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(t.objectType.name))return[];let r;if(r=e||new T.A({where:"1=1",outFields:["*"]}),"link-chart"===t.parentCompositeLayer.type){const e=t.parentCompositeLayer,n=this._processingCacheUpdatesLookup.get(t.objectType.name??""),i=r.outFields;i&&1===i.length&&i[0]===m.dr&&"1=1"===r.where||await Promise.all(n??[]);const s=this.sublayerCaches.has(t.objectType.name??"")?Array.from(this.sublayerCaches.get(t.objectType.name)?.values()):[],o=[];return s.forEach((n=>{if(this.relationshipTypeNames.has(t.objectType.name)){n.geometry=e.relationshipLinkChartDiagramLookup.get(n.attributes[t.objectIdField]);const r=this.memberIdTypeLookup.get(n.attributes[m.Cz]),i=this.memberIdTypeLookup.get(n.attributes[m.KQ]),s=this._isEndEntitySpatial(r,n,m.Cz),o=this._isEndEntitySpatial(i,n,m.KQ);n.attributes[m.BL]=Number(s&&o)}else{n.geometry=e.entityLinkChartDiagramLookup.get(n.attributes[t.objectIdField]);const r=this.geographicLookup.get(t.objectType.name);r&&n.attributes[r.name]?n.attributes[m.BL]=1:n.attributes[m.BL]=0}n.attributes[m.T1]=n.geometry,o.push(n)})),o}return this.retrieveDataFromService(r,t,n)}async getConnectedRecordIds(e,t,n){const r=[];let i="";const s=this._getNamedTypeIdMapFromNodeIds(e);if(t&&0!==t?.length){for(const e of t)i=i+e+"|";i=i.slice(0,-1)}const o={},a=[];for(const[c,d]of s){const e=`${c}_ids`;o[e]=d,t&&0!==t?.length?a.push(`MATCH (n:${c}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r:${i}]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`):a.push(`MATCH (n:${c}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`)}if(!a.length)return r;const l=a.join(" UNION "),u=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new w.A({openCypherQuery:l,bindParameters:o}),{signal:n?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await u.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];r.push({id:e[0],typeName:e[1]}),r.push({id:e[2],typeName:e[3]})}}return r}async getRelationshipsBetweenNodes(e,t,n){const r=this._getNamedTypeIdMapFromNodeIds(e);if(0===r.size)return[];const i={relationshipExclusionIds:t,possibleConnectionEntityIds:e},s=[];for(const[u,c]of r.entries()){const e=`${u}_ids`;i[e]=c,s.push(`MATCH (n:${u}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]->(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const o=s.join(" UNION "),a=[],l=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new w.A({openCypherQuery:o,bindParameters:i}),{signal:n?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await l.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];a.push({id:e[0],typeName:e[1]})}}return a}async getRelationshipsFromNodes(e,t,n,r){const i=this._getNamedTypeIdMapFromNodeIds(e);if(0===i.size||0===t.length)return[];const s={relationshipExclusionIds:n,possibleConnectionEntityIds:t},o=[];for(const[d,p]of i.entries()){const e=`${d}_ids`;s[e]=p,o.push(`MATCH (n:${d}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]-(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const a=o.join(" UNION "),l=new Map,u=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new w.A({openCypherQuery:a,bindParameters:s}),{signal:r?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await u.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];let r=l.get(e[1]);r||(r=new Set,l.set(e[1],r)),r.add(e[0])}}const c=[];for(const[d,p]of l)for(const e of p)c.push({id:e,typeName:d});return c}async refreshCacheContent(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0;const o=g.A.getInstance(),u=[],c=new Map,d=new Map;this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&d.set(e.name,e)})),this.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&d.set(e.name,e)})),e||this.inclusionModeDefinition?e?e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const t of this.memberIdTypeLookup.get(e))c.has(t)?c.get(t)?.push(e):c.set(t,[e])})):this.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e.useAllData?c.set(t,null):e.members&&e.members.forEach((e=>{c.has(t)&&null!==c.get(t)?c.get(t)?.push(e.id):c.set(t,[e.id])}))})):(this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&c.set(e.name,null)})),this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&c.set(e.name,null)})));for(const[l,p]of c){const e=new Set(p),c=new Promise(((u,c)=>{(async()=>{const u=new Set,c=[];let h,y="",f=!1;if(t||d.get(l)?.properties?.forEach((e=>{e.name&&u.add(e.name)})),n&&this.geographicLookup.has(l)){const e=this.geographicLookup.get(l)?.name;e&&u.add(e)}if(this.entityTypeNames.has(l))y=`MATCH (n:${l}) ${p?"WHERE id(n) IN $ids ":""}return ID(n)`,u.forEach((e=>{y+=`, n.${e}`,c.push(e)}));else{if(!this.relationshipTypeNames.has(l))throw new s.A("knowledge-graph:layer-data-manager",`The graph type of ${l} could not be determined. Was this type set in the KG data model and inclusion definition?`);f=!0,y=`MATCH ()-[n:${l}]->() ${p?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,u.forEach((e=>{y+=`, n.${e}`,c.push(e)}))}h=new w.A(p?{openCypherQuery:y,bindParameters:{ids:p}}:{openCypherQuery:y});const g=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,h,{signal:i?.signal})).resultRowsStream.getReader();for(;;){const{done:t,value:n}=await g.read();if(t)break;const i=[];for(let r=0;r<n.length;r++){const t=n[r];let s=0,o=0;const l={properties:{}};for(l.id=t[s],s++,o++,f&&(l.originId=t[s],s++,o++,l.destinationId=t[s],s++,o++,(0,a.tE)(this.nodeConnectionsLookup,l.originId,(()=>new Set)).add(l.id),(0,a.tE)(this.nodeConnectionsLookup,l.destinationId,(()=>new Set)).add(l.id),(0,a.tE)(this.relationshipConnectionsLookup,l.id,(()=>[l.originId,l.destinationId])));s<t.length;s++)l.properties[c[s-o]]=t[s];e.delete(l.id),i.push(l)}const s=o.writeToStore(i,m.dr,this.geographicLookup.get(l)?.name);this.sublayerCaches.has(l)||this.sublayerCaches.set(l,new Map),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.has(l)&&this.inclusionModeDefinition?.namedTypeDefinitions.set(l,{useAllData:!1,members:new Map}),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members&&(this.inclusionModeDefinition.namedTypeDefinitions.get(l).members=new Map);const u=this.sublayerCaches.get(l);s.forEach((e=>{u?.set(e.attributes[m.dr],e),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members.has(e.attributes[m.dr])&&(this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members.set(e.attributes[m.dr],{id:e.attributes[m.dr]}),(0,a.tE)(this.memberIdTypeLookup,e.attributes[m.dr],(()=>new Set)).add(l))}))}const _=this.inclusionModeDefinition?.namedTypeDefinitions.get(l);if(_)for(const t of e)_.members?.delete(t)})().then((()=>{u(null)})).catch((e=>{"AbortError"===e.name?u(null):c(e)}))}));u.push(c),this._processingCacheUpdatesLookup.get(l)?.push(c)}if(await Promise.all(u),i?.signal?.aborted)throw(0,l.NK)()}removeFromLayer(e){const t=new Set,n=new Set(e.map((e=>e.id)));for(const r of e)t.add(r.typeName),1===this.memberIdTypeLookup.get(r.id)?.size?this.memberIdTypeLookup.delete(r.id):this.memberIdTypeLookup.get(r.id)?.delete(r.typeName),this.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{t===r.typeName&&e.members?.has(r.id)&&e.members.delete(r.id)}));t.forEach((e=>{this.sublayerCaches.get(e)?.forEach(((t,r)=>{n.has(r)&&this.sublayerCaches.get(e)?.delete(r)}))}))}async retrieveDataFromService(e,t,n){const r=g.A.getInstance(),i=new Set,o=[];let a,l="",c=[];const d="relationship"===t.graphType,T=this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData,I=t.parentCompositeLayer.sublayerIdsCache.get(t.objectType.name);let v=!T&&I?Array.from(I).sort():null;if(this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData)this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData&&null!=e.objectIds&&(v=e.objectIds);else if(null!=e.objectIds&&v&&v.length>0){const t=e.objectIds;e.objectIds=v.filter((e=>t.includes(e)))}else if(null!=e.objectIds)v=e.objectIds;else{if(this.inclusionModeDefinition?.namedTypeDefinitions.has(t.objectType.name)&&(!this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members||this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members?.size<1))return e.objectIds=[],[];e.objectIds=v}if(null!=e.outFields){const n=e.outFields;n.includes("*")?t.fields.forEach((e=>{i.add(e.name)})):n.forEach((e=>{e!==m.dr&&e!==t.geometryFieldName&&i.add(e)}))}if(null!=e.geometry){const n=e.geometry;let r;const c=t.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,m=c?.spatialReference,g=c?.serviceCapabilities?.geometryCapabilities;let b=g?.geometryMaxBoundingRectangleSizeX,T=g?.geometryMaxBoundingRectangleSizeY;if("point"===n.type){let e=n;e.spatialReference?.isWGS84||(await(0,y.initializeProjection)(e.spatialReference,f.KK),e=(0,y.project)(e,f.KK)),r=new p.A({spatialReference:f.KK,xmin:e.x-1e-4,ymin:e.y-1e-4,xmax:e.x+1e-4,ymax:e.y+1e-4})}else n?.extent?.spatialReference&&!n.spatialReference?.isWGS84?(await(0,y.initializeProjection)(n.extent.spatialReference,f.KK),r=(0,y.project)(n.extent,f.KK)):r=n.extent;if(b&&T&&m){if(4326!==m.wkid){const e=new p.A({spatialReference:m,xmax:b,ymax:T}),t=(0,y.project)(e,f.KK);b=t.xmax,T=t.ymax}if(r.xmax-r.xmin>b)throw new s.A("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${b}\xb0 latitude, limit exceeded`);if(r.ymax-r.ymin>T)throw new s.A("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${T}\xb0 longitude, limit exceeded`)}if(null!=e.where&&"1=1"!==e.where){const n=await(0,u.GP)(e.where.toUpperCase(),t.fieldsIndex);t.fields.forEach((e=>{n.fieldNames.includes(e.name)&&i.add(e.name)}))}l=d?`Match ()-[n:${t.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${t.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n)`,t.geometryFieldName&&i.add(t.geometryFieldName),i.forEach((e=>{l+=`, n.${e}`,o.push(e)})),a=new w.A({openCypherQuery:l,bindParameters:{param_filter_geom:new h.A({rings:(0,_.Wq)(r)})}})}else{let n="";if(null!=e.where&&"1=1"!==e.where){const r=await(0,u.GP)(e.where,t.fieldsIndex);t.fields.forEach((e=>{r.fieldNames.includes(e.name)&&i.add(e.name)}));const s=new Set(["column-reference","string","number","binary-expression"]),o=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let a=!1;const l=e=>{if("column-reference"===e.type)return`n.${e.column}`;if("string"===e.type)return`'${e.value}'`;if("number"===e.type)return`${e.value}`;if("binary-expression"===e.type&&s.has(e.left.type)&&s.has(e.right.type)&&o.has(e.operator))return`${l(e.left)} ${e.operator} ${l(e.right)}`;if("binary-expression"===e.type&&"LIKE"===e.operator){let t="";if("function"===e.left.type&&"column-reference"===e.left.args.value[0].type)t+=`lower(n.${e.left.args.value[0].column})`;else{if("column-reference"!==e.left.type)return a=!0,"";t+=`lower(n.${e.left.column})`}if(t+=" CONTAINS (","string"!==e.right.type)return a=!0,"";{let n=e.right.value;"%"===n.charAt(0)&&(n=n.slice(1)),"%"===n.charAt(n.length-1)&&(n=n.slice(0,-1)),t+=`'${n.toLowerCase()}')`}return t}return a=!0,""};n=l(r.parseTree),a&&(n="")}let r="";r=d?`Match ()-[n:${t.objectType.name}]->()`:`Match (n:${t.objectType.name})`;let s=!1;v&&(s=!0,r+=" WHERE ID(n) IN $ids"),n&&(r+=s?" AND":" WHERE",r+=` ${n}`),r+=" return ID(n)",d&&(r+=", id(startNode(n)), id(endNode(n))"),e.returnGeometry&&t.geometryFieldName&&i.add(t.geometryFieldName),i.forEach((e=>{r+=`, n.${e}`,o.push(e)})),a=new w.A(v?{openCypherQuery:r,bindParameters:{ids:v}}:{openCypherQuery:r})}const E=(await(0,b.executeQueryStreaming)(t.parentCompositeLayer.dataManager.knowledgeGraph,a,n)).resultRowsStream.getReader();for(;;){const{done:e,value:n}=await E.read();if(e)break;const i=[];for(let t=0;t<n.length;t++){const e=n[t];let r=0,s=0;const a={properties:{}};for(a.id=e[r],r++,s++,d&&(a.originId=e[r],r++,s++,a.destinationId=e[r],r++,s++);r<e.length;r++)a.properties[o[r-s]]=e[r];i.push(a)}c=c.concat(r.writeToStore(i,m.dr,t.parentCompositeLayer.dataManager.geographicLookup.get(t.objectType.name)?.name))}return c}_isEndEntitySpatial(e,t,n){for(const r of e??[])if(this.entityTypeNames.has(r)){const e=this.geographicLookup.get(r),i=e&&this.sublayerCaches.get(r)?.get(t.attributes[n]);if(e&&i?.attributes[e.name])return!0}return!1}_getNamedTypeIdMapFromNodeIds(e){const t=new Map;return e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const n of this.memberIdTypeLookup.get(e)){if(!this.entityTypeNames.has(n))return;t.has(n)?t.get(n)?.push(e):t.set(n,[e])}})),t}};(0,r._)([(0,c.MZ)()],I.prototype,"knowledgeGraph",void 0),(0,r._)([(0,c.MZ)()],I.prototype,"inclusionModeDefinition",void 0),(0,r._)([(0,c.MZ)()],I.prototype,"entityTypeNames",void 0),(0,r._)([(0,c.MZ)()],I.prototype,"relationshipTypeNames",void 0),(0,r._)([(0,c.MZ)()],I.prototype,"geographicLookup",void 0),(0,r._)([(0,c.MZ)()],I.prototype,"sublayerCaches",void 0),(0,r._)([(0,c.MZ)()],I.prototype,"nodeConnectionsLookup",void 0),(0,r._)([(0,c.MZ)()],I.prototype,"relationshipConnectionsLookup",void 0),(0,r._)([(0,c.MZ)()],I.prototype,"memberIdTypeLookup",void 0),I=(0,r._)([(0,d.$)("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],I)},12831:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(35143),i=n(42553),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842));let a=class extends i.A{constructor(e){super(e),this.properties=null}};(0,r._)([(0,s.MZ)({json:{write:!0}})],a.prototype,"properties",void 0),a=(0,r._)([(0,o.$)("esri.rest.knowledgeGraph.GraphObject")],a);const l=a},15011:(e,t,n)=>{n.d(t,{EB:()=>h,Im:()=>m,Mj:()=>p,Ui:()=>f,w2:()=>y});var r=n(91967),i=n(94643),s=n(39314);const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof r.A}function l(e){return e instanceof i.A?Object.keys(e.items):a(e)?(0,s.oY)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof i.A?e.items[t]:e[t]}function c(e){return e?e.declaredClass:null}function d(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const r=l(e),i=l(t);if(0===r.length&&0===i.length)return;if(!r.length||!i.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const s=i.filter((e=>!r.includes(e))),p=r.filter((e=>!i.includes(e))),h=r.filter((n=>i.includes(n)&&u(e,n)!==u(t,n))).concat(s,p).sort(),y=c(e);if(y&&o.has(y)&&h.length)return{type:"complete",oldValue:e,newValue:t};let f;const m=a(e)&&a(t);for(const o of h){const r=u(e,o),i=u(t,o);let s;if((m||"function"!=typeof r&&"function"!=typeof i)&&r!==i&&(null!=r||null!=i)){if(n&&n[o]&&"function"==typeof n[o])s=n[o]?.(r,i);else if(r instanceof Date&&i instanceof Date){if(r.getTime()===i.getTime())continue;s={type:"complete",oldValue:r,newValue:i}}else s="object"==typeof r&&"object"==typeof i&&c(r)===c(i)?d(r,i):{type:"complete",oldValue:r,newValue:i};null!=s&&(null!=f?f.diff[o]=s:f={type:"partial",diff:{[o]:s}})}}return f}function p(e,t){return h(e,t)}function h(e,t){if(null==e)return!1;const n=t.split(".");let r=e;for(const i of n){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const e=r.diff[i];if(!e)return!1;r=e}}return!0}function y(e,t){if(!e)return!1;if("partial"===e.type){const n=Object.keys(e.diff);return 1===n.length&&n[0]===t}return!1}function f(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&c(e)!==c(t)?{type:"complete",oldValue:e,newValue:t}:d(e,t)}function m(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case"partial":for(const t in e.diff)if(!m(e.diff[t]))return!1;return!0}}},19898:(e,t,n)=>{n.d(t,{R:()=>i});var r=n(50076);let i=class e{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.major=e,this.minor=t,this._context=n}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",n=this._context&&this._context+" ";throw new r.A(t+"unsupported-version",`Required major ${n}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[i,s]=t.split("."),o=/^\s*\d+\s*$/;if(!i?.match||!o.test(i))throw new r.A((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s?.match||!o.test(s))throw new r.A((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(i,10),l=parseInt(s,10);return new e(a,l,n)}}},21009:(e,t,n)=>{n.d(t,{BL:()=>l,Cz:()=>i,KQ:()=>s,M1:()=>a,T1:()=>o,dr:()=>r});const r="ESRI__ID",i="ESRI__OriginID",s="ESRI__DestID",o="ESRI__LayoutGeometry",a="ESRI__AggregationCount",l="LC.ESRI__IsSpatial"},21617:(e,t,n)=>{n.d(t,{J:()=>w});var r=n(35143),i=(n(81806),n(76460)),s=n(50346),o=n(46053),a=n(21403),l=(n(47249),n(85842)),u=n(80979),c=n(94643),d=n(68134),p=n(49281);const h=new c.A,y=new WeakMap;function f(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function m(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:m(t,e%t):0}let g=0,_=0;function b(){const e=Date.now();let t=!1;for(const n of h){const r=n.deref();r?r.refreshInterval&&e-(y.get(r)??0)+5>=6e4*r.refreshInterval&&(y.set(r,e),r.refresh(e)):t=!0}if(t)for(let n=h.length-1;n>=0;n--)h.at(n).deref()||h.removeAt(n)}(0,p.fm)((()=>{const e=Date.now();let t=0;for(const n of h){const r=n.deref();r&&(t=m(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?y.get(r)||y.set(r,e):y.delete(r))}if(t!==_){if(_=t,clearInterval(g),0===_)return void(g=0);g=setInterval(b,_)}}),d.OH);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,s.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){f(e)&&h.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=h.find((t=>t.deref()===e));t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,s.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{i.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,r._)([(0,o.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.K}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,a.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],t),t}},22856:(e,t,n)=>{n.d(t,{G:()=>r});const r=Symbol("Yield")},23908:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(23701),a=n(27544);let l=class extends a.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],l.prototype,"originId",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],l.prototype,"destinationId",void 0),(0,r._)([(0,i.MZ)({type:o.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.Relationship")],l);const u=l},25515:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(35143),i=n(3825),s=n(50076),o=n(54099),a=n(5632),l=n(49304),u=n(76460),c=n(50346),d=n(90534),p=n(46053),h=(n(81806),n(47249),n(85842)),y=n(76797),f=n(13312),m=n(86560);var g=n(59187);let _=0,b=class extends(o.A.EventedMixin(a.A.IdentifiableMixin(l.A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new y.A(-180,-90,180,90,f.A.WGS84),this.id=Date.now().toString(16)+"-layer-"+_++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=f.A.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([n.e(70652),n.e(62544)]).then(n.bind(n,62544))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await Promise.all([n.e(9624),n.e(70652),n.e(2487)]).then(n.bind(n,2487));try{return await r(t)}catch(i){const e=t?.portalItem,n=e?.id||"unset",r=e?.portal?.url||m.A.portalUrl;throw u.A.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+r+"', id: '"+n+"')",i),i}}(e)}initialize(){this.when().catch((e=>{(0,c.zf)(e)||u.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,d.An)(this.url)}createLayerView(e,t){return Promise.reject(new s.A("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,i.A)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.A("layer:no-attribution-data","Layer does not have attribution data")}};(0,r._)([(0,p.MZ)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],b.prototype,"effectiveVisible",null),(0,r._)([(0,p.MZ)({type:y.A})],b.prototype,"fullExtent",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],b.prototype,"hasAttributionData",null),(0,r._)([(0,p.MZ)({type:String,clonable:!1})],b.prototype,"id",void 0),(0,r._)([(0,p.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,r._)([(0,p.MZ)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,r._)([(0,p.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,r._)([(0,p.MZ)({clonable:!1})],b.prototype,"parent",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],b.prototype,"parsedUrl",null),(0,r._)([(0,p.MZ)({type:Boolean,readOnly:!0})],b.prototype,"persistenceEnabled",void 0),(0,r._)([(0,p.MZ)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,r._)([(0,p.MZ)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,r._)([(0,p.MZ)({type:f.A})],b.prototype,"spatialReference",void 0),(0,r._)([(0,p.MZ)({type:String})],b.prototype,"title",void 0),(0,r._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,r._)([(0,p.MZ)()],b.prototype,"url",void 0),(0,r._)([(0,p.MZ)({type:g.A})],b.prototype,"visibilityTimeExtent",void 0),(0,r._)([(0,p.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0),b=(0,r._)([(0,h.$)("esri.layers.Layer")],b);const w=b},27544:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(12831);let a=class extends o.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"typeName",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"id",void 0),a=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphNamedObject")],a);const l=a},29380:(e,t,n)=>{n.d(t,{A:()=>c});var r,i=n(35143),s=n(42553),o=n(46053),a=(n(81806),n(76460),n(47249),n(85842)),l=n(23243);let u=r=class extends s.A{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],u.prototype,"minValue",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],u.prototype,"maxValue",void 0),(0,i._)([(0,o.MZ)(l.Wp)],u.prototype,"symbol",void 0),u=r=(0,i._)([(0,a.$)("esri.renderers.support.ClassBreakInfo")],u);const c=u},29632:(e,t,n)=>{n.d(t,{Fe:()=>d,Km:()=>s,Nk:()=>l});var r=n(69539),i=n(97763);function s(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)a(n,t);if(e.symbolLayers)for(const n of e.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":o(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":s(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(const e of n.effects)a(e,t)}}else null!=e.height&&(e.height*=t)}function o(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,i.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||s(r.symbol,t,!0,n)}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function l(e){const t=[];return u((0,i.lW)(e),t),t.length?new r.A((0,i.e6)(t[0])):null}function u(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const s of n.symbolLayers)if(!(s.colorLocked||r&&((0,i.mA)(s)||(0,i.MM)(s)&&s.markerPlacement&&(0,i.zr)(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&c(t,s.tintColor);break;case"CIMVectorMarker":s.markerGraphics?.forEach((e=>{u(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":c(t,s.color);break;case"CIMHatchFill":u(s.lineSymbol,t)}}function c(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function d(e,t,n){t instanceof r.A||(t=new r.A(t));const s=(0,i.lW)(e);s&&p(s,t,n)}function p(e,t,n){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===r?.type;if(r?.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked)continue;if(s)if(n){const{layersToColor:e}=n;if(((0,i.mA)(o)||(0,i.MM)(o)&&o.markerPlacement&&(0,i.zr)(o.markerPlacement))&&"fill"===e||(0,i.jn)(o)&&"outline"===e)continue}else if((0,i.mA)(o)||(0,i.MM)(o)&&o.markerPlacement&&(0,i.zr)(o.markerPlacement))continue;const e=t.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=e;break;case"CIMVectorMarker":o.markerGraphics?.forEach((e=>{p(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":o.color=e;break;case"CIMHatchFill":p(o.lineSymbol,t,n)}}}},30218:(e,t,n)=>{n.d(t,{FJ:()=>w,Dp:()=>T,KV:()=>I});var r=n(35143),i=n(48611),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),a=n(80979),l=n(69098),u=n(94643),c=n(42553),d=n(17707),p=n(68002),h=n(49723);const y={write:{overridePolicy:(e,t,n)=>({enabled:!n||"scale"===n.filterMode})}};let f=class extends(l.A.ClonableMixin(c.A)){constructor(e){super(e),this.id=(0,h.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],f.prototype,"id",void 0),(0,r._)([(0,s.MZ)({type:Number,json:y})],f.prototype,"maxScale",void 0),(0,r._)([(0,s.MZ)({type:Number,json:y})],f.prototype,"minScale",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],f.prototype,"title",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],f.prototype,"where",void 0),f=(0,r._)([(0,o.$)("esri.layers.support.DisplayFilter")],f);const m=f;var g=n(64810);let _=class extends(l.A.ClonableMixin(c.A)){constructor(e){super(e),this.activeFilterId=null,this.filters=new(u.A.ofType(m)),this.mode="manual"}writeFilters(e,t,n,r){const i=e.toArray();"scale"===this.mode&&i.sort(((e,t)=>{const n=(0,p.oW)(t.minScale,e.minScale),r=e.maxScale-t.maxScale;return 0===n?r:n})),t[n]=i.map((e=>e.toJSON(r)))}write(e,t){return super.write(e,(0,g.mW)(this,t))}};(0,r._)([(0,s.MZ)({type:String,json:{write:{overridePolicy:(e,t,n)=>({enabled:"manual"===n.filterMode,isRequired:!0})}}})],_.prototype,"activeFilterId",void 0),(0,r._)([(0,s.MZ)({type:u.A.ofType(m),nonNullable:!0,json:{write:!0}})],_.prototype,"filters",void 0),(0,r._)([(0,d.K)("filters")],_.prototype,"writeFilters",null),(0,r._)([(0,s.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],_.prototype,"mode",void 0),_=(0,r._)([(0,o.$)("esri.layers.support.DisplayFilterInfo")],_);const b=_,w=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,r._)([(0,s.MZ)(T)],t.prototype,"displayFilterEnabled",void 0),(0,r._)([(0,s.MZ)(I)],t.prototype,"displayFilterInfo",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.DisplayFilteredLayer")],t),t},T={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:a.K,writer(e,t,n){(0,i.sM)(n,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},I={type:b,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:a.K},origins:{"web-scene":{write:!1,read:!1}}}}},30973:(e,t,n)=>{n.d(t,{DQ:()=>c,tn:()=>u});var r=n(16868),i=n(53430),s=n(75900),o=(n(56362),n(87015),n(81940),n(6929)),a=(n(7198),n(93616),n(53539),n(91904),n(40585)),l=n(17542);function u(e,t){let{displayField:n,editFieldsInfo:a,fields:l,objectIdField:u,title:c}=e;if(!l)return null;const d=h({editFieldsInfo:a,fields:l,objectIdField:u},t);if(!d.length)return null;const p=function(e){const t=(0,i.mB)(e),{titleBase:n}=e;return t?`${n}: {${t.trim()}}`:n??""}({titleBase:c,fields:l,displayField:n}),y=[new o.A,new s.A];return new r.A({title:p,content:y,fieldInfos:d})}function c(e){const{title:t,graphic:n}=e??{},{attributes:r,sourceLayer:i}=n??{},s=i&&"displayField"in i?i.displayField:null,o=s?r?.[s]:null,a=null!=o?JSON.stringify(o):null,l=n?.getObjectId()?.toString();return t||a||l||""}const d=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,i.Bz)(e,t);function p(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h(e,t){const n=t?.visibleFieldNames;return function(e){let{fields:t,ignoreFieldTypes:n,sortDisabled:r}=e;const i=t;return n&&(t=t.filter((e=>!n.includes(e.type)))),t===i&&(t=t.slice()),!0!==r&&t.sort(p),t}({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||m,sortDisabled:t?.sortDisabled}).map((t=>new a.A({fieldName:t.name,isEditable:(0,i.R$)(t,e),label:t.alias,format:y(t),visible:d(t,{...e,visibleFieldNames:n})})))}function y(e){switch(e.type){case"small-integer":case"integer":case"single":return new l.A({digitSeparator:!0,places:0});case"double":return new l.A({digitSeparator:!0,places:2});case"string":return(0,i.JL)(e.name)?new l.A({digitSeparator:!0,places:0}):void 0;default:return}}function f(e){if("name"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return"name"===t}const m=["geometry","blob","raster","guid","xml"]},32173:(e,t,n)=>{n.d(t,{A:()=>u});var r,i=n(35143),s=(n(76460),n(81806),n(47249),n(50076),n(6409)),o=n(85842),a=n(44631);let l=r=class extends a.A{constructor(e){super(e),this.type="inherited"}clone(){return new r}};(0,i._)([(0,s.e)({inherited:"inherited"})],l.prototype,"type",void 0),l=r=(0,i._)([(0,o.$)("esri.layers.support.InheritedDomain")],l);const u=l},33750:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(19902),i=n(98618),s=n(20176),o=n(21009);class a{constructor(){this._featureLookup=new Map}static getInstance(){return a.instance||(a.instance=new a),a.instance}static resetInstance(){a.instance&&(a.instance=null)}deleteFromStore(e){e.forEach((e=>{this._featureLookup.delete(e)}))}readFromStoreByList(e){const t=[];return e.forEach((e=>{const n=this.readFromStoreById(e);n&&t.push(n)})),t}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(e,t,n){const a=[];return e.forEach((e=>{if(!e?.id)return;e.properties||(e.properties=[]);let l,u=null;if(n&&e.properties[n]&&(u=(0,i.Ux)(e.properties[n])),"originId"in e&&"destinationId"in e&&(e.properties[o.Cz]=e.originId,e.properties[o.KQ]=e.destinationId),e.properties[t]=e.id,e.id&&this._featureLookup.has(e.id)&&this._featureLookup.get(e.id).attributes){const i=this._featureLookup.get(e.id),o=JSON.parse(JSON.stringify(Object.assign(i.attributes,e.properties)));n&&e.properties[n]&&(o[n]=(0,r.rS)(e.properties[n])),l=new s.Om(u?JSON.parse(JSON.stringify(u)):i?.geometry?JSON.parse(JSON.stringify(i.geometry)):null,o,null,e.properties[t])}else l=new s.Om(u?JSON.parse(JSON.stringify(u)):null,e.properties,null,e.properties[t]);this._featureLookup.set(`${e.typeName?`${e.typeName}__${e.id}`:e.id}`,l),a.push(l)})),a}}},35380:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(13312),a=n(91967);let l=class extends a.A{constructor(e){super(e),this.openCypherQuery=""}};(0,r._)([(0,i.MZ)()],l.prototype,"openCypherQuery",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphQuery")],l);const u=l;let c=class extends u{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,r._)([(0,i.MZ)()],c.prototype,"bindParameters",void 0),(0,r._)([(0,i.MZ)()],c.prototype,"bindGeometryQuantizationParameters",void 0),(0,r._)([(0,i.MZ)()],c.prototype,"outputQuantizationParameters",void 0),(0,r._)([(0,i.MZ)({type:o.A})],c.prototype,"outputSpatialReference",void 0),(0,r._)([(0,i.MZ)()],c.prototype,"provenanceBehavior",void 0),c=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],c);const d=c},37534:(e,t,n)=>{n.d(t,{Rr:()=>l,fY:()=>c,ne:()=>u});var r=n(35143),i=n(48611),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),a=n(51162);function l(e,t,n){if(!e)return null;const r=e.find((e=>!!e.field));if(!r)return null;const i=new a.A;return i.read(r,n),[i]}const u={type:[a.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:l},write:{writer:function(e,t,n,r){const s=e.find((e=>!!e.field));s&&(0,i.sM)(n,[s.toJSON()],t)}}}},c=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,r._)([(0,s.MZ)(u)],t.prototype,"orderBy",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.OrderedLayer")],t),t}},38156:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(35143),i=(n(76460),n(81806),n(47249),n(50076),n(85842)),s=n(12831);let o=class extends s.A{constructor(e){super(e)}};o=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.ObjectValue")],o);const a=o},39348:(e,t,n)=>{n.d(t,{V:()=>u});var r=n(76460),i=n(48611),s=n(88685),o=n(65256),a=n(50265);const l=()=>r.A.getLogger("esri.intl.substitute");function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{format:r={}}=n;return(0,s.HC)(e,(e=>function(e,t,n){let r,s;const o=e.indexOf(":");if(-1===o?r=e.trim():(r=e.slice(0,o).trim(),s=e.slice(o+1).trim()),!r)return"";const a=(0,i.wc)(r,t);if(null==a)return"";const l=(s?n?.[s]:null)??n?.[r];return l?c(a,l):s?d(a,s):p(a)}(e,t,r)))}function c(e,t){switch(t.type){case"date":return(0,o.Yq)(e,t.intlOptions);case"number":return(0,a.ZV)(e,t.intlOptions);default:return l().warn("missing format descriptor for key {key}"),p(e)}}function d(e,t){switch(t.toLowerCase()){case"dateformat":return(0,o.Yq)(e);case"numberformat":return(0,a.ZV)(e);default:return l().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?(0,o.Yq)(e):/^numberformat/i.test(t)?(0,a.ZV)(e):p(e)}}function p(e){switch(typeof e){case"string":return e;case"number":return(0,a.ZV)(e);case"boolean":return""+e;default:return e instanceof Date?(0,o.Yq)(e):""}}},40296:(e,t,n)=>{n.d(t,{F0:()=>a,Vx:()=>c,e2:()=>p,f:()=>h});var r=n(81806),i=n(53084),s=n(8298),o=n(44460);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.Cb:"esriGeometryPolyline"===e?o.yM:o.WR}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let u=1;function c(e,t){if((0,r.A)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let n=`this${d(t)} = null;`;for(const t in e)n+=`this${d(t)} = ${JSON.stringify(e[t])};`;const r=new Function(`\n      return class AttributesClass$${u++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `)();return()=>new r}catch(n){return()=>({[t]:null,...e})}}function d(e){return l.test(e)?`.${e}`:`["${e}"]`}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,i.o8)(e)}}]}function h(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:s.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},43047:(e,t,n)=>{n.d(t,{a:()=>b,b:()=>c,c:()=>i,d:()=>p,e:()=>w,f:()=>y,g:()=>o,h:()=>m,j:()=>h,l:()=>g,n:()=>f,s:()=>s,t:()=>_});var r=n(53494);function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function o(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function l(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function u(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function c(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function d(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+s*s)}function p(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+i*i+s*s}function h(e){const t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function y(e){const t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function f(e,t){const n=t[0],r=t[1],i=t[2],s=t[3];let o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=s*o),e}function m(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function g(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e[3]=a+r*(n[3]-a),e}function _(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}function b(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function w(e,t){const n=e[0],i=e[1],s=e[2],o=e[3],a=t[0],l=t[1],u=t[2],c=t[3],d=(0,r.FD)();return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-u)<=d*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(o-c)<=d*Math.max(1,Math.abs(o),Math.abs(c))}const T=a,I=l,v=u,E=d,M=p,A=h,S=y;Object.freeze(Object.defineProperty({__proto__:null,add:o,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:i,copyVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:E,distance:d,div:v,divide:u,dot:m,equals:w,exactEquals:b,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:A,length:h,lerp:g,max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},mul:I,multiply:l,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:f,random:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=r.Ov;let i,s,o,a,l,u;do{i=2*n()-1,s=2*n()-1,l=i*i+s*s}while(l>=1);do{o=2*n()-1,a=2*n()-1,u=o*o+a*a}while(u>=1);const c=Math.sqrt((1-l)/u);return e[0]=t*i,e[1]=t*s,e[2]=t*o*c,e[3]=t*a*c,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:c,scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},set:s,sqrDist:M,sqrLen:S,squaredDistance:p,squaredLength:y,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:T,subtract:a,transformMat4:_,transformQuat:function(e,t,n){const r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],l=n[2],u=n[3],c=u*r+a*s-l*i,d=u*i+l*r-o*s,p=u*s+o*i-a*r,h=-o*r-a*i-l*s;return e[0]=c*u+h*-o+d*-l-p*-a,e[1]=d*u+h*-a+p*-o-c*-l,e[2]=p*u+h*-l+c*-a-d*-o,e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},44081:(e,t,n)=>{n.d(t,{LF:()=>a,M9:()=>l,zu:()=>u});var r=n(50076),i=n(48611),s=n(7847),o=n(58503);function a(e,t,n){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const n of e)t.push({scale:n.scale,value:u(n.value)});return t}return u(e)}(e)}catch(r){n?.messages?.push(r)}return null}function l(e,t,n,r){try{const r=function(e){const t=(0,s.q)(e);return t?(0,o.dw)(t)?t.map((e=>e.toJSON())):t.map((e=>{let{scale:t,effects:n}=e;return{scale:t,value:n.map((e=>e.toJSON()))}})):null}(e);(0,i.sM)(n,r,t)}catch(l){r.messages&&r.messages.push(l)}}function u(e){if(!e?.length)return"";const t=[];for(const n of e){let e=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[c(n,"amount")];break;case"blur":e=[c(n,"radius","pt")];break;case"hue-rotate":e=[c(n,"angle","deg")];break;case"drop-shadow":e=[c(n,"xoffset","pt"),c(n,"yoffset","pt"),c(n,"blurRadius","pt"),d(n,"color")];break;case"bloom":e=[c(n,"strength"),c(n,"radius","pt"),c(n,"threshold")]}const r=`${n.type}(${e.filter(Boolean).join(" ")})`;(0,s.q)(r),t.push(r)}return t.join(" ")}function c(e,t,n){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:""+e[t]}function d(e,t){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}},44135:(e,t,n)=>{n.d(t,{A:()=>m});var r,i=n(35143),s=n(45802),o=n(42553),a=n(46053),l=n(40565),u=(n(81806),n(47249),n(6409)),c=n(28379),d=n(85842),p=n(76866),h=n(6127);const y=new s.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let f=r=class extends o.A{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,t){let{description:n}=t,r=null;try{r=n?JSON.parse(n):null}catch(i){}return r?.value??null}readValueType(e,t){let{description:n}=t,r=null;try{r=n?JSON.parse(n):null}catch(i){}return r?y.fromJSON(r.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"alias",void 0),(0,i._)([(0,a.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],f.prototype,"defaultValue",void 0),(0,i._)([(0,a.MZ)()],f.prototype,"description",void 0),(0,i._)([(0,c.w)("description")],f.prototype,"readDescription",null),(0,i._)([(0,a.MZ)({types:p.gK,json:{read:{reader:p.rS},write:!0}})],f.prototype,"domain",void 0),(0,i._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"editable",void 0),(0,i._)([(0,a.MZ)({type:l.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],f.prototype,"length",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,i._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"nullable",void 0),(0,i._)([(0,u.e)(h.m)],f.prototype,"type",void 0),(0,i._)([(0,a.MZ)()],f.prototype,"valueType",void 0),(0,i._)([(0,c.w)("valueType",["description"])],f.prototype,"readValueType",null),(0,i._)([(0,a.MZ)({type:Boolean,json:{read:!1}})],f.prototype,"visible",void 0),f=r=(0,i._)([(0,d.$)("esri.layers.support.Field")],f);const m=f},44460:(e,t,n)=>{n.d(t,{Cb:()=>s,HW:()=>c,JR:()=>i,JZ:()=>l,WR:()=>a,b6:()=>d,fT:()=>r,nC:()=>u,yM:()=>o});const r=[252,146,31,255],i=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},44631:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(35143),i=n(45802),s=n(42553),o=n(46053),a=(n(81806),n(76460),n(47249),n(6409)),l=n(85842);const u=new i.J({inherited:"inherited",codedValue:"coded-value",range:"range"});let c=class extends s.A{constructor(e){super(e),this.name=null,this.type=null}};(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,r._)([(0,a.e)(u),(0,o.MZ)({json:{write:{isRequired:!0}}})],c.prototype,"type",void 0),c=(0,r._)([(0,l.$)("esri.layers.support.Domain")],c);const d=c},49723:(e,t,n)=>{n.d(t,{AG:()=>a,lk:()=>i,vD:()=>o,yS:()=>s});const r="randomUUID"in crypto;function i(){if(r)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function s(){return`{${i().toUpperCase()}}`}function o(){return`{${i()}}`}function a(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}},50265:(e,t,n)=>{n.d(t,{$J:()=>c,ZV:()=>u,yx:()=>l});var r=n(38042);const i={ar:"ar-u-nu-latn"};let s=new WeakMap,o={};function a(e){const t=e||o;if(!s.has(t)){const n=(0,r.JK)(),o=i[(0,r.JK)()]||n;s.set(t,new Intl.NumberFormat(o,e))}return s.get(t)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function u(e,t){return Object.is(e,-0)&&(e=0),a(t).format(e)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.JK)();if(!e)return null;let n=d.get(t);if(!n){const e=a().formatToParts(12345.6),r=[...a({useGrouping:!1}).format(9876543210)].reverse(),i=new Map(r.map(((e,t)=>[e,t]))),s=new RegExp(`[${e.find((e=>"group"===e.type))?.value}]`,"g"),o=new RegExp(`[${e.find((e=>"decimal"===e.type))?.value}]`),l=new RegExp(`[${r.join("")}]`,"g"),u=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,c=/[-\u2212\u2013\u2014\u2015]/g;n=e=>{if(""===(e=e.trim().replaceAll(s,"").replace(o,".").replace(l,(e=>String(i.get(e)))).replaceAll(u,"").replaceAll(c,"-")))return null;const t=Number(e);return isNaN(t)?null:t},d.set(t,n)}return n(e)}(0,r.Ml)((()=>{s=new WeakMap,o={}}));const d=new Map},50654:(e,t,n)=>{n.d(t,{A:()=>c});var r,i=n(35143),s=n(46053),o=(n(81806),n(76460),n(47249),n(6409)),a=n(85842),l=n(44631);let u=r=class extends l.A{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,i._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]},isRequired:!0}}})],u.prototype,"maxValue",void 0),(0,i._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]},isRequired:!0}}})],u.prototype,"minValue",void 0),(0,i._)([(0,o.e)({range:"range"})],u.prototype,"type",void 0),u=r=(0,i._)([(0,a.$)("esri.layers.support.RangeDomain")],u);const c=u},51162:(e,t,n)=>{n.d(t,{A:()=>d});var r,i=n(35143),s=n(45802),o=n(42553),a=n(46053),l=(n(81806),n(76460),n(47249),n(85842));const u=new s.J({asc:"ascending",desc:"descending"});let c=r=class extends o.A{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new r({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"field",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"valueExpression",void 0),(0,i._)([(0,a.MZ)({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],c.prototype,"order",void 0),c=r=(0,i._)([(0,l.$)("esri.layers.support.OrderByInfo")],c);const d=c},55855:(e,t,n)=>{function r(){return[0,0,0,0]}function i(e){return[e[0],e[1],e[2],e[3]]}function s(e,t,n,r){return[e,t,n,r]}function o(e,t,n,r){return[e,t,n,r]}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];const n=Math.min(4,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function l(){return[0,0,0,0]}function u(){return s(1,1,1,1)}function c(){return s(1,0,0,0)}function d(){return s(0,1,0,0)}function p(){return s(0,0,1,0)}function h(){return s(0,0,0,1)}n.d(t,{CN:()=>o,Un:()=>f,ci:()=>a,fA:()=>s,o8:()=>i,uY:()=>y,vt:()=>r});const y=[0,0,0,0],f=u(),m=c(),g=d(),_=p(),b=h();Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_W:b,UNIT_X:m,UNIT_Y:g,UNIT_Z:_,ZEROS:y,clone:i,create:r,createView:function(e,t){return new Float64Array(e,t,4)},freeze:o,fromArray:a,fromValues:s,ones:u,unitW:h,unitX:c,unitY:d,unitZ:p,zeros:l},Symbol.toStringTag,{value:"Module"}))},59649:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(99486),i=n(99702);class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.values().next().value;this._peeker=e,this._observable=new i.I,this._items=new Set}get length(){return(0,r.gc)(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return(0,r.gc)(this._observable),this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach((t=>{e(t)||this._items.delete(t)})),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){(0,r.gc)(this._observable),yield*this._items}}},59752:(e,t,n)=>{n.d(t,{Bb:()=>S,W6:()=>r,mj:()=>g,nu:()=>k});var r,i=n(88321),s=(n(81806),n(76460)),o=n(30726),a=n(32634),l=n(30015),u=n(50346),c=n(68134),d=n(75540),p=n(91417),h=n(84031),y=n(5551),f=n(98476),m=n(22856);function g(){return new M.Scheduler}!function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"}(r||(r={}));const _=new Map([[r.RESOURCE_CONTROLLER_IMMEDIATE,0],[r.RESOURCE_CONTROLLER,4],[r.SLIDE,0],[r.STREAM_DATA_LOADER,0],[r.ELEVATION_QUERY,0],[r.TERRAIN_SURFACE,1],[r.SURFACE_GEOMETRY_UPDATES,1],[r.LOD_RENDERER,2],[r.GRAPHICS_CORE,2],[r.I3S_CONTROLLER,2],[r.POINT_CLOUD_LAYER,2],[r.FEATURE_TILE_FETCHER,2],[r.CLOUDS_GENERATOR,2],[r.OVERLAY,4],[r.STAGE,4],[r.GRAPHICS_DECONFLICTOR,4],[r.FILTER_VISIBILITY,4],[r.SCALE_VISIBILITY,4],[r.FRUSTUM_VISIBILITY,4],[r.POINT_OF_INTEREST_FREQUENT,6],[r.POINT_OF_INTEREST_INFREQUENT,30],[r.LABELER,8],[r.FEATURE_QUERY_ENGINE,8],[r.FEATURE_TILE_TREE,16],[r.FEATURE_TILE_TREE_ACTIVE,0],[r.ELEVATION_ALIGNMENT,12],[r.ELEVATION_ALIGNMENT_SCENE,14],[r.TEXT_TEXTURE_ATLAS,12],[r.TEXTURE_UNLOAD,12],[r.LINE_OF_SIGHT_TOOL,16],[r.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[r.SNAPPING,0],[r.SHADOW_ACCUMULATOR,30],[r.MAPVIEW_FETCH_QUEUE,0],[r.MAPVIEW_LAYERVIEW_UPDATE,2],[r.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,0]]);function b(e){return _.has(e)?_.get(e):"number"==typeof e?e:1}const w=(0,p.l5)(6.5),T=(0,p.l5)(1),I=(0,p.l5)(30),v=(0,p.l5)(1e3/30),E=(0,p.l5)(100);var M,A;!function(e){e.Scheduler=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((e=>e.needsUpdate))}constructor(){this._updating=(0,d.v)(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new a.A("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=f.M.INTERACTING,this._tasks=new l.A,this._runQueue=new l.A,this._load=0,this._idleStateCallbacks=new l.A,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,c.wB)((()=>y.A.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),c.Vh);for(const e of Object.keys(r))this.performanceInfo.tasks.set(r[e],new a.A(r[e]))}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),(0,o.xt)(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())})))}registerTask(e,n){const r=new t(this,e,n);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new a.A(e)),r}registerIdleStateCallbacks(e,t){const n={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(n),this.state===f.M.IDLE&&this._idleUpdatesStartFired&&n.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(n),set idleBegin(e){r._idleUpdatesStartFired&&(n.idleEnd(),r._state===f.M.IDLE&&e()),n.idleBegin=e},set idleEnd(e){n.idleEnd=e}}}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==f.M.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return this._state}frame(e){this._startFrameTaskTimes();const t=this._updateBudget(e);if(t){const e=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-e)}else this._recordFrameTaskTimes(0);return t}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let t=w,n=e.frameDuration,r=T;switch(this.state){case f.M.IDLE:t=(0,p.l5)(0),n=(0,p.l5)(Math.max(E,e.frameDuration)),r=I;break;case f.M.INTERACTING:n=(0,p.l5)(Math.max(v,e.frameDuration));case f.M.ANIMATING:}return n=(0,p.l5)(n-e.elapsedFrameTime-t),this.state!==f.M.IDLE&&n<T&&!this._forceTask?(this._forceTask=!0,!1):(n=(0,p.l5)(Math.max(n,r)),this._budget.reset(n,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case f.M.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case f.M.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset((0,p.l5)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e),this._updatingChanged()}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return A.SCHEDULED;let t=A.IDLE;return this._tasks.forAll((n=>{n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=A.READY:t!==A.READY&&(t=A.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((n=>{n.name===e&&(t+=n.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t="";return e.forEach(((e,n)=>{t+=e>1?` ${e}x ${n}`:` ${n}`})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{0===e.basePriority&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((n=>{n.needsUpdate&&0!==n.schedulePriority&&0!==n.basePriority&&n.blockFrame!==this._frameNumber&&(e=!0,t=Math.max(t,n.basePriority),1===n.schedulePriority?(n.schedulePriority=0,this._runQueue.push(n)):--n.schedulePriority)})),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do{for(;this._runQueue.length>0;){const t=this._budget.now(),n=this._runQueue.pop();this._budget.resetProgress();try{n.task.runTask(this._budget)===m.G&&(n.blockFrame=this._frameNumber)}catch(e){s.A.getLogger("esri.views.support.Scheduler").error(`Exception in task "${n.name}"`,e),n.blockFrame=this._frameNumber}!this._budget.hasProgressed&&n.blockFrame!==this._frameNumber&&n.needsUpdate&&(n.name,r.I3S_CONTROLLER,n.blockFrame=this._frameNumber),n.schedulePriority=n.basePriority;const i=this._budget.now()-t;if(n.runtime+=i,this._frameTaskTimes.set(n.priority,this._frameTaskTimes.get(n.priority)+i),this._budget.remaining<=0)return void this._updatingChanged()}}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(r))this._frameTaskTimes.set(r[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).push(e))),this.performanceInfo.total.push(e)}get test(){return this._test}};class t{get task(){return this._task.value}get updating(){return this._queue.running}constructor(e,t,n){this._scheduler=e,this.name=t,this.blockFrame=0,this.runtime=0,this._queue=new h.T,this._handles=new i.A,this._basePriority=b(t),this.schedulePriority=this._basePriority,this._task=(0,d.v)(null!=n?n:this._queue),this._handles.add((0,c.z7)((()=>this.task.running),(t=>e.taskRunningChanged(t))))}remove(){this.processQueue(S),this._scheduler.removeTask(this),this.schedule=k.schedule,this.reschedule=k.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const t=b(e);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,n){return this._queue.push(e,t,n)}reschedule(e,t,n){return this._queue.unshift(e,t,n)}processQueue(e){return this._queue.runTask(e)}}class n{constructor(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=f.M.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=n}(M||(M={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(A||(A={}));const S=(()=>{const e=new M.Budget;return e.enabled=!1,e})();const k=new class{remove(){}processQueue(){}schedule(e,t,n){try{if((0,u.G4)(t)){const e=(0,u.NK)();return n?Promise.resolve(n(e)):Promise.reject(e)}return(0,u.z7)(e(S))}catch(r){return Promise.reject(r)}}reschedule(e,t,n){return this.schedule(e,t,n)}}},63733:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(5364),a=n(25515),l=n(65624),u=n(5682),c=n(64519),d=n(731);let p=class extends((0,l.dM)((0,u.j)(a.A))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new c.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,r._)([(0,i.MZ)({type:d.A})],p.prototype,"elevationInfo",void 0),(0,r._)([(0,i.MZ)((0,o.C)(c.Y,"graphics"))],p.prototype,"graphics",void 0),(0,r._)([(0,i.MZ)({type:["show","hide"]})],p.prototype,"listMode",void 0),(0,r._)([(0,i.MZ)()],p.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,i.MZ)({readOnly:!0})],p.prototype,"type",void 0),(0,r._)([(0,i.MZ)({constructOnly:!0})],p.prototype,"internal",void 0),p=(0,r._)([(0,s.$)("esri.layers.GraphicsLayer")],p);const h=p},63844:(e,t,n)=>{n.d(t,{A:()=>k});var r,i=n(35143),s=n(45802),o=n(53084),a=n(76460),l=n(46053),u=n(21403),c=n(6409),d=n(28379),p=n(85842),h=n(17707),y=n(40565),f=n(53430),m=n(71832),g=n(37287),_=n(29380),b=n(23243),w=n(84563),T=n(98976),I=n(94725);const v="percent-of-total",E="field",M=new s.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:v,esriNormalizeByField:E}),A=(0,y.dp)(_.A);let S=r=class extends((0,g.h)(m.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,n){if(!Array.isArray(e))return;let r=t.minValue;return e.map((e=>{const t=new _.A;return t.read(e,n),null==t.minValue&&(t.minValue=r),null==t.maxValue&&(t.maxValue=t.minValue),r=t.maxValue,t}))}writeClassBreakInfos(e,t,n,r){const i=e.map((e=>e.write({},r)));this._areClassBreaksConsecutive()&&i.forEach((e=>delete e.classMinValue)),t[n]=i}castField(e){return null==e?e:"function"==typeof e?(a.A.getLogger(this).error(".field: field must be a string value"),null):(0,y.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=t&&E||n&&v||null,t&&n&&a.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==E&&e!==v||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,n){let r=null;r="number"==typeof e?new _.A({minValue:e,maxValue:t,symbol:(0,I.dp)(n)}):A((0,o.o8)(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const n=this.classBreakInfos.length;for(let r=0;r<n;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&a.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let n=t;this.valueExpression&&null==t?.arcade&&(n={...n,arcade:await(0,T.lw)()});const r=this.getBreakIndex(e,n);return-1!==r?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void a.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&null==t?.arcade){const e=await(0,T.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),n={...n,arcade:e}}const r=this.getBreakIndex(e,n);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${n}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new r({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,o.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,o.o8)(this.visualVariables),legendOptions:(0,o.o8)(this.legendOptions),authoringInfo:(0,o.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){const n=[...this.symbols.map((n=>n.collectRequiredFields(e,t))),(0,f.Dx)(e,t,this.valueExpression)];(0,f.rq)(e,t,this.field),(0,f.rq)(e,t,this.normalizationField),await Promise.all(n)}_getBreakIndexForExpression(e,t){const{viewingMode:n,scale:r,spatialReference:i,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=s.arcadeUtils;if(!l){const e=u.createSyntaxTree(a);l=u.createFunction(e),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const c=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:n,scale:r,spatialReference:i}),o));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const t=this.field,n=e.attributes,r=this.normalizationType;let i=parseFloat(n[t]);if(r){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?n[this.normalizationField]:void 0);if("log"===r)i=Math.log(i)*Math.LOG10E;else if(r!==v||null==e||isNaN(e)){if(r===E&&!isNaN(t)){if(isNaN(i)||isNaN(t))return-1;i/=t}}else i=i/e*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let n=0;n<this.classBreakInfos.length;n++){const r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return n}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}};(0,i._)([(0,l.MZ)(b.As)],S.prototype,"backgroundFillSymbol",void 0),(0,i._)([(0,l.MZ)({type:[_.A],json:{write:{isRequired:!0}}})],S.prototype,"classBreakInfos",void 0),(0,i._)([(0,d.w)("classBreakInfos")],S.prototype,"readClassBreakInfos",null),(0,i._)([(0,h.K)("classBreakInfos")],S.prototype,"writeClassBreakInfos",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],S.prototype,"defaultLabel",void 0),(0,i._)([(0,l.MZ)(b.z4)],S.prototype,"defaultSymbol",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],S.prototype,"field",void 0),(0,i._)([(0,u.w)("field")],S.prototype,"castField",null),(0,i._)([(0,l.MZ)({type:Boolean})],S.prototype,"isMaxInclusive",void 0),(0,i._)([(0,l.MZ)({type:w.A,json:{write:!0}})],S.prototype,"legendOptions",void 0),(0,i._)([(0,l.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],S.prototype,"minValue",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],S.prototype,"normalizationField",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],S.prototype,"normalizationTotal",void 0),(0,i._)([(0,l.MZ)({type:M.apiValues,value:null,json:{type:M.jsonValues,read:M.read,write:M.write}})],S.prototype,"normalizationType",null),(0,i._)([(0,c.e)({classBreaks:"class-breaks"})],S.prototype,"type",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],S.prototype,"valueExpression",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],S.prototype,"valueExpressionTitle",void 0),S=r=(0,i._)([(0,p.$)("esri.renderers.ClassBreaksRenderer")],S);const k=S},63860:(e,t,n)=>{n.d(t,{ao:()=>h,ud:()=>y,xO:()=>f});var r=n(50076),i=n(54901),s=n(50346),o=n(38042);const a=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,l={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function u(e){if(function(e){return e in l}(e)){const t=l[e];return!0===t?e:t}return null}const c=[],d=new Map;function p(e){for(const t of d.keys())m(e.pattern,t)&&d.delete(t)}function h(e){return c.includes(e)||(p(e),c.unshift(e)),(0,i.hA)((()=>{const t=c.indexOf(e);t>-1&&(c.splice(t,1),p(e))}))}async function y(e){const t=(0,o.JK)();d.has(e)||d.set(e,async function(e,t){const n=[];for(const r of c)if(m(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(i){n.push(i)}if(n.length)throw new r.A("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:n});throw new r.A("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const n=d.get(e);return n&&await g.add(n),n}function f(e){if(!a.test(e))return null;const t=a.exec(e);if(null===t)return null;const[,n,r]=t;return u(n+(r?"-"+r.toUpperCase():""))??u(n)}function m(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}(0,o.Ml)((()=>{d.clear()}));const g=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,s.Tw)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},64519:(e,t,n)=>{n.d(t,{Y:()=>u});var r=n(35143),i=n(39356),s=(n(76460),n(40565)),o=(n(81806),n(47249),n(50076),n(29101)),a=n(85842),l=n(5364);let u=class extends l.X{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};(0,r._)([(0,o.u)({Type:i.A,ensureType:(0,s.dp)(i.A)})],u.prototype,"itemType",void 0),u=(0,r._)([(0,a.$)("esri.support.GraphicsCollection")],u)},64810:(e,t,n)=>{n.d(t,{Ch:()=>a,mW:()=>s,u2:()=>o});var r=n(15941),i=n(34154);function s(e,t){return{...t,filterMode:e.mode}}function o(e,t){return l(e,t).next().value??null}function a(e,t,n){const s=function(e){if("manual"===c(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:n,maxScale:r}of e.filters)t[0]=Math.max(t[0],d(n)),t[1]=Math.min(t[1],p(r));return t}(e);if(s&&((0,r.gg)(t,s[0])||(0,r.ZH)(n,s[1])))return"";const o=Array.from(l(e,t,n)),a=function(e,t,n){if(0===e.length)return!0;const i=d(e.at(0)?.minScale),s=p(e.at(-1)?.maxScale);if((0,r.ZH)(i,t)||(0,r.gg)(s,n))return!0;for(let o=0;o<e.length-1;o++){const t=e[o],n=e[o+1];if((0,r.ZH)(d(n.minScale),p(t.maxScale)))return!0}return!1}(o,t,n)?"1=1":o.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,i.IW)(e,t)),"");return a&&"1=1"!==a?a:""}function*l(e,t,n){if("manual"===c(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const r of e.filters)u(r.minScale,r.maxScale,t,n)&&(yield r)}}function u(e,t,n,i){return e=d(e),n=d(n),t=p(t),!(!(0,r.Sp)(n,e)&&(i??n)>e)&&!(0,r.Hx)(t,n)&&(void 0===i||!(0,r.Sp)(i,e))}function c(e){return"mode"in e?e.mode:e.filterMode}function d(e){return e||Number.POSITIVE_INFINITY}function p(e){return e||0}},65460:(e,t,n)=>{n.d(t,{BI:()=>m,D3:()=>y,XJ:()=>f,lc:()=>h,mX:()=>_,rU:()=>g,tH:()=>v});var r=n(88685);const i="__begin__",s="__end__",o=new RegExp(i,"ig"),a=new RegExp(s,"ig"),l=new RegExp("^"+i,"i"),u=new RegExp(s+"$","i"),c='"',d=c+" + ",p=" + "+c;function h(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function y(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function f(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=h(e.labelExpression),t.type="conventional"),t}function m(e){const t=f(e);switch(t.type){case"conventional":return _(t.expression);case"arcade":return t.expression}return null}function g(e){const t=f(e);switch(t.type){case"conventional":return function(e){const t=e?.match(b);return t?.[1].trim()||null}(t.expression);case"arcade":return v(t.expression)}return null}function _(e){let t;return e?(t=(0,r.HC)(e,(e=>i+'$feature["'+e+'"]'+s)),t=l.test(t)?t.replace(l,""):c+t,t=u.test(t)?t.replace(u,""):t+c,t=t.replaceAll(o,d).replaceAll(a,p)):t='""',t}const b=/^\s*\{([^}]+)\}\s*$/i;const w=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,T=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,I=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function v(e){if(!e)return null;let t=w.exec(e)||T.exec(e);return t?t[1]||t[3]:(t=I.exec(e),t?t[2]:null)}},65624:(e,t,n)=>{n.d(t,{LF:()=>c,dM:()=>d,sU:()=>l});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(80979),a=n(44081);const l={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:o.K}},"portal-item":{read:!0,write:{layerContainerTypes:o.K}}}}},u={read:{reader:a.LF},write:{allowNull:!0,writer:a.M9,layerContainerTypes:o.K}},c={json:{read:!1,write:!1,origins:{"web-map":u,"portal-item":u}}},d=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,i.MZ)(l)],t.prototype,"blendMode",void 0),(0,r._)([(0,i.MZ)(c)],t.prototype,"effect",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.BlendLayer")],t),t}},68002:(e,t,n)=>{n.d(t,{X_:()=>o,i1:()=>a,oW:()=>u,zx:()=>l});var r=n(15941),i=n(31633);const s=96;function o(e,t){const n=t||e.extent,r=e.width,o=(0,i.GA)(n?.spatialReference);return n&&r?n.width/r*o*i.dy*s:0}function a(e,t){return e/((0,i.GA)(t)*i.dy*s)}function l(e,t,n){return function(e,t){return 0===t||(0,r.Sp)(e,t)||e<t}(e,t)&&function(e,t){return 0===t||(0,r.Sp)(e,t)||e>t}(e,n)}function u(e,t){return(0,r.Sp)(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}},68325:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(35143),i=n(42553),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),a=n(12831);let l=class extends i.A{constructor(e){super(e),this.path=[]}};(0,r._)([(0,s.MZ)({type:[a.A],json:{write:!0}})],l.prototype,"path",void 0),l=(0,r._)([(0,o.$)("esri.rest.knowledgeGraph.Path")],l);const u=l},72599:(e,t,n)=>{n.d(t,{A:()=>p});var r,i=n(35143),s=n(53084),o=n(46053),a=(n(81806),n(76460),n(6409)),l=n(85842),u=n(92115),c=n(44631);let d=r=class extends c.A{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new r({codedValues:(0,s.o8)(this.codedValues),name:this.name})}};(0,i._)([(0,o.MZ)({type:[u.H],json:{write:{isRequired:!0}}})],d.prototype,"codedValues",void 0),(0,i._)([(0,a.e)({codedValue:"coded-value"})],d.prototype,"type",void 0),d=r=(0,i._)([(0,l.$)("esri.layers.support.CodedValueDomain")],d);const p=d},75540:(e,t,n)=>{n.d(t,{v:()=>a});var r=n(53084),i=n(99486),s=n(99702);class o{constructor(e,t){this._observable=new s.I,this._value=e,this._equalityFunction=t}get value(){return(0,i.gc)(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.gh;return new o(e,t)}},76350:(e,t,n)=>{n.d(t,{p:()=>l});var r=n(81806),i=n(76460),s=n(44135),o=n(1900),a=n(53430);function l(){return{fields:{type:[s.A],value:null,set:function(e){if(e&&(0,r.A)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");i.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return o.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const n=this.fieldsIndex?.has(t);n||i.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,a.DB)(this.fieldsIndex,e)}}}}},76866:(e,t,n)=>{n.d(t,{gK:()=>a,rS:()=>l});n(81806);var r=n(72599),i=n(44631),s=n(32173),o=n(50654);const a={key:"type",base:i.A,typeMap:{range:o.A,"coded-value":r.A,inherited:s.A}};function l(e){if(!e?.type)return null;switch(e.type){case"range":return o.A.fromJSON(e);case"codedValue":return r.A.fromJSON(e);case"inherited":return s.A.fromJSON(e)}return null}},78817:(e,t,n)=>{n.d(t,{B:()=>h,e:()=>y});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(28379)),o=n(85842),a=n(80979),l=n(53430),u=n(83982),c=n(90115),d=n(59187),p=n(93030);const h={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:a.K}}},y=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const n=t.timeInfo.exportOptions;if(!n)return null;const r=n.timeOffset,i=c.j.fromJSON(n.timeOffsetUnits);return r&&i?new p.A({value:r,unit:i}):null}set timeInfo(e){(0,l.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,i.MZ)({type:d.A,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,i.MZ)({type:p.A})],t.prototype,"timeOffset",void 0),(0,r._)([(0,s.w)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,i.MZ)({value:null,type:u.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,i.MZ)(h)],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.TemporalLayer")],t),t}},83716:(e,t,n)=>{n.d(t,{A:()=>re});var r=n(35143),i=n(16868),s=n(53084),o=n(76460),a=n(77717),l=(n(16783),n(46053)),u=(n(81806),n(85842)),c=n(17707),d=n(49140),p=n(76797),h=n(19247),y=n(65215),f=n(23701),m=n(9624),g=n(13312),_=n(80963),b=n(31608),w=n(25515),T=n(72547),I=n(48094),v=n(40296),E=n(21009);n(47249);const M=(0,n(76350).p)(),A=e=>{let t=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,r._)([(0,l.MZ)(M.fields)],t.prototype,"fields",void 0),(0,r._)([(0,l.MZ)(M.fieldsIndex)],t.prototype,"fieldsIndex",void 0),t=(0,r._)([(0,u.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],t),t};var S=n(2948),k=n(65624),N=n(30218),x=n(74440),L=n(52908),C=n(37534),R=n(21617),O=n(5682),F=n(78817),D=n(95363),j=n(54490),P=n(44135),$=n(53430),U=n(95114),Z=n(27937),V=n(83982),G=n(5766),B=n(86616),q=n(49176),z=n(77725),H=n(97015),Q=n(30973),W=n(94439),J=n(59989);function Y(e){if(!e.json)return e;e.json.write=K(e.json.write);const t=e.json.origins;if(!t)return e;let n;for(n in t){const e=t[n];e&&(e.write=K(e.write))}return e}function K(e){return"object"==typeof e&&e?(!1!==e.enabled&&(e.overridePolicy=function(e){const{target:t,writer:n,overridePolicy:r,...i}=e;return function(e,t){const n=ee.call(this,e,t);return n.enabled?{...i,...n}:n}}(e)),e):!0===e?X():e}function X(){return{overridePolicy:ee}}function ee(e,t){const n=!!this.geometryType;let r={enabled:n};return n&&(r={...r,...te.call(this,e,t)}),r}function te(e,t){return{ignoreOrigin:this.originIdOf(t)>d.Gr.DEFAULTS}}let ne=class extends(A((0,N.FJ)((0,L.J)((0,x.F)((0,k.dM)((0,C.fY)((0,F.e)((0,O.j)((0,R.J)((0,a.P)(w.A))))))))))){constructor(e){var t;super(e),t=this,this.blendMode="normal",this.capabilities=(0,v.f)(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.displayFilterEnabled=!0,this.displayFilterInfo=null,this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=E.dr,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new J.A(e.port1,{channel:e,client:{queryFeatures:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=H.A.fromJSON(e);return t.queryFeaturesJSON(r,n)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}get fields(){const e=[];return this.objectType?.properties?.forEach((t=>{const n="esriFieldTypeOID"===t.fieldType?"esriFieldTypeInteger":t.fieldType;e.push(P.A.fromJSON({name:t.name,type:n,alias:t.alias,defaultValue:t.defaultValue,editable:t.editable,nullable:t.nullable}))})),e.push(P.A.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),P.A.fromJSON({name:E.M1,type:"esriFieldTypeInteger",alias:E.M1,editable:!1}),P.A.fromJSON({name:E.BL,type:"esriFieldTypeInteger",alias:E.BL,editable:!1})),e}get geometryType(){if("link-chart"===this.parentCompositeLayer?.type)return"relationship"===this.graphType?"polyline":"point";const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.geometryType;return t&&"esriGeometryNull"!==t?b.gy.fromJSON(t):null}get geometryFieldName(){if("link-chart"===this.parentCompositeLayer?.type)return E.T1;const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name);return e?.name??null}get graphTypeName(){return this.objectType?.name}get hasM(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,n=t?this.objectType?.properties?.[t]:null;return n?.hasM??!1}get hasZ(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,n=t?this.objectType?.properties?.[t]:null;return n?.hasZ??!1}set labelingInfo(e){this._set("labelingInfo",e)}get labelingInfo(){if(this._isOverridden("labelingInfo"))return this._get("labelingInfo");const e=this.objectType.properties?(0,S.MY)(this.objectType.properties):"ESRI__ID";return"link-chart"===this.parentCompositeLayer.type?(0,S.iW)(this.graphType,this.graphTypeName,e):(0,S.e$)(this.graphTypeName,this.geometryType,e)}set renderer(e){(0,$.yp)(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const e=this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel,t=[...e?.entityTypes??[],...e?.relationshipTypes??[]].map((e=>e.name)).indexOf(this.graphTypeName),n=(0,S.Td)(t);if("link-chart"===this.parentCompositeLayer?.type){if("relationship"===this.graphType)return new G.A({type:"simple",symbol:(0,S.UT)(n)});const e=(0,B.r)((0,v.F0)(b.gy.toJSON("point")).renderer);return(0,W.dt)(e.symbol,n),e}const r=(0,B.r)((0,v.F0)(b.gy.toJSON(this.geometryType)).renderer);return(0,W.dt)(r.symbol,n),r}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??g.A.WGS84}set timeInfo(e){this._set("timeInfo",e)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(e){this._set("title",e)}writeTitle(e,t){t.title=e??"Layer"}createPopupTemplate(e){return(0,Q.tn)(this,e)}createQuery(){return new H.A({where:"1=1",outFields:["*"]})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){return null}async queryFeatures(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e),i=z.A.fromJSON(await r.executeQuery(n.toJSON(),t?.signal));return i.features.forEach((e=>{e.sourceLayer=this})),i}async queryFeaturesJSON(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e);return await r.executeQuery(n.toJSON(),t?.signal)}async queryFeatureCount(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e);return r.executeQueryForCount(n.toJSON(),t?.signal)}async queryExtent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;await this.load();const n={...e,returnGeometry:!0},{resolvedQuery:r,queryEngine:i}=await this._setupQueryObjects(n),s=await i.executeQueryForExtent(r.toJSON(),t?.signal);let o;return o=null!=s.extent?.xmin&&null!=s.extent?.xmax&&null!=s.extent?.ymin&&null!=s.extent?.ymax?new p.A(s.extent):new p.A,{count:s.count,extent:o}}async queryObjectIds(e,t){await this.load();const n=H.A.from(e);let r;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)r=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(n,this,t);r=this.loadQueryEngine(e)}return await r.executeQueryForIds(n.toJSON(),t?.signal)}loadQueryEngine(e){const t=new T.A({geometryType:b.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),n=new I.do({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:b.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:this.timeInfo?.toJSON(),featureStore:t});return n.featureStore.addMany(e),n}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new H.A({where:"1=1",outFields:[E.dr]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}load(e){return this.addResolvingPromise(this.parent.load(e).then((()=>(0,$.sv)(this.timeInfo,this.fieldsIndex)))),Promise.resolve(this)}async _setupQueryObjects(e,t){const n=H.A.from(e),r=n.geometry;if(r&&!r.spatialReference?.isWGS84&&(await(0,m.initializeProjection)(r.spatialReference,_.KK),n.geometry=(0,m.project)(r instanceof y.A||r instanceof f.A||r instanceof h.A?r:r.extent,_.KK)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)return{resolvedQuery:n,queryEngine:this._cachedQueryEngine};const i=await this.parentCompositeLayer.dataManager.getData(n,this,t);return{resolvedQuery:n,queryEngine:this.loadQueryEngine(i)}}};(0,r._)([(0,l.MZ)(Y((0,s.o8)(k.sU)))],ne.prototype,"blendMode",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"capabilities",void 0),(0,r._)([(0,l.MZ)({json:{origins:{"web-scene":{write:!1}},write:X()}})],ne.prototype,"charts",void 0),(0,r._)([(0,l.MZ)({readOnly:!0})],ne.prototype,"defaultPopupTemplate",null),(0,r._)([(0,l.MZ)({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],ne.prototype,"definitionExpression",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"displayField",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(N.Dp)))],ne.prototype,"displayFilterEnabled",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(N.KV)))],ne.prototype,"displayFilterInfo",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(k.LF)))],ne.prototype,"effect",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"elevationInfo",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(x.Y)))],ne.prototype,"featureEffect",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(j.d)))],ne.prototype,"featureReduction",null),(0,r._)([(0,l.MZ)()],ne.prototype,"fields",null),(0,r._)([(0,l.MZ)()],ne.prototype,"geometryType",null),(0,r._)([(0,l.MZ)()],ne.prototype,"geometryFieldName",null),(0,r._)([(0,l.MZ)({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],ne.prototype,"graphType",void 0),(0,r._)([(0,l.MZ)({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],ne.prototype,"graphTypeName",null),(0,r._)([(0,l.MZ)()],ne.prototype,"hasM",null),(0,r._)([(0,l.MZ)()],ne.prototype,"hasZ",null),(0,r._)([(0,l.MZ)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],ne.prototype,"id",void 0),(0,r._)([(0,l.MZ)({type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",default:!1,write:{overridePolicy(){return{enabled:!!this.geometryType,alwaysWriteDefaults:!0,ignoreOrigin:!0}}}}})],ne.prototype,"labelsVisible",void 0),(0,r._)([(0,l.MZ)({type:[U.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:function(e,t,n){const r=[["ESRI__AGGREGATION_COUNT",E.M1],["ESRI__ORIGIN_ID",E.Cz],["ESRI__DESTINATION_ID",E.KQ],["ESRI__LAYOUT_GEOMETRY",E.T1]];try{for(const t of e)for(const[e,n]of r)t.labelExpression=t.labelExpression?.replaceAll(e,n),t.labelExpressionInfo?.expression&&(t.labelExpressionInfo.expression=t.labelExpressionInfo.expression.replaceAll(e,n))}catch(i){o.A.getLogger(this).warn("Error updating labelingInfo",i)}return(0,Z.w)(e,t,n)},write:X()}})],ne.prototype,"labelingInfo",null),(0,r._)([(0,l.MZ)({readOnly:!0,json:{read:!1,write:{writer(e,t){switch(this.parentCompositeLayer?.type){case"link-chart":t.layerType="LinkChartSubLayer";break;case"knowledge-graph":t.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],ne.prototype,"layerType",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(D.fV)))],ne.prototype,"legendEnabled",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(D.hG)))],ne.prototype,"maxScale",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(D.hn)))],ne.prototype,"minScale",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"objectIdField",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"objectType",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(D.ke)))],ne.prototype,"opacity",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(C.ne)))],ne.prototype,"orderBy",void 0),(0,r._)([(0,l.MZ)({clonable:!1})],ne.prototype,"parent",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"parentCompositeLayer",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(D.M6)))],ne.prototype,"popupEnabled",void 0),(0,r._)([(0,l.MZ)({type:i.A,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],ne.prototype,"popupTemplate",void 0),(0,r._)([(0,l.MZ)({type:Number,json:{write:{overridePolicy:te}}})],ne.prototype,"refreshInterval",void 0),(0,r._)([(0,l.MZ)({types:q.Hg,json:{name:"layerDefinition.drawingInfo.renderer",write:X()}})],ne.prototype,"renderer",null),(0,r._)([(0,l.MZ)()],ne.prototype,"source",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"spatialReference",null),(0,r._)([(0,l.MZ)({type:V.A,json:{name:"layerDefinition.timeInfo",write:!0,origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:!0},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:!0}}}})],ne.prototype,"timeInfo",null),(0,r._)([(0,l.MZ)({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],ne.prototype,"title",null),(0,r._)([(0,c.K)("title")],ne.prototype,"writeTitle",null),(0,r._)([(0,l.MZ)({json:{read:!1}})],ne.prototype,"type",void 0),(0,r._)([(0,l.MZ)(Y((0,s.o8)(F.B)))],ne.prototype,"useViewTime",void 0),(0,r._)([(0,l.MZ)({type:Boolean,json:{name:"visibility",write:X()}})],ne.prototype,"visible",void 0),ne=(0,r._)([(0,u.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],ne);const re=ne},83982:(e,t,n)=>{n.d(t,{A:()=>f});var r=n(35143),i=n(69098),s=n(42553),o=n(46053),a=(n(81806),n(76460),n(47249),n(28379)),l=n(85842),u=n(17707),c=n(59187),d=n(93030),p=n(67478);function h(e,t){return d.A.fromJSON({value:e,unit:t})}let y=class extends(i.A.ClonableMixin(s.A)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?c.A.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?h(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?h(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,r._)([(0,o.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],y.prototype,"cumulative",void 0),(0,r._)([(0,o.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],y.prototype,"endField",void 0),(0,r._)([(0,o.MZ)({type:c.A,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"fullTimeExtent",void 0),(0,r._)([(0,a.w)("fullTimeExtent",["timeExtent"])],y.prototype,"readFullTimeExtent",null),(0,r._)([(0,u.K)("fullTimeExtent")],y.prototype,"writeFullTimeExtent",null),(0,r._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"hasLiveData",void 0),(0,r._)([(0,o.MZ)({type:d.A,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"interval",void 0),(0,r._)([(0,a.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],y.prototype,"readInterval",null),(0,r._)([(0,u.K)("interval")],y.prototype,"writeInterval",null),(0,r._)([(0,o.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],y.prototype,"startField",void 0),(0,r._)([(0,o.MZ)((0,p.P6)("timeReference",!0))],y.prototype,"timeZone",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"trackIdField",void 0),(0,r._)([(0,o.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],y.prototype,"useTime",void 0),(0,r._)([(0,o.MZ)({type:[Date],json:{read:!1}})],y.prototype,"stops",void 0),y=(0,r._)([(0,l.$)("esri.layers.support.TimeInfo")],y);const f=y},84031:(e,t,n)=>{n.d(t,{T:()=>o});var r=n(50346),i=n(75540),s=n(22856);class o{constructor(){this._tasks=new Array,this._runningTasks=(0,i.v)(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(0===this.length)return s.G;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,n){return++this._runningTasks.value,new Promise(((r,i)=>this._tasks.push(new a(r,i,e,t,n)))).finally((()=>--this._runningTasks.value))}unshift(e,t,n){return++this._runningTasks.value,new Promise(((r,i)=>this._tasks.unshift(new a(r,i,e,t,n)))).finally((()=>--this._runningTasks.value))}_process(e){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const n=(0,r.G4)(t.signal);if(n&&!t.abortCallback)t.reject((0,r.NK)());else{const i=n?t.abortCallback?.((0,r.NK)()):t.callback(e);(0,r.$X)(i)?i.then(t.resolve,t.reject):t.resolve(i)}}catch(o){t.reject(o)}return!0}cancelAll(){const e=(0,r.NK)();for(const t of this._tasks)if(t.abortCallback){const n=t.abortCallback(e);t.resolve(n)}else t.reject(e);this._tasks.length=0}}class a{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.resolve=e,this.reject=t,this.callback=n,this.signal=r,this.abortCallback=i}}},84202:(e,t,n)=>{n.d(t,{A7:()=>u,Cx:()=>c,Hk:()=>d,JJ:()=>f,SF:()=>p,UK:()=>l,jM:()=>h,x3:()=>y});n(81806);var r=n(86875),i=n(7246),s=n(76940),o=n(86659),a=n(44460);const l=s.A.fromJSON(a.Cb),u=i.A.fromJSON(a.yM),c=r.A.fromJSON(a.WR),d=o.A.fromJSON(a.JZ);function p(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return c}return null}const h=s.A.fromJSON(a.nC),y=i.A.fromJSON(a.HW),f=r.A.fromJSON(a.b6)},85646:(e,t,n)=>{n.d(t,{$C:()=>g,Hh:()=>o,J:()=>u,JT:()=>l,Tu:()=>f,Wg:()=>m,Xq:()=>b,i6:()=>w,pM:()=>y,tx:()=>a,vJ:()=>_});var r=n(28899);let i,s=null;function o(){return i||(i=n.e(83884).then(n.bind(n,83884)).then((e=>e.l)).then((e=>{let{default:t}=e;return t({locateFile:e=>(0,r.s)(`esri/libs/linkchartlayout/${e}`)})})).then((e=>{!function(e){s=e}(e)})),i)}var a,l,u,c;!function(e){e[e.None=0]="None",e[e.IsMovable=1]="IsMovable",e[e.IsGeographic=2]="IsGeographic",e[e.IsRoot=4]="IsRoot",e[e.IsOld=8]="IsOld"}(a||(a={})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Canceled=2]="Canceled"}(l||(l={})),function(e){e[e.Regular=0]="Regular",e[e.Curved=1]="Curved",e[e.Recursive=2]="Recursive"}(u||(u={})),function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.top=2]="top",e[e.bottom=3]="bottom"}(c||(c={}));const d={none:0,"start-only":1,"start-and-end":2};function p(e){const t={timeDirection:"right",timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:"start-and-end",showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0,...e?.toJSON()??{},eventsTicksVisualization:e?.eventsTicksVisualization??"start-and-end"};return{...t,timeDirection:{value:c[t.timeDirection]??c.right},eventsTicksVisualization:{value:d[t.eventsTicksVisualization]??d["start-and-end"]}}}function h(e,t,n,r,i,o){const a=n.length,u=i.length,c=Float64Array.BYTES_PER_ELEMENT,d=Uint32Array.BYTES_PER_ELEMENT,p=Uint8Array.BYTES_PER_ELEMENT,h=16+a*(p+2*c)+u*(2*d),y=s._malloc(h);try{const p=y+16-y%16,h=p+a*c,f=h+a*c,m=f+u*d,g=m+u*d,_=()=>[s.HEAPF64.subarray(p>>3,(p>>3)+a),s.HEAPF64.subarray(h>>3,(h>>3)+a),s.HEAPU32.subarray(f>>2,(f>>2)+u),s.HEAPU32.subarray(m>>2,(m>>2)+u),s.HEAPU8.subarray(g,g+a)],[b,w,T,I,v]=_();b.set(n),w.set(r),T.set(i),I.set(o),v.set(t);const E=e(a,g,p,h,u,f,m);let M=null,A=null;if(E.value===l.Success){const e=s.getLayoutLinksTypes(),t=s.getLayoutLinksVerticesEndIndices(),n=s.getLayoutLinksVertices(),r=s.countLayoutLinksVertices();!u||e&&t?r&&!n?E.value=l.Error:(M={types:new Uint8Array(s.HEAPU8.subarray(e,e+u)),vertexEndIndex:new Uint32Array(s.HEAPU32.subarray(t>>2,(t>>2)+u)),vertices:new Float64Array(s.HEAPF64.subarray(n>>3,(n>>3)+2*r))},A=s.getAuxiliaryGraphicElements()):E.value=l.Error}const[S,k,N,x,L]=_();return n.set(S),r.set(k),i.set(N),o.set(x),t.set(L),{status:E.value,links:M,graphics:A}}finally{s._free(y),s.cleanupLayout()}}var y,f,m,g,_,b,w,T,I;!function(e){e.getMinIdealEdgeLength=function(){return s.getMinIdealEdgeLength()},e.apply=function(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;return h(((t,n,r,i,o,c,d)=>s.applyForceDirectedLayout(e,t,n,r,i,o,c,d,a,l,u)),t,n,r,i,o)}}(y||(y={})),function(e){e.apply=function(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;return h(((t,n,r,i,o,c,d)=>s.applyCommunityLayout(e,t,n,r,i,o,c,d,a,l,u)),t,n,r,i,o)}}(f||(f={})),function(e){e.apply=function(e,t,n,r,i,o){return h(((t,n,r,i,o,a,l)=>s.applySimpleLayout(e,t,n,r,i,o,a,l)),t,n,r,i,o)}}(m||(m={})),function(e){e.apply=function(e,t,n,r,i,o){return h(((t,n,r,i,o,a,l)=>s.applyHierarchicalLayout(e,t,n,r,i,o,a,l)),t,n,r,i,o)}}(g||(g={})),function(e){e.apply=function(e,t,n,r,i,o){return h(((t,n,r,i,o,a,l)=>s.applyRadialTreeLayout(e,t,n,r,i,o,a,l)),t,n,r,i,o)}}(_||(_={})),function(e){e.apply=function(e,t,n,r,i,o){return h(((t,n,r,i,o,a,l)=>s.applySmartTreeLayout(e,t,n,r,i,o,a,l)),t,n,r,i,o)}}(b||(b={})),function(e){e.apply=function(e,t,n,r,i,o,a,u,c,d,y,f){return h(((t,n,r,a,u,h,m)=>{if(i.length!==t)return{value:l.Error};if(o.length!==t)return{value:l.Error};if(c.length!==u)return{value:l.Error};if(d.length!==u)return{value:l.Error};const g=Float64Array.BYTES_PER_ELEMENT,_=16,b=s._malloc(_+t*g),w=s._malloc(_+t*g),T=s._malloc(_+u*g),I=s._malloc(_+u*g),v=b+_-b%_,E=w+_-w%_,M=T+_-T%_,A=I+_-I%_;try{return s.HEAPF64.subarray(v>>3,(v>>3)+t).set(i),s.HEAPF64.subarray(E>>3,(E>>3)+t).set(o),s.HEAPF64.subarray(M>>3,(M>>3)+u).set(c),s.HEAPF64.subarray(A>>3,(A>>3)+u).set(d),s.applyChronologicalLayout(e,t,n,r,a,v,E,u,h,m,M,A,y,p(f))}finally{s._free(b),s._free(w),s._free(T),s._free(I)}}),t,n,r,a,u)}}(w||(w={})),function(e){e[e.Undirected=0]="Undirected",e[e.Directed=1]="Directed",e[e.Reversed=2]="Reversed"}(T||(T={})),function(e){e[e.ByCC_Raw=0]="ByCC_Raw",e[e.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",e[e.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(I||(I={}))},87840:(e,t,n)=>{n.d(t,{$4:()=>b,O0:()=>w,O1:()=>T,Sw:()=>I,eH:()=>g,rc:()=>_});var r=n(28899),i=n(69539),s=n(3825),o=n(53521),a=n(76931),l=n(29632);const u="picture-fill",c="simple-fill",d="simple-line",p="simple-marker",h="text",y="cim",f=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),m=new o.q(1e3);function g(e){const t=e.style;let n=null;if(e)switch(e.type){case p:"cross"!==t&&"x"!==t&&(n=e.color);break;case c:t&&"solid"!==t?"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.s)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):n=e.color;break;case u:n={type:"pattern",src:e.url,width:(0,a.Lz)(e.width)*e.xscale,height:(0,a.Lz)(e.height)*e.yscale,x:(0,a.Lz)(e.xoffset),y:(0,a.Lz)(e.yoffset)};break;case h:n=e.color;break;case y:n=(0,l.Nk)(e)}return n}function _(e,t){const n=e+"-"+t;return void 0!==m.get(n)?Promise.resolve(m.get(n)):(0,s.A)(e,{responseType:"image"}).then((e=>{const r=e.data,i=r.naturalWidth,s=r.naturalHeight,o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d");a.fillStyle=t,a.fillRect(0,0,i,s),a.globalCompositeOperation="destination-in",a.drawImage(r,0,0);const l=o.toDataURL();return m.put(n,l),l}))}function b(e){if(!e)return null;let t=null;switch(e.type){case c:case u:case p:t=b(e.outline);break;case d:{const n=(0,a.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:T(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,a.Lz)(e.miterLimit):e.join},t.dashArray=w(t).join(",")||"none");break}default:t=null}return t}function w(e){if(!e?.style)return[];const{dashArray:t,style:n,width:r}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const i=r??0,s=f.has(n)?f.get(n).map((e=>e*i)):[];if("butt"!==e.cap)for(const[o,a]of s.entries())s[o]=o%2==1?a+i:Math.max(a-i,1);return s}const T=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),I=new i.A([128,128,128])},90115:(e,t,n)=>{n.d(t,{j:()=>r});const r=(0,n(45802).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},92115:(e,t,n)=>{n.d(t,{H:()=>l});var r,i=n(35143),s=n(42553),o=n(46053),a=(n(81806),n(76460),n(47249),n(85842));let l=r=class extends s.A{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,i._)([(0,o.MZ)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"name",void 0),(0,i._)([(0,o.MZ)({type:[String,Number],json:{write:{isRequired:!0}}})],l.prototype,"code",void 0),l=r=(0,i._)([(0,a.$)("esri.layers.support.CodedValue")],l)},93030:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(35143),i=n(69098),s=n(42553),o=n(18288),a=n(46053),l=(n(81806),n(76460),n(47249),n(6409)),u=n(85842),c=n(90115);let d=class extends(i.A.ClonableMixin(s.A)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,o.t)(this.value,this.unit,"milliseconds")}};(0,r._)([(0,l.e)(c.j,{nonNullable:!0})],d.prototype,"unit",void 0),(0,r._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),d=(0,r._)([(0,u.$)("esri.time.TimeInterval")],d);const p=d},94439:(e,t,n)=>{n.d(t,{$d:()=>y,GG:()=>E,N7:()=>f,Sx:()=>m,UQ:()=>v,di:()=>M,dt:()=>_,f3:()=>A,k_:()=>h});var r=n(69539),i=n(98773),s=(n(81806),n(76931)),o=n(9392),a=n(44081),l=n(29632),u=n(87840),c=n(9994),d=n(94725);const p=new r.A("white");function h(e){if(!e)return 0;if((0,d.wk)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,s.PN)((0,u.$4)(e)?.width)}function y(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function f(e){return e.resource?.href??""}function m(e,t){if(!e)return null;let n=null;return(0,d.wk)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.A(n):null}(e):(0,d.$y)(e)&&(n="cim"===e.type?(0,l.Nk)(e):e.color?new r.A(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.A(n)}function _(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.A(t)),(0,d.wk)(e)?function(e,t,n){const r=e.symbolLayers;if(!r)return;const i=e=>g(t=t??e??(null!=n?p:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=i(e.color);else{const t=null!=e.material?e.material.color:null,r=i(t);null==e.material?e.material=new c.N({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,n))}}))}(e,t,n):(0,d.$y)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&e.outline?.color&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function b(e,t){const r=e.symbolLayers;r&&await(0,i.jJ)(r,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=w(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=T(t,o.Un,[e.width,void 0,e.height]);e.width=I(t[0],e.width,1,n),e.height=I(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:i}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(44374).then(n.bind(n,44374)),r=await t(e,10),{width:i,height:s,depth:o}=e,a=[i,o,s];let l=1;for(let n=0;n<3;n++){const e=a[n];if(null!=e){l=e/r[n];break}}for(let n=0;n<3;n++)null==a[n]&&(a[n]=r[n]*l);return{resourceSize:r,symbolSize:a}}(e),s=T(t,r,i);e.width=I(t[0],i[0],r[0],s),e.depth=I(t[1],i[1],r[1],s),e.height=I(t[2],i[2],r[2],s)}(e,t)}}(e,t)))}function w(e){for(const t of e)if("number"==typeof t)return t;return null}function T(e,t,n){for(let r=0;r<3;r++){const i=e[r];switch(i){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(i&&t[r])return i/t[r]}}return 1}function I(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}async function v(e,t){if(e&&t)return(0,d.wk)(e)?b(e,t):void((0,d.$y)(e)&&function(e,t){const n=w(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function E(e,t,n){if(e&&null!=t)if((0,d.wk)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if("object"===e.type)switch(n){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}"icon"===e.type&&(e.angle+=t)}))}else(0,d.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function M(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.zu)(t)}function A(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}},98476:(e,t,n)=>{var r;n.d(t,{M:()=>r}),function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"}(r||(r={}))}}]);
//# sourceMappingURL=15082.96e85e6b.chunk.js.map