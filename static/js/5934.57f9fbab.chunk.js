"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[5934],{1900:(e,t,r)=>{r.d(t,{A:()=>h});var i=r(50076),s=r(42553),n=r(76460),o=r(87663),a=r(64920),l=r(53430),u=r(36693),p=r(67478),c=r(24241);const d=new Map;class h{static fromJSON(e){return new h(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new h(e.fields??[],g(e))}static fromLayerJSON(e){return new h(e.fields??[],g(e))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const r=[];for(const i of this.fields){const e=i?.name,t=m(e);if(e&&t){const s=y(e);this._fieldsMap.set(e,i),this._fieldsMap.set(s,i),this._normalizedFieldsMap.set(t,i),r.push(`${s}:${i.type}:${this._timeZoneByFieldName?.get(e)}`),(0,l.vE)(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):(0,l.WA)(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),(0,l.te)(i)||(0,l.Xz)(i)||(i.editable=null==i.editable||!!i.editable,i.nullable=null==i.nullable||!!i.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,l.te)(e)||(0,l.Xz)(e)||e.nullable||void 0!==(0,l.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(y(e))??this._normalizedFieldsMap.get(m(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(n.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new i.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.n$):f.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?a.GB.instance:t===u.n$?c.mQ.utcInstance:(0,o.tE)(d,t,(()=>c.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,l.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>s.A.isSerializable(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function y(e){return e.trim().toLowerCase()}function m(e){return(0,l.rS)(e)?.toLowerCase()??""}const f=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function g(e){const t=new Map;if(!e.fields)return t;const r=!0===e.datesInUnknownTimezone,{timeInfo:i,editFieldsInfo:s}=e,n=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",a=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,p.ZS)(e.dateFieldsTimeReference):null,l=s?function(e){return"timeZone"in e}(s)?s.timeZone??a:s.dateFieldsTimeReference?(0,p.ZS)(s.dateFieldsTimeReference):a??u.n$:null,c=i?function(e){return"timeZone"in e}(i)?i.timeZone??a:i.timeReference?(0,p.ZS)(i.timeReference):a:null,d=new Map([[y(s?.creationDateField??""),l],[y(s?.editDateField??""),l],[y(n),c],[y(o),c]]);for(const{name:p,type:h}of e.fields)if(f.has(h))t.set(p,u.L5);else if("date"!==h&&"esriFieldTypeDate"!==h)t.set(p,null);else if(r)t.set(p,u.L5);else{const e=d.get(y(p??""))??a;t.set(p,e)}return t}},5618:(e,t,r)=>{r.d(t,{A:()=>p});var i,s=r(35143),n=r(94643),o=r(42553),a=r(46053),l=(r(81806),r(76460),r(47249),r(85842));let u=i=class extends o.A{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new n.A}clone(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,s._)([(0,a.MZ)({type:String,json:{write:{isRequired:!0}}})],u.prototype,"floorField",void 0),(0,s._)([(0,a.MZ)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,s._)([(0,a.MZ)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=i=(0,s._)([(0,l.$)("esri.layers.support.LayerFloorInfo")],u);const p=u},6127:(e,t,r)=>{r.d(t,{m:()=>i});const i=new(r(45802).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},12406:(e,t,r)=>{r.d(t,{p:()=>o});var i=r(35143),s=r(46053),n=(r(81806),r(76460),r(47249),r(85842));const o=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i._)([(0,s.MZ)({type:String})],t.prototype,"apiKey",null),t=(0,i._)([(0,n.$)("esri.layers.mixins.APIKeyMixin")],t),t}},19463:(e,t,r)=>{r.d(t,{CW:()=>h,Fm:()=>l,Hz:()=>y,JQ:()=>d,JZ:()=>_,ND:()=>f,R_:()=>o,U9:()=>c,fu:()=>s,nr:()=>m,oF:()=>n,rq:()=>u,z$:()=>p});const i=[["binary","application/octet-stream","bin",""]];function s(e,t){return null!=M(t.name,e?.supportedFormats??[])}function n(e,t){if(!e)return!1;const r=u(t,e.supportedFormats??[]);return null!=r&&e.editFormats.includes(r)}function o(e,t){return v(function(e,t){const r=e.toLowerCase();return g(t).find((e=>b(e)===r))}(e,t))}function a(e,t){return v(M(e,t))}function l(e,t){return b(function(e,t){return g(t).find((t=>v(t)===e))}(e,t))}function u(e,t){return a(e.name,t)??o(e.type,t)}function p(e,t,r){return o(e,r)??a(t,r)}function c(e){let{supportedFormats:t}=e;return p("model/gltf-binary","glb",t)}function d(e){const t=c(e);return null!=t&&e.editFormats.includes(t)}function h(e){let{supportedFormats:t}=e;return p("model/gltf+json","gltf",t)}function y(e){if(!e)return null;const t=c(e),r=h(e);let i=null;for(const s of e.queryFormats){if(s===t)return s;s===r&&(i=s)}return i}function m(e){let{supportedFormats:t}=e;return p("application/esri3do-SR_world","wld",t)}function f(e){let{supportedFormats:t}=e;return p("application/esri3do-SR_prj","prj",t)}function g(e){return[...i,...e]}function M(e,t){const r=e.toLowerCase();return g(t).find((e=>S(e).some((e=>r.endsWith(e)))))}function v(e){return e?.[0]}function b(e){return e?.[1].toLowerCase()}function S(e){return e?.[2].split(",").map((e=>e.toLowerCase()))??[]}function _(e){return e.tables?.find((e=>"assetMaps"===e.role))}},23965:(e,t,r)=>{r.d(t,{A:()=>d});var i=r(35143),s=r(69098),n=r(45802),o=r(42553),a=r(46053),l=(r(81806),r(76460),r(47249),r(85842));const u=new n.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),p=new n.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let c=class extends(s.A.ClonableMixin(o.A)){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,i._)([(0,a.MZ)({json:{read:u.read,write:u.write}})],c.prototype,"cardinality",void 0),(0,i._)([(0,a.MZ)({json:{name:"catalogID"}})],c.prototype,"catalogId",void 0),(0,i._)([(0,a.MZ)({json:{read:!0,write:!0}})],c.prototype,"composite",void 0),(0,i._)([(0,a.MZ)({json:{read:!0,write:!0}})],c.prototype,"id",void 0),(0,i._)([(0,a.MZ)({json:{read:!0,write:!0}})],c.prototype,"keyField",void 0),(0,i._)([(0,a.MZ)({json:{read:!0,write:!0}})],c.prototype,"keyFieldInRelationshipTable",void 0),(0,i._)([(0,a.MZ)({json:{read:!0,write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,a.MZ)({json:{read:!0,write:!0}})],c.prototype,"relatedTableId",void 0),(0,i._)([(0,a.MZ)({json:{read:!0,write:!0}})],c.prototype,"relationshipTableId",void 0),(0,i._)([(0,a.MZ)({json:{read:p.read,write:p.write}})],c.prototype,"role",void 0),c=(0,i._)([(0,l.$)("esri.layers.support.Relationship")],c);const d=c},25515:(e,t,r)=>{r.d(t,{A:()=>b});var i=r(35143),s=r(3825),n=r(50076),o=r(54099),a=r(5632),l=r(49304),u=r(76460),p=r(50346),c=r(90534),d=r(46053),h=(r(81806),r(47249),r(85842)),y=r(76797),m=r(13312),f=r(86560);var g=r(59187);let M=0,v=class extends(o.A.EventedMixin(a.A.IdentifiableMixin(l.A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new y.A(-180,-90,180,90,m.A.WGS84),this.id=Date.now().toString(16)+"-layer-"+M++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=m.A.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([r.e(652),r.e(2544)]).then(r.bind(r,62544))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await Promise.all([r.e(9624),r.e(652),r.e(2487)]).then(r.bind(r,2487));try{return await i(t)}catch(s){const e=t?.portalItem,r=e?.id||"unset",i=e?.portal?.url||f.A.portalUrl;throw u.A.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+i+"', id: '"+r+"')",s),s}}(e)}initialize(){this.when().catch((e=>{(0,p.zf)(e)||u.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,c.An)(this.url)}createLayerView(e,t){return Promise.reject(new n.A("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,s.A)(e,{query:{f:"json"},responseType:"json"})).data;throw new n.A("layer:no-attribution-data","Layer does not have attribution data")}};(0,i._)([(0,d.MZ)({type:String})],v.prototype,"attributionDataUrl",void 0),(0,i._)([(0,d.MZ)({readOnly:!0})],v.prototype,"effectiveVisible",null),(0,i._)([(0,d.MZ)({type:y.A})],v.prototype,"fullExtent",void 0),(0,i._)([(0,d.MZ)({readOnly:!0})],v.prototype,"hasAttributionData",null),(0,i._)([(0,d.MZ)({type:String,clonable:!1})],v.prototype,"id",void 0),(0,i._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"legendEnabled",void 0),(0,i._)([(0,d.MZ)({type:["show","hide","hide-children"]})],v.prototype,"listMode",void 0),(0,i._)([(0,d.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0})],v.prototype,"opacity",void 0),(0,i._)([(0,d.MZ)({clonable:!1})],v.prototype,"parent",void 0),(0,i._)([(0,d.MZ)({readOnly:!0})],v.prototype,"parsedUrl",null),(0,i._)([(0,d.MZ)({type:Boolean,readOnly:!0})],v.prototype,"persistenceEnabled",void 0),(0,i._)([(0,d.MZ)({type:Boolean})],v.prototype,"popupEnabled",void 0),(0,i._)([(0,d.MZ)({type:Boolean})],v.prototype,"attributionVisible",void 0),(0,i._)([(0,d.MZ)({type:m.A})],v.prototype,"spatialReference",void 0),(0,i._)([(0,d.MZ)({type:String})],v.prototype,"title",void 0),(0,i._)([(0,d.MZ)({readOnly:!0,json:{read:!1}})],v.prototype,"type",void 0),(0,i._)([(0,d.MZ)()],v.prototype,"url",void 0),(0,i._)([(0,d.MZ)({type:g.A})],v.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,d.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"visible",void 0),v=(0,i._)([(0,h.$)("esri.layers.Layer")],v);const b=v},32173:(e,t,r)=>{r.d(t,{A:()=>u});var i,s=r(35143),n=(r(76460),r(81806),r(47249),r(50076),r(6409)),o=r(85842),a=r(44631);let l=i=class extends a.A{constructor(e){super(e),this.type="inherited"}clone(){return new i}};(0,s._)([(0,n.e)({inherited:"inherited"})],l.prototype,"type",void 0),l=i=(0,s._)([(0,o.$)("esri.layers.support.InheritedDomain")],l);const u=l},44135:(e,t,r)=>{r.d(t,{A:()=>f});var i,s=r(35143),n=r(45802),o=r(42553),a=r(46053),l=r(40565),u=(r(81806),r(47249),r(6409)),p=r(28379),c=r(85842),d=r(76866),h=r(6127);const y=new n.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m=i=class extends o.A{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,t){let{description:r}=t,i=null;try{i=r?JSON.parse(r):null}catch(s){}return i?.value??null}readValueType(e,t){let{description:r}=t,i=null;try{i=r?JSON.parse(r):null}catch(s){}return i?y.fromJSON(i.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,s._)([(0,a.MZ)({type:String,json:{write:!0}})],m.prototype,"alias",void 0),(0,s._)([(0,a.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],m.prototype,"defaultValue",void 0),(0,s._)([(0,a.MZ)()],m.prototype,"description",void 0),(0,s._)([(0,p.w)("description")],m.prototype,"readDescription",null),(0,s._)([(0,a.MZ)({types:d.gK,json:{read:{reader:d.rS},write:!0}})],m.prototype,"domain",void 0),(0,s._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),(0,s._)([(0,a.MZ)({type:l.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],m.prototype,"length",void 0),(0,s._)([(0,a.MZ)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,s._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"nullable",void 0),(0,s._)([(0,u.e)(h.m)],m.prototype,"type",void 0),(0,s._)([(0,a.MZ)()],m.prototype,"valueType",void 0),(0,s._)([(0,p.w)("valueType",["description"])],m.prototype,"readValueType",null),(0,s._)([(0,a.MZ)({type:Boolean,json:{read:!1}})],m.prototype,"visible",void 0),m=i=(0,s._)([(0,c.$)("esri.layers.support.Field")],m);const f=m},44141:(e,t,r)=>{r.d(t,{S:()=>y,d:()=>F});var i=r(81806),s=r(13096),n=r(19463);function o(e,t,r){return!!l(e,t,r)}function a(e,t,r){return l(e,t,r)}function l(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const u={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function p(e){const t=e?.supportedSpatialAggregationStatistics?.map((e=>e.toLowerCase()));return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function c(e,t){const r=e?.supportedOperationsWithCacheHint?.map((e=>e.toLowerCase()));return!!r?.includes(t.toLowerCase())}function d(e){const t=e?.supportedStatisticTypes?.map((e=>e.toLowerCase()));return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_continuous"),percentileDiscrete:!!t?.includes("percentile_discrete"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function h(e){const t=e?.supportedNormalizationTypes?.map((e=>e.toLowerCase()));return{field:!!t?.includes("field"),log:!!t?.includes("log"),naturalLog:!!t?.includes("naturallog"),percentOfTotal:!!t?.includes("percentoftotal"),squareRoot:!!t?.includes("squareroot")}}function y(e,t){return{analytics:m(e),attachment:f(e),data:g(e),metadata:M(e),operations:v(e.capabilities,e,t),query:b(e,t),queryAttributeBins:w(e),queryRelated:S(e),queryTopFeatures:_(e),editing:C(e)}}function m(e){return{supportsCacheHint:c(e.advancedQueryCapabilities,"queryAnalytics")}}function f(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:c(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:o(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:o(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((e=>{const t=u[e.name];t&&(r[t]=!!e.isEnabled)})),r}function g(e){return{isVersioned:o(e,"isDataVersioned",!1),isBranchVersioned:o(e,"isDataBranchVersioned",!1),supportsAttachment:o(e,"hasAttachments",!1),supportsM:o(e,"hasM",!1),supportsZ:o(e,"hasZ",!1)}}function M(e){return{supportsAdvancedFieldProperties:o(e,"supportsFieldDescriptionProperty",!1)}}function v(e,t,r){const i=e?e.toLowerCase().split(",").map((e=>e.trim())):[],n=r?(0,s.qg)(r):null,a=i.includes(null!=n&&"MapServer"===n.serverType?"data":"query"),l=i.includes("editing")&&!t.datesInUnknownTimezone;let u=l&&i.includes("create"),p=l&&i.includes("delete"),c=l&&i.includes("update");const d=i.includes("changetracking"),h=t.advancedQueryCapabilities;return l&&!(u||p||c)&&(u=p=c=!0),{supportsCalculate:o(t,"supportsCalculate",!1),supportsTruncate:o(t,"supportsTruncate",!1),supportsValidateSql:o(t,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:p,supportsEditing:l,supportsChangeTracking:d,supportsQuery:a,supportsQueryAnalytics:o(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:o(h,"supportsQueryAttachments",!1),supportsQueryBins:o(h,"supportsQueryBins",!1),supportsQueryTopFeatures:o(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:o(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:o(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:o(t,"supportsAsyncConvert3D",!1)}}function b(e,t){const r=e.advancedQueryCapabilities,l=e.ownershipBasedAccessControlForFeatures,u=e.archivingInfo,d=e.currentVersion,h=t?.includes("MapServer"),y=!h||d>=(0,i.A)("mapserver-pbf-version-support"),m=(0,s.Wo)(t),f=new Set((e.supportedQueryFormats??"").split(",").map((e=>e.toLowerCase().trim())));return{maxRecordCount:a(e,"maxRecordCount",void 0),maxRecordCountFactor:a(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:a(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:p(r),supportsCacheHint:o(r,"supportsQueryWithCacheHint",!1)||c(r,"query"),supportsCentroid:o(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:m,supportsCurrentUser:o(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:o(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:o(r,"supportsDisjointSpatialRel",!1),supportsDistance:o(r,"supportsQueryWithDistance",!1),supportsDistinct:o(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:o(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:y&&f.has("pbf"),supportsFullTextSearch:o(r,"supportsFullTextSearch",!1),supportsGeometryProperties:o(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:o(r,"supportsHavingClause",!1),supportsHistoricMoment:o(u,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:o(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:o(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:o(r,"supportsPagination",!1),supportsPercentileStatistics:o(r,"supportsPercentileStatistics",!1),supportsQuantization:o(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:o(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:o(l,"allowAnonymousToQuery",!0),supportsQueryByOthers:o(l,"allowOthersToQuery",!0),supportsQueryGeometry:o(e,"supportsReturningQueryGeometry",!1),supportsResultType:o(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,n.Hz)(e.infoFor3D),supportsSpatialAggregationStatistics:o(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:o(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:o(e,"useStandardizedQueries",!1),supportsStatistics:o(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:o(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:o(r,"supportsTrueCurve",!1),tileMaxRecordCount:a(e,"tileMaxRecordCount",void 0)}}function S(e){const t=e.advancedQueryCapabilities,r=o(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:o(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:c(t,"queryRelated")}}function _(e){return{supportsCacheHint:c(e.advancedQueryCapabilities,"queryTopFilter")}}function w(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:o(t,"supportsDateBin",!1),supportsFixedInterval:o(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:o(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:o(t,"supportsFixedBoundariesBin",!1),supportsStackBy:o(t,"supportsStackBy",!1),supportsSplitBy:o(t,"supportsSplitBy",!1),supportsSnapToData:o(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:o(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:o(t,"supportsFirstDayOfWeek",!1),supportsNormalization:o(t,"supportsNormalization",!1),supportedStatistics:d(t),supportedNormalizationTypes:h(t)}}function C(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:o(e,"allowGeometryUpdates",!0),supportsGlobalId:o(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:o(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:o(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:o(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:o(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:o(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:o(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:o(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:o(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:o(r,"supportsAsyncApplyEdits",!1),zDefault:a(e,"zDefault",void 0)}}function F(e){return{operations:{supportsAppend:o(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:o(e,"supportsExportClip",!1),supportsExportFrameset:o(e,"supportsExportFrameset",!1),supportsMensuration:o(e,"supportsMensuration",!1),supportsUpdate:o(e,"supportsUpdate",!1)}}}},44460:(e,t,r)=>{r.d(t,{Cb:()=>n,HW:()=>p,JR:()=>s,JZ:()=>l,WR:()=>a,b6:()=>c,fT:()=>i,nC:()=>u,yM:()=>o});const i=[252,146,31,255],s=[153,153,153,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},p={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},44631:(e,t,r)=>{r.d(t,{A:()=>c});var i=r(35143),s=r(45802),n=r(42553),o=r(46053),a=(r(81806),r(76460),r(47249),r(6409)),l=r(85842);const u=new s.J({inherited:"inherited",codedValue:"coded-value",range:"range"});let p=class extends n.A{constructor(e){super(e),this.name=null,this.type=null}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,i._)([(0,a.e)(u),(0,o.MZ)({json:{write:{isRequired:!0}}})],p.prototype,"type",void 0),p=(0,i._)([(0,l.$)("esri.layers.support.Domain")],p);const c=p},49723:(e,t,r)=>{r.d(t,{AG:()=>a,lk:()=>s,vD:()=>o,yS:()=>n});const i="randomUUID"in crypto;function s(){if(i)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function n(){return`{${s().toUpperCase()}}`}function o(){return`{${s()}}`}function a(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}},50654:(e,t,r)=>{r.d(t,{A:()=>p});var i,s=r(35143),n=r(46053),o=(r(81806),r(76460),r(47249),r(6409)),a=r(85842),l=r(44631);let u=i=class extends l.A{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,s._)([(0,n.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],u.prototype,"maxValue",void 0),(0,s._)([(0,n.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],u.prototype,"minValue",void 0),(0,s._)([(0,o.e)({range:"range"})],u.prototype,"type",void 0),u=i=(0,s._)([(0,a.$)("esri.layers.support.RangeDomain")],u);const p=u},53521:(e,t,r)=>{r.d(t,{q:()=>s});var i=r(79369);class s{constructor(e,t){this._storage=new i.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},58503:(e,t,r)=>{r.d(t,{O9:()=>n,dw:()=>o,mj:()=>s});var i=r(93103);function s(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((e,t)=>e.type===r[t].type))}function n(e,t){const r=e.length>t.length?e:t,s=e.length>t.length?t:e;for(let n=s.length;n<r.length;n++)s.push((0,i.sK)(r[n]))}function o(e){const t=e[0];return!!t&&"type"in t}},64810:(e,t,r)=>{r.d(t,{Ch:()=>a,mW:()=>n,u2:()=>o});var i=r(15941),s=r(34154);function n(e,t){return{...t,filterMode:e.mode}}function o(e,t){return l(e,t).next().value??null}function a(e,t,r){const n=function(e){if("manual"===p(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of e.filters)t[0]=Math.max(t[0],c(r)),t[1]=Math.min(t[1],d(i));return t}(e);if(n&&((0,i.gg)(t,n[0])||(0,i.ZH)(r,n[1])))return"";const o=Array.from(l(e,t,r)),a=function(e,t,r){if(0===e.length)return!0;const s=c(e.at(0)?.minScale),n=d(e.at(-1)?.maxScale);if((0,i.ZH)(s,t)||(0,i.gg)(n,r))return!0;for(let o=0;o<e.length-1;o++){const t=e[o],r=e[o+1];if((0,i.ZH)(c(r.minScale),d(t.maxScale)))return!0}return!1}(o,t,r)?"1=1":o.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,s.IW)(e,t)),"");return a&&"1=1"!==a?a:""}function*l(e,t,r){if("manual"===p(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const i of e.filters)u(i.minScale,i.maxScale,t,r)&&(yield i)}}function u(e,t,r,s){return e=c(e),r=c(r),t=d(t),!(!(0,i.Sp)(r,e)&&(s??r)>e)&&!(0,i.Hx)(t,r)&&(void 0===s||!(0,i.Sp)(s,e))}function p(e){return"mode"in e?e.mode:e.filterMode}function c(e){return e||Number.POSITIVE_INFINITY}function d(e){return e||0}},65460:(e,t,r)=>{r.d(t,{BI:()=>f,D3:()=>y,XJ:()=>m,lc:()=>h,mX:()=>M,rU:()=>g,tH:()=>w});var i=r(88685);const s="__begin__",n="__end__",o=new RegExp(s,"ig"),a=new RegExp(n,"ig"),l=new RegExp("^"+s,"i"),u=new RegExp(n+"$","i"),p='"',c=p+" + ",d=" + "+p;function h(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function y(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function m(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=h(e.labelExpression),t.type="conventional"),t}function f(e){const t=m(e);switch(t.type){case"conventional":return M(t.expression);case"arcade":return t.expression}return null}function g(e){const t=m(e);switch(t.type){case"conventional":return function(e){const t=e?.match(v);return t?.[1].trim()||null}(t.expression);case"arcade":return w(t.expression)}return null}function M(e){let t;return e?(t=(0,i.HC)(e,(e=>s+'$feature["'+e+'"]'+n)),t=l.test(t)?t.replace(l,""):p+t,t=u.test(t)?t.replace(u,""):t+p,t=t.replaceAll(o,c).replaceAll(a,d)):t='""',t}const v=/^\s*\{([^}]+)\}\s*$/i;const b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,S=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,_=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function w(e){if(!e)return null;let t=b.exec(e)||S.exec(e);return t?t[1]||t[3]:(t=_.exec(e),t?t[2]:null)}},72599:(e,t,r)=>{r.d(t,{A:()=>d});var i,s=r(35143),n=r(53084),o=r(46053),a=(r(81806),r(76460),r(6409)),l=r(85842),u=r(92115),p=r(44631);let c=i=class extends p.A{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new i({codedValues:(0,n.o8)(this.codedValues),name:this.name})}};(0,s._)([(0,o.MZ)({type:[u.H],json:{write:{isRequired:!0}}})],c.prototype,"codedValues",void 0),(0,s._)([(0,a.e)({codedValue:"coded-value"})],c.prototype,"type",void 0),c=i=(0,s._)([(0,l.$)("esri.layers.support.CodedValueDomain")],c);const d=c},76866:(e,t,r)=>{r.d(t,{gK:()=>a,rS:()=>l});r(81806);var i=r(72599),s=r(44631),n=r(32173),o=r(50654);const a={key:"type",base:s.A,typeMap:{range:o.A,"coded-value":i.A,inherited:n.A}};function l(e){if(!e?.type)return null;switch(e.type){case"range":return o.A.fromJSON(e);case"codedValue":return i.A.fromJSON(e);case"inherited":return n.A.fromJSON(e)}return null}},79369:(e,t,r)=>{r.d(t,{F:()=>l,Ti:()=>s});var i=r(30015);const s=-3,n=s-1;var o,a;(a=o||(o={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class l{get size(){return this._size}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.A,this._users=new i.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){const r=this._db.get(e.id+t);return r?.size??0}put(e,t,r,i,a){t=e.id+t;const l=this._db.get(t);if(l&&(this._size-=l.size,e.size-=l.size,this._db.delete(t),l.entry!==r&&this._notifyRemove(t,l.entry,l.size,o.ALL)),i>this._maxSize)return void this._notifyRemove(t,r,i,o.ALL);if(void 0===r)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${t}`),void this._notifyRemove(t,r,0,o.ALL);const p=1+Math.max(a,n)-s;this._db.set(t,new u(r,i,p)),this._size+=i,e.size+=i,this._checkSize()}updateSize(e,t,r,i){t=e.id+t;const s=this._db.get(t);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;i>this._maxSize;){const e=this._notifyRemove(t,r,i,o.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);i=e}s.size=i,this._size+=i,e.size+=i,this._checkSize()}}pop(e,t){t=e.id+t;const r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(e,t){t=e.id+t;const r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}peek(e,t){const r=this._db.get(e.id+t);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,i)=>{const s=e.lifetime;r[s]=(r[s]||0)+e.size,this._users.forAll((r=>{const{id:s,name:n}=r;if(i.startsWith(s)){const r=t[n]||0;t[n]=r+e.size}}))}));const i={};this._users.forAll((e=>{const r=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const s=t[r]||0;t[r]=s,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"}));const n=Object.keys(t);n.sort(((e,r)=>t[r]-t[e])),n.forEach((r=>e[r]=Math.round(t[r]/2**20)+"MB / "+i[r]));for(let o=r.length-1;o>=0;--o){const t=r[o];t&&(e["Priority "+(o+s-1)]=Math.round(t/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,e.size,o.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,o.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,r,i){let s;return this._removeFuncs.some((n=>{if(e.startsWith(n[0])){const e=n[1](t,i,r);return"number"==typeof e&&(s=e),!0}return!1})),s}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;const r=e?.id;let i=!0;for(;i;){i=!1;for(const[s,n]of this._db)if(0===n.lifetime&&(!r||s.startsWith(r))){if(this._purgeItem(s,n,e),t.size<=.9*t.maxSize)return;i||=this._db.has(s)}}for(const[s,n]of this._db)if((!r||s.startsWith(r))&&(this._purgeItem(s,n,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((t=>e.startsWith(t.id)));if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);const i=this._notifyRemove(e,t.entry,t.size,o.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}class u{constructor(e,t,r){this.entry=e,this.size=t,this.lifetime=r,this.lives=r}}},84202:(e,t,r)=>{r.d(t,{A7:()=>u,Cx:()=>p,Hk:()=>c,JJ:()=>m,SF:()=>d,UK:()=>l,jM:()=>h,x3:()=>y});r(81806);var i=r(86875),s=r(7246),n=r(76940),o=r(86659),a=r(44460);const l=n.A.fromJSON(a.Cb),u=s.A.fromJSON(a.yM),p=i.A.fromJSON(a.WR),c=o.A.fromJSON(a.JZ);function d(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return p}return null}const h=n.A.fromJSON(a.nC),y=s.A.fromJSON(a.HW),m=i.A.fromJSON(a.b6)},91524:(e,t,r)=>{r.d(t,{K:()=>d,Q:()=>u});var i=r(35143),s=r(45802),n=r(76460),o=r(46053),a=(r(81806),r(47249),r(6409)),l=r(85842);const u=(0,s.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),p="percent-of-total",c="field",d=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&c||r&&p||null,t&&r&&n.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==c&&e!==p||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,i._)([(0,o.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,i._)([(0,a.e)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,i._)([(0,l.$)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},91605:(e,t,r)=>{r.d(t,{A:()=>v});var i,s=r(35143),n=r(18690),o=r(45802),a=r(42553),l=r(31633),u=r(62754),p=r(46053),c=(r(81806),r(76460),r(28379)),d=r(85842),h=r(17707);const y=(0,o.O)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),m=y.jsonValues.slice();(0,n.Xy)(m,"orthometric");const f=(0,o.O)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let g=i=class extends a.A{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return y.write(e,t,r)}readHeightModel(e,t,r){return y.read(e)||(r?.messages&&r.messages.push(function(e,t){return new u.A("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return f.read(e)||(r?.messages&&r.messages.push(M(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,l.LA)(e)||f.read(e)||(r?.messages&&r.messages.push(M(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,l.k1)(t);return new i({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new i;return t.read(e,{origin:"web-scene"}),t}};function M(e,t){return new u.A("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,s._)([(0,p.MZ)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m,default:"ellipsoidal",write:{isRequired:!0}}}}})],g.prototype,"heightModel",void 0),(0,s._)([(0,h.K)("web-scene","heightModel")],g.prototype,"writeHeightModel",null),(0,s._)([(0,c.w)(["web-scene","service"],"heightModel")],g.prototype,"readHeightModel",null),(0,s._)([(0,p.MZ)({type:f.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:f.jsonValues,write:{writer:f.write,isRequired:!0}}}}})],g.prototype,"heightUnit",void 0),(0,s._)([(0,c.w)("web-scene","heightUnit")],g.prototype,"readHeightUnit",null),(0,s._)([(0,c.w)("service","heightUnit")],g.prototype,"readHeightUnitService",null),(0,s._)([(0,p.MZ)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],g.prototype,"vertCRS",void 0),(0,s._)([(0,c.w)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],g.prototype,"readVertCRS",null),g=i=(0,s._)([(0,d.$)("esri.geometry.HeightModelInfo")],g);const v=g},92115:(e,t,r)=>{r.d(t,{H:()=>l});var i,s=r(35143),n=r(42553),o=r(46053),a=(r(81806),r(76460),r(47249),r(85842));let l=i=class extends n.A{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};(0,s._)([(0,o.MZ)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"name",void 0),(0,s._)([(0,o.MZ)({type:[String,Number],json:{write:{isRequired:!0}}})],l.prototype,"code",void 0),l=i=(0,s._)([(0,a.$)("esri.layers.support.CodedValue")],l)},93103:(e,t,r)=>{r.d(t,{bv:()=>l,Fk:()=>u,yG:()=>p,$b:()=>c,Nd:()=>d,jm:()=>h,sK:()=>f});var i=r(99746),s=r(76931);function n(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}const o=n();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:function(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},create:n,createView:function(e,t){return new Float32Array(e,t,16)},fromValues:function(e,t,r,i,s,n,o,a,l,u,p,c,d,h,y,m){const f=new Float32Array(16);return f[0]=e,f[1]=t,f[2]=r,f[3]=i,f[4]=s,f[5]=n,f[6]=o,f[7]=a,f[8]=l,f[9]=u,f[10]=p,f[11]=c,f[12]=d,f[13]=h,f[14]=y,f[15]=m,f}},Symbol.toStringTag,{value:"Module"}));var a=r(34761);class l{constructor(e,t,r){this.strength=e,this.radius=t,this.threshold=r,this.type="bloom"}interpolate(e,t,r){this.strength=y(e.strength,t.strength,r),this.radius=y(e.radius,t.radius,r),this.threshold=y(e.threshold,t.threshold,r)}clone(){return new l(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:m(this.radius),strength:this.strength,threshold:this.threshold}}}class u{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,r){this.radius=Math.round(y(e.radius,t.radius,r))}clone(){return new u(this.radius)}toJSON(){return{type:"blur",radius:m(this.radius)}}}class p{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.amount=y(e.amount,t.amount,r),this._updateMatrix()}clone(){return new p(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||n();switch(this.type){case"brightness":this._colorMatrix=((e,t)=>{const r=(0,a.hZ)(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return(0,a.mg)(r,r)})(e,this.amount);break;case"contrast":this._colorMatrix=((e,t)=>{const r=(0,a.hZ)(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return(0,a.mg)(r,r)})(e,this.amount);break;case"grayscale":this._colorMatrix=((e,t)=>{const r=1-t,i=(0,a.hZ)(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount);break;case"invert":this._colorMatrix=((e,t)=>{const r=1-2*t,i=(0,a.hZ)(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount);break;case"saturate":this._colorMatrix=((e,t)=>{const r=(0,a.hZ)(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return(0,a.mg)(r,r)})(e,this.amount);break;case"sepia":this._colorMatrix=((e,t)=>{const r=1-t,i=(0,a.hZ)(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount)}}}class c{constructor(e,t,r,i){this.offsetX=e,this.offsetY=t,this.blurRadius=r,this.color=i,this.type="drop-shadow"}interpolate(e,t,r){this.offsetX=y(e.offsetX,t.offsetX,r),this.offsetY=y(e.offsetY,t.offsetY,r),this.blurRadius=y(e.blurRadius,t.blurRadius,r),this.color[0]=Math.round(y(e.color[0],t.color[0],r)),this.color[1]=Math.round(y(e.color[1],t.color[1],r)),this.color[2]=Math.round(y(e.color[2],t.color[2],r)),this.color[3]=y(e.color[3],t.color[3],r)}clone(){return new c(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:m(this.offsetX),yoffset:m(this.offsetY),blurRadius:m(this.blurRadius),color:e}}}class d{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.angle=y(e.angle,t.angle,r),this._updateMatrix()}clone(){return new d(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||n();this._colorMatrix=((e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),s=(0,a.hZ)(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return(0,a.mg)(s,s)})(e,this.angle)}}class h{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,r){this.amount=y(e.amount,t.amount,r)}clone(){return new h(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function y(e,t,r){return e+(t-e)*r}function m(e){return Math.round(1e3*(0,s.PN)(e))/1e3}function f(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new p(e.type,0);case"saturate":case"brightness":case"contrast":return new p(e.type,1);case"opacity":return new h(1);case"hue-rotate":return new d(0);case"blur":return new u(0);case"drop-shadow":return new c(0,0,0,[...(0,i.TS)("transparent")]);case"bloom":return new l(0,0,1)}}},97763:(e,t,r)=>{r.d(t,{$w:()=>g,Bu:()=>T,DW:()=>A,FH:()=>E,FM:()=>u,G9:()=>n,GV:()=>v,Go:()=>p,K3:()=>V,Kn:()=>C,MM:()=>h,MO:()=>U,Nl:()=>R,Ny:()=>b,O2:()=>k,UE:()=>L,YC:()=>j,YF:()=>Z,ZO:()=>D,_1:()=>I,_H:()=>_,_W:()=>M,_d:()=>F,bs:()=>B,dI:()=>G,e6:()=>c,gQ:()=>l,iA:()=>P,jn:()=>m,lW:()=>d,mA:()=>y,n5:()=>O,pM:()=>x,pV:()=>w,pk:()=>q,rB:()=>H,s4:()=>s,xo:()=>z,yH:()=>S,yX:()=>W,zb:()=>N,zr:()=>f});var i=r(13442);function s(e,t,r,i){return function(e){return"function"==typeof e}(e)?e(t,r,i):e}function n(e){return[e.r,e.g,e.b,e.a]}const o=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!o.includes(e.charAt(t)))return!1;return!0}function l(e,t){const r=[];let i=0,s=-1;do{if(s=e.indexOf("[",i),s>=i){if(s>i){const t=e.slice(i,s);r.push([t,null,a(t)])}if(i=s+1,s=e.indexOf("]",i),s>=i){if(s>i){const n=t[e.slice(i,s)];n&&r.push([null,n,!1])}i=s+1}}}while(-1!==s);if(i<e.length){const t=e.slice(i);r.push([t,null,a(t)])}return r}function u(e,t,r,i){let s="",n=null;for(const o of t){const[t,i,a]=o;if(t)a?n=t:(n&&(s+=n,n=null),s+=t);else{let t=i;null!=r&&(t=U(i,r));const o=e.attributes[t];o&&(n&&(s+=n,n=null),s+=o)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(s,i)}function p(e,t,r,i,s,n){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=t/s,l=r/n,u=Math.ceil(a/2),p=Math.ceil(l/2);for(let c=0;c<n;c++)for(let r=0;r<s;r++){const d=4*(r+(o?n-c-1:c)*s);let h=0,y=0,m=0,f=0,g=0,M=0,v=0;const b=(c+.5)*l;for(let i=Math.floor(c*l);i<(c+1)*l;i++){const s=Math.abs(b-(i+.5))/p,n=(r+.5)*a,o=s*s;for(let l=Math.floor(r*a);l<(r+1)*a;l++){let r=Math.abs(n-(l+.5))/u;const s=Math.sqrt(o+r*r);s>=-1&&s<=1&&(h=2*s*s*s-3*s*s+1,h>0&&(r=4*(l+i*t),v+=h*e[r+3],m+=h,e[r+3]<255&&(h=h*e[r+3]/250),f+=h*e[r],g+=h*e[r+1],M+=h*e[r+2],y+=h))}}i[d]=f/y,i[d+1]=g/y,i[d+2]=M/y,i[d+3]=v/m}}function c(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function d(e){return e.data?.symbol??null}function h(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function y(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function m(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function f(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e||isNaN(e)?t:e},M=(e,t)=>null!=e?e:t,v=(e,t)=>e??t,b=e=>e.tintColor?c(e.tintColor):[255,255,255,1],S=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function _(){return Promise.all([r.e(2612),r.e(7983)]).then(r.bind(r,1669))}function w(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function C(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function F(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function A(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function x(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=x(t);if(null!=e)return e}break;case"CIMTextSymbol":return x(e.symbol);case"CIMSolidFill":return e.color}return null}function I(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=I(e);if(null!=t)return t}break}case"CIMTextSymbol":return I(e.symbol);case"CIMSolidStroke":return e.color}}function z(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=z(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return z(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function T(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function R(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function k(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const L=e=>e.includes("data:image/svg+xml");function O(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Z(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function N(e,t,r,i,s,n){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const{infos:a}=n;let l=1,u=0,p=0,c=0,d=1;for(const{absoluteAnchorPoint:m,offsetX:f,offsetY:g,rotation:M,size:v,frameHeight:b,rotateClockWise:S,scaleSymbolsProportionally:_}of a)d=m?1:l,p=$(f,g,u,d,p),c=Q(f,g,u,d,c),b&&(_||o)&&(l*=v/b),u=J(M,S,u);const h=$(i,s,u,d,p),y=Q(i,s,u,d,c);return{size:e*l,rotation:J(t,r,u),offsetX:h,offsetY:y}}function D(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>D(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function P(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...i.K[t]];const r=i.D[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function V(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function E(e){return e?.dashTemplate&&(e.dashTemplate=V(e.dashTemplate)),e}function B(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return B(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return B(e.symbol)}}return"Normal"}function j(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=r.size??i.D.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=r.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&f(r.markerPlacement)){const e=r.size??i.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=r.height;null!=e&&e>t&&(t=e)}}return t}}}function U(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function q(e){return e.map((e=>({...e,propertyName:Z(e.propertyName)})))}function H(e){const t={};for(const r in e){const i=e[r];t[Z(r)]=i}return t}function Q(e,t,r,i,s){const n=r*Math.PI/180;if(n){const r=Math.cos(n);return(Math.sin(n)*e+r*t)*i+s}return t*i+s}function $(e,t,r,i,s){const n=r*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*i+s:e*i+s}function J(e,t,r){return t?r-e:r+e}function G(e,t,r){const i="Color"===r||"TintColor"===r||"ToColor"===r,s="Rotation"===r||"Angle"===r||"ToRotation"===r;let n=t[Z(r)];if(null!=n&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),null==n&&(n=P(t.type,r.toLowerCase()),null!=n&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),null!=t.primitiveName){const o=e[t.primitiveName];if(null!=o){const e=o[r];null==e||("string"==typeof e||"number"==typeof e||Array.isArray(e)?(n=e,null!=n&&(i?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:e,defaultValue:n},null!=n&&(i?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(null==n)throw new Error(`Failed to derive a value or an expression for "${r}".`);return n}function W(e,t){return Math.max(Math.min((e??t)/100,1),0)}}}]);
//# sourceMappingURL=5934.57f9fbab.chunk.js.map