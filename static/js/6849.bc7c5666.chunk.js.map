{"version":3,"file":"static/js/6849.bc7c5666.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/TitleCreator.js","../node_modules/@arcgis/core/webdoc/interfaces.js","../node_modules/@arcgis/core/geometry/HeightModelInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import{createTask as s}from\"../../core/asyncUtils.js\";import i from\"../../core/Collection.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{featureHasFields as o,extractSubstitutionTemplatesFromString as n}from\"./fieldUtils.js\";import{loadArcade as l}from\"../../support/arcadeOnDemand.js\";const p=\"relationships/\",c=\"expression/\";let d=class extends t{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){if(this.expressionsUsedInTitle.length>0){return this._get(\"_arcadeTask\")||s((()=>l()))}return null}get featureUtilsPromise(){return this._get(\"featureUtilsPromise\")??import(\"../../widgets/Feature/support/featureUtils.js\").then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new i;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const s=this._arcadeTask.value.arcade.parseScript(t.expression,[\"$layer\",\"$map\",\"$datastore\"]);if(s.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:s,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(s,{vars:{$feature:\"any\"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??\"\";return\"string\"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const s of this.calculatedExpressions?.toArray()??[])try{const t=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const s of t){const t=s.split(\".\"),i=this.fieldsIndex.get(t.at(-1)??\"\");i&&e.add(i.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const s of t){const t=this.fieldsIndex.get(s);t&&e.add(t.name)}return e}get titleFromDisplayField(){let e=\"\";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??\"\"),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??\"\"),e?`{${e}}`:\"\"}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:\"\";return\"\"===e||null==e||this.hasBadExpressions||\"string\"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,s){try{const{attributes:i}=t,r=s?.timeZone??\"system\",[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);if(s.fetchMissingFields&&(t=await this._checkAndReQueryGraphic(e,t)),this.workingTitle&&this.fieldInfoMap){const s=this._createFormattedAttributes(e,t,r).global;return a({attributes:i,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:s,layer:e,text:this.workingTitle})}return\"\"}catch{}return\"\"}async _checkAndReQueryGraphic(e,t){const s=t.getObjectId();if(null==s)return t;if(!o(this.requiredFields,t)){const t=e.createQuery();t.where=\"1=1\",t.outFields=[...this.requiredFields],t.objectIds=[s];const i=await e.queryFeatures(t);if(1===i?.features.length)return i.features[0]}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const s of e){if(!s.fieldName)continue;const e=this.fieldsIndex.get(s.fieldName),i=e?.name??s.fieldName;s.fieldName=i,t.set(i.toLowerCase(),s)}return t}_createFormattedAttributes(e,t,s=\"system\"){const i=this.effectivePopupTemplate?.fieldInfos??[],r={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const s=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{r[`expression/${e.name}`]=e.func({vars:{$feature:s}})}catch{}}const a={...t.attributes,...r};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:a,graphic:t,timeZone:s,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return n(e).filter((e=>!(0===e.indexOf(p)||0===e.indexOf(c))))}};e([r({readOnly:!0})],d.prototype,\"_arcadeTask\",null),e([r()],d.prototype,\"_featureUtils\",void 0),e([r({readOnly:!0})],d.prototype,\"featureUtilsPromise\",null),e([r({readOnly:!0})],d.prototype,\"calculatedExpressions\",null),e([r()],d.prototype,\"displayField\",void 0),e([r()],d.prototype,\"effectivePopupTemplate\",void 0),e([r()],d.prototype,\"expressionsUsedInTitle\",null),e([r()],d.prototype,\"fieldsIndex\",void 0),e([r()],d.prototype,\"fieldInfoMap\",null),e([r()],d.prototype,\"fields\",void 0),e([r()],d.prototype,\"objectIdField\",void 0),e([r()],d.prototype,\"requiredFields\",null),d=e([a(\"esri.layers.support.TitleCreator\")],d);const u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar A;!function(A){A[A.SAVE=0]=\"SAVE\",A[A.SAVE_AS=1]=\"SAVE_AS\"}(A||(A={}));export{A as SaveOperationType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{removeUnordered as t}from\"../core/arrayUtils.js\";import{strict as r}from\"../core/jsonMap.js\";import i from\"../core/JSONSupport.js\";import{unitFromRESTJSON as o,getVerticalUnitStringForSR as s}from\"../core/unitUtils.js\";import n from\"../core/Warning.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{reader as l}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as c}from\"../core/accessorSupport/decorators/writer.js\";var d;const p=r()({orthometric:\"gravity-related-height\",gravity_related_height:\"gravity-related-height\",ellipsoidal:\"ellipsoidal\"}),u=p.jsonValues.slice();t(u,\"orthometric\");const g=r()({meter:\"meters\",foot:\"feet\",\"us-foot\":\"us-feet\",\"clarke-foot\":\"clarke-feet\",\"clarke-yard\":\"clarke-yards\",\"clarke-link\":\"clarke-links\",\"sears-yard\":\"sears-yards\",\"sears-foot\":\"sears-feet\",\"sears-chain\":\"sears-chains\",\"benoit-1895-b-chain\":\"benoit-1895-b-chains\",\"indian-yard\":\"indian-yards\",\"indian-1937-yard\":\"indian-1937-yards\",\"gold-coast-foot\":\"gold-coast-feet\",\"sears-1922-truncated-chain\":\"sears-1922-truncated-chains\",\"50-kilometers\":\"50-kilometers\",\"150-kilometers\":\"150-kilometers\"});let m=d=class extends i{constructor(e){super(e),this.heightModel=\"gravity-related-height\",this.heightUnit=\"meters\",this.vertCRS=null}writeHeightModel(e,t,r){return p.write(e,t,r)}readHeightModel(e,t,r){const i=p.read(e);return i||(r?.messages&&r.messages.push(f(e,{context:r})),null)}readHeightUnit(e,t,r){const i=g.read(e);return i||(r?.messages&&r.messages.push(y(e,{context:r})),null)}readHeightUnitService(e,t,r){const i=o(e)||g.read(e);return i||(r?.messages&&r.messages.push(y(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new d({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=s(t);return new d({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:\"web-scene\",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new d;return t.read(e,{origin:\"web-scene\"}),t}};function y(e,t){return new n(\"height-unit:unsupported\",`Height unit of value '${e}' is not supported`,t)}function f(e,t){return new n(\"height-model:unsupported\",`Height model of value '${e}' is not supported`,t)}e([a({type:p.apiValues,constructOnly:!0,json:{origins:{\"web-scene\":{type:u,default:\"ellipsoidal\",write:{isRequired:!0}}}}})],m.prototype,\"heightModel\",void 0),e([c(\"web-scene\",\"heightModel\")],m.prototype,\"writeHeightModel\",null),e([l([\"web-scene\",\"service\"],\"heightModel\")],m.prototype,\"readHeightModel\",null),e([a({type:g.apiValues,constructOnly:!0,json:{origins:{\"web-scene\":{type:g.jsonValues,write:{writer:g.write,isRequired:!0}}}}})],m.prototype,\"heightUnit\",void 0),e([l(\"web-scene\",\"heightUnit\")],m.prototype,\"readHeightUnit\",null),e([l(\"service\",\"heightUnit\")],m.prototype,\"readHeightUnitService\",null),e([a({type:String,constructOnly:!0,json:{origins:{\"web-scene\":{write:!0}}}})],m.prototype,\"vertCRS\",void 0),e([l(\"service\",\"vertCRS\",[\"vertCRS\",\"ellipsoid\",\"geoid\"])],m.prototype,\"readVertCRS\",null),m=d=e([h(\"esri.geometry.HeightModelInfo\")],m);const v=m;export{v as default};\n"],"names":["d","t","constructor","e","super","this","_featureUtils","effectivePopupTemplate","_arcadeTask","expressionsUsedInTitle","length","_get","s","l","featureUtilsPromise","then","calculatedExpressions","i","value","push","name","invalid","arcade","parseScript","expression","isAsync","syntax","func","compileScript","vars","$feature","title","toLowerCase","expressionInfos","filter","includes","fieldInfoMap","_createFieldInfoMap","getAllFieldInfos","hasBadExpressions","some","requiredFields","Set","toArray","extractFieldLiterals","split","fieldsIndex","get","at","add","_extractFieldNames","workingTitle","titleFromDisplayField","displayField","objectIdField","getTitle","attributes","r","timeZone","substituteFieldsInLinksAndAttributes","a","Promise","all","promise","fetchMissingFields","_checkAndReQueryGraphic","_createFormattedAttributes","global","expressionAttributes","globalAttributes","layer","text","getObjectId","o","createQuery","where","outFields","objectIds","queryFeatures","features","Map","fieldName","set","arguments","undefined","fieldInfos","Feature","createFromGraphicLikeObject","geometry","formatAttributes","graphic","content","n","indexOf","readOnly","prototype","u","A","SAVE","SAVE_AS","p","orthometric","gravity_related_height","ellipsoidal","jsonValues","slice","g","meter","foot","m","heightModel","heightUnit","vertCRS","writeHeightModel","write","readHeightModel","read","messages","f","context","readHeightUnit","y","readHeightUnitService","readVertCRS","ellipsoid","geoid","clone","equals","deriveUnitFromSR","origin","fromJSON","type","apiValues","constructOnly","json","origins","default","isRequired","c","writer","String","h","v"],"sourceRoot":""}