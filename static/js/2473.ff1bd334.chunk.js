"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[839,2473,5603,6849],{6127:(e,t,r)=>{r.d(t,{m:()=>i});const i=new(r(45802).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},20665:(e,t,r)=>{r.d(t,{A:()=>y});var i=r(35143),n=r(91967),s=r(98773),o=r(94643),a=r(46053),l=(r(81806),r(76460),r(47249),r(85842)),u=r(53430),p=r(98976);let d=class extends n.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,s.UT)((()=>(0,p.lw)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??r.e(9912).then(r.bind(r,9912)).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new o.A;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const r of this.calculatedExpressions?.toArray()??[])try{const t=this._arcadeTask.value.arcade.extractFieldLiterals(r.syntax);for(const r of t){const t=r.split("."),i=this.fieldsIndex.get(t.at(-1)??"");i&&e.add(i.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const r of t){const t=this.fieldsIndex.get(r);t&&e.add(t.name)}return e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,r){try{const{attributes:i}=t,n=r?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:s}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);if(r.fetchMissingFields&&(t=await this._checkAndReQueryGraphic(e,t)),this.workingTitle&&this.fieldInfoMap){const r=this._createFormattedAttributes(e,t,n).global;return s({attributes:i,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:r,layer:e,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(e,t){const r=t.getObjectId();if(null==r)return t;if(!(0,u.Kl)(this.requiredFields,t)){const t=e.createQuery();t.where="1=1",t.outFields=[...this.requiredFields],t.objectIds=[r];const i=await e.queryFeatures(t);if(1===i?.features.length)return i.features[0]}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const r of e){if(!r.fieldName)continue;const e=this.fieldsIndex.get(r.fieldName),i=e?.name??r.fieldName;r.fieldName=i,t.set(i.toLowerCase(),r)}return t}_createFormattedAttributes(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"system";const i=this.effectivePopupTemplate?.fieldInfos??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const r=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{n[`expression/${e.name}`]=e.func({vars:{$feature:r}})}catch{}}const s={...t.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:s,graphic:t,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,u.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,i._)([(0,a.MZ)({readOnly:!0})],d.prototype,"_arcadeTask",null),(0,i._)([(0,a.MZ)()],d.prototype,"_featureUtils",void 0),(0,i._)([(0,a.MZ)({readOnly:!0})],d.prototype,"featureUtilsPromise",null),(0,i._)([(0,a.MZ)({readOnly:!0})],d.prototype,"calculatedExpressions",null),(0,i._)([(0,a.MZ)()],d.prototype,"displayField",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"effectivePopupTemplate",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"expressionsUsedInTitle",null),(0,i._)([(0,a.MZ)()],d.prototype,"fieldsIndex",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"fieldInfoMap",null),(0,i._)([(0,a.MZ)()],d.prototype,"fields",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"objectIdField",void 0),(0,i._)([(0,a.MZ)()],d.prototype,"requiredFields",null),d=(0,i._)([(0,l.$)("esri.layers.support.TitleCreator")],d);const y=d},25515:(e,t,r)=>{r.d(t,{A:()=>w});var i=r(35143),n=r(3825),s=r(50076),o=r(54099),a=r(5632),l=r(49304),u=r(76460),p=r(50346),d=r(90534),y=r(46053),c=(r(81806),r(47249),r(85842)),h=r(76797),f=r(13312),m=r(86560);var b=r(59187);let g=0,v=class extends(o.A.EventedMixin(a.A.IdentifiableMixin(l.A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new h.A(-180,-90,180,90,f.A.WGS84),this.id=Date.now().toString(16)+"-layer-"+g++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=f.A.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await r.e(2544).then(r.bind(r,62544))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await r.e(2487).then(r.bind(r,2487));try{return await i(t)}catch(n){const e=t?.portalItem,r=e?.id||"unset",i=e?.portal?.url||m.A.portalUrl;throw u.A.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+i+"', id: '"+r+"')",n),n}}(e)}initialize(){this.when().catch((e=>{(0,p.zf)(e)||u.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,d.An)(this.url)}createLayerView(e,t){return Promise.reject(new s.A("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,n.A)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.A("layer:no-attribution-data","Layer does not have attribution data")}};(0,i._)([(0,y.MZ)({type:String})],v.prototype,"attributionDataUrl",void 0),(0,i._)([(0,y.MZ)({readOnly:!0})],v.prototype,"effectiveVisible",null),(0,i._)([(0,y.MZ)({type:h.A})],v.prototype,"fullExtent",void 0),(0,i._)([(0,y.MZ)({readOnly:!0})],v.prototype,"hasAttributionData",null),(0,i._)([(0,y.MZ)({type:String,clonable:!1})],v.prototype,"id",void 0),(0,i._)([(0,y.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"legendEnabled",void 0),(0,i._)([(0,y.MZ)({type:["show","hide","hide-children"]})],v.prototype,"listMode",void 0),(0,i._)([(0,y.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0})],v.prototype,"opacity",void 0),(0,i._)([(0,y.MZ)({clonable:!1})],v.prototype,"parent",void 0),(0,i._)([(0,y.MZ)({readOnly:!0})],v.prototype,"parsedUrl",null),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],v.prototype,"persistenceEnabled",void 0),(0,i._)([(0,y.MZ)({type:Boolean})],v.prototype,"popupEnabled",void 0),(0,i._)([(0,y.MZ)({type:Boolean})],v.prototype,"attributionVisible",void 0),(0,i._)([(0,y.MZ)({type:f.A})],v.prototype,"spatialReference",void 0),(0,i._)([(0,y.MZ)({type:String})],v.prototype,"title",void 0),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],v.prototype,"type",void 0),(0,i._)([(0,y.MZ)()],v.prototype,"url",void 0),(0,i._)([(0,y.MZ)({type:b.A})],v.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,y.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"visible",void 0),v=(0,i._)([(0,c.$)("esri.layers.Layer")],v);const w=v},27741:(e,t,r)=>{r.d(t,{L:()=>a,g:()=>o});var i=r(98773),n=r(94643),s=r(49304);async function o(e,t){return await e.load(),a(e,t)}async function a(e,t){const r=[],o=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const a of t)null!=a&&(Array.isArray(a)?o(...a):n.A.isCollection(a)?a.forEach((e=>o(e))):s.A.isLoadable(a)&&r.push(a))};t(o);let a=null;if(await(0,i.Tj)(r,(async e=>{const t=await(0,i.Ke)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load());!1!==t.ok||a||(a=t)})),a)throw a.error;return e}},32173:(e,t,r)=>{r.d(t,{A:()=>u});var i,n=r(35143),s=(r(76460),r(81806),r(47249),r(50076),r(6409)),o=r(85842),a=r(44631);let l=i=class extends a.A{constructor(e){super(e),this.type="inherited"}clone(){return new i}};(0,n._)([(0,s.e)({inherited:"inherited"})],l.prototype,"type",void 0),l=i=(0,n._)([(0,o.$)("esri.layers.support.InheritedDomain")],l);const u=l},44135:(e,t,r)=>{r.d(t,{A:()=>m});var i,n=r(35143),s=r(45802),o=r(42553),a=r(46053),l=r(40565),u=(r(81806),r(47249),r(6409)),p=r(28379),d=r(85842),y=r(76866),c=r(6127);const h=new s.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let f=i=class extends o.A{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,t){let{description:r}=t,i=null;try{i=r?JSON.parse(r):null}catch(n){}return i?.value??null}readValueType(e,t){let{description:r}=t,i=null;try{i=r?JSON.parse(r):null}catch(n){}return i?h.fromJSON(i.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"alias",void 0),(0,n._)([(0,a.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],f.prototype,"defaultValue",void 0),(0,n._)([(0,a.MZ)()],f.prototype,"description",void 0),(0,n._)([(0,p.w)("description")],f.prototype,"readDescription",null),(0,n._)([(0,a.MZ)({types:y.gK,json:{read:{reader:y.rS},write:!0}})],f.prototype,"domain",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"editable",void 0),(0,n._)([(0,a.MZ)({type:l.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],f.prototype,"length",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"nullable",void 0),(0,n._)([(0,u.e)(c.m)],f.prototype,"type",void 0),(0,n._)([(0,a.MZ)()],f.prototype,"valueType",void 0),(0,n._)([(0,p.w)("valueType",["description"])],f.prototype,"readValueType",null),(0,n._)([(0,a.MZ)({type:Boolean,json:{read:!1}})],f.prototype,"visible",void 0),f=i=(0,n._)([(0,d.$)("esri.layers.support.Field")],f);const m=f},44631:(e,t,r)=>{r.d(t,{A:()=>d});var i=r(35143),n=r(45802),s=r(42553),o=r(46053),a=(r(81806),r(76460),r(47249),r(6409)),l=r(85842);const u=new n.J({inherited:"inherited",codedValue:"coded-value",range:"range"});let p=class extends s.A{constructor(e){super(e),this.name=null,this.type=null}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,i._)([(0,a.e)(u),(0,o.MZ)({json:{write:{isRequired:!0}}})],p.prototype,"type",void 0),p=(0,i._)([(0,l.$)("esri.layers.support.Domain")],p);const d=p},50654:(e,t,r)=>{r.d(t,{A:()=>p});var i,n=r(35143),s=r(46053),o=(r(81806),r(76460),r(47249),r(6409)),a=r(85842),l=r(44631);let u=i=class extends l.A{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,n._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],u.prototype,"maxValue",void 0),(0,n._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],u.prototype,"minValue",void 0),(0,n._)([(0,o.e)({range:"range"})],u.prototype,"type",void 0),u=i=(0,n._)([(0,a.$)("esri.layers.support.RangeDomain")],u);const p=u},61701:(e,t,r)=>{var i;r.d(t,{X:()=>i}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(i||(i={}))},65460:(e,t,r)=>{r.d(t,{BI:()=>m,D3:()=>h,XJ:()=>f,lc:()=>c,mX:()=>g,rU:()=>b,tH:()=>F});var i=r(88685);const n="__begin__",s="__end__",o=new RegExp(n,"ig"),a=new RegExp(s,"ig"),l=new RegExp("^"+n,"i"),u=new RegExp(s+"$","i"),p='"',d=p+" + ",y=" + "+p;function c(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function h(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function f(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=c(e.labelExpression),t.type="conventional"),t}function m(e){const t=f(e);switch(t.type){case"conventional":return g(t.expression);case"arcade":return t.expression}return null}function b(e){const t=f(e);switch(t.type){case"conventional":return function(e){const t=e?.match(v);return t?.[1].trim()||null}(t.expression);case"arcade":return F(t.expression)}return null}function g(e){let t;return e?(t=(0,i.HC)(e,(e=>n+'$feature["'+e+'"]'+s)),t=l.test(t)?t.replace(l,""):p+t,t=u.test(t)?t.replace(u,""):t+p,t=t.replaceAll(o,d).replaceAll(a,y)):t='""',t}const v=/^\s*\{([^}]+)\}\s*$/i;const w=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,_=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,M=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function F(e){if(!e)return null;let t=w.exec(e)||_.exec(e);return t?t[1]||t[3]:(t=M.exec(e),t?t[2]:null)}},72599:(e,t,r)=>{r.d(t,{A:()=>y});var i,n=r(35143),s=r(53084),o=r(46053),a=(r(81806),r(76460),r(6409)),l=r(85842),u=r(92115),p=r(44631);let d=i=class extends p.A{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new i({codedValues:(0,s.o8)(this.codedValues),name:this.name})}};(0,n._)([(0,o.MZ)({type:[u.H],json:{write:{isRequired:!0}}})],d.prototype,"codedValues",void 0),(0,n._)([(0,a.e)({codedValue:"coded-value"})],d.prototype,"type",void 0),d=i=(0,n._)([(0,l.$)("esri.layers.support.CodedValueDomain")],d);const y=d},76866:(e,t,r)=>{r.d(t,{gK:()=>a,rS:()=>l});r(81806);var i=r(72599),n=r(44631),s=r(32173),o=r(50654);const a={key:"type",base:n.A,typeMap:{range:o.A,"coded-value":i.A,inherited:s.A}};function l(e){if(!e?.type)return null;switch(e.type){case"range":return o.A.fromJSON(e);case"codedValue":return i.A.fromJSON(e);case"inherited":return s.A.fromJSON(e)}return null}},86061:(e,t,r)=>{r.r(t),r.d(t,{default:()=>je});var i=r(35143),n=r(69098),s=r(94643),o=r(50076),a=r(27741),l=r(77717),u=r(50346),p=r(68134),d=r(34154),y=r(90534),c=r(46053),h=(r(81806),r(76460)),f=(r(47249),r(28379)),m=r(85842),b=r(25515),g=r(12406),v=r(19502),w=r(65624),_=r(31362),M=r(30218),F=r(61979),A=r(67187),T=r(11270),S=r(94729),x=r(21617),I=r(5682),Z=r(78817),O=r(13096),j=r(95363),E=r(91447),C=r(76350),V=r(53430),R=r(59784),L=r(7982),q=r(63844),k=r(71832),P=r(5766),U=r(35039),$=r(29632),D=r(94439);const N={key:"type",base:k.A,errorContext:"renderer",typeMap:{simple:P.A,"unique-value":U.A,"class-breaks":q.A}},G=(0,L.C)({types:N});const z=["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"];var H=r(16868),B=r(5632),J=r(53084),Q=r(49304),K=r(30726),X=r(48611),W=r(17707),Y=r(80979),ee=r(75547),te=r(13312),re=r(15427),ie=r(95114),ne=r(27937),se=r(20665),oe=r(97015),ae=r(30973),le=r(84202),ue=r(77685);const pe=(0,C.p)();let de=0;function ye(e,t){let r=e.json.write;return"object"!=typeof r&&(r=e.json.write={}),r.ignoreOrigin=!0,t?.spatialOnly&&(r.layerContainerTypes=Y.K),e}function ce(e){const t={write:{ignoreOrigin:!0}};return e?.name&&(t.name=e.name),"object"==typeof t.write&&(e?.spatialOnly&&(t.write.layerContainerTypes=Y.K),e?.target&&(t.write.target=e.target)),t}function he(e){switch(e){case"point":case"multipoint":return le.UK.clone();case"polyline":return le.A7.clone();case"polygon":case"multipatch":return le.Cx.clone();default:return null}}function fe(e,t){return null==e?null:t.subtypes?.find((t=>t.code===e))}function me(e,t){let r=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":r="point";break;case"esriGeometryPolyline":r="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":r="polygon";break;default:t.type,r=null}const i={},n=fe(e,t);if(null!=n){const{defaultValues:e}=n;for(const t in e)i[t]=e[t]}return i[t.subtypeField]=e,new re.A({name:"New Feature",drawingTool:r,prototype:{attributes:i}})}let be=class extends((0,l.P)(n.A.ClonableMixin(B.A.IdentifiableMixin(Q.A)))){constructor(e){super(e),this.attributeTableTemplate=null,this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id=`${Date.now().toString(16)}-subtype-sublayer-${de++}`,this.type="subtype-sublayer",this.labelsVisible=!0,this.labelingInfo=null,this.layerType="ArcGISFeatureLayer",this.legendEnabled=!0,this.listMode="show",this.minScale=0,this.maxScale=0,this.opacity=1,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}load(e){return(0,V.yp)(this.renderer,this.fieldsIndex),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return(0,K.pR)(e),new se.A({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,displayField:this.parent?.displayField??"",fields:this.fields,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}get capabilities(){return this.parent?.capabilities}get effectiveCapabilities(){return this.parent?.effectiveCapabilities}get effectiveEditingEnabled(){const{parent:e}=this;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}get elevationInfo(){return this.parent?.elevationInfo}get featureTitleFields(){return[...this._titleCreator.requiredFields]}writeFieldOverrides(e,t,r){const{fields:i,parent:n}=this;let s;if(i){s=[];let e=0;i.forEach((t=>{let{name:r,alias:i,editable:o,visible:a}=t;if(!a)return;const l=n?.fields?.find((e=>e.name===r));if(!l)return;const u={name:r};let p=!1;i!==l.alias&&(u.alias=i,p=!0),o!==l.editable&&(u.editable=o,p=!0),s.push(u),p&&e++})),0===e&&s.length===i.length&&(s=null)}else s=(0,J.o8)(e);s?.length&&(0,X.sM)(r,s,t)}get fields(){const{parent:e,fieldOverrides:t,subtypeCode:r}=this,i=e?.fields;if(!e||!i?.length)return null;const{subtypes:n,subtypeField:s}=e,o=n?.find((e=>e.code===r)),a=o?.defaultValues,l=o?.domains,u=[];for(const p of i){const e=p.clone(),{name:i}=e,n=t?.find((e=>e.name===i));if(e.visible=!t?.length||!!n,n){const{alias:t,editable:r}=n;t&&(e.alias=t),!1===r&&(e.editable=!1)}const o=a?.[i]??null;e.defaultValue=i===s?r:o;const d=l?.[i]??null;e.domain=i===s?null:d?"inherited"===d.type?e.domain:d.clone():null,u.push(e)}return u}get floorInfo(){return this.parent?.floorInfo}get isTable(){return!!this.parent?.isTable}get geometryType(){return this.parent?.geometryType}get globalIdField(){return this.parent?this.parent.globalIdField:(h.A.getLogger(this).error(we("globalIdField")),null)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get objectIdField(){return this.parent||h.A.getLogger(this).error(we("objectIdField")),this.parent?.objectIdField}get defaultPopupTemplate(){return this.createPopupTemplate()}get relationships(){return this.parent?.relationships}set renderer(e){(0,V.yp)(e,this.fieldsIndex),this._override("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const{parent:e}=this;return e&&!e.isTable&&"mesh"!==e.geometryType?function(e){return new P.A({symbol:he(e)})}(e.geometryType):null}readRendererFromService(e,t,r){if("Table"===t.type)return null;const i=t.drawingInfo?.renderer,n=G(i,t,r);let s;const{subtypeCode:o}=this;if(null!=o&&function(e,t){return!!t&&"unique-value"===e?.type&&null!=e.field&&e.field.toLowerCase()===t.toLowerCase()&&!e.field2&&!e.field3&&!e.valueExpression}(n,t.subtypeField)){const e=n.uniqueValueInfos?.find((e=>{let{value:t}=e;return(t="number"==typeof t?String(t):t)===String(o)}));e&&(s=new P.A({symbol:e.symbol}))}else"simple"!==n?.type||n.visualVariables?.length||(s=n);return s}readRenderer(e,t,r){const i=t?.layerDefinition?.drawingInfo?.renderer;if(!i)return;const n=i.visualVariables?.some((e=>"rotationInfo"!==e.type));return n?void 0:G(i,t,r)||void 0}get spatialReference(){return this.parent?.spatialReference??te.A.WGS84}get subtypeField(){return this.parent?.subtypeField}readTemplatesFromService(e,t){return[me(this.subtypeCode,t)]}readTitleFromService(e,t){const r=fe(this.subtypeCode,t);return null!=r?r.name:null}get url(){return this.parent?.url}get userHasUpdateItemPrivileges(){return!!this.parent?.userHasUpdateItemPrivileges}async addAttachment(e,t){const{parent:r}=this;if(!r)throw we("addAttachment");if(e.getAttribute(r.subtypeField)!==this.subtypeCode)throw new o.A("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");return r.addAttachment(e,t)}async updateAttachment(e,t,r){const{parent:i}=this;if(!i)throw we("updateAttachment");if(e.getAttribute(i.subtypeField)!==this.subtypeCode)throw new o.A("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");return i.updateAttachment(e,t,r)}async deleteAttachments(e,t){const{parent:r}=this;if(!r)throw we("deleteAttachments");if(e.getAttribute(r.subtypeField)!==this.subtypeCode)throw new o.A("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");return r.deleteAttachments(e,t)}async applyEdits(e,t){if(!this.parent)throw we("applyEdits");return this.parent.applyEdits(e,t)}createPopupTemplate(e){let t=this;const{parent:r,fields:i,title:n}=this;if(r){const{displayField:e,editFieldsInfo:s,objectIdField:o}=r;t={displayField:e,editFieldsInfo:s,fields:i,objectIdField:o,title:n}}return(0,ae.tn)(t,e)}createQuery(){if(!this.parent)throw we("createQuery");const e=(0,E.VZ)(this.parent),t=`${this.parent.subtypeField}=${this.subtypeCode}`;return e.where=(0,d.mA)(t,this.parent.definitionExpression),e}getFeatureTitle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeZone:"system",fetchMissingFields:!1};return this._titleCreator.getTitle(this,e,t)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){if(!t?.excludeImpliedDomains&&this.parent){const t=(0,E.pc)(this.parent,e);if(t)return t}return this._getLayerDomain(e)}async queryAttachments(e,t){const r=await this.load();if(!r.parent)throw we("queryAttachments");const i=e.clone();return i.where=ve(i.where,r.parent.subtypeField,r.subtypeCode),r.parent.queryAttachments(e,t)}async queryFeatureCount(e,t){const r=await this.load();if(!r.parent)throw we("queryFeatureCount");return r.parent.queryFeatureCount(ge(r.parent,r,e),t)}async queryFeatures(e,t){const r=await this.load();if(!r.parent)throw we("queryFeatures");return r.parent.queryFeatures(ge(r.parent,r,e),t)}async queryObjectIds(e,t){const r=await this.load();if(!r.parent)throw we("queryObjectIds");return r.parent.queryObjectIds(ge(r.parent,r,e),t)}async queryRelatedFeatures(e,t){const r=await this.load();if(!r.parent)throw we("queryRelatedFeatures");return r.parent.queryRelatedFeatures(e,t)}async queryRelatedFeaturesCount(e,t){const r=await this.load();if(!r.parent)throw we("queryRelatedFeaturesCount");return r.parent.queryRelatedFeaturesCount(e,t)}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};(0,i._)([(0,c.MZ)({clonable:!1,readOnly:!0})],be.prototype,"_titleCreator",null),(0,i._)([(0,c.MZ)({type:ue.A,json:ce({name:"attributeTableInfo"})})],be.prototype,"attributeTableTemplate",void 0),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"capabilities",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"effectiveCapabilities",null),(0,i._)([(0,c.MZ)({json:ce()})],be.prototype,"charts",void 0),(0,i._)([(0,c.MZ)({type:Boolean,nonNullable:!0,json:ce({name:"enableEditing"})})],be.prototype,"editingEnabled",void 0),(0,i._)([(0,c.MZ)({type:Boolean,readOnly:!0})],be.prototype,"effectiveEditingEnabled",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"elevationInfo",null),(0,i._)([(0,c.MZ)({clonable:!1,readOnly:!0})],be.prototype,"featureTitleFields",null),(0,i._)([(0,c.MZ)({json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],be.prototype,"fieldOverrides",void 0),(0,i._)([(0,W.K)("fieldOverrides")],be.prototype,"writeFieldOverrides",null),(0,i._)([(0,c.MZ)({...pe.fields,readOnly:!0,json:{read:!1}})],be.prototype,"fields",null),(0,i._)([(0,c.MZ)(pe.fieldsIndex)],be.prototype,"fieldsIndex",void 0),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"floorInfo",null),(0,i._)([(0,c.MZ)({type:ee.A,json:ce({name:"formInfo"})})],be.prototype,"formTemplate",void 0),(0,i._)([(0,c.MZ)({type:String,clonable:!1,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],be.prototype,"id",void 0),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"isTable",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"geometryType",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"globalIdField",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"type",void 0),(0,i._)([(0,c.MZ)(ye((0,J.o8)(j.kF)))],be.prototype,"labelsVisible",void 0),(0,i._)([(0,c.MZ)({type:[ie.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:ne.w},write:{ignoreOrigin:!0,layerContainerTypes:Y.K}}})],be.prototype,"labelingInfo",void 0),(0,i._)([(0,c.MZ)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,layerContainerTypes:Y.K}}})],be.prototype,"layerType",void 0),(0,i._)([(0,c.MZ)(ye((0,J.o8)(j.fV)))],be.prototype,"legendEnabled",void 0),(0,i._)([(0,c.MZ)({type:["show","hide"]})],be.prototype,"listMode",void 0),(0,i._)([(0,c.MZ)((()=>{const e=(0,J.o8)(j.hn);return e.json.origins.service.read=!1,ye(e,{spatialOnly:!0})})())],be.prototype,"minScale",void 0),(0,i._)([(0,c.MZ)((()=>{const e=(0,J.o8)(j.hG);return e.json.origins.service.read=!1,ye(e,{spatialOnly:!0})})())],be.prototype,"maxScale",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],be.prototype,"effectiveScaleRange",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"objectIdField",null),(0,i._)([(0,c.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0,json:ce({spatialOnly:!0})})],be.prototype,"opacity",void 0),(0,i._)([(0,c.MZ)({clonable:!1})],be.prototype,"parent",void 0),(0,i._)([(0,c.MZ)(ye((0,J.o8)(j.M6)))],be.prototype,"popupEnabled",void 0),(0,i._)([(0,c.MZ)({type:H.A,json:ce({name:"popupInfo"})})],be.prototype,"popupTemplate",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],be.prototype,"defaultPopupTemplate",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"relationships",null),(0,i._)([(0,c.MZ)({types:N,json:ce({target:"layerDefinition.drawingInfo.renderer",spatialOnly:!0})})],be.prototype,"renderer",null),(0,i._)([(0,f.w)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],be.prototype,"readRendererFromService",null),(0,i._)([(0,f.w)("renderer",["layerDefinition.drawingInfo.renderer"])],be.prototype,"readRenderer",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"spatialReference",null),(0,i._)([(0,c.MZ)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],be.prototype,"subtypeCode",void 0),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"subtypeField",null),(0,i._)([(0,c.MZ)({type:[re.A],json:ce({name:"layerDefinition.templates"})})],be.prototype,"templates",void 0),(0,i._)([(0,f.w)("service","templates",["geometryType","subtypeField","subtypes","type"])],be.prototype,"readTemplatesFromService",null),(0,i._)([(0,c.MZ)({type:String,json:ce()})],be.prototype,"title",void 0),(0,i._)([(0,f.w)("service","title",["subtypes"])],be.prototype,"readTitleFromService",null),(0,i._)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"url",null),(0,i._)([(0,c.MZ)({readOnly:!0})],be.prototype,"userHasUpdateItemPrivileges",null),(0,i._)([(0,c.MZ)({type:Boolean,nonNullable:!0,json:ce({name:"visibility",spatialOnly:!0})})],be.prototype,"visible",void 0),be=(0,i._)([(0,m.$)("esri.layers.support.SubtypeSublayer")],be);const ge=(e,t,r)=>{if(!r)return t.createQuery();const i=oe.A.from(r);return i.where=ve(i.where,e.subtypeField,t.subtypeCode),i},ve=(e,t,r)=>{const i=new RegExp(`${t}\\s*=\\s*\\d+`),n=`${t}=${r}`,s=e??"";return i.test(s)?s.replace(i,n):(0,d.mA)(n,s)},we=e=>new o.A(`This sublayer must have a parent SubtypeGroupLayer in order to use ${e}`),_e=be;var Me=r(83982),Fe=r(38278),Ae=r(85632),Te=r(61701);const Se="SubtypeGroupLayer";function xe(e,t){return new o.A("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function Ie(e,t){const r=[];for(const i of e){const e=new _e;e.read(i,t),r.push(e)}return r}const Ze=(0,C.p)();let Oe=class extends((0,A.j)((0,M.FJ)((0,F.w6)((0,w.dM)((0,Z.e)((0,I.j)((0,x.J)((0,v.b)((0,T.q)((0,S.A)((0,l.P)((0,_.d)((0,g.p)(n.A.ClonableMixin(b.A))))))))))))))){constructor(){super(...arguments),this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.sublayers=new(s.A.ofType(_e)),this.useUniqueColorsForSublayers=!0,this.supportedSourceTypes=new Set(["Feature Layer","Table"]),this.timeInfo=null,this.title="Layer",this.type="subtype-group",this._debouncedSaveOperations=(0,u.sg)((async(e,t,i)=>{const{save:n,saveAs:s}=await r.e(3146).then(r.bind(r,10765));switch(e){case Te.X.SAVE:return n(this,t);case Te.X.SAVE_AS:return s(this,i,t)}})),this.addHandles((0,p.wB)((()=>this.sublayers),((e,t)=>this._handleSublayersChange(e,t)),p.OH))}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(u.QP).then((async()=>{if(!this.url)throw new o.A("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");if(null==this.layerId)throw new o.A("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");return this._initLayerProperties(await this.createGraphicsSource(t))})).then((()=>(0,E.VA)(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return(0,E.C$)(this)}get operationalLayerType(){return this.isTable?"SubtypeGroupTable":"SubtypeGroupLayer"}get parsedUrl(){const e=(0,y.An)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,y.fj)(e.path,this.layerId.toString())),e}set source(e){this._get("source")!==e&&this._set("source",e)}readTitleFromService(e,t){let{name:r}=t;return this.url?(0,O.yG)(this.url,r):r}async addAttachment(e,t){const r=await(0,E.Xl)(this,e,t,Se);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const i=await(0,E.bt)(this,e,t,r,Se);return this.lastEditsEventDate=new Date,i}async applyEdits(e,t){return(0,E.ct)(this,e,t)}on(e,t){return super.on(e,t)}async createGraphicsSource(e){const{default:t}=await(0,u.qr)(Promise.all([r.e(8618),r.e(9122),r.e(7872),r.e(4610),r.e(3819),r.e(6680)]).then(r.bind(r,89078)),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=(0,E.VZ)(this),t=this.sublayers.map((e=>e.subtypeCode));return e.where=(0,d.mA)(`${this.subtypeField} IN (${t.join(",")})`,this.definitionExpression),e}async deleteAttachments(e,t){const r=await(0,E.mm)(this,e,t,Se);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return(0,E.WP)(this,e,Se)}findSublayerForFeature(e){const t=this.fieldsIndex.get(this.subtypeField),r=e.attributes[t.name];return this.findSublayerForSubtypeCode(r)}findSublayerForSubtypeCode(e){return this._sublayerLookup.get(e)}getFieldDomain(e,t){if(!t?.excludeImpliedDomains){const t=(0,E.pc)(this,e);if(t)return t}const r=(0,E.Nv)(this,t?.feature);if(r){const t=r.domains?.[e];return"inherited"===t?.type?this._getLayerDomain(e):t}return this._getLayerDomain(e)}loadAll(){return(0,a.g)(this,(e=>{e(this.sublayers)}))}async queryAttachments(e,t){return(0,E.lV)(this,e,t,Se)}async queryFeatures(e,t){const r=await this.load(),i=oe.A.from(e)??r.createQuery(),n=i.outFields??[];n.includes(this.subtypeField)||(n.push(this.subtypeField),i.outFields=n);const s=await r.source.queryFeatures(i,t);if(s?.features)for(const o of s.features)o.layer=o.sourceLayer=this.findSublayerForFeature(o);return s}async queryObjectIds(e,t){return(await(0,E.sg)(this,e,t,Se)).filter(Ae.Et)}async queryFeatureCount(e,t){return(0,E.Ye)(this,e,t,Se)}async queryExtent(e,t){return(0,E.B5)(this,e,t,Se)}async queryRelatedFeatures(e,t){return(0,E.hM)(this,e,t,Se)}async queryRelatedFeaturesCount(e,t){return(0,E.S2)(this,e,t,Se)}async save(e){return this._debouncedSaveOperations(Te.X.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Te.X.SAVE_AS,t,e)}write(e,t){const{origin:r,layerContainerType:i,messages:n}=t;if(this.isTable){if("web-scene"===r||"web-map"===r&&"tables"!==i)return n?.push(xe(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===r&&"tables"===i)return n?.push(xe(this,"using a non-table source cannot be written to tables in web maps")),null;return this.sublayers?.length?super.write(e,t):(n?.push(new o.A("web-document-write:invalid-property",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&(0,Fe.D)(this,e)}async getFeatureTitle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeZone:"system",fetchMissingFields:!1};const r=this.findSublayerForFeature(e);return r?await r.getFeatureTitle(e,t):this.displayField&&this.fieldsIndex.has(this.displayField)?e.attributes[this.fieldsIndex.get(this.displayField).name]??"":this.objectIdField&&this.fieldsIndex.has(this.objectIdField)?e.attributes[this.fieldsIndex.get(this.objectIdField).name]??"":""}get featureTitleFields(){const e=new Set;for(const t of this.sublayers){const r=t.featureTitleFields;for(const t of r)e.add(t)}return[...e]}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}async _initLayerProperties(e){this._set("source",e);const{sourceJSON:t}=e;if(t&&(this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})),!this.subtypes?.length)throw new o.A("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");this._verifyFields(),(0,V.sv)(this.timeInfo,this.fieldsIndex)}async hasDataChanged(){return(0,E.jp)(this)}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||-1!==e.search(/\/FeatureServer\//i)||this.fields?.some((e=>"geometry"===e.type))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_handleSublayersChange(e,t){t&&(t.forEach((e=>{e.parent=null})),this.removeHandles("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach((e=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),this.addHandles([e.on("after-add",(e=>{let{item:t}=e;t.parent=this,this._sublayerLookup.set(t.subtypeCode,t)})),e.on("after-remove",(e=>{let{item:t}=e;t.parent=null,this._sublayerLookup.delete(t.subtypeCode)}))],"sublayers-owner"))}};(0,i._)([(0,c.MZ)({readOnly:!0})],Oe.prototype,"createQueryVersion",null),(0,i._)([(0,c.MZ)({readOnly:!0})],Oe.prototype,"editingEnabled",null),(0,i._)([(0,c.MZ)({readOnly:!0})],Oe.prototype,"effectiveEditingEnabled",null),(0,i._)([(0,c.MZ)({...Ze.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Oe.prototype,"fields",void 0),(0,i._)([(0,c.MZ)(Ze.fieldsIndex)],Oe.prototype,"fieldsIndex",void 0),(0,i._)([(0,c.MZ)(j.id)],Oe.prototype,"id",void 0),(0,i._)([(0,c.MZ)({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],Oe.prototype,"listMode",void 0),(0,i._)([(0,c.MZ)({type:["SubtypeGroupLayer","SubtypeGroupTable"],json:{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{"web-document":{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}},"portal-item":{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}}}}})],Oe.prototype,"operationalLayerType",null),(0,i._)([(0,c.MZ)(Ze.outFields)],Oe.prototype,"outFields",void 0),(0,i._)([(0,c.MZ)({readOnly:!0})],Oe.prototype,"parsedUrl",null),(0,i._)([(0,c.MZ)({clonable:!1})],Oe.prototype,"source",null),(0,i._)([(0,c.MZ)({type:s.A.ofType(_e),json:{origins:{service:{read:{source:"subtypes",reader(e,t,r){let i=null;if(this.useUniqueColorsForSublayers){const n=function(e,t){const r=e.drawingInfo?.renderer,i=r?G(r,e,t):null;if("simple"===i?.type)return(0,D.Sx)(i.symbol,null)?i.symbol.clone():null}(t,r);i=n?function(e,t){return(0,R.Iy)(z,e,{offset:!0,shuffle:!0}).reverse().map((e=>{const r=t.clone();return"cim"===r.type?(0,$.Fe)(r,e):(0,D.dt)(r,e),new P.A({symbol:r})}))}(e.length,n):null}const n=e.map(((e,n)=>{let{code:s}=e;const o=new _e({subtypeCode:s});o.read(t,r);const a=i?.[n];return a&&o.read({drawingInfo:{renderer:a.toJSON()}},r),o}));return new(s.A.ofType(_e))(n)}}}},read:{source:["layers","tables"],reader(e,t,r){let i;return"SubtypeGroupLayer"===t.layerType&&t.layers?.length?i=Ie(t.layers,r):"SubtypeGroupTable"===t.layerType&&t.tables?.length&&(i=Ie(t.tables,r)),new(s.A.ofType(_e))(i)}},write:{ignoreOrigin:!0,writer(e,t,r,i){const n=[];for(const s of e){const e=s.write({},i);n.push(e)}this.isTable?t.tables=n:t.layers=n}}}})],Oe.prototype,"sublayers",void 0),(0,i._)([(0,c.MZ)()],Oe.prototype,"useUniqueColorsForSublayers",void 0),(0,i._)([(0,c.MZ)({type:Me.A})],Oe.prototype,"timeInfo",void 0),(0,i._)([(0,c.MZ)({json:{origins:{"portal-item":{write:{enabled:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],Oe.prototype,"title",void 0),(0,i._)([(0,f.w)("service","title",["name"])],Oe.prototype,"readTitleFromService",null),(0,i._)([(0,c.MZ)({json:{read:!1}})],Oe.prototype,"type",void 0),(0,i._)([(0,c.MZ)({clonable:!1,readOnly:!0})],Oe.prototype,"featureTitleFields",null),Oe=(0,i._)([(0,m.$)("esri.layers.SubtypeGroupLayer")],Oe);const je=Oe},91524:(e,t,r)=>{r.d(t,{K:()=>y,Q:()=>u});var i=r(35143),n=r(45802),s=r(76460),o=r(46053),a=(r(81806),r(47249),r(6409)),l=r(85842);const u=(0,n.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),p="percent-of-total",d="field",y=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&d||r&&p||null,t&&r&&s.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==d&&e!==p||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,i._)([(0,o.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,i._)([(0,a.e)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,i._)([(0,l.$)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},91605:(e,t,r)=>{r.d(t,{A:()=>v});var i,n=r(35143),s=r(18690),o=r(45802),a=r(42553),l=r(31633),u=r(62754),p=r(46053),d=(r(81806),r(76460),r(28379)),y=r(85842),c=r(17707);const h=(0,o.O)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),f=h.jsonValues.slice();(0,s.Xy)(f,"orthometric");const m=(0,o.O)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let b=i=class extends a.A{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return h.write(e,t,r)}readHeightModel(e,t,r){return h.read(e)||(r?.messages&&r.messages.push(function(e,t){return new u.A("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return m.read(e)||(r?.messages&&r.messages.push(g(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,l.LA)(e)||m.read(e)||(r?.messages&&r.messages.push(g(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,l.k1)(t);return new i({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new i;return t.read(e,{origin:"web-scene"}),t}};function g(e,t){return new u.A("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,n._)([(0,p.MZ)({type:h.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:f,default:"ellipsoidal",write:{isRequired:!0}}}}})],b.prototype,"heightModel",void 0),(0,n._)([(0,c.K)("web-scene","heightModel")],b.prototype,"writeHeightModel",null),(0,n._)([(0,d.w)(["web-scene","service"],"heightModel")],b.prototype,"readHeightModel",null),(0,n._)([(0,p.MZ)({type:m.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m.jsonValues,write:{writer:m.write,isRequired:!0}}}}})],b.prototype,"heightUnit",void 0),(0,n._)([(0,d.w)("web-scene","heightUnit")],b.prototype,"readHeightUnit",null),(0,n._)([(0,d.w)("service","heightUnit")],b.prototype,"readHeightUnitService",null),(0,n._)([(0,p.MZ)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],b.prototype,"vertCRS",void 0),(0,n._)([(0,d.w)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],b.prototype,"readVertCRS",null),b=i=(0,n._)([(0,y.$)("esri.geometry.HeightModelInfo")],b);const v=b},92115:(e,t,r)=>{r.d(t,{H:()=>l});var i,n=r(35143),s=r(42553),o=r(46053),a=(r(81806),r(76460),r(47249),r(85842));let l=i=class extends s.A{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};(0,n._)([(0,o.MZ)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"name",void 0),(0,n._)([(0,o.MZ)({type:[String,Number],json:{write:{isRequired:!0}}})],l.prototype,"code",void 0),l=i=(0,n._)([(0,a.$)("esri.layers.support.CodedValue")],l)}}]);
//# sourceMappingURL=2473.ff1bd334.chunk.js.map