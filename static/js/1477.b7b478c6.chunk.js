"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[1477],{10286:(e,t,i)=>{i.d(t,{A:()=>a});var o=i(35143),n=i(91967),s=i(46053),l=(i(81806),i(76460),i(47249),i(85842));let r=class extends n.A{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"colorSelection",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"dynamicScaleToggle",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"gridEnabledToggle",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"numericInputs",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"gridSnapEnabledToggle",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"lineIntervalInput",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"outOfScaleWarning",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"placementButtons",void 0),(0,o._)([(0,s.MZ)({type:Boolean,nonNullable:!0})],r.prototype,"rotateWithMapToggle",void 0),r=(0,o._)([(0,l.$)("esri.widgets.support.GridControls.VisibleElements")],r);const a=r},12254:(e,t,i)=>{function o(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,o=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);i.push(...o)}}i.d(t,{U:()=>o})},19555:(e,t,i)=>{i.d(t,{$A:()=>M,Bw:()=>_,C:()=>n,Cc:()=>w,Io:()=>y,Ln:()=>u,Om:()=>f,Re:()=>r,S8:()=>b,T9:()=>p,Vj:()=>O,WQ:()=>l,ZF:()=>T,aI:()=>k,e$:()=>Z,g7:()=>S,hG:()=>g,hZ:()=>s,hs:()=>h,jb:()=>I,jk:()=>c,l0:()=>C,m3:()=>v,t2:()=>L,xg:()=>P,ze:()=>m});var o=i(53494);function n(e,t){return e[0]=t[0],e[1]=t[1],e}function s(e,t,i){return e[0]=t,e[1]=i,e}function l(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function r(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function a(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function d(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function c(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function p(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function h(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function u(e,t,i,o){return e[0]=t[0]+i[0]*o,e[1]=t[1]+i[1]*o,e}function y(e,t){const i=t[0]-e[0],o=t[1]-e[1];return Math.sqrt(i*i+o*o)}function g(e,t){const i=t[0]-e[0],o=t[1]-e[1];return i*i+o*o}function _(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function v(e){const t=e[0],i=e[1];return t*t+i*i}function m(e,t){return e[0]=-t[0],e[1]=-t[1],e}function b(e,t){const i=t[0],o=t[1];let n=i*i+o*o;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function f(e,t){return e[0]*t[0]+e[1]*t[1]}function M(e,t,i){const o=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=o,e}function w(e,t,i,o){const n=t[0],s=t[1];return e[0]=n+o*(i[0]-n),e[1]=s+o*(i[1]-s),e}function T(e,t,i){const o=t[0],n=t[1];return e[0]=i[0]*o+i[2]*n,e[1]=i[1]*o+i[3]*n,e}function C(e,t,i){const o=t[0],n=t[1];return e[0]=i[0]*o+i[2]*n+i[4],e[1]=i[1]*o+i[3]*n+i[5],e}function Z(e,t,i,o){const n=t[0]-i[0],s=t[1]-i[1],l=Math.sin(o),r=Math.cos(o);return e[0]=n*r-s*l+i[0],e[1]=n*l+s*r+i[1],e}function S(e,t){const i=e[0],o=e[1],n=t[0],s=t[1];let l=i*i+o*o;l>0&&(l=1/Math.sqrt(l));let r=n*n+s*s;r>0&&(r=1/Math.sqrt(r));const a=(i*n+o*s)*l*r;return a>1?0:a<-1?Math.PI:Math.acos(a)}function L(e,t){return e[0]===t[0]&&e[1]===t[1]}function k(e,t){const i=e[0],n=e[1],s=t[0],l=t[1],r=(0,o.FD)();return Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-l)<=r*Math.max(1,Math.abs(n),Math.abs(l))}function O(e,t,i,o,n){let s=t[0]-i[0],l=t[1]-i[1];const r=(o[0]*s+o[1]*l)*(n-1);return s=o[0]*r,l=o[1]*r,e[0]=t[0]+s,e[1]=t[1]+l,e}const E=_,I=r,A=a,x=d,P=y,B=g,V=v;Object.freeze(Object.defineProperty({__proto__:null,add:l,angle:S,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},copy:n,cross:M,dist:P,distance:y,div:x,divide:d,dot:f,equals:k,exactEquals:L,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},len:E,length:_,lerp:w,max:p,min:c,mul:A,multiply:a,negate:m,normalize:b,projectAndScale:O,random:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=2*(0,o.Ov)()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e},rotate:Z,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:h,scaleAndAdd:u,set:s,sqrDist:B,sqrLen:V,squaredDistance:g,squaredLength:v,str:function(e){return"vec2("+e[0]+", "+e[1]+")"},sub:I,subtract:r,transformMat2:T,transformMat2d:C,transformMat3:function(e,t,i){const o=t[0],n=t[1];return e[0]=i[0]*o+i[3]*n+i[6],e[1]=i[1]*o+i[4]*n+i[7],e},transformMat4:function(e,t,i){const o=t[0],n=t[1];return e[0]=i[0]*o+i[4]*n+i[12],e[1]=i[1]*o+i[5]*n+i[13],e}},Symbol.toStringTag,{value:"Module"}))},25515:(e,t,i)=>{i.d(t,{A:()=>f});var o=i(35143),n=i(3825),s=i(50076),l=i(54099),r=i(5632),a=i(49304),d=i(76460),c=i(50346),p=i(90534),h=i(46053),u=(i(81806),i(47249),i(85842)),y=i(76797),g=i(13312),_=i(86560);var v=i(59187);let m=0,b=class extends(l.A.EventedMixin(r.A.IdentifiableMixin(a.A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new y.A(-180,-90,180,90,g.A.WGS84),this.id=Date.now().toString(16)+"-layer-"+m++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=g.A.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([i.e(652),i.e(2544)]).then(i.bind(i,62544))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:o}=await Promise.all([i.e(9624),i.e(652),i.e(2487)]).then(i.bind(i,2487));try{return await o(t)}catch(n){const e=t?.portalItem,i=e?.id||"unset",o=e?.portal?.url||_.A.portalUrl;throw d.A.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+i+"')",n),n}}(e)}initialize(){this.when().catch((e=>{(0,c.zf)(e)||d.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,p.An)(this.url)}createLayerView(e,t){return Promise.reject(new s.A("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,n.A)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.A("layer:no-attribution-data","Layer does not have attribution data")}};(0,o._)([(0,h.MZ)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,o._)([(0,h.MZ)({readOnly:!0})],b.prototype,"effectiveVisible",null),(0,o._)([(0,h.MZ)({type:y.A})],b.prototype,"fullExtent",void 0),(0,o._)([(0,h.MZ)({readOnly:!0})],b.prototype,"hasAttributionData",null),(0,o._)([(0,h.MZ)({type:String,clonable:!1})],b.prototype,"id",void 0),(0,o._)([(0,h.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,o._)([(0,h.MZ)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,o._)([(0,h.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,o._)([(0,h.MZ)({clonable:!1})],b.prototype,"parent",void 0),(0,o._)([(0,h.MZ)({readOnly:!0})],b.prototype,"parsedUrl",null),(0,o._)([(0,h.MZ)({type:Boolean,readOnly:!0})],b.prototype,"persistenceEnabled",void 0),(0,o._)([(0,h.MZ)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,o._)([(0,h.MZ)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,o._)([(0,h.MZ)({type:g.A})],b.prototype,"spatialReference",void 0),(0,o._)([(0,h.MZ)({type:String})],b.prototype,"title",void 0),(0,o._)([(0,h.MZ)({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,o._)([(0,h.MZ)()],b.prototype,"url",void 0),(0,o._)([(0,h.MZ)({type:v.A})],b.prototype,"visibilityTimeExtent",void 0),(0,o._)([(0,h.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0),b=(0,o._)([(0,u.$)("esri.layers.Layer")],b);const f=b},42052:(e,t,i)=>{function o(e){return null!=e&&"object"==typeof e&&"declaredClass"in e&&"esri.WebMap"===e.declaredClass}i.d(t,{Y:()=>n,r:()=>o});const n=new(i(90761).R)(2,33)},44680:(e,t,i)=>{function o(){return[1,0,0,0,1,0,0,0,1]}function n(e,t,i,o,n,s,l,r,a){return[e,t,i,o,n,s,l,r,a]}i.d(t,{fA:()=>n,vt:()=>o,zK:()=>s});const s=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:o,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:n},Symbol.toStringTag,{value:"Module"}))},47818:(e,t,i)=>{function o(e){return null!=e&&"object"==typeof e&&"2d"===e.type&&"linkchart"===e.view2dType}i.d(t,{O:()=>o})},56807:(e,t,i)=>{i.r(t),i.d(t,{default:()=>qt});var o=i(35143),n=(i(11265),i(18690)),s=i(54901),l=i(76460),r=i(30726),a=i(50346),d=i(68134),c=i(46053),p=(i(81806),i(85842)),h=i(73265),u=i(25329),y=i(14240),g=i(91967),_=(i(47249),i(10286));let v=class extends g.A{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new _.A({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"enabledToggle",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"featureEnabledToggle",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"gridEnabledToggle",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"header",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"layerList",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"gridControls",void 0),(0,o._)([(0,c.MZ)({type:_.A,nonNullable:!0})],v.prototype,"gridControlsElements",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"layerListToggleLayersButton",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],v.prototype,"selfEnabledToggle",void 0),v=(0,o._)([(0,p.$)("esri.widgets.support.SnappingControls.VisibleElements")],v);const m=v;let b=class extends g.A{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"point",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"polyline",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"polygon",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"rectangle",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"circle",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"multipoint",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"mesh",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"freehandPolyline",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"freehandPolygon",void 0),b=(0,o._)([(0,p.$)("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],b);let f=class extends g.A{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};(0,o._)([(0,c.MZ)({nonNullable:!0})],f.prototype,"rectangle-selection",void 0),(0,o._)([(0,c.MZ)({nonNullable:!0})],f.prototype,"lasso-selection",void 0),(0,o._)([(0,c.MZ)({nonNullable:!0})],f.prototype,"custom-selection",void 0),f=(0,o._)([(0,p.$)("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],f);let M=class extends g.A{constructor(e){super(e),this.createTools=new b,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new f,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new m,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};(0,o._)([(0,c.MZ)({type:b,nonNullable:!0})],M.prototype,"createTools",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"directionModePicker",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"duplicateButton",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"deleteButton",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"selectionCountLabel",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"labelsToggle",void 0),(0,o._)([(0,c.MZ)({type:f,nonNullable:!0})],M.prototype,"selectionTools",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"settingsMenu",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"snappingControls",void 0),(0,o._)([(0,c.MZ)({type:m,nonNullable:!0})],M.prototype,"snappingControlsElements",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"tooltipsToggle",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],M.prototype,"undoRedoMenu",void 0),M=(0,o._)([(0,p.$)("esri.widgets.Sketch.VisibleElements")],M);var w=i(21270);const T=1,C={s:32,m:48,l:64},Z={horizontal:{s:16,m:16,l:24},vertical:{s:16,m:24,l:40}},S={splitButton:{horizontal:"chevron-down",vertical:"ellipsis"},overflow:"ellipsis"};function L(e,t){return e.vnodeSelector===t?[e]:e.children?.flatMap((e=>L(e,t)))??[]}const k=e=>{let t=class extends e{constructor(){super(...arguments),this.priority=0,this.scale="m",this.slot=void 0,this.lastActiveKey=null,this.layout="horizontal"}destroy(){this.measurementManager?.managedElements.remove(this),this.measurementManager=null}set measurementManager(e){const t=this._get("measurementManager");e!==t&&(t&&t.managedElements.remove(this),this._set("measurementManager",e),e?.managedElements.add(this))}set budgetedLength(e){this.budgetedLength!==e&&(this._set("budgetedLength",e),this.scheduleRender())}get actionChildren(){return this.children?.flatMap((e=>L(e,"calcite-action")))??[]}get activeChildElement(){const e=this.actionChildren.find((e=>!0===e.properties?.active));return e?(this._set("lastActiveKey",e.properties?.key),e):this.lastActiveKey?this.actionChildren.find((e=>e.properties?.key===this.lastActiveKey)):void 0}_handleClick(e){e?.dataset&&"dataset"in e&&e.dataset.actionKey&&(this.lastActiveKey=e.dataset.actionKey)}};return(0,o._)([(0,c.MZ)()],t.prototype,"priority",void 0),(0,o._)([(0,c.MZ)()],t.prototype,"measurementManager",null),(0,o._)([(0,c.MZ)()],t.prototype,"budgetedLength",null),(0,o._)([(0,c.MZ)()],t.prototype,"actionChildren",null),(0,o._)([(0,c.MZ)()],t.prototype,"activeChildElement",null),(0,o._)([(0,c.MZ)()],t.prototype,"scale",void 0),(0,o._)([(0,c.MZ)()],t.prototype,"slot",void 0),(0,o._)([(0,c.MZ)()],t.prototype,"lastActiveKey",void 0),(0,o._)([(0,c.MZ)()],t.prototype,"layout",void 0),t=(0,o._)([(0,p.$)("esri.widgets.Sketch.support.ResponsiveToolbar.ToolbarGroupBase")],t),t};var O=i(76099),E=i(54761);const I=Symbol("on-resize-handle-key");let A=class extends(k(u.A)){constructor(e){super(e),this._measuredWidth=0,this._measuredHeight=0,this._measuredElement=null}destroy(){this._measuredElement=null}get lengthOptions(){return["horizontal"===this.layout?this._measuredWidth:this._measuredHeight]}render(){return(0,E.K)("div",{afterCreate:e=>{this._measuredElement=e.firstElementChild,this.addHandles((0,O.EV)(this._measuredElement,(()=>{this._measuredWidth=this._measuredElement?.clientWidth??0,this._measuredHeight=this._measuredElement?.clientHeight??0})),I)},afterRemoved:()=>this.removeHandles(I)},this.children)}};(0,o._)([(0,c.MZ)()],A.prototype,"_measuredWidth",void 0),(0,o._)([(0,c.MZ)()],A.prototype,"_measuredHeight",void 0),(0,o._)([(0,c.MZ)()],A.prototype,"lengthOptions",null),(0,o._)([(0,c.MZ)()],A.prototype,"_measuredElement",void 0),A=(0,o._)([(0,p.$)("esri.widgets.Sketch.support.ResponsiveToolbar.MeasuredContentGroup")],A);const x=A;var P=i(94126),B=i(63582);let V=class extends(k(u.A)){constructor(e){super(e),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return(0,P.W)({action:()=>Promise.all([i.e(9408),i.e(5375),i.e(596)]).then(i.bind(i,85375)),"action-group":()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866),i.e(7577)]).then(i.bind(i,97577)),"action-menu":()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866),i.e(3671)]).then(i.bind(i,3671))})}get minimumLength(){const{actionChildren:e,scale:t}=this;return e.length?this.allowCollapse?T+C[t]*Math.min(e.length,2):T+C[t]*e.length:0}get lengthOptions(){const{actionChildren:e,scale:t,minimumLength:i,allowCollapse:o,priority:n}=this,s=[i];if(e.length<=2||!o||n<1)return s;for(let l=1;l<e.length-1;l++)s.push(i+C[t]*l);return s}render(){if(!this.actionChildren.length)return(0,E.K)(E.w,null,void 0);const{budgetedLength:e,actionChildren:t,activeChildElement:i,layout:o,slot:n,scale:s}=this,l=Math.floor(e/C[s]),r=[],a=[];if(l>=t.length)r.push(...t);else{const e=i??r.at(0);if(r.push(...t.slice(0,l-1)),a.push(...t.slice(l-1)),e&&a.includes(e)){const[t]=a.splice(a.indexOf(e),1),i=r.pop();r.push(t),i&&a.unshift(i)}}return(0,E.K)("calcite-action-group",{key:"overflow-button-group",layout:o,onclick:e=>this._handleClick(e.target),slot:n},r.map((e=>this._renderManagedAction(e))),a.length>0?(0,E.K)("calcite-action-menu",{key:"split-button-dropdown",label:this.messagesCommon.more,overlayPositioning:"fixed"},(0,E.K)("calcite-action",{icon:S.overflow,key:"split-button-dropdown-trigger",scale:s,slot:"trigger",text:this.messagesCommon.more}),a.map((e=>this._renderManagedAction(e)))):void 0)}_renderManagedAction(e){return(0,E.K)("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};V.vnodeSelector="calcite-action-group",(0,o._)([(0,c.MZ)()],V.prototype,"allowCollapse",void 0),(0,o._)([(0,c.MZ)()],V.prototype,"minimumLength",null),(0,o._)([(0,c.MZ)(),(0,B.G)("esri/t9n/common")],V.prototype,"messagesCommon",void 0),(0,o._)([(0,c.MZ)()],V.prototype,"lengthOptions",null),V=(0,o._)([(0,p.$)("esri.widgets.Sketch.support.ResponsiveToolbar.OverflowGroup")],V);const $=V;var K=i(94643);let R=class extends g.A{constructor(){super(...arguments),this.measuredElement=null,this.managedElements=new K.A,this.availableLength=0,this.layout="horizontal",this._resizeObserver=new ResizeObserver((()=>{this._measure()}))}get _sortedElements(){return[...this.managedElements].sort(((e,t)=>t.priority-e.priority))}connect(e){this._resizeObserver.disconnect(),this.measuredElement=e,this._resizeObserver.observe(e),this._measure()}allocate(){const e=new Map,{availableLength:t,_sortedElements:i}=this;let o=0;for(const n of i){const t=n.lengthOptions[0];e.set(n,t),o+=t}for(const n of i)for(;o<t;){const i=e.get(n);if(!i)break;const s=n.lengthOptions.find((e=>e>i));if(!s)break;const l=o-i+s;if(l>t)break;e.set(n,s),o=l}for(const[n,s]of e)n.budgetedLength=s}_measure(){const e=this.measuredElement;this.availableLength=e?"horizontal"===this.layout?e.clientWidth??0:e.clientHeight??0:0,this.allocate()}destroy(){this._resizeObserver.disconnect()}};(0,o._)([(0,c.MZ)()],R.prototype,"measuredElement",void 0),(0,o._)([(0,c.MZ)()],R.prototype,"managedElements",void 0),(0,o._)([(0,c.MZ)()],R.prototype,"_sortedElements",null),(0,o._)([(0,c.MZ)()],R.prototype,"availableLength",void 0),(0,o._)([(0,c.MZ)()],R.prototype,"layout",void 0),R=(0,o._)([(0,p.$)("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbarManager")],R);const D=R,N="esri-split-button--split-part";let z=class extends(k(u.A)){constructor(e){super(e),this.messagesCommon=null}loadDependencies(){return(0,P.W)({action:()=>Promise.all([i.e(9408),i.e(5375),i.e(596)]).then(i.bind(i,85375)),"action-group":()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866),i.e(7577)]).then(i.bind(i,97577)),"action-menu":()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866),i.e(3671)]).then(i.bind(i,3671))})}get minimumLength(){const e=this.actionChildren;return e.length?1===e.length?C[this.scale]+T:C[this.scale]+Z[this.layout][this.scale]+T:0}get lengthOptions(){const{actionChildren:e,minimumLength:t,layout:i,scale:o,priority:n}=this;if(e.length<2||n<0)return[t];const s=T+C[o]*e.length;return[T+C[o]+Z[i][o],s]}render(){if(!this.actionChildren.length)return(0,E.K)(E.w,null,void 0);const{actionChildren:e,minimumLength:t,budgetedLength:i,layout:o,slot:n}=this,s=e.length<2||i>t;return(0,E.K)("calcite-action-group",{key:"split-button-group",layout:o,onclick:e=>this._handleClick(e.target),slot:n},s?this._renderUnSplit():this._renderSplit())}_renderSplit(){const{activeChildElement:e,layout:t,actionChildren:i,scale:o,messagesCommon:n}=this,s=e??i.at(0);if(!s)return;const l=i.filter((e=>e!==s));return[this._renderManagedAction(s),(0,E.K)("calcite-action-menu",{key:"split-button-dropdown",label:n.more,overlayPositioning:"fixed",placement:"horizontal"===t?"bottom-end":"right-end"},(0,E.K)("calcite-action",{class:`${N}--${t}--${this.scale}`,compact:"horizontal"===t,icon:S.splitButton[t],key:"split-button-dropdown-trigger",scale:o,slot:"trigger",text:n.more}),l?.map((e=>this._renderManagedAction(e))))]}_renderUnSplit(){return this.actionChildren.map((e=>this._renderManagedAction(e)))}_renderManagedAction(e){return(0,E.K)("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};z.vnodeSelector="calcite-action-group",(0,o._)([(0,c.MZ)()],z.prototype,"minimumLength",null),(0,o._)([(0,c.MZ)()],z.prototype,"lengthOptions",null),(0,o._)([(0,c.MZ)(),(0,B.G)("esri/t9n/common")],z.prototype,"messagesCommon",void 0),z=(0,o._)([(0,p.$)("esri.widgets.Sketch.support.ResponsiveToolbar.SplitButton")],z);const F="esri-responsive-toolbar",H={rulerBase:`${F}__ruler`,rulerBarHorizontal:`${F}__ruler--bar`,rulerBarVertical:`${F}__ruler--bar--vertical`,rulerPadVertical:`${F}__ruler--pad--vertical`,rulerPadHorizontal:`${F}__ruler--pad--horizontal`,bar:`${F}__bar`,barHorizontal:`${F}__bar--horizontal`,barVertical:`${F}__bar--vertical`,pad:`${F}__pad`,padVertical:`${F}__pad--vertical`,padHorizontal:`${F}__pad--horizontal`};let G=class extends u.A{constructor(e){super(e),this.scale="m",this.barStyle="floating",this._measurementManager=new D,this._managedWidgets=new Map}loadDependencies(){return(0,P.W)({"action-bar":()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866),i.e(143)]).then(i.bind(i,143)),"action-pad":()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866),i.e(4535)]).then(i.bind(i,4535))})}destroy(){this._measurementManager=(0,r.pR)(this._measurementManager),this._managedWidgets.forEach((e=>e.destroy())),this._managedWidgets.clear()}set layout(e){const t=this._get("layout");this._set("layout",e),this._measurementManager&&(this._measurementManager.layout=e),t!==e&&this.scheduleRender()}render(){const{layout:e,scale:t,barStyle:i}=this,o={layout:e,scale:t,expandDisabled:!0,key:"measured-toolbar"},n="docked"===i?"vertical"===e?H.rulerBarVertical:H.rulerBarHorizontal:"horizontal"===e?H.rulerPadHorizontal:H.rulerPadVertical;return(0,E.K)("div",null,(0,E.K)("div",{afterCreate:e=>{this._measurementManager?.connect(e)},class:this.classes(H.rulerBase,n)}),"docked"===i?(0,E.K)("calcite-action-bar",{...o,classes:{[H.barHorizontal]:"horizontal"===this.layout,[H.barVertical]:"vertical"===this.layout,[H.bar]:!0},overflowActionsDisabled:!0},this._renderChildren()):(0,E.K)("calcite-action-pad",{...o,class:this.classes(H.pad,"horizontal"===e?H.padHorizontal:H.padVertical)},this._renderChildren()))}_renderChildren(){if(!this.children)return;const e=this.children.filter((e=>void 0!==e.properties?.key&&"group-kind"in e.properties)),t=new Set,i=e.map((e=>{const i=e.properties,o=i.key;t.add(o);const n="docked"===this.barStyle?i.slot??void 0:void 0,s=i.priority??0,l=i["group-kind"]??"overflow-group",r=i["allow-collapse"]??!0,a=this._managedWidgets.get(o);if(a)return a.children=e.children,a.priority=s,"allowCollapse"in a&&(a.allowCollapse=r),a.slot=n,a.layout=this.layout,a.scale=this.scale,a.measurementManager=this._measurementManager,a;const d={scale:this.scale,priority:s,measurementManager:this._measurementManager,children:e.children,slot:n,layout:this.layout};switch(l){case"split-button":{const e=new z({...d});return this._managedWidgets.set(o,e),e}case"overflow-group":{const e=new $({...d,allowCollapse:r});return this._managedWidgets.set(o,e),e}case"measured-content":{const e=new x({...d});return this._managedWidgets.set(o,e),e}}})).filter(n.Ru);return Array.from(this._managedWidgets.keys()).filter((e=>!t.has(e))).forEach((e=>{this._managedWidgets.get(e)?.destroy(),this._managedWidgets.delete(e)})),this._measurementManager?.allocate(),i.map((e=>e.render()))}};(0,o._)([(0,c.MZ)()],G.prototype,"scale",void 0),(0,o._)([(0,c.MZ)({value:"horizontal"})],G.prototype,"layout",null),(0,o._)([(0,c.MZ)()],G.prototype,"barStyle",void 0),(0,o._)([(0,c.MZ)()],G.prototype,"_measurementManager",void 0),(0,o._)([(0,c.MZ)()],G.prototype,"_managedWidgets",void 0),G=(0,o._)([(0,p.$)("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbar")],G);const W=G;var U=i(63241),q=i(21403),j=i(98108),J=i(54099),Q=i(31933),Y=i(69120),X=i(90992),ee=i(98773),te=i(76931),ie=i(19247),oe=i(65215),ne=i(5262),se=i(99809),le=i(87273),re=i(66812),ae=i(48384),de=i(42151),ce=i(46975),pe=i(2413);let he=class extends g.A{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:pe.qv};const t=(0,pe.eV)((0,pe.Jf)((0,pe.vt)(pe.qv),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(const i of this.coordinates)e.push([Math.floor(i[0]-t[0])+.5,Math.floor(i[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){const{coordinates:e,rect:t}=this._renderCoordinates,i=(0,pe.VL)(t),o=(0,pe.uJ)(t);return(0,E.K)("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:i+"px",height:o+"px",visibility:this.visible?"visible":"hidden"}},(0,E.K)("svg",{height:o,styles:{display:"block"},width:i},(0,E.K)("polygon",{fill:this._fillStyle,points:e.map((e=>{let[t,i]=e;return`${t},${i}`})).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),(0,E.K)("polygon",{fill:"transparent",points:e.map((e=>{let[t,i]=e;return`${t},${i}`})).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};(0,o._)([(0,c.MZ)()],he.prototype,"coordinates",void 0),(0,o._)([(0,c.MZ)()],he.prototype,"strokeDash",void 0),(0,o._)([(0,c.MZ)()],he.prototype,"strokeWidth",void 0),(0,o._)([(0,c.MZ)()],he.prototype,"strokeColor",void 0),(0,o._)([(0,c.MZ)()],he.prototype,"strokeDashColor",void 0),(0,o._)([(0,c.MZ)()],he.prototype,"fillColor",void 0),(0,o._)([(0,c.MZ)()],he.prototype,"visible",void 0),(0,o._)([(0,c.MZ)()],he.prototype,"isDecoration",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],he.prototype,"_strokeStyle",null),(0,o._)([(0,c.MZ)({readOnly:!0})],he.prototype,"_strokeBackgroundStyle",null),(0,o._)([(0,c.MZ)({readOnly:!0})],he.prototype,"_fillStyle",null),(0,o._)([(0,c.MZ)({readOnly:!0})],he.prototype,"_renderCoordinates",null),he=(0,o._)([(0,p.$)("esri.views.overlay.OutlineOverlayItem")],he);const ue=he;let ye=class extends(J.A.EventedMixin(ce.g)){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=e=>this.drawOperation.on(e,(t=>{this._updateVisuals(),this.emit(e,t)}));this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=(0,r.pR)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){return this.drawOperation?.updating??!1}get cursor(){return"point"===this.geometryType?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new le.O0({view:e,manipulators:this.manipulators,geometryType:ge(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new re.Sl,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(!e?.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:t}=e,i=e.committableVertex,o=e.committedVertices.slice();null!=i&&o.push(t.pointToArray(i));const n=o.length;switch(this.geometryType){case"circle":case"rectangle":{const t=new de.vz(se.zK,re.Sl.spatialReference),i="circle"===this.geometryType?ae.zV:ae.GF,s="circle"===this.geometryType?ae.zd:ae._T;if(1===n&&e.isCompleted){const e=o[0],n=t.makeMapPoint(e[0]+_e,e[1]);return i([e,n],t,!0)?.geometry.rings[0]??[]}if(2===n){const e="rectangle"!==this.geometryType,n=this.centeredToggled!==e,l="rectangle"!==this.geometryType;return(this.uniformSizeToggled!==l?i(o,t,n)?.geometry.rings[0]:s(o,t,n)?.geometry.rings[0])??[]}return[]}}return o}_updateVisuals(){if(!this._overlayItem){const e=new ue({strokeDash:[5],strokeDashColor:[255,255,255,255]});this.view.overlay?.addItem(e),this.addHandles((0,s.hA)((()=>{this.view.overlay?.removeItem(e),e?.destroy(),this._overlayItem=void 0}))),this._overlayItem=e}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function ge(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}(0,o._)([(0,c.MZ)({value:!1})],ye.prototype,"centeredToggled",null),(0,o._)([(0,c.MZ)()],ye.prototype,"drawOperation",void 0),(0,o._)([(0,c.MZ)({value:!0})],ye.prototype,"enabled",null),(0,o._)([(0,c.MZ)({value:!1})],ye.prototype,"uniformSizeToggled",null),(0,o._)([(0,c.MZ)({constructOnly:!0})],ye.prototype,"geometryType",void 0),(0,o._)([(0,c.MZ)({constructOnly:!0})],ye.prototype,"mode",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],ye.prototype,"type",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],ye.prototype,"updating",null),(0,o._)([(0,c.MZ)({constructOnly:!0,nonNullable:!0})],ye.prototype,"view",void 0),(0,o._)([(0,c.MZ)()],ye.prototype,"cursor",null),ye=(0,o._)([(0,p.$)("esri.views.draw.DrawScreenTool")],ye);const _e=48;var ve=i(82307),me=i(53430),be=i(4955),fe=i(55754);async function Me(){return async function(){return i.e(1669).then(i.bind(i,1669))}().then((e=>{let{contains:t,intersects:i,overlaps:o,simplify:n}=e;return{contains:t,intersects:i,overlaps:o,simplify:n}}))}async function we(e){const{currentSelection:t,selector:i,signal:o,sources:n,view:s}=e;if(!n?.length)return{added:[],removed:[]};const{layers:l,layerViews:r,graphicsLayers:d}=function(e){const t=[],i=[],o=[];return e.forEach((e=>{(0,Q.yZ)(e)?t.push(e):((0,Q.cM)(e)||(0,Q.Qz)(e))&&e.layers?.length?t.push(...e.layers.toArray()):(0,Q.Rv)(e)&&e.sublayers?.length?o.push(...e.sublayers.toArray()):(0,Q.V0)(e)?o.push(e):(0,X.lO)(e)&&i.push(e)})),{layers:t,layerViews:i,graphicsLayers:o}}(n),c=(await(0,a.qr)(Promise.all([Ce(i,l,s,o),Ze(i,r,s,o),Te(i,d,s)]),o)).flat();if(!t)return{added:c,removed:[]};const p=t.toArray(),h=c.filter((e=>!Le(p,e))),u=p.filter((e=>!Le(c,e)));return t.removeMany(u),t.addMany(h),{added:h,removed:u}}const Te=async(e,t,i)=>async function(e){const{selector:t,candidates:i,view:o}=e;if(!i?.length||!t)return[];const{spatialReference:n}=o,s=t,l=await Me();return i.filter((e=>e.geometry&&"mesh"!==e.geometry.type&&l.intersects(n,s,e.geometry)))}({candidates:t.flatMap((e=>e.graphics.toArray()))??[],selector:e,view:i}),Ce=async(e,t,i,o)=>{const n=await(0,a.QZ)(async function(e){const{layers:t,selector:i,signal:o,view:n}=e;return(0,a.qr)(Promise.allSettled(t.map((async e=>e.queryFeatures(function(e,t,i,o){const{outFields:n,geometry:s}=ke(t,i,o);return e.outFields=n,e.geometry=s,e.returnGeometry=!0,e.outSpatialReference=o.spatialReference,e}(e.createQuery(),i,e,n),{signal:o}).then((e=>{let{features:t}=e;return t}))))),o)}({selector:e,signal:o,layers:t,view:i}));return n?Se(n):[]},Ze=async(e,t,i,o)=>{const n=await(0,a.QZ)(async function(e){const{layerViews:t,selector:i,signal:o,view:n}=e;return(0,a.qr)(Promise.allSettled(t.map((async e=>{const t=e.createQuery(),{geometry:s}=ke(i,e.layer,n);return t.outFields=["*"],t.geometry=s,t.returnGeometry=!0,t.outSpatialReference=n.spatialReference,e.queryFeatures(t,{signal:o}).then((e=>{let{features:t}=e;return t}))}))),o)}({selector:e,signal:o,layerViews:t,view:i}));return n?Se(n):[]};function Se(e){const t=[];for(let i=0;i<e.length;i++){const o=e[i];"fulfilled"===o.status&&t.push(...o.value)}return t}function Le(e,t){if(e.includes(t))return!0;const i=t.getObjectId(),o=null!=i,{layer:n,uid:s}=t;return o?e.some((e=>{if(n===e.layer)return i===e.getObjectId()})):e.some((e=>{if(n===e.layer)return s===e.uid}))}function ke(e,t,i){const o="renderer"in t?(0,be.o)({renderer:t.renderer}):0,n="point"===e.type?(0,fe.V)(e,o,i):e,s="displayField"in t?t.displayField:null,l=(0,me.mB)({displayField:s,fields:t.fields}),r=[t.objectIdField];if(null!=l&&t.fieldsIndex.has(l)&&r.push(l),"globalIdField"in t&&null!=t.globalIdField&&t.fieldsIndex.has(t.globalIdField)&&r.push(t.fieldsIndex.get(t.globalIdField).name),(0,Q.F2)(t)&&null!=t.subtypeField&&t.fieldsIndex.has(t.subtypeField)&&r.push(t.fieldsIndex.get(t.subtypeField).name),"utilityNetworks"in i.map&&i.map.utilityNetworks?.length&&((0,Q.F2)(t)||"feature"===t.type)){const e=t.fieldsIndex.get("assetgroup"),i=t.fieldsIndex.get("assettype");e?.name&&r.push(e.name),i?.name&&r.push(i.name)}return{geometry:n,outFields:r}}let Oe=class extends J.A.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new K.A,this.sources=null,this._process=(0,a.sg)((async(e,t)=>{const{callback:i,selector:o,completed:n}=e,s=(0,ee.UT)((async e=>{const{options:t,sources:s,selection:l,view:r}=this;if((s?.length||r?.selectionManager.sources.length)&&r){if(o&&null!=s){const i=await we({currentSelection:l,selector:o,signal:e,sources:s,view:r});n&&!1!==t?.persistSelection&&r.selectionManager?.updateSelection({current:l.toArray(),...i})}i&&i()}else l.removeAll()}));return(0,a.u7)(t,(()=>s.abort())),this._processTask=s,s.promise}),100)}initialize(){this._setup()}cancel(){this.removeAllHandles(),this._processTask?.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const t=this.options,i=t?.createTool??"rectangle",o=t?.mode??("polygon"===i?"click":"hybrid"),n=Symbol();this._tool=new ye({view:e,mode:o,geometryType:i}),t?.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],(()=>(0,a.QZ)(this._process({selector:this._selectionArea})))),n),this.addHandles([e.on("key-down",(e=>{if(!e.repeat)switch(e.key){case ve.NE.constraint:this._tool.uniformSizeToggled=!0,e.stopPropagation();break;case ve.NE.center:this._tool.centeredToggled=!0,e.stopPropagation()}})),e.on("key-up",(e=>{switch(e.key){case ve.NE.constraint:this._tool.uniformSizeToggled=!1,e.stopPropagation();break;case ve.NE.center:this._tool.centeredToggled=!1,e.stopPropagation()}})),this._tool.on("complete",(async e=>{this.removeHandles(n);const t=()=>{this.removeAllHandles(),this.emit("complete",{aborted:e.aborted,selection:this.selection.toArray()})};e.aborted?(this.cancel(),this.selection.removeAll(),t()):await this._process({selector:this._selectionArea,callback:t,completed:!0})}))],n),this.addHandles((0,s.hA)((()=>e.tools.remove(this._tool)))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=(0,te.tc)(),t=this._tool.coordinates,i=this.view.spatialReference,o=t=>{e.x=t[0],e.y=t[1];const{x:i,y:o}=this.view.toMap(e);return[i,o]};if(0===t.length)return;if(1===t.length||t.every((e=>{let[i,o]=e;return i===t[0][0]&&o===t[0][1]}))){const[e,n]=o(t[0]);return new ie.A({x:e,y:n,spatialReference:i})}const n=t.map(o);return 0!==n.length?((0,ne.$3)(n)||n.reverse(),new oe.A({spatialReference:i,rings:[n]})):void 0}};(0,o._)([(0,c.MZ)()],Oe.prototype,"options",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],Oe.prototype,"selection",void 0),(0,o._)([(0,c.MZ)()],Oe.prototype,"sources",void 0),(0,o._)([(0,c.MZ)({constructOnly:!0})],Oe.prototype,"view",void 0),Oe=(0,o._)([(0,p.$)("esri.widgets.support.Selector2D.SelectionOperation")],Oe);const Ee=Oe;let Ie=class extends J.A.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.layerViewPreferenceEnabled=!0,this.sources=null}initialize(){this.addHandles([(0,d.wB)((()=>this._sources),(e=>{this.activeOperation&&(this.activeOperation.sources=e)}))])}destroy(){this._operationHandlesGroup=(0,r.xt)(this._operationHandlesGroup)}get _sources(){const{layerViewPreferenceEnabled:e,sources:t,view:i}=this;return i&&t?.length?t.flatMap((t=>{if((0,X.lO)(t))return t;if((0,Q.cM)(t)||(0,Q.Qz)(t)){const o=t.layers||[],n=o.map((t=>{const o=(0,Y.i)(i,t)||void 0;return e&&(0,X.lO)(o)?o:t}));return n.length?n.toArray():o.length?o.toArray():t}if(!e)return t;const o=(0,Y.i)(i,t)||void 0;return(0,X.lO)(o)?o:t})):[]}get layers(){return(0,U.Lx)(l.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){(0,U.Lx)(l.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:t}=this,i=!e?.length&&!t?.selectionManager.sources.length;return this.activeOperation?"active":t?.ready&&!i?"ready":"disabled"}cancel(){"active"===this.state&&(this.activeOperation?.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:t,state:i,view:o}=this,n=!t?.length&&!o?.selectionManager.sources.length;if("disabled"===i||n||!this.view)return;"active"===i&&this.cancel();const l=new Ee({view:this.view,sources:t,options:e});return this._operationHandlesGroup=(0,s.vE)([l.selection.on("change",(e=>this.emit("selection-change",e))),l.once("complete",(e=>this._onOperationComplete(e)))]),this._set("activeOperation",l),l}_onOperationComplete(e){this._operationHandlesGroup=(0,r.xt)(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};(0,o._)([(0,c.MZ)()],Ie.prototype,"_sources",null),(0,o._)([(0,c.MZ)({readOnly:!0})],Ie.prototype,"activeOperation",void 0),(0,o._)([(0,c.MZ)()],Ie.prototype,"layers",null),(0,o._)([(0,c.MZ)()],Ie.prototype,"layerViewPreferenceEnabled",void 0),(0,o._)([(0,c.MZ)()],Ie.prototype,"sources",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],Ie.prototype,"state",null),(0,o._)([(0,c.MZ)()],Ie.prototype,"view",void 0),Ie=(0,o._)([(0,p.$)("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],Ie);const Ae=Ie,xe={lassoTool:!0,rectangleTool:!0},Pe="esri-selection-toolbar",Be={base:Pe,container:`${Pe}__container`,toolButton:`${Pe}__tool-button`};let Ve=class extends u.A{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.defaultLassoToolOptions={createTool:"polygon",mode:"freehand"},this.defaultRectangleToolOptions={createTool:"rectangle"},this.messages=null,this.toolConfigs=[],this.viewModel=new Ae,this.visibleElements={...xe},this.scale="s",this.layout="horizontal",this._viewModelHandlesGroup=(0,s.vE)([this.viewModel.on("complete",(e=>{this._set("activeToolInfo",null),this.emit("complete",e)}))])}destroy(){this._viewModelHandlesGroup=(0,r.xt)(this._viewModelHandlesGroup)}loadDependencies(){return(0,P.W)({action:()=>Promise.all([i.e(9408),i.e(5375),i.e(596)]).then(i.bind(i,85375))})}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return(0,U.Lx)(l.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){(0,U.Lx)(l.A.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get layerViewPreferenceEnabled(){return this.viewModel.layerViewPreferenceEnabled}set layerViewPreferenceEnabled(e){this.viewModel.layerViewPreferenceEnabled=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...xe,...e}}get state(){return this.viewModel.state}get visibleToolCount(){const{view:e,toolConfigs:t,visibleElements:i}=this;return(t?.length??0)+("2d"===e?.type?(i.lassoTool?1:0)+(i.rectangleTool?1:0):0)}activate(e){if(this.cancel(),"disabled"!==this.state)switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return(0,E.K)("div",{"aria-label":this.label,class:this.classes(Be.base,j.D.widget)},(0,E.K)("div",{class:Be.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){if("2d"===this.view?.type)return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){if(this.toolConfigs?.length)return this.toolConfigs.map((e=>{let{toolName:t,icon:i,toolKey:o}=e;return this._renderToolWithTooltip(t,o,i)}))}_renderLassoTool(){const{messages:e,visibleElements:t}=this;if(!t.lassoTool)return;const i=e.selectByLasso;return this._renderToolWithTooltip("lasso","lasso","lasso-select",i)}_renderRectangleTool(){const{messages:e,visibleElements:t}=this;if(!t.rectangleTool)return;const i=e.selectByRectangle;return this._renderToolWithTooltip("rectangle","rectangle","cursor-marquee",i)}_renderToolWithTooltip(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;const n=`${this.id}-tool-${t}`;return(0,E.K)("calcite-action",{active:this.activeToolInfo?.toolName===e,bind:this,class:Be.toolButton,disabled:"disabled"===this.state,icon:i||"selection",id:n,key:n,onclick:()=>this._toggleTool(e),scale:this.scale,text:o,title:o})}_activateTool(e){const t=this._getToolOptions(e);if(!t)return;const i=this.viewModel.activate(t);i&&this._set("activeToolInfo",{toolName:e,operation:i})}_toggleTool(e){if(this.activeToolInfo){const t=this.activeToolInfo.toolName;if(this.cancel(),t===e)return}this._activateTool(e)}_getToolOptions(e){return"lasso"===e?this.defaultLassoToolOptions:"rectangle"===e?this.defaultRectangleToolOptions:this.toolConfigs.find((t=>t.toolName===e))}};(0,o._)([(0,c.MZ)({readOnly:!0})],Ve.prototype,"activeToolInfo",void 0),(0,o._)([(0,c.MZ)()],Ve.prototype,"defaultLassoToolOptions",void 0),(0,o._)([(0,c.MZ)()],Ve.prototype,"defaultRectangleToolOptions",void 0),(0,o._)([(0,c.MZ)()],Ve.prototype,"label",null),(0,o._)([(0,c.MZ)()],Ve.prototype,"layers",null),(0,o._)([(0,c.MZ)()],Ve.prototype,"layerViewPreferenceEnabled",null),(0,o._)([(0,c.MZ)(),(0,B.G)("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],Ve.prototype,"messages",void 0),(0,o._)([(0,c.MZ)()],Ve.prototype,"sources",null),(0,o._)([(0,c.MZ)()],Ve.prototype,"toolConfigs",void 0),(0,o._)([(0,c.MZ)()],Ve.prototype,"view",null),(0,o._)([(0,c.MZ)()],Ve.prototype,"viewModel",void 0),(0,o._)([(0,c.MZ)()],Ve.prototype,"visibleElements",void 0),(0,o._)([(0,q.w)("visibleElements")],Ve.prototype,"castVisibleElements",null),(0,o._)([(0,c.MZ)()],Ve.prototype,"scale",void 0),(0,o._)([(0,c.MZ)()],Ve.prototype,"state",null),(0,o._)([(0,c.MZ)()],Ve.prototype,"layout",void 0),(0,o._)([(0,c.MZ)()],Ve.prototype,"visibleToolCount",null),Ve=(0,o._)([(0,p.$)("esri.widgets.support.SelectionToolbar")],Ve);const $e=Ve;var Ke=i(97513),Re=i(45755),De=i(71981);let Ne=class extends g.A{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],Ne.prototype,"directionModePicker",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],Ne.prototype,"header",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],Ne.prototype,"labelsToggle",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],Ne.prototype,"tooltipsToggle",void 0),Ne=(0,o._)([(0,p.$)("esri.widgets.support.SketchTooltipControls.VisibleElements")],Ne);const ze=Ne,Fe="esri-sketch-tooltip-controls",He={base:Fe,block:`${Fe}__block`,blockContent:`${Fe}__block-content`,hintIcon:`${Fe}__hint-icon`,radioButtonLabelWrapper:`${Fe}__radio-button-label-wrapper`};let Ge=class extends u.A{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new ze,this.sketchOptions=new Ke.A,this.viewType=void 0,this._onTooltipsEnabledChange=e=>{this.sketchOptions.tooltips.enabled=e},this._onLabelsEnabledChange=e=>{this.sketchOptions.labels.enabled=e},this._onDirectionModeChange=e=>{this.sketchOptions.values.directionMode=e.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([(0,P.W)({block:()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866),i.e(586),i.e(5502)]).then(i.bind(i,75502)),label:()=>i.e(1839).then(i.bind(i,11839)),icon:()=>i.e(6702).then(i.bind(i,16702)),"radio-button":()=>i.e(2599).then(i.bind(i,2599)),"radio-button-group":()=>i.e(3953).then(i.bind(i,43953))}),(0,De.m)()])}render(){const{label:e,visibleElements:t}=this,i=this._renderContent();return(0,E.K)("div",{"aria-label":e,class:this.classes(He.base,j.D.widget)},i?(0,E.K)("calcite-block",{class:He.block,heading:t.header?this.label:"",key:"content-block",label:this.label,open:!0},(0,E.K)("div",{class:He.blockContent,key:"content"},i)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,i=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&"2d"!==t?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(n.Ru);return 0===i.length?null:i}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return(0,E.K)(De.o,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return(0,E.K)(De.o,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:i}=t.values;return(0,E.K)("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,(0,E.K)("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:i,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",i,e.directionModeRelative),this._renderDirectionModeOption("absolute",i,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,i){return(0,E.K)("calcite-label",{key:e,layout:"inline",scale:"s"},(0,E.K)("calcite-radio-button",{checked:e===t,scale:"s",value:e}),(0,E.K)("div",{class:He.radioButtonLabelWrapper,key:"label-wrapper"},(0,E.K)("calcite-icon",{icon:Re.N[e],scale:"s"}),i))}};(0,o._)([(0,c.MZ)()],Ge.prototype,"label",null),(0,o._)([(0,c.MZ)({type:ze,nonNullable:!0})],Ge.prototype,"visibleElements",void 0),(0,o._)([(0,c.MZ)(),(0,B.G)("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],Ge.prototype,"messages",void 0),(0,o._)([(0,c.MZ)({nonNullable:!0,type:Ke.A})],Ge.prototype,"sketchOptions",void 0),(0,o._)([(0,c.MZ)({type:String})],Ge.prototype,"viewType",void 0),Ge=(0,o._)([(0,p.$)("esri.widgets.support.SketchTooltipControls")],Ge);const We=Ge;var Ue=i(90632),qe=i(50076),je=i(3589),Je=i(83973);const Qe="hide";function Ye(e){return e?.listMode??void 0}function Xe(e){if(!e)return"inherited";const t=function(e){const t=nt(e);return null!=t&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}(ot(e)?e.layer:e);return null!=t?t?"independent":"inherited":"visibilityMode"in e&&null!=e.visibilityMode?e.visibilityMode:"independent"}function et(e){if(e&&(!("type"in e)||"wmts"!==e.type))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function tt(e){return Ye(e)!==Qe}function it(e){const t=e?.layer;return t&&"layers"in t?t.layers:null}function ot(e){return null!=e&&"layer"in e&&null!=e.layer}function nt(e){return e&&"capabilities"in e&&null!=e.capabilities&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}var st=i(47818),lt=i(5632),rt=i(17879),at=i(50037),dt=i(16700),ct=i(76192),pt=i(95752);let ht=class extends(lt.A.IdentifiableMixin(u.A)){constructor(e,t){super(e,t),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([(0,d.wB)((()=>this._canCreateLegend),(()=>this._createLegend()),d.Vh),(0,d.wB)((()=>[this._legend,this._legendOptions]),(()=>this._updateLegend()),d.Vh)])}destroy(){this._legend=(0,r.pR)(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const i="legend";return e===i||null!=e&&!!Array.isArray(e)&&e.includes(i)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,i=e?.view;return t&&i?{view:i,layerInfos:[t]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||"subtype-sublayer"===e.type)return null;const t=ot(e)?e:null,i=e?.parent,o=null!=i&&"type"in i&&"map-image"===i.type?t?.source:null;return o&&i?{layer:i,title:"",sublayerIds:[o.mapLayerId]}:{layer:e,title:""}}get disabled(){const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return(0,E.K)("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i,open:o}=this;return e&&!i&&o?"legend"===e&&t?(0,E.K)("div",{key:"legend-widget"},t.render()):"string"==typeof e?(0,E.K)("div",{innerHTML:e,key:e}):(0,pt.p4)(e)?(0,E.K)("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?(0,E.K)("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map((e=>this._renderContent(e))):this._renderContent(e):null}async _createLegend(){if((0,r.pR)(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await Promise.resolve().then(i.bind(i,6655)),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return"legend"===e?this._legend:(0,pt.p4)(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map((e=>this._getWidget(e))).find((e=>e)):this._getWidget(e)}};(0,o._)([(0,c.MZ)()],ht.prototype,"_legend",void 0),(0,o._)([(0,c.MZ)()],ht.prototype,"_canCreateLegend",null),(0,o._)([(0,c.MZ)()],ht.prototype,"_legendOptions",null),(0,o._)([(0,c.MZ)()],ht.prototype,"_legendLayerInfo",null),(0,o._)([(0,c.MZ)()],ht.prototype,"className",void 0),(0,o._)([(0,c.MZ)()],ht.prototype,"content",void 0),(0,o._)([(0,c.MZ)()],ht.prototype,"disabled",null),(0,o._)([(0,c.MZ)()],ht.prototype,"flowEnabled",void 0),(0,o._)([(0,c.MZ)()],ht.prototype,"icon",null),(0,o._)([(0,c.MZ)()],ht.prototype,"image",void 0),(0,o._)([(0,c.MZ)()],ht.prototype,"listItem",void 0),(0,o._)([(0,c.MZ)()],ht.prototype,"open",void 0),(0,o._)([(0,c.MZ)()],ht.prototype,"title",null),(0,o._)([(0,c.MZ)()],ht.prototype,"visible",void 0),ht=(0,o._)([(0,p.$)("esri.widgets.LayerList.ListItemPanel")],ht);const ut=ht;var yt;const gt=K.A.ofType({key:"type",defaultKeyValue:"button",base:at.A,typeMap:{button:dt.A,toggle:ct.A}}),_t=K.A.ofType(gt),vt="layer",mt="child-list-mode";let bt=yt=class extends(lt.A.IdentifiableMixin(g.A)){constructor(e){super(e),this.actionsSections=new _t,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(K.A.ofType(yt)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([(0,d.wB)((()=>[this.layer,this.layer?.listMode,this.listModeDisabled]),(()=>this._watchLayerProperties(this.layer)),d.Vh),(0,d.wB)((()=>this.checkPublishStatusEnabled),(e=>this._updateChildrenPublishing(e)),d.Vh),(0,d.wB)((()=>this.view),(e=>this._updateChildrenView(e)),d.Vh),(0,d.wB)((()=>this.panel),(e=>this._setListItemOnPanel(e)),d.Vh)]),"function"==typeof this.listItemCreatedFunction){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||"sublayer"===e.type)return null;const i="subtype-sublayer"===e.type?e.parent:e;return t.allLayerViews.find((e=>e.layer===i))??null}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new ut(e):null}get sortable(){return"knowledge-graph-sublayer"!==this.layer?.type&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=(0,rt.Jt)(this,"layer.layer");return(!e||e&&(0,rt.Jt)(this,"layer.layer.loaded"))&&(0,rt.Jt)(this,"layer.title")||(0,rt.Jt)(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&"publishing"===e.publishingInfo?.status)}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:o}=this;return!o&&!t&&(e?e.updating:"loading"===i?.loadStatus||!1)}get visible(){return!!this.layer?.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!function(e,t){if(!e||null==t||isNaN(t))return!1;const i=function(e){return null!=e&&"minScale"in e&&null!=e.minScale?e.minScale:void 0}(e),o=function(e){return null!=e&&"maxScale"in e&&null!=e.maxScale?e.maxScale:void 0}(e),n=null!=i&&!isNaN(i)&&i>0&&t>i,s=null!=o&&!isNaN(o)&&o>0&&t<o;return n||s}(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return Xe(this.layer)}clone(){return new yt({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){this.children?.forEach((t=>t.checkPublishStatusEnabled=e))}_updateChildrenView(e){const t=this.children;t&&t.forEach((t=>t.view=e))}_createChildren(e){const{listModeDisabled:t,children:i}=this,o=e.filter((e=>!i.some((t=>t.layer===e))));i.addMany(this._createChildItems(o,t))}_destroyChildren(e){const{children:t}=this,i=t.filter((t=>!!t.layer&&!e.includes(t.layer)));t.destroyMany(i)}_sortChildren(e){this.children.sort(((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer)))}_destroyAllChildren(){this.removeHandles(mt),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(mt),this.listModeDisabled||this.addHandles(e.toArray().map((t=>(0,d.wB)((()=>t.listMode),(()=>this._compileChildren(e))))),mt)}_compileChildren(e){const t=this.listModeDisabled?e:e?.filter((e=>"hide"!==Ye(e)));e?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",(()=>this._compileChildren(e))),vt)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map((e=>t||tt(e)?new yt({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null)).filter(n.Ru)}_watchLayerProperties(e){if(this.removeHandles(vt),this.removeHandles(mt),!e)return;if("hide-children"===(!this.listModeDisabled&&Ye(e)))return void this.children.destroyAll();const t=et(e);t&&this.addHandles((0,d.wB)((()=>e[t]),(i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)}),d.Vh),vt)}};(0,o._)([(0,c.MZ)({type:_t})],bt.prototype,"actionsSections",void 0),(0,o._)([(0,c.MZ)()],bt.prototype,"actionsOpen",void 0),(0,o._)([(0,c.MZ)()],bt.prototype,"checkPublishStatusEnabled",void 0),(0,o._)([(0,c.MZ)({type:K.A.ofType(bt)})],bt.prototype,"children",void 0),(0,o._)([(0,c.MZ)()],bt.prototype,"childrenSortable",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"connectionStatus",null),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"error",null),(0,o._)([(0,c.MZ)()],bt.prototype,"hidden",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"incompatible",null),(0,o._)([(0,c.MZ)()],bt.prototype,"layer",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"layerView",null),(0,o._)([(0,c.MZ)()],bt.prototype,"listItemCreatedFunction",void 0),(0,o._)([(0,c.MZ)({nonNullable:!0})],bt.prototype,"listModeDisabled",void 0),(0,o._)([(0,c.MZ)()],bt.prototype,"open",void 0),(0,o._)([(0,c.MZ)({type:ut})],bt.prototype,"panel",void 0),(0,o._)([(0,q.w)("panel")],bt.prototype,"castPanel",null),(0,o._)([(0,c.MZ)()],bt.prototype,"parent",void 0),(0,o._)([(0,c.MZ)({value:!0})],bt.prototype,"sortable",null),(0,o._)([(0,c.MZ)()],bt.prototype,"title",null),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"publishing",null),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"updating",null),(0,o._)([(0,c.MZ)()],bt.prototype,"view",void 0),(0,o._)([(0,c.MZ)()],bt.prototype,"visible",null),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"visibleAtCurrentScale",null),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"visibleAtCurrentTimeExtent",null),(0,o._)([(0,c.MZ)({readOnly:!0})],bt.prototype,"visibilityMode",null),bt=yt=(0,o._)([(0,p.$)("esri.widgets.LayerList.ListItem")],bt);const ft=bt,Mt="view",wt="view-layers",Tt="map-layers",Ct="layer-views",Zt="layer-list-mode",St=K.A.ofType(ft);let Lt=class extends J.A.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new St,this.view=null}initialize(){this.addHandles([(0,d.wB)((()=>!0===this.view?.ready),(()=>this._viewHandles()),d.Vh),(0,d.wB)((()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled]),(()=>this._recompileList())),(0,d.wB)((()=>(0,st.O)(this.view)?this.view.inGeographicLayout:null),(()=>this._compileList()))],Mt)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten((e=>e.children)).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,o){const n=e?.layer;if(!n||"subtype-sublayer"===n.type||"sublayer"===n.type)return;const s=this.view?.map?.layers,l=t?it(t):s,r=i?it(i):s;if(!l||!r)return;const{operationalItems:a}=this,d=t?.children||a,c=i?.children||a,p=r.length-o;e.parent=i||null,d.remove(e),l.remove(n),c.includes(e)||c.add(e,p),r.includes(n)||r.add(n,p),this._compileList()}_createLayerViewHandles(e){this.removeHandles(Ct),this._compileList(),e&&this.addHandles(e.on("change",(()=>this._compileList())),Ct)}_createMapLayerHandles(e){this.removeHandles(Tt),this._compileList(),e&&this.addHandles(e.on("change",(()=>this._compileList())),Tt)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:o,listModeDisabled:n}=this;return new ft({checkPublishStatusEnabled:o,listModeDisabled:n,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter((e=>"hide"!==Ye(e))):void 0}_watchLayersListMode(e){this.removeHandles(Zt),e&&!this.listModeDisabled&&this.addHandles((0,d.wB)((()=>e.filter((e=>"listMode"in e)).map((e=>e.listMode)).toArray()),(()=>this._compileList())),Zt)}_compileList(){const e=this.view?.map?.layers,t=(0,st.O)(this.view)&&!this.view.inGeographicLayout?e?.filter((e=>{let{type:t}=e;return"link-chart"===t})):e;this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach((e=>{t.some((t=>t.layer===e))||t.add(this._createListItem(e))}))}_removeItems(e){const{operationalItems:t}=this,i=[];t.forEach((t=>{t&&e&&e.includes(t.layer)||i.push(t)})),t.destroyMany(i)}_sortItems(e){const{operationalItems:t}=this;t.sort(((t,i)=>{const o=e.indexOf(t.layer),n=e.indexOf(i.layer);return o>n?-1:o<n?1:0}))}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Tt,Ct,wt]),e?.ready?this.addHandles([(0,d.wB)((()=>this.view?.map?.allLayers),(e=>this._createMapLayerHandles(e)),d.Vh),(0,d.wB)((()=>this.view?.allLayerViews),(e=>this._createLayerViewHandles(e)),d.Vh)],wt):this._removeAllItems()}};(0,o._)([(0,c.MZ)()],Lt.prototype,"checkPublishStatusEnabled",void 0),(0,o._)([(0,c.MZ)()],Lt.prototype,"listItemCreatedFunction",void 0),(0,o._)([(0,c.MZ)({nonNullable:!0})],Lt.prototype,"listModeDisabled",void 0),(0,o._)([(0,c.MZ)({type:St})],Lt.prototype,"operationalItems",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],Lt.prototype,"state",null),(0,o._)([(0,c.MZ)()],Lt.prototype,"totalItems",null),(0,o._)([(0,c.MZ)()],Lt.prototype,"view",void 0),Lt=(0,o._)([(0,p.$)("esri.widgets.LayerList.LayerListViewModel")],Lt);const kt=Lt,Ot=e=>Et(e)||It(e),Et=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},It=e=>{const t=et(e);if(null!=t&&e.hasOwnProperty(t)&&null!=e[t])for(const i of e[t])if(Ot(i))return!0;return!1},At=(e,t)=>null!=t&&null!=e&&(t.test(e.title)?"self":!!e.children.some((e=>!1!==At(e,t)))&&"children");var xt;let Pt=xt=class extends ft{constructor(e){super(e),this.children=new K.A,this.parent=null}get enabled(){const{children:e}=this;if(0===e.length)return null!=this.featureSource&&this.featureSource.enabled?"enabled":"disabled";let t=!1,i=!1;for(const o of e){if("indeterminate"===o.enabled)return o.enabled;if("enabled"===o.enabled?t=!0:"disabled"===o.enabled&&(i=!0),i&&t)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap((e=>[e.layer?.id,...e.childLayerIds]))}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find((t=>t.layer===e))}_initializeChildLayers(e){if(!e)return;const t=e.filter(Ot);super._initializeChildLayers(t)}_createChildItems(e){return e.map((e=>tt(e)?new xt({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null)).filter(n.Ru).reverse()}};(0,o._)([(0,c.MZ)()],Pt.prototype,"enabled",null),(0,o._)([(0,c.MZ)()],Pt.prototype,"children",void 0),(0,o._)([(0,c.MZ)()],Pt.prototype,"childLayerIds",null),(0,o._)([(0,c.MZ)()],Pt.prototype,"featureSource",null),(0,o._)([(0,c.MZ)({constructOnly:!0})],Pt.prototype,"getFeatureSnappingSources",void 0),(0,o._)([(0,c.MZ)()],Pt.prototype,"parent",void 0),Pt=xt=(0,o._)([(0,p.$)("esri.widgets.support.SnappingControls.SnappingListItem")],Pt);let Bt=class extends kt{constructor(){super(...arguments),this.featureSnappingSources=new K.A}get operationalItemsFlat(){return this.operationalItems.flatten((e=>e.children))}get selectableItems(){return this.operationalItemsFlat.filter((e=>!e.children?.length))}_compileList(){const e=this.view?.map?.layers;if(!e)return;const t=e.filter(Ot);this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(e){return new Pt({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};(0,o._)([(0,c.MZ)()],Bt.prototype,"featureSnappingSources",void 0),(0,o._)([(0,c.MZ)()],Bt.prototype,"operationalItems",void 0),(0,o._)([(0,c.MZ)()],Bt.prototype,"operationalItemsFlat",null),(0,o._)([(0,c.MZ)()],Bt.prototype,"selectableItems",null),Bt=(0,o._)([(0,p.$)("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Bt);let Vt=class extends g.A{constructor(e){super(e),this.layerListViewModel=new Bt,this.snappingOptions=new Je.A,this.view=null}initialize(){this.addHandles([(0,d.wB)((()=>({viewModel:this.layerListViewModel,view:this.view})),(e=>{let{viewModel:t,view:i}=e;t.view=i}),d.Vh),(0,d.wB)((()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources})),(e=>{let{viewModel:t,sources:i}=e;t.featureSnappingSources=i}),d.Vh)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every((e=>"enabled"===e.enabled))}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every((e=>!e.enabled))}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter((e=>"enabled"===e.enabled)).length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e?.forEach((e=>t?this.enableSnappingForLayer(e):this.disableSnappingForLayer(e)))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach((t=>{let{layer:i}=t;const o=i?.id;e?this.enableSnappingForLayer(o):this.disableSnappingForLayer(o)}))}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)tt(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find((t=>t.layer.id===e))}_makeSnappingSourceForLayer(e){const t=this.layerListViewModel.operationalItemsFlat.find((t=>t.layer?.id===e))?.layer;if(!t)throw new qe.A("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if("group"===t.type)return;const i=new je.A({layer:t});return this.snappingOptions.featureSources.add(i),i}};(0,o._)([(0,c.MZ)()],Vt.prototype,"allLayersEnabled",null),(0,o._)([(0,c.MZ)()],Vt.prototype,"allLayersDisabled",null),(0,o._)([(0,c.MZ)({constructOnly:!0})],Vt.prototype,"layerListViewModel",void 0),(0,o._)([(0,c.MZ)()],Vt.prototype,"layersEnabledCount",null),(0,o._)([(0,c.MZ)({type:Je.A,nonNullable:!0})],Vt.prototype,"snappingOptions",void 0),(0,o._)([(0,c.MZ)()],Vt.prototype,"state",null),(0,o._)([(0,c.MZ)()],Vt.prototype,"view",void 0),Vt=(0,o._)([(0,p.$)("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],Vt);const $t=Vt,Kt="esri-snapping-controls",Rt={base:Kt,container:`${Kt}__container`,item:`${Kt}__item`,toggleBlock:`${Kt}__toggle-block`,layerListBlock:`${Kt}__layer-list-block`,layerList:`${Kt}__layer-list`,layerListFilter:`${Kt}__layer-list__filter`,layerListButton:`${Kt}__layer-list__button`,layerListItem:`${Kt}__layer-list__item`,layerListGroup:`${Kt}__layer-list__group`,nestedContainer:`${Kt}__nested-container`};let Dt=class extends u.A{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new m,this._enableSnappingSwitchChange=e=>{this.snappingOptions.enabled=e},this._featureEnabledSwitchChange=e=>{this.snappingOptions.featureEnabled=e},this._gridEnabledSwitchChange=e=>{this.snappingOptions.gridEnabled=e,e&&this._startLoadGrid()},this._selfEnabledSwitchChange=e=>{this.snappingOptions.selfEnabled=e},this._onToggleLayersButtonClick=e=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),(0,O.Z6)(e.target)};const{snappingOptions:i,view:o,viewModel:n}=e;this.viewModel=n??(this._defaultViewModel=new $t({snappingOptions:i,view:o}))}normalizeCtorArgs(e){const{snappingOptions:t,view:i,viewModel:o,...n}=e;return n}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=(0,r.pR)(this._defaultViewModel))}loadDependencies(){return Promise.all([(0,P.W)({block:()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866),i.e(586),i.e(5502)]).then(i.bind(i,75502)),button:()=>Promise.all([i.e(9408),i.e(3285),i.e(1823)]).then(i.bind(i,43285)),input:()=>Promise.all([i.e(9408),i.e(169),i.e(8841)]).then(i.bind(i,38841)),list:()=>Promise.all([i.e(9408),i.e(169),i.e(8841),i.e(1349)]).then(i.bind(i,81349)),"list-item":()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(586),i.e(5412)]).then(i.bind(i,70205)),checkbox:()=>i.e(4990).then(i.bind(i,64990)),loader:()=>i.e(5688).then(i.bind(i,35688))}),(0,De.m)()])}initialize(){this.addHandles((0,d.wB)((()=>"2d"===this.view?.type&&!!this.view.grid),(e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)})))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(null!=this._defaultViewModel&&this._defaultViewModel===e||(this._defaultViewModel=(0,r.pR)(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return(0,E.K)("div",{"aria-label":e,class:this.classes(Rt.base,j.D.widget)},(0,E.K)("div",{class:Rt.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList(),"2d"===this.view?.type&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,i=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&"2d"===t?.type?this._renderGridEnabledToggle():null].filter(n.Ru),o=[e.enabledToggle?this._renderEnabledToggle():null,i.length>0?(0,E.K)("div",{class:Rt.nestedContainer},i):null].filter(n.Ru);return 0===o.length?null:(0,E.K)("calcite-block",{class:Rt.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",label:this.label,open:!0},o)}_renderEnabledToggle(){return(0,E.K)(De.o,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return(0,E.K)(De.o,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return(0,E.K)(De.o,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return(0,E.K)(De.o,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,i=t.layerListViewModel.operationalItems.length>9?(0,E.K)("calcite-input",{class:Rt.layerListFilter,clearable:!0,placeholder:e?.searchLayers,onCalciteInputInput:e=>{let{currentTarget:{value:t}}=e;this._layerListFilter=""===t?null:new RegExp(t,"i")}}):null,o=this._secondaryElementsDisabled,n=this.layerListOpen&&!o,s=t.layerListViewModel.operationalItems?.find((e=>!!e.children.length));return(0,E.K)("calcite-block",{class:Rt.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:n,onCalciteBlockToggle:e=>this.layerListOpen=e.currentTarget.open},i,this._renderToggleLayersButton(),(0,E.K)("calcite-list",{class:Rt.layerList,displayMode:s?"nested":"flat",label:e?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){const{view:e,visibleElements:t,snappingManager:i,snappingOptions:o,_openAndReady:n}=this,{gridEnabled:s,enabled:l}=o;(n||"2d"===e?.type&&e.grid)&&this._startLoadGrid();const r=this._gridLoadTask?.value,a=r&&"2d"===e?.type&&(0,E.K)(r,{snappingManager:i,snappingOptions:o,view:e,visibleElements:t.gridControlsElements});return(0,E.K)("calcite-block",{class:Rt.layerListBlock,collapsible:!0,disabled:!s||!l,heading:this.messages.gridOptionsHeading,key:"grid-block",open:n,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},a??(0,E.K)("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){!this._gridLoadTask&&this.visibleElements.gridControls&&"2d"===this.view?.type&&(this._gridLoadTask=(0,ee.UT)((async()=>(await Promise.all([i.e(9150),i.e(1376),i.e(7668),i.e(7853),i.e(8579)]).then(i.bind(i,29083))).default)))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map((e=>{switch(t?At(e,t):null){case"children":{const i=e.children.filter((e=>!1!==At(e,t)));return this._renderLayerListItemGroup(e,i)}case"self":case null:return this._renderLayerListItemOrGroup(e);case!1:return"self"===At(e.parent,t)?this._renderLayerListItemOrGroup(e):null}})).toArray().filter(n.Ru)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,i=e?t.disableAllLayers:t.enableAllLayers;return(0,E.K)("calcite-button",{appearance:"transparent",class:Rt.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},i)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,i=e.title||t,o=()=>{this.viewModel.toggleSnappingForLayers([e.layer?.id],"enabled"!==e.enabled)};return(0,E.K)("calcite-list-item",{class:Rt.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:i,onCalciteListItemSelect:e=>{e.stopPropagation(),o()}},(0,E.K)("calcite-checkbox",{checked:"enabled"===e.enabled,slot:"actions-start",onCalciteCheckboxChange:o}))}_renderLayerListItemGroup(e,t){const{messages:i}=this,{children:o,title:n}=e,s=n||i.untitledLayer,l=n&&""!==n?n:(0,Ue.c)(),r=!!t?.length,a=t??o,d=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,"enabled"!==e.enabled)},c=a?.find((e=>!!e.children.length));return(0,E.K)("calcite-list-item",{class:Rt.layerListGroup,key:l,label:s,open:r,onCalciteListItemSelect:e=>{e.stopPropagation(),d()}},(0,E.K)("calcite-checkbox",{checked:"enabled"===e.enabled,indeterminate:"indeterminate"===e.enabled,slot:"actions-start",onCalciteCheckboxChange:d}),(0,E.K)("calcite-list",{displayMode:c?"nested":"flat",label:i?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(a)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};(0,o._)([(0,c.MZ)()],Dt.prototype,"_defaultViewModel",void 0),(0,o._)([(0,c.MZ)()],Dt.prototype,"_layerListFilter",void 0),(0,o._)([(0,c.MZ)()],Dt.prototype,"_gridLoadTask",void 0),(0,o._)([(0,c.MZ)()],Dt.prototype,"_openAndReady",null),(0,o._)([(0,c.MZ)()],Dt.prototype,"label",null),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],Dt.prototype,"layerListOpen",void 0),(0,o._)([(0,c.MZ)({type:Boolean,nonNullable:!0})],Dt.prototype,"gridOptionsOpen",void 0),(0,o._)([(0,c.MZ)(),(0,B.G)("esri/widgets/support/SnappingControls/t9n/SnappingControls")],Dt.prototype,"messages",void 0),(0,o._)([(0,c.MZ)(),(0,B.G)("esri/t9n/common")],Dt.prototype,"messagesCommon",void 0),(0,o._)([(0,c.MZ)()],Dt.prototype,"snappingOptions",null),(0,o._)([(0,c.MZ)()],Dt.prototype,"snappingManager",void 0),(0,o._)([(0,c.MZ)()],Dt.prototype,"view",null),(0,o._)([(0,c.MZ)()],Dt.prototype,"viewModel",null),(0,o._)([(0,c.MZ)({type:m,nonNullable:!0})],Dt.prototype,"visibleElements",void 0),(0,o._)([(0,c.MZ)()],Dt.prototype,"_enabledToggleDisabled",null),(0,o._)([(0,c.MZ)()],Dt.prototype,"_secondaryElementsDisabled",null),Dt=(0,o._)([(0,p.$)("esri.widgets.support.SnappingControls")],Dt);const Nt=Dt;var zt=i(12254),Ft=i(39348);const Ht="esri-sketch",Gt={base:Ht,vertical:`${Ht}--vertical`,docked:`${Ht}-bar`,floating:`${Ht}-pad`,chipHorizontal:`${Ht}__selection-count-chip--horizontal`,chipVertical:`${Ht}__selection-count-chip--vertical`,chipVerticalSmall:`${Ht}__selection-count-chip--vertical--s`,popoverWrapper:`${Ht}__popover-wrapper`},Wt={point:"pin",polyline:"line",polygon:"polygon",rectangle:"rectangle",circle:"circle",multipoint:"pins",mesh:"i3-d-building",freehandPolygon:"freehand-area",freehandPolyline:"freehand"};let Ut=class extends u.A{constructor(e,t){super(e,t),this._activeCustomToolOptions=null,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.customToolOptions=null,this.customActions=null,this.toolbarKind="floating",this.contextualToolLocation="separate",this.groupCollapsePriorities=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new M,this._defaultViewModel=null,this._calcitePopoverReferenceElement=null,this._relativeLocation="top",this._popoverOpen=!1,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=e?.viewModel||(this._defaultViewModel=new y.A({creationMode:e?.creationMode??"continuous"}))}initialize(){const{layer:e,view:t}=this,i=new $e({view:"2d"===t?.type?t:null,sources:e?[e]:null,scale:this.scale});this.addHandles([(0,d.wB)((()=>this.viewModel),(e=>{this._viewModelHandlesGroup=(0,r.xt)(this._viewModelHandlesGroup),e&&(this._viewModelHandlesGroup=(0,s.vE)([e.on("create",(()=>this.scheduleRender())),e.on("update",(()=>this.scheduleRender())),e.on("delete",(e=>this.emit("delete",e))),e.on("undo",(()=>this.scheduleRender())),e.on("redo",(()=>this.scheduleRender())),(0,d.wB)((()=>e.layer),(e=>{this._selectionToolbar&&(this._selectionToolbar.sources=e?[e]:null)})),(0,d.wB)((()=>e.view),(e=>{this._selectionToolbar&&(this._selectionToolbar.view="2d"===e?.type?e:null)})),(0,d.wB)((()=>e.state),(()=>this.notifyChange("state")))]))}),d.pc),(0,d.z7)((()=>i.activeToolInfo),(()=>this.viewModel.cancel())),i.on("complete",(e=>this._onSelectionOperationComplete(e))),(0,d.wB)((()=>{const{selectionTools:e}=this.visibleElements;return{lassoTool:!!e?.["lasso-selection"],rectangleTool:!!e?.["rectangle-selection"]}}),(e=>{Object.assign(i.visibleElements,e)}),d.pc)]),this._selectionToolbar=i}loadDependencies(){return(0,P.W)({action:()=>Promise.all([i.e(9408),i.e(5375),i.e(596)]).then(i.bind(i,85375)),chip:()=>Promise.all([i.e(9408),i.e(239)]).then(i.bind(i,10239)),popover:()=>Promise.all([i.e(9408),i.e(1654),i.e(5375),i.e(1866)]).then(i.bind(i,51866))})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=(0,r.xt)(this._viewModelHandlesGroup)}get activeTool(){const e=this._selectionToolbar?.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}const t=this._effectiveAvailableCreateTools,{activeTool:i,activeCreateToolDrawMode:o}=this.viewModel;return"polygon"===i&&"freehand"===o&&t?.includes("freehandPolygon")?"freehandPolygon":"polyline"===i&&"freehand"===o&&t?.includes("freehandPolyline")?"freehandPolyline":this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get creationMode(){return this.viewModel.creationMode}set creationMode(e){this.viewModel.creationMode=e}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}set layout(e){this._set("layout",e),this._selectionToolbar&&(this._selectionToolbar.layout=e)}set scale(e){this._set("scale",e),this._selectionToolbar&&(this._selectionToolbar.scale=e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){return this._selectionToolbar?.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const t=this._get("viewModel");e!==t&&(t&&t===this._defaultViewModel&&(0,r.pR)(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,view:t,visibleElements:i}=this,o=e?.filter((e=>!!i.createTools?.[e]));return"3d"===t?.type?o?.filter((e=>"multipoint"!==e)):o}create(e,t,i){const o=i?.createOptions??t;return this._activeCustomToolOptions=i,(0,a.QZ)(this.viewModel.create(e,o))}update(e,t){return(0,a.QZ)(this.viewModel.update(e,t))}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}dismissFloatingElements(){this._popoverOpen=!1}render(){const{toolbarKind:e,layout:t,scale:i}=this,o=this.customActions?.filter((e=>"selection-toolbar"===e.position));return(0,E.K)("div",null,(0,E.K)("div",{classes:{[Gt.base]:!0,[Gt.floating]:"floating"===e,[Gt.docked]:"docked"===e,[Gt.vertical]:"vertical"===t}},(0,E.K)(W,{barStyle:e,layout:t,scale:i},this._renderSelectionSetItemGroupInline(),(0,E.K)("div",{"group-kind":"split-button",key:"selection-split-button",priority:this.groupCollapsePriorities?.get("selectionTools")??w.Jl.Low},this._renderDefaultSelectionButton(),this._selectionToolbar?.render(),o?.map((e=>this._renderToolbarItem(e)))),this._renderCreateToolActionGroup(),this._renderUndoRedoMenuItemGroup(),this._renderSettingsMenuItemGroup()),this._renderSelectionSetToolbar(),this._renderSettingsMenuPopover()))}_renderSettingsMenuPopover(){const{messagesCommon:e,snappingOptions:t,view:i,viewModel:o,visibleElements:n}=this;if(!this._calcitePopoverReferenceElement)return;const s={directionModePicker:n.directionModePicker,labelsToggle:n.labelsToggle,tooltipsToggle:n.tooltipsToggle},l="horizontal"===this.layout?"top"===this._relativeLocation?"bottom-end":"top-end":"right-end";return(0,E.K)("calcite-popover",{closable:!0,focusTrapDisabled:!0,heading:e.settings,label:e.settings,open:this._popoverOpen,overlayPositioning:"fixed",placement:l,referenceElement:this._calcitePopoverReferenceElement,scale:this.scale,onCalcitePopoverBeforeClose:()=>this._popoverOpen=!1,onCalcitePopoverBeforeOpen:e=>this._remeasurePopoverSizes(e.currentTarget),onCalcitePopoverClose:()=>this._refocusOnView()},(0,E.K)("div",{class:Gt.popoverWrapper},Object.values(s).includes(!0)?(0,E.K)(We,{sketchOptions:o.sketchOptions,viewType:i?.type,visibleElements:new ze(s)}):void 0,n.snappingControls&&i&&t?(0,E.K)(Nt,{snappingManager:this.viewModel.snappingManager,snappingOptions:t,view:i,visibleElements:n.snappingControlsElements}):void 0))}_renderSelectionSetToolbar(){if("separate"!==this.contextualToolLocation)return;const e=this._renderSelectionSetItemGroup();return e?.length?(0,E.K)(W,{barStyle:this.toolbarKind,layout:this.layout,scale:this.scale},e):void 0}_renderSelectionSetItemGroupInline(){return"separate"===this.contextualToolLocation?[]:this._renderSelectionSetItemGroup()}_renderUndoRedoMenuItemGroup(){return(0,E.K)("div",{"group-kind":"split-button",key:"undo-redo-menu",priority:this.groupCollapsePriorities?.get("undoRedo")??w.Jl.Medium,slot:"actions-end"},this._renderUndoButton(),this._renderRedoButton())}_renderSettingsMenuItemGroup(){const e=[],t=[];this.customActions?.forEach((i=>{"settings-before"===i.position?t.push(i):"settings-after"===i.position&&e.push(i)}));const i=[...t.map((e=>this._renderToolbarItem(e))),this._renderSettingsMenuButton(),...e.map((e=>this._renderToolbarItem(e)))].filter(n.Ru);if(i.length)return(0,E.K)("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"settings-menu",priority:this.groupCollapsePriorities?.get("settings")??w.Jl.Max,slot:"actions-end"},i)}_renderSelectionSetItemGroup(){if(!this.updateGraphics.length)return[];const e="inline-end"===this.contextualToolLocation?"actions-end":void 0,t=this.customActions?.filter((e=>"before-selection-set"===e.position)),i=this.customActions?.filter((e=>"after-selection-set"===e.position)),o=this.groupCollapsePriorities?.get("selectionSet")??w.Jl.High;return[(0,E.K)("div",{"group-kind":"measured-content",key:"selection-count-chip-group",priority:o,slot:e},this._renderFeatureCountChip()),(0,E.K)("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"selection-set-tool-group",priority:o,slot:e},t?.map((e=>this._renderToolbarItem(e))),this._renderDuplicateButton(),this._renderDeleteButton(),i?.map((e=>this._renderToolbarItem(e))))]}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return[];const{messages:e,state:t}=this;return this._renderToolbarItem({id:"pointer-select",text:e.selectFeature,icon:"cursor",onclick:this._activateDefaultSelectTool,active:"ready"===t})}_renderCreateToolActionGroup(){const e=this._effectiveAvailableCreateTools?.flatMap((e=>this._renderBuiltInCreateToolItem(e)))??[],t=this.customToolOptions?.flatMap((e=>this._renderCustomToolItem(e)))??[];return(0,E.K)("div",{"group-kind":"overflow-group",key:"create-tools-group",priority:this.groupCollapsePriorities?.get("createTools")??w.Jl.High},e,t)}_renderBuiltInCreateToolItem(e){return this._renderToolbarItem({id:`${e}-button`,text:this.messages.draw[e],icon:Wt[e],onclick:()=>this._activateCreateTool(e),active:this.activeTool===e&&!this._activeCustomToolOptions})}_renderCustomToolItem(e){const{toolKey:t}=e;return this._renderToolbarItem({id:`custom-${e.toolKey}`,text:e.label,icon:e.icon,onclick:()=>this._activateCreateTool(e.toolName,null,e),active:this._activeCustomToolOptions?.toolKey===t})}_renderUndoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"undo-button",text:this.messages.undo,icon:"undo",disabled:!this.viewModel.canUndo(),onclick:this.undo,flipRTL:!0}):[]}_renderRedoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"redo-button",text:this.messages.redo,icon:"redo",disabled:!this.viewModel.canRedo(),onclick:this.redo,flipRTL:!0}):[]}_renderSettingsMenuButton(){return this.visibleElements.settingsMenu?this._renderToolbarItem({id:"settings-menu-action",text:this.messagesCommon.settings,icon:"gear",active:this._popoverOpen,onclick:()=>this._popoverOpen=!this._popoverOpen,afterCreate:e=>this._calcitePopoverReferenceElement=e,afterUpdate:e=>this._calcitePopoverReferenceElement=e,afterRemoved:()=>this._calcitePopoverReferenceElement=null}):[]}_renderFeatureCountChip(){if(!this.visibleElements.selectionCountLabel)return[];const{layout:e,messages:t,scale:i,id:o,updateGraphics:{length:n}}=this,s=(0,Ft.V)(t.selectedCount,{count:n}),l="s"===i?99:999,r=n>l?(0,Ft.V)(t.selectedCountTruncated,{truncated:l}):n,a="s"===i&&"vertical"===e,d=a?`${o}-selection-chip-small`:`${o}-selection-chip`;return[a?(0,E.K)("span",{classes:{[Gt.chipVertical]:!0,[Gt.chipVerticalSmall]:"s"===this.scale},id:d,tabIndex:0,title:s},r):(0,E.K)("calcite-chip",{appearance:"outline",class:"horizontal"===e?Gt.chipHorizontal:Gt.chipVertical,id:d,kind:"brand",label:s,scale:"l"===i?"m":"s",tabIndex:0,title:"vertical"===e?s:void 0},"vertical"===e?r:s)]}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return[];const{messages:e}=this;return this._renderToolbarItem({id:"duplicate",text:this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature,icon:"copy",onclick:this._onDuplicateSelect})}_renderDeleteButton(){if(!this.visibleElements.deleteButton)return[];const{messages:e}=this,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return this._renderToolbarItem({id:"delete",text:t,icon:"trash",onclick:this.delete})}_renderToolbarItem(e){let{id:t,text:i,icon:o,disabled:n,onclick:s,active:l,flipRTL:r,afterCreate:a,afterUpdate:d,afterRemoved:c}=e;const p=`${this.id}-${t}`;return[(0,E.K)("calcite-action",{active:l,afterCreate:a,afterRemoved:c,afterUpdate:d,bind:this,"data-testid":t,disabled:n||"disabled"===this.state,icon:o,iconFlipRtl:r??!1,id:p,key:t,onclick:s,scale:this.scale,text:i,title:i})]}_remeasurePopoverSizes(e){try{const t=e.parentElement,i=this?.view?.container?.getBoundingClientRect(),o=t?.style;if(!(t&&i&&o&&this.view?.container?.contains(t)))return;const n=this._calcitePopoverReferenceElement;if(!n)return;const{bottom:s,top:l}=n.getBoundingClientRect();if("horizontal"===this.layout){const e=s<i.height/2;e!==("top"===this._relativeLocation)&&(this._relativeLocation=e?"top":"bottom"),e?(o?.setProperty("--sketch-view-height-offset",s-i.top+"px"),o?.setProperty("--sketch-view-margin-offset","30px")):(o?.setProperty("--sketch-view-height-offset",i.bottom-l+"px"),o?.setProperty("--sketch-view-margin-offset","15px"))}else"vertical"===this.layout&&(o.setProperty("--sketch-view-height-offset","15px"),o.setProperty("--sketch-view-margin-offset","15px"));const r=e.shadowRoot?.querySelector("div.header")?.getBoundingClientRect().height;o.setProperty("--sketch-popover-header-offset",`${r}px`)}catch(t){l.A.getLogger(this.declaredClass).warnOnce("Sketch failed to lay out settings menu.",t)}}_activateCreateTool(e,t,i){const o=this._activeCustomToolOptions;if(i||o){if(i?.toolKey===o?.toolKey)return void this.cancel()}else if(this.activeTool===e)return void this.cancel();this._selectionToolbar?.cancel(),this.create(e,t,i)}_onDuplicateSelect(){const e=this.duplicate(),t=this.viewModel.activeTool;"transform"!==t&&"reshape"!==t||this.update(e,{tool:t})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:i}=e;if(!e.aborted&&i.length){const e=t.tool,o=i.length>1&&"reshape"===e?"transform":e;this.update(i,{...t,tool:o})}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}_refocusOnView(){this.activeTool&&this.view?.focus()}};(0,o._)([(0,c.MZ)()],Ut.prototype,"_activeCustomToolOptions",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"activeTool",null),(0,o._)([(0,c.MZ)({readOnly:!0})],Ut.prototype,"activeTooltip",null),(0,o._)([(0,c.MZ)({cast:e=>{if(!e?.length)return null;const t=new Set(["point","polyline","polygon","rectangle","circle","multipoint","freehandPolyline","freehandPolygon","mesh"]);return e.filter((e=>t.has(e)))}})],Ut.prototype,"availableCreateTools",void 0),(0,o._)([(0,c.MZ)({readOnly:!0})],Ut.prototype,"createGraphic",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"creationMode",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"customToolOptions",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"customActions",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"defaultCreateOptions",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"defaultUpdateOptions",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"icon",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"label",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"labelOptions",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"layer",null),(0,o._)([(0,c.MZ)({type:["horizontal","vertical"],value:"horizontal"})],Ut.prototype,"layout",null),(0,o._)([(0,c.MZ)({value:"m"})],Ut.prototype,"scale",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"toolbarKind",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"contextualToolLocation",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"groupCollapsePriorities",void 0),(0,o._)([(0,c.MZ)(),(0,B.G)("esri/widgets/Sketch/t9n/Sketch")],Ut.prototype,"messages",void 0),(0,o._)([(0,c.MZ)(),(0,B.G)("esri/t9n/common")],Ut.prototype,"messagesCommon",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"snappingOptions",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"state",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"tooltipOptions",null),(0,o._)([(0,c.MZ)({readOnly:!0})],Ut.prototype,"updateGraphics",null),(0,o._)([(0,c.MZ)({type:h.A,nonNullable:!0})],Ut.prototype,"valueOptions",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"view",null),(0,o._)([(0,c.MZ)({type:y.A}),(0,zt.U)(["create","update","undo","redo"])],Ut.prototype,"viewModel",null),(0,o._)([(0,c.MZ)({type:M,nonNullable:!0})],Ut.prototype,"visibleElements",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"_effectiveAvailableCreateTools",null),(0,o._)([(0,c.MZ)()],Ut.prototype,"_defaultViewModel",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"_calcitePopoverReferenceElement",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"_relativeLocation",void 0),(0,o._)([(0,c.MZ)()],Ut.prototype,"_popoverOpen",void 0),Ut=(0,o._)([(0,p.$)("esri.widgets.Sketch")],Ut);const qt=Ut},59649:(e,t,i)=>{i.d(t,{A:()=>s});var o=i(99486),n=i(99702);class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.values().next().value;this._peeker=e,this._observable=new n.I,this._items=new Set}get length(){return(0,o.gc)(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return(0,o.gc)(this._observable),this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach((t=>{e(t)||this._items.delete(t)})),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){(0,o.gc)(this._observable),yield*this._items}}},60008:(e,t,i)=>{i.d(t,{A6:()=>_,B8:()=>u,Xd:()=>c,Xr:()=>y,Yc:()=>I,hZ:()=>m,lw:()=>p,t2:()=>O,x8:()=>d});var o=i(44680),n=i(4336),s=i(9392),l=i(53494),r=i(20664),a=i(43047);function d(e,t,i){i*=.5;const o=Math.sin(i);return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=Math.cos(i),e}function c(e,t){const i=2*Math.acos(t[3]),o=Math.sin(i/2);return o>(0,l.FD)()?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=1,e[1]=0,e[2]=0),i}function p(e,t,i){const o=t[0],n=t[1],s=t[2],l=t[3],r=i[0],a=i[1],d=i[2],c=i[3];return e[0]=o*c+l*r+n*d-s*a,e[1]=n*c+l*a+s*r-o*d,e[2]=s*c+l*d+o*a-n*r,e[3]=l*c-o*r-n*a-s*d,e}function h(e,t,i,o){const n=t[0],s=t[1],r=t[2],a=t[3];let d,c,p,h,u,y=i[0],g=i[1],_=i[2],v=i[3];return c=n*y+s*g+r*_+a*v,c<0&&(c=-c,y=-y,g=-g,_=-_,v=-v),1-c>(0,l.FD)()?(d=Math.acos(c),p=Math.sin(d),h=Math.sin((1-o)*d)/p,u=Math.sin(o*d)/p):(h=1-o,u=o),e[0]=h*n+u*y,e[1]=h*s+u*g,e[2]=h*r+u*_,e[3]=h*a+u*v,e}function u(e,t){const i=t[0],o=t[1],n=t[2],s=t[3],l=i*i+o*o+n*n+s*s,r=l?1/l:0;return e[0]=-i*r,e[1]=-o*r,e[2]=-n*r,e[3]=s*r,e}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function g(e,t){const i=t[0]+t[4]+t[8];let o;if(i>0)o=Math.sqrt(i+1),e[3]=.5*o,o=.5/o,e[0]=(t[5]-t[7])*o,e[1]=(t[6]-t[2])*o,e[2]=(t[1]-t[3])*o;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);const n=(i+1)%3,s=(i+2)%3;o=Math.sqrt(t[3*i+i]-t[3*n+n]-t[3*s+s]+1),e[i]=.5*o,o=.5/o,e[3]=(t[3*n+s]-t[3*s+n])*o,e[n]=(t[3*n+i]+t[3*i+n])*o,e[s]=(t[3*s+i]+t[3*i+s])*o}return e}function _(e,t,i,o){const n=.5*Math.PI/180;t*=n,i*=n,o*=n;const s=Math.sin(t),l=Math.cos(t),r=Math.sin(i),a=Math.cos(i),d=Math.sin(o),c=Math.cos(o);return e[0]=s*a*c-l*r*d,e[1]=l*r*c+s*a*d,e[2]=l*a*d-s*r*c,e[3]=l*a*c+s*r*d,e}const v=a.c,m=a.s,b=a.g,f=p,M=a.b,w=a.h,T=a.l,C=a.j,Z=C,S=a.f,L=S,k=a.n,O=a.a,E=a.e;function I(e,t,i){const o=(0,r.f)(t,i);return o<-.999999?((0,r.e)(A,x,t),(0,r.H)(A)<1e-6&&(0,r.e)(A,P,t),(0,r.n)(A,A),d(e,A,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,r.e)(A,t,i),e[0]=A[0],e[1]=A[1],e[2]=A[2],e[3]=1+o,k(e,e))}const A=(0,s.vt)(),x=(0,s.fA)(1,0,0),P=(0,s.fA)(0,1,0);const B=(0,n.vt)(),V=(0,n.vt)();const $=(0,o.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:b,calculateW:function(e,t){const i=t[0],o=t[1],n=t[2];return e[0]=i,e[1]=o,e[2]=n,e[3]=Math.sqrt(Math.abs(1-i*i-o*o-n*n)),e},conjugate:y,copy:v,dot:w,equals:E,exactEquals:O,fromEuler:_,fromMat3:g,getAxisAngle:c,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:u,len:Z,length:C,lerp:T,mul:f,multiply:p,normalize:k,random:function(e){const t=l.Ov,i=t(),o=t(),n=t(),s=Math.sqrt(1-i),r=Math.sqrt(i);return e[0]=s*Math.sin(2*Math.PI*o),e[1]=s*Math.cos(2*Math.PI*o),e[2]=r*Math.sin(2*Math.PI*n),e[3]=r*Math.cos(2*Math.PI*n),e},rotateX:function(e,t,i){i*=.5;const o=t[0],n=t[1],s=t[2],l=t[3],r=Math.sin(i),a=Math.cos(i);return e[0]=o*a+l*r,e[1]=n*a+s*r,e[2]=s*a-n*r,e[3]=l*a-o*r,e},rotateY:function(e,t,i){i*=.5;const o=t[0],n=t[1],s=t[2],l=t[3],r=Math.sin(i),a=Math.cos(i);return e[0]=o*a-s*r,e[1]=n*a+l*r,e[2]=s*a+o*r,e[3]=l*a-n*r,e},rotateZ:function(e,t,i){i*=.5;const o=t[0],n=t[1],s=t[2],l=t[3],r=Math.sin(i),a=Math.cos(i);return e[0]=o*a+n*r,e[1]=n*a-o*r,e[2]=s*a+l*r,e[3]=l*a-s*r,e},rotationTo:I,scale:M,set:m,setAxes:function(e,t,i,o){const n=$;return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=o[0],n[4]=o[1],n[7]=o[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],k(e,g(e,n))},setAxisAngle:d,slerp:h,sqlerp:function(e,t,i,o,n,s){return h(B,t,n,s),h(V,i,o,s),h(e,B,V,2*s*(1-s)),e},sqrLen:L,squaredLength:S,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},71981:(e,t,i)=>{i.d(t,{m:()=>s,o:()=>a});var o=i(94126),n=(i(76099),i(54761));const s=()=>(0,o.W)({icon:()=>i.e(6702).then(i.bind(i,16702)),label:()=>i.e(1839).then(i.bind(i,11839)),switch:()=>i.e(8989).then(i.bind(i,8989)),tooltip:()=>Promise.all([i.e(1654),i.e(1748)]).then(i.bind(i,31748))}),l="esri-labeled-switch",r={label:`${l}__label`,labelContent:`${l}__label-content`,iconInfo:`${l}__icon_info`,iconWarning:`${l}__icon_warning`,tooltip:`${l}__tooltip`};function a(e){let{checked:t,disabled:i,hint:o,key:s,label:l,onChange:a,hintIcon:d,hintKind:c}=e;return(0,n.K)("calcite-label",{class:r.label,disabled:i,key:s,layout:"inline-space-between",scale:"s"},o?(0,n.K)("div",{class:r.labelContent,key:"label-content"},(0,n.K)("div",null,l),(0,n.K)("calcite-icon",{class:"warning"!==c?r.iconInfo:r.iconWarning,icon:d??"information",id:s,scale:"s",tabIndex:0}),(0,n.K)("calcite-tooltip",{class:r.tooltip,overlayPositioning:"fixed",referenceElement:s},o)):l,(0,n.K)("calcite-switch",{checked:t,disabled:i,scale:"s",onCalciteSwitchChange:e=>a(e.currentTarget.checked)}))}},73582:(e,t,i)=>{i.d(t,{hr:()=>n,ie:()=>d,uC:()=>r,wf:()=>a});var o=i(15941);class n{constructor(e,t){this.min=e,this.max=t,this.range=t-e}normalize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(this.range,this.min,this.max,e,t,i)}clamp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,o.qE)(e-t,this.min,this.max)+t}monotonic(e,t,i){return e<t?t:t+l(this.range,e-t,i)}minimalMonotonic(e,t,i){return s(this.range,e,e+this.range,t,i)}center(e,t,i){return t=this.monotonic(e,t,i),this.normalize((e+t)/2,i)}diff(e,t,i){return this.monotonic(e,t,i)-e}shortestSignedDiff(e,t){e=this.normalize(e);const i=(t=this.normalize(t))-e,o=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(i)<Math.abs(o)?i:o}contains(e,t,i){return t=this.minimalMonotonic(e,t),(i=this.minimalMonotonic(e,i))>e&&i<t}}function s(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(o-=n)<t?o+=l(e,t-o):o>i&&(o-=l(e,o-i)),s&&o===i&&(o=t),o+n}function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.ceil((t-i)/e)*e+i}const r=new n(0,2*Math.PI),a=new n(-Math.PI,Math.PI),d=new n(0,360)},74e3:(e,t,i)=>{i.d(t,{CI:()=>s,fk:()=>l});i(81806);var o=i(15941),n=i(80963);function s(e,t){return e===t||null!=e&&null!=t&&(0,n.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function l(e,t,i){return e===t||null!=e&&null!=t&&(0,n.aI)(e.spatialReference,t.spatialReference)&&(0,o.Sp)(e.x,t.x,i)&&(0,o.Sp)(e.y,t.y,i)&&(0,o.Sp)(e.z??0,t.z??0,i)&&(0,o.Sp)(e.m??0,t.m??0,i)}},90761:(e,t,i)=>{i.d(t,{R:()=>n});var o=i(19898);class n extends o.R{constructor(e,t){super(e,t,"webmap")}}},90992:(e,t,i)=>{i.d(t,{E5:()=>s,JU:()=>n,Of:()=>o,g7:()=>l,lO:()=>r});i(50076);function o(e){return e&&"function"==typeof e.highlight}function n(e,t,i){return null==e||e>=i&&(0===t||e<=t)}function s(e,t){if(t&&e){const{minScale:i,maxScale:o}=e;if(function(e,t){return null!=e&&e>0||null!=t&&t>0}(i,o))return n(t,i,o)}return!0}function l(e){return!e?.minScale||!e.maxScale||e.minScale>=e.maxScale}function r(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}},95752:(e,t,i)=>{i.d(t,{p4:()=>o,xk:()=>n});i(20459),i(54761),i(76099);function o(e){return e&&"function"==typeof e.render}function n(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);
//# sourceMappingURL=1477.b7b478c6.chunk.js.map