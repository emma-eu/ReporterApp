{"version":3,"file":"static/js/3966.af0f0a15.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/TitleCreator.js","../node_modules/@arcgis/core/webdoc/interfaces.js","../node_modules/@arcgis/core/layers/support/displayFilterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import{createTask as s}from\"../../core/asyncUtils.js\";import i from\"../../core/Collection.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{featureHasFields as o,extractSubstitutionTemplatesFromString as n}from\"./fieldUtils.js\";import{loadArcade as l}from\"../../support/arcadeOnDemand.js\";const p=\"relationships/\",c=\"expression/\";let d=class extends t{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){if(this.expressionsUsedInTitle.length>0){return this._get(\"_arcadeTask\")||s((()=>l()))}return null}get featureUtilsPromise(){return this._get(\"featureUtilsPromise\")??import(\"../../widgets/Feature/support/featureUtils.js\").then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new i;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const s=this._arcadeTask.value.arcade.parseScript(t.expression,[\"$layer\",\"$map\",\"$datastore\"]);if(s.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:s,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(s,{vars:{$feature:\"any\"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??\"\";return\"string\"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const s of this.calculatedExpressions?.toArray()??[])try{const t=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const s of t){const t=s.split(\".\"),i=this.fieldsIndex.get(t.at(-1)??\"\");i&&e.add(i.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const s of t){const t=this.fieldsIndex.get(s);t&&e.add(t.name)}return e}get titleFromDisplayField(){let e=\"\";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??\"\"),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??\"\"),e?`{${e}}`:\"\"}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:\"\";return\"\"===e||null==e||this.hasBadExpressions||\"string\"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,s){try{const{attributes:i}=t,r=s?.timeZone??\"system\",[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);if(s.fetchMissingFields&&(t=await this._checkAndReQueryGraphic(e,t)),this.workingTitle&&this.fieldInfoMap){const s=this._createFormattedAttributes(e,t,r).global;return a({attributes:i,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:s,layer:e,text:this.workingTitle})}return\"\"}catch{}return\"\"}async _checkAndReQueryGraphic(e,t){const s=t.getObjectId();if(null==s)return t;if(!o(this.requiredFields,t)){const t=e.createQuery();t.where=\"1=1\",t.outFields=[...this.requiredFields],t.objectIds=[s];const i=await e.queryFeatures(t);if(1===i?.features.length)return i.features[0]}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const s of e){if(!s.fieldName)continue;const e=this.fieldsIndex.get(s.fieldName),i=e?.name??s.fieldName;s.fieldName=i,t.set(i.toLowerCase(),s)}return t}_createFormattedAttributes(e,t,s=\"system\"){const i=this.effectivePopupTemplate?.fieldInfos??[],r={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const s=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{r[`expression/${e.name}`]=e.func({vars:{$feature:s}})}catch{}}const a={...t.attributes,...r};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:a,graphic:t,timeZone:s,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return n(e).filter((e=>!(0===e.indexOf(p)||0===e.indexOf(c))))}};e([r({readOnly:!0})],d.prototype,\"_arcadeTask\",null),e([r()],d.prototype,\"_featureUtils\",void 0),e([r({readOnly:!0})],d.prototype,\"featureUtilsPromise\",null),e([r({readOnly:!0})],d.prototype,\"calculatedExpressions\",null),e([r()],d.prototype,\"displayField\",void 0),e([r()],d.prototype,\"effectivePopupTemplate\",void 0),e([r()],d.prototype,\"expressionsUsedInTitle\",null),e([r()],d.prototype,\"fieldsIndex\",void 0),e([r()],d.prototype,\"fieldInfoMap\",null),e([r()],d.prototype,\"fields\",void 0),e([r()],d.prototype,\"objectIdField\",void 0),e([r()],d.prototype,\"requiredFields\",null),d=e([a(\"esri.layers.support.TitleCreator\")],d);const u=d;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar A;!function(A){A[A.SAVE=0]=\"SAVE\",A[A.SAVE_AS=1]=\"SAVE_AS\"}(A||(A={}));export{A as SaveOperationType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{floatGreaterThan as e,floatLessThan as n,floatEqualAbsolute as t,floatGreaterThanOrEqual as r}from\"../../core/mathUtils.js\";import{sqlOr as o}from\"../../core/sql.js\";function i(e,n){return{...n,filterMode:e.mode}}function u(e,n){return l(e,n).next().value??null}function c(t,r,i){const u=f(t);if(u&&(e(r,u[0])||n(i,u[1])))return\"\";const c=Array.from(l(t,r,i)),m=a(c,r,i)?\"1=1\":c.map((e=>e.where||\"1=1\")).reduce(((e,n)=>o(e,n)),\"\");return m&&\"1=1\"!==m?m:\"\"}function f(e){if(\"manual\"===s(e))return null;const n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:r}of e.filters)n[0]=Math.max(n[0],I(t)),n[1]=Math.min(n[1],d(r));return n}function*l(e,n,t){if(\"manual\"===s(e)){const n=e.filters.find((n=>n.id===e.activeFilterId));n&&(yield n)}else{\"object\"==typeof n&&(n=n.scale);for(const r of e.filters)m(r.minScale,r.maxScale,n,t)&&(yield r)}}function a(t,r,o){if(0===t.length)return!0;const i=I(t.at(0)?.minScale),u=d(t.at(-1)?.maxScale);if(n(i,r)||e(u,o))return!0;for(let e=0;e<t.length-1;e++){const r=t[e],o=t[e+1];if(n(I(o.minScale),d(r.maxScale)))return!0}return!1}function m(e,n,o,i){return e=I(e),o=I(o),n=d(n),!(!t(o,e)&&(i??o)>e)&&(!r(n,o)&&(void 0===i||!t(i,e)))}function s(e){return\"mode\"in e?e.mode:e.filterMode}function I(e){return e||Number.POSITIVE_INFINITY}function d(e){return e||0}export{i as createDisplayFilterJSONContext,c as getClauseForScaleRange,u as getEffectiveDisplayFilter};\n"],"names":["d","t","constructor","e","super","this","_featureUtils","effectivePopupTemplate","_arcadeTask","expressionsUsedInTitle","length","_get","s","l","featureUtilsPromise","then","calculatedExpressions","i","value","push","name","invalid","arcade","parseScript","expression","isAsync","syntax","func","compileScript","vars","$feature","title","toLowerCase","expressionInfos","filter","includes","fieldInfoMap","_createFieldInfoMap","getAllFieldInfos","hasBadExpressions","some","requiredFields","Set","toArray","extractFieldLiterals","split","fieldsIndex","get","at","add","_extractFieldNames","workingTitle","titleFromDisplayField","displayField","objectIdField","getTitle","attributes","r","timeZone","substituteFieldsInLinksAndAttributes","a","Promise","all","promise","fetchMissingFields","_checkAndReQueryGraphic","_createFormattedAttributes","global","expressionAttributes","globalAttributes","layer","text","getObjectId","o","createQuery","where","outFields","objectIds","queryFeatures","features","Map","fieldName","set","arguments","undefined","fieldInfos","Feature","createFromGraphicLikeObject","geometry","formatAttributes","graphic","content","n","indexOf","readOnly","prototype","u","A","SAVE","SAVE_AS","filterMode","mode","next","c","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","minScale","maxScale","filters","Math","max","I","min","f","Array","from","m","map","reduce","find","id","activeFilterId","scale"],"sourceRoot":""}