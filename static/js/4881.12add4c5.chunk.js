"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[4881],{2687:(e,t,r)=>{r.d(t,{N5:()=>u});var n=r(50076),o=(r(81806),r(76460)),i=r(69728);const s=()=>o.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class a{constructor(){this._includedModules=new Map}include(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}class u extends a{constructor(){super(...arguments),this.vertex=new h,this.fragment=new h,this.attributes=new d,this.varyings=new g,this.extensions=new m,this.outputs=new _}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.extensions.generateSource(e),n=this.attributes.generateSource(e),o=this.varyings.generateSource(e),i="vertex"===e?this.vertex:this.fragment,s=i.uniforms.generateSource(),a=i.code.generateSource(),u=i.main.generateSource(t),c="vertex"===e?y:v,f=i.constants.generateSource(),l=this.outputs.generateSource(e);return`#version 300 es\n${r.join("\n")}\n${c}\n${f.join("\n")}\n${s.join("\n")}\n${n.join("\n")}\n${o.join("\n")}\n${l.join("\n")}\n${a.join("\n")}\n${u.join("\n")}`}generateBind(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[i.c.Bind];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[i.c.Bind];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return t=>{for(let o=0;o<n;++o)r[o](e,t)}}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[i.c.Pass];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[i.c.Pass];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return(t,o)=>{for(let i=0;i<n;++i)r[i](e,t,o)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[i.c.Draw];r&&t.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[i.c.Draw];r&&t.set(e.name,r)}));const r=Array.from(t.values()),n=r.length;return(t,o,i)=>{for(let s=0;s<n;++s)r[s](e,i,t,o)}}}class c{constructor(e){this._stage=e,this._entries=new Map}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const n of t)this._add(n);return this._stage}get(e){return this._entries.get(e)}_add(e){if(null!=e){if(this._entries.has(e.name)&&!this._entries.get(e.name).equals(e))throw new n.A(`Duplicate uniform name ${e.name} for different uniform type`);this._entries.set(e.name,e)}else s().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((e=>null!=e.arraySize?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`))}get entries(){return Array.from(this._entries.values())}}class f{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(e){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(e)throw new n.A("Shader does not contain main function body.");return[]}}class l{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class h extends a{constructor(){super(...arguments),this.uniforms=new c(this),this.main=new f(this),this.code=new l(this),this.constants=new p(this)}get builder(){return this}}class d{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class g{constructor(){this._entries=new Map}add(e,t){this._entries.has(e)?s().warn(`Ignoring duplicate varying ${t} ${e}`):this._entries.set(e,t)}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push("vertex"===e?`out ${r} ${n};`:`in ${r} ${n};`))),t}}class m{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?m.ALLOWLIST_VERTEX:m.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}m.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],m.ALLOWLIST_VERTEX=[];class _{constructor(){this._entries=new Map}add(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this._entries.get(r);n?.name!==e||n?.type!==t?this._entries.set(r,{name:e,type:t}):s().warn(`Fragment shader output location ${r} occupied`)}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:_.DEFAULT_NAME,type:_.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}_.DEFAULT_TYPE="vec4",_.DEFAULT_NAME="fragColor";class p{constructor(e){this._stage=e,this._entries=new Set}add(e,t,r){let n="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":n=p._numberToFloatStr(r);break;case"int":n=p._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${p._numberToFloatStr(r[0])},                            ${p._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${p._numberToFloatStr(r[0])},                            ${p._numberToFloatStr(r[1])},                            ${p._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${p._numberToFloatStr(r[0])},                            ${p._numberToFloatStr(r[1])},                            ${p._numberToFloatStr(r[2])},                            ${p._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${p._numberToIntStr(r[0])},                             ${p._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${p._numberToIntStr(r[0])},                             ${p._numberToIntStr(r[1])},                             ${p._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${p._numberToIntStr(r[0])},                             ${p._numberToIntStr(r[1])},                             ${p._numberToIntStr(r[2])},                             ${p._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${t}(${Array.prototype.map.call(r,(e=>p._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const v="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n#endif",y="precision highp float;\nprecision highp sampler2D;"},10947:(e,t,r)=>{r.d(t,{a:()=>i,b:()=>f,l:()=>c,n:()=>a,t:()=>s});var n=r(99746),o=(r(81806),r(76460));function i(e,t,r){s(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!=t.length/o)return;const i=e.length/n,s=r[0],a=r[1],u=r[2],c=r[3],f=r[4],l=r[5],h=r[6],d=r[7],g=r[8];let m=0,_=0;for(let p=0;p<i;p++){const r=t[m],i=t[m+1],p=t[m+2],v=t[m+3];e[_]=s*r+c*i+h*p,e[_+1]=a*r+f*i+d*p,e[_+2]=u*r+l*i+g*p,e[_+3]=v,m+=o,_+=n}}function a(e,t){const r=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,i=t.typedBuffer,s=t.typedBufferStride;for(let a=0;a<r;a++){const e=a*o,t=a*s,r=i[t],u=i[t+1],c=i[t+2],f=r*r+u*u+c*c;if(f>0){const t=1/Math.sqrt(f);n[e]=t*r,n[e+1]=t*u,n[e+2]=t*c}}}function u(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;const o=Math.min(e.length/n,t.count),i=t.typedBuffer,s=t.typedBufferStride;let a=0,u=0;for(let c=0;c<o;c++)e[u]=r*i[a],e[u+1]=r*i[a+1],e[u+2]=r*i[a+2],e[u+3]=r*i[a+3],a+=s,u+=n}function c(e,t,r,n){f(e.typedBuffer,t,r,n,e.typedBufferStride)}function f(e,t,r,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;const s=Math.min(e.length/i,t.count),a=t.typedBuffer,u=t.typedBufferStride;let c=0,f=0;const l=1/n.Tf;for(let n=0;n<s;n++)e[f]=o*(r*a[c])**l,e[f+1]=o*(r*a[c+1])**l,e[f+2]=o*(r*a[c+2])**l,e[f+3]=o*r*a[c+3],c+=u,f+=i}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:c,normalize:a,scale:u,scaleView:function(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)},transformMat3:s,transformMat3View:i,transformMat4:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!=t.length/i)return void o.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const s=e.length/n,a=r[0],u=r[1],c=r[2],f=r[3],l=r[4],h=r[5],d=r[6],g=r[7],m=r[8],_=r[9],p=r[10],v=r[11],y=r[12],b=r[13],S=r[14],w=r[15];let $=0,T=0;for(let o=0;o<s;o++){const r=t[$],o=t[$+1],s=t[$+2],B=t[$+3];e[T]=a*r+l*o+m*s+y*B,e[T+1]=u*r+h*o+_*s+b*B,e[T+2]=c*r+d*o+p*s+S*B,e[T+3]=f*r+g*o+v*s+w*B,$+=i,T+=n}},transformMat4View:function(e,t,r){if(e.count!==t.count)return;const n=e.count,o=r[0],i=r[1],s=r[2],a=r[3],u=r[4],c=r[5],f=r[6],l=r[7],h=r[8],d=r[9],g=r[10],m=r[11],_=r[12],p=r[13],v=r[14],y=r[15],b=e.typedBuffer,S=e.typedBufferStride,w=t.typedBuffer,$=t.typedBufferStride;for(let T=0;T<n;T++){const e=T*S,t=T*$,r=w[t],n=w[t+1],B=w[t+2],A=w[t+3];b[e]=o*r+u*n+h*B+_*A,b[e+1]=i*r+c*n+d*B+p*A,b[e+2]=s*r+f*n+g*B+v*A,b[e+3]=a*r+l*n+m*B+y*A}}},Symbol.toStringTag,{value:"Module"}))},19898:(e,t,r)=>{r.d(t,{R:()=>o});var n=r(50076);let o=class e{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new n.A(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[o,i]=t.split("."),s=/^\s*\d+\s*$/;if(!o?.match||!s.test(o))throw new n.A((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!i?.match||!s.test(i))throw new n.A((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(o,10),u=parseInt(i,10);return new e(a,u,r)}}},44680:(e,t,r)=>{function n(){return[1,0,0,0,1,0,0,0,1]}function o(e,t,r,n,o,i,s,a,u){return[e,t,r,n,o,i,s,a,u]}r.d(t,{fA:()=>o,vt:()=>n,zK:()=>i});const i=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:n,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},45136:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>a,c:()=>s,d:()=>o,e:()=>h,f:()=>f,l:()=>c,n:()=>d,t:()=>i});var n=r(99746);r(81806),r(76460);function o(e,t,r){i(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function i(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==Math.ceil(t.length/o))return e;const i=e.length/n,s=r[0],a=r[1],u=r[2],c=r[4],f=r[5],l=r[6],h=r[8],d=r[9],g=r[10],m=r[12],_=r[13],p=r[14];let v=0,y=0;for(let b=0;b<i;b++){const r=t[v],i=t[v+1],b=t[v+2];e[y]=s*r+c*i+h*b+m,e[y+1]=a*r+f*i+d*b+_,e[y+2]=u*r+l*i+g*b+p,v+=o,y+=n}return e}function s(e,t,r){a(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function a(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==Math.ceil(t.length/o))return;const i=e.length/n,s=r[0],a=r[1],u=r[2],c=r[3],f=r[4],l=r[5],h=r[6],d=r[7],g=r[8];let m=0,_=0;for(let p=0;p<i;p++){const r=t[m],i=t[m+1],p=t[m+2];e[_]=s*r+c*i+h*p,e[_+1]=a*r+f*i+d*p,e[_+2]=u*r+l*i+g*p,m+=o,_+=n}}function u(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;const i=Math.min(e.length/n,t.length/o);let s=0,a=0;for(let u=0;u<i;u++)e[a]=r*t[s],e[a+1]=r*t[s+1],e[a+2]=r*t[s+2],s+=o,a+=n;return e}function c(e,t,r,n){f(e.typedBuffer,t.typedBuffer,r,n,e.typedBufferStride,t.typedBufferStride)}function f(e,t,r,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i;const a=Math.min(e.length/i,t.length/s);let u=0,c=0;const f=1/n.Tf;for(let n=0;n<a;n++)e[c]=o*(r*t[u])**f,e[c+1]=o*(r*t[u+1])**f,e[c+2]=o*(r*t[u+2])**f,u+=s,c+=i}function l(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;const i=e.length/n;if(i!==Math.ceil(t.length/o))return e;let s=0,a=0;for(let u=0;u<i;u++)e[a]=t[s]+r[0],e[a+1]=t[s+1]+r[1],e[a+2]=t[s+2]+r[2],s+=o,a+=n;return e}function h(e,t){d(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;const o=Math.min(e.length/r,t.length/n);let i=0,s=0;for(let a=0;a<o;a++){const o=t[i],a=t[i+1],u=t[i+2],c=o*o+a*a+u*u;if(c>0){const t=1/Math.sqrt(c);e[s]=t*o,e[s+1]=t*a,e[s+2]=t*u}i+=n,s+=r}}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:c,normalize:d,normalizeView:h,scale:u,scaleView:function(e,t,r){u(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)},shiftRight:function(e,t,r){const n=Math.min(e.count,t.count),o=e.typedBuffer,i=e.typedBufferStride,s=t.typedBuffer,a=t.typedBufferStride;let u=0,c=0;for(let f=0;f<n;f++)o[c]=s[u]>>r,o[c+1]=s[u+1]>>r,o[c+2]=s[u+2]>>r,u+=a,c+=i},transformMat3:a,transformMat3View:s,transformMat4:i,transformMat4View:o,translate:l},Symbol.toStringTag,{value:"Module"}))},59422:(e,t,r)=>{function n(){return new Float32Array(2)}function o(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function i(){return n()}function s(){return o(1,1)}function a(){return o(1,0)}function u(){return o(0,1)}r.d(t,{Un:()=>f,fA:()=>o,uY:()=>c,vt:()=>n});const c=i(),f=s(),l=a(),h=u();Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:h,ZEROS:c,clone:function(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},create:n,createView:function(e,t){return new Float32Array(e,t,2)},fromValues:o,ones:s,unitX:a,unitY:u,zeros:i},Symbol.toStringTag,{value:"Module"}))},69728:(e,t,r)=>{var n;r.d(t,{c:()=>n}),function(e){e[e.Bind=0]="Bind",e[e.Pass=1]="Pass",e[e.Draw=2]="Draw"}(n||(n={}))},75540:(e,t,r)=>{r.d(t,{v:()=>a});var n=r(53084),o=r(99486),i=r(99702);class s{constructor(e,t){this._observable=new i.I,this._value=e,this._equalityFunction=t}get value(){return(0,o.gc)(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.gh;return new s(e,t)}},75941:(e,t,r)=>{r.d(t,{O:()=>n});class n{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(e,t){return this._outer.get(e)?.get(t)}getInner(e){return this._outer.get(e)}set(e,t,r){const n=this._outer.get(e);n?n.set(t,r):this._outer.set(e,new Map([[t,r]]))}delete(e,t){const r=this._outer.get(e);r&&(r.delete(t),0===r.size&&this._outer.delete(e))}forEach(e){this._outer.forEach(((t,r)=>e(t,r)))}forAll(e){for(const t of this._outer.values())for(const r of t.values())e(r)}}},97255:(e,t,r)=>{r.d(t,{Qf:()=>u,Qh:()=>s,RS:()=>o,ez:()=>l,i5:()=>h,lM:()=>i,qK:()=>f});var n=r(78393);const o=16;function i(e){if(!e)return 0;let t=f;for(const r in e)e.hasOwnProperty(r)&&(t+=a(e[r],!1));return t}function s(e){if(!e)return 0;if("number"==typeof e[0])return u(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return c(e,8);let r=l;for(let n=0;n<t;n++)r+=a(e[n]);return r}(e);let t=f;for(const r in e)e.hasOwnProperty(r)&&(t+=a(e[r]));return t}function a(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof e){case"object":return t?s(e):f;case"string":return function(e){return 32+e.length}(e);case"number":return o;case"boolean":return 4;default:return 8}}function u(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>e+(t?(0,n.iu)(t)?t.byteLength+h:Array.isArray(t)?c(t,o):0:0)),0)}function c(e,t){return l+e.length*t}const f=32,l=16,h=145}}]);
//# sourceMappingURL=4881.12add4c5.chunk.js.map