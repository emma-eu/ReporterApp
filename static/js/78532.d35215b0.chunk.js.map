{"version":3,"file":"static/js/78532.d35215b0.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/Cyclical.js","../node_modules/@arcgis/core/analysis/Viewshed.js","../node_modules/@arcgis/core/analysis/ViewshedAnalysis.js","../node_modules/@arcgis/core/layers/ViewshedLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"./mathUtils.js\";class n{constructor(t,n){this.min=t,this.max=n,this.range=n-t}normalize(t,n=0,o=!1){return i(this.range,this.min,this.max,t,n,o)}clamp(n,i=0){return t(n-i,this.min,this.max)+i}monotonic(t,n,i){return t<n?n:n+o(this.range,t-n,i)}minimalMonotonic(t,n,o){return i(this.range,t,t+this.range,n,o)}center(t,n,i){return n=this.monotonic(t,n,i),this.normalize((t+n)/2,i)}diff(t,n,i){return this.monotonic(t,n,i)-t}shortestSignedDiff(t,n){t=this.normalize(t);const i=(n=this.normalize(n))-t,o=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(i)<Math.abs(o)?i:o}contains(t,n,i){return n=this.minimalMonotonic(t,n),(i=this.minimalMonotonic(t,i))>t&&i<n}}function i(t,n,i,r,s=0,a=!1){return(r-=s)<n?r+=o(t,n-r):r>i&&(r-=o(t,r-i)),a&&r===i&&(r=n),r+s}function o(t,n,i=0){return Math.ceil((n-i)/t)*t+i}const r=new n(0,2*Math.PI),s=new n(-Math.PI,Math.PI),a=new n(0,360);export{n as Cyclical,r as cyclical2PI,a as cyclicalDegrees,s as cyclicalPI};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as i}from\"./featureReferenceUtils.js\";import o from\"../core/Clonable.js\";import{cyclicalDegrees as t}from\"../core/Cyclical.js\";import s from\"../core/JSONSupport.js\";import{equalsMaybe as a}from\"../core/maybe.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{cast as n}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as c}from\"../core/accessorSupport/ensureType.js\";import m from\"../geometry/Point.js\";let u=class extends(s.JSONSupportMixin(o)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}isValid(){return null!=this.observer&&this.farDistance>0}equals(e){return a(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&r(this.feature,e.feature)}};e([l({type:m,json:{write:{isRequired:!0}}})],u.prototype,\"observer\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],u.prototype,\"farDistance\",void 0),e([l({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),n((e=>t.normalize(c(e),void 0,!0)))],u.prototype,\"heading\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],u.prototype,\"tilt\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],u.prototype,\"horizontalFieldOfView\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],u.prototype,\"verticalFieldOfView\",void 0),e([l(i)],u.prototype,\"feature\",void 0),e([l({json:{read:!1}})],u.prototype,\"isValid\",null),u=e([p(\"esri.analysis.Viewshed\")],u);const d=u;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"./Analysis.js\";import r from\"./Viewshed.js\";import n from\"../core/Collection.js\";import{referenceSetter as s,castForReferenceSetter as i}from\"../core/collectionUtils.js\";import{cyclicalDegrees as o}from\"../core/Cyclical.js\";import{deg2rad as l,clamp as a}from\"../core/mathUtils.js\";import{watch as p,syncAndInitial as c}from\"../core/reactiveUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import d from\"../geometry/Extent.js\";import{projectOrLoadMany as h}from\"../geometry/projection.js\";const f=n.ofType(r);let x=class extends t{constructor(e){super(e),this.type=\"viewshed\",this._extent=null}initialize(){this.addHandles(p((()=>this._computeExtent()),(e=>{null==e.pending&&(this._extent=e.extent)}),c))}get viewsheds(){return this._get(\"viewsheds\")||new f}set viewsheds(e){this._set(\"viewsheds\",s(e,this.viewsheds,f))}get spatialReference(){for(const e of this.viewsheds)if(null!=e.observer)return e.observer.spatialReference;return null}get extent(){return this._extent}get requiredPropertiesForEditing(){return this.viewsheds.items.map((({observer:e})=>e))}async waitComputeExtent(){const e=this._computeExtent();null!=e.pending&&await e.pending}_computeExtent(){const{spatialReference:e}=this;if(null==e)return{pending:null,extent:null};const t=this.viewsheds.filter((e=>null!=e.observer)),r=t.map((e=>e.observer)).toArray(),n=h(r,e);if(null!=n.pending)return{pending:n.pending,extent:null};return{pending:null,extent:n.geometries.map(((e,r)=>{const n=t.at(r);return null!=e&&null!=n?this._computeViewshedExtent(this.viewsheds.at(r),e):null})).filter((e=>null!=e)).reduce(((e,t)=>y(e,t)),null)}}_computeViewshedExtent(e,t){const{farDistance:r,heading:n,tilt:s,horizontalFieldOfView:i,verticalFieldOfView:p}=e,{spatialReference:c}=t,u=i/2,m=p/2,h=r/c.metersPerUnit,f=[o.normalize(n-u),n,o.normalize(n+u)],x=d.fromPoint(t),y=e=>{const t=f.map((t=>o.normalize(t-e)));if(t[0]>t[2]||360===i)return h;const r=t.map((e=>Math.abs(e>180?360-e:e))).reduce(((e,t)=>e>t?t:e));return r>90?0:h*Math.cos(l(r))};x.xmax+=y(90),x.xmin-=y(-90),x.ymax+=y(0),x.ymin-=y(180);const w=t.z;if(null!=w){let e=w,t=w;const n=s-90,i=a(n+m,-90,90),o=a(n-m,-90,90),l=c?.isGeographic?r:h;e+=l*g(i),t+=l*g(o);const p=v(m)*l,d=g(n)*p*(1-v(u));s<90&&(e-=d),s>90&&(t-=d),x.zmax=Math.max(e,w),x.zmin=Math.min(t,w)}return x}clear(){this.viewsheds.removeAll()}};function y(e,t){return null==e?t:null==t?e:e.union(t)}function v(e){return Math.cos(l(e))}function g(e){return Math.sin(l(e))}e([u({type:[\"viewshed\"]})],x.prototype,\"type\",void 0),e([u({cast:i,type:f,nonNullable:!0})],x.prototype,\"viewsheds\",null),e([u({readOnly:!0})],x.prototype,\"spatialReference\",null),e([u()],x.prototype,\"_extent\",void 0),e([u({readOnly:!0})],x.prototype,\"extent\",null),e([u({readOnly:!0})],x.prototype,\"requiredPropertiesForEditing\",null),x=e([m(\"esri.analysis.ViewshedAnalysis\")],x);const w=x;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../analysis/Viewshed.js\";import s from\"../analysis/ViewshedAnalysis.js\";import t from\"../core/Collection.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{watch as i,syncAndInitial as a}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as l}from\"../core/accessorSupport/decorators/writer.js\";import c from\"./Layer.js\";import{OperationalLayer as d}from\"./mixins/OperationalLayer.js\";let y=class extends(d(o(c))){constructor(e){super(e),this.type=\"viewshed\",this.operationalLayerType=\"ViewshedLayer\",this.source=new s,this.opacity=1}initialize(){this.addHandles(i((()=>this.source),((e,r)=>{null!=r&&r.parent===this&&(r.parent=null),null!=e&&(e.parent=this)}),a))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new s)}get analysis(){return this.source}set analysis(e){this.source=e}get viewsheds(){return this.source.viewsheds}set viewsheds(e){this.source.viewsheds=e}writeViewsheds(e,r,s,t){r.viewsheds=e.filter((e=>e.isValid())).map((e=>e.toJSON(t))).toJSON()}};e([p({json:{read:!1},readOnly:!0})],y.prototype,\"type\",void 0),e([p({type:[\"ViewshedLayer\"]})],y.prototype,\"operationalLayerType\",void 0),e([p({type:s,nonNullable:!0})],y.prototype,\"source\",void 0),e([p({readOnly:!0})],y.prototype,\"spatialReference\",null),e([p({readOnly:!0})],y.prototype,\"fullExtent\",null),e([p({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],y.prototype,\"opacity\",void 0),e([p({type:[\"show\",\"hide\"]})],y.prototype,\"listMode\",void 0),e([p({type:t.ofType(r),json:{write:{ignoreOrigin:!0},origins:{\"web-scene\":{write:{ignoreOrigin:!0}}}}})],y.prototype,\"viewsheds\",null),e([l(\"web-scene\",\"viewsheds\")],y.prototype,\"writeViewsheds\",null),y=e([n(\"esri.layers.ViewshedLayer\")],y);const u=y;export{u as default};\n"],"names":["n","constructor","t","this","min","max","range","normalize","arguments","length","undefined","o","i","clamp","monotonic","minimalMonotonic","center","diff","shortestSignedDiff","Math","abs","contains","r","s","a","ceil","PI","u","JSONSupportMixin","e","super","observer","farDistance","heading","tilt","horizontalFieldOfView","verticalFieldOfView","feature","isValid","equals","l","type","m","json","write","isRequired","prototype","Number","nonNullable","c","read","p","d","f","ofType","x","_extent","initialize","addHandles","_computeExtent","pending","extent","viewsheds","_get","_set","spatialReference","requiredPropertiesForEditing","items","map","_ref","waitComputeExtent","filter","toArray","h","geometries","at","_computeViewshedExtent","reduce","union","y","metersPerUnit","fromPoint","cos","xmax","xmin","ymax","ymin","w","z","isGeographic","g","v","zmax","zmin","clear","removeAll","sin","cast","readOnly","operationalLayerType","source","opacity","parent","load","addResolvingPromise","fullExtent","releaseAnalysis","analysis","writeViewsheds","toJSON","origins","service","ignoreOrigin"],"sourceRoot":""}