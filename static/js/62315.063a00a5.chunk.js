"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[62315],{1900:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(50076),r=n(42553),l=n(76460),s=n(87663),o=n(64920),a=n(53430),u=n(36693),d=n(67478),c=n(24241);const p=new Map;class m{static fromJSON(e){return new m(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new m(e.fields??[],g(e))}static fromLayerJSON(e){return new m(e.fields??[],g(e))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const n=[];for(const i of this.fields){const e=i?.name,t=f(e);if(e&&t){const r=y(e);this._fieldsMap.set(e,i),this._fieldsMap.set(r,i),this._normalizedFieldsMap.set(t,i),n.push(`${r}:${i.type}:${this._timeZoneByFieldName?.get(e)}`),(0,a.vE)(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):(0,a.WA)(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),(0,a.te)(i)||(0,a.Xz)(i)||(i.editable=null==i.editable||!!i.editable,i.nullable=null==i.nullable||!!i.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,a.te)(e)||(0,a.Xz)(e)||e.nullable||void 0!==(0,a.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(y(e))??this._normalizedFieldsMap.get(f(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(l.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new i.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.n$):h.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?o.GB.instance:t===u.n$?c.mQ.utcInstance:(0,s.tE)(p,t,(()=>c.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,a.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>r.A.isSerializable(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function y(e){return e.trim().toLowerCase()}function f(e){return(0,a.rS)(e)?.toLowerCase()??""}const h=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function g(e){const t=new Map;if(!e.fields)return t;const n=!0===e.datesInUnknownTimezone,{timeInfo:i,editFieldsInfo:r}=e,l=(i?"startField"in i?i.startField:i.startTimeField:"")??"",s=(i?"endField"in i?i.endField:i.endTimeField:"")??"",o=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,d.ZS)(e.dateFieldsTimeReference):null,a=r?function(e){return"timeZone"in e}(r)?r.timeZone??o:r.dateFieldsTimeReference?(0,d.ZS)(r.dateFieldsTimeReference):o??u.n$:null,c=i?function(e){return"timeZone"in e}(i)?i.timeZone??o:i.timeReference?(0,d.ZS)(i.timeReference):o:null,p=new Map([[y(r?.creationDateField??""),a],[y(r?.editDateField??""),a],[y(l),c],[y(s),c]]);for(const{name:d,type:m}of e.fields)if(h.has(m))t.set(d,u.L5);else if("date"!==m&&"esriFieldTypeDate"!==m)t.set(d,null);else if(n)t.set(d,u.L5);else{const e=p.get(y(d??""))??o;t.set(d,e)}return t}},6127:(e,t,n)=>{n.d(t,{m:()=>i});const i=new(n(45802).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},32173:(e,t,n)=>{n.d(t,{A:()=>u});var i,r=n(35143),l=(n(76460),n(81806),n(47249),n(50076),n(6409)),s=n(85842),o=n(44631);let a=i=class extends o.A{constructor(e){super(e),this.type="inherited"}clone(){return new i}};(0,r._)([(0,l.e)({inherited:"inherited"})],a.prototype,"type",void 0),a=i=(0,r._)([(0,s.$)("esri.layers.support.InheritedDomain")],a);const u=a},44135:(e,t,n)=>{n.d(t,{A:()=>h});var i,r=n(35143),l=n(45802),s=n(42553),o=n(46053),a=n(40565),u=(n(81806),n(47249),n(6409)),d=n(28379),c=n(85842),p=n(76866),m=n(6127);const y=new l.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let f=i=class extends s.A{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,t){let{description:n}=t,i=null;try{i=n?JSON.parse(n):null}catch(r){}return i?.value??null}readValueType(e,t){let{description:n}=t,i=null;try{i=n?JSON.parse(n):null}catch(r){}return i?y.fromJSON(i.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],f.prototype,"alias",void 0),(0,r._)([(0,o.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],f.prototype,"defaultValue",void 0),(0,r._)([(0,o.MZ)()],f.prototype,"description",void 0),(0,r._)([(0,d.w)("description")],f.prototype,"readDescription",null),(0,r._)([(0,o.MZ)({types:p.gK,json:{read:{reader:p.rS},write:!0}})],f.prototype,"domain",void 0),(0,r._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"editable",void 0),(0,r._)([(0,o.MZ)({type:a.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],f.prototype,"length",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,r._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"nullable",void 0),(0,r._)([(0,u.e)(m.m)],f.prototype,"type",void 0),(0,r._)([(0,o.MZ)()],f.prototype,"valueType",void 0),(0,r._)([(0,d.w)("valueType",["description"])],f.prototype,"readValueType",null),(0,r._)([(0,o.MZ)({type:Boolean,json:{read:!1}})],f.prototype,"visible",void 0),f=i=(0,r._)([(0,c.$)("esri.layers.support.Field")],f);const h=f},44631:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(35143),r=n(45802),l=n(42553),s=n(46053),o=(n(81806),n(76460),n(47249),n(6409)),a=n(85842);const u=new r.J({inherited:"inherited",codedValue:"coded-value",range:"range"});let d=class extends l.A{constructor(e){super(e),this.name=null,this.type=null}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,o.e)(u),(0,s.MZ)({json:{write:{isRequired:!0}}})],d.prototype,"type",void 0),d=(0,i._)([(0,a.$)("esri.layers.support.Domain")],d);const c=d},49723:(e,t,n)=>{n.d(t,{AG:()=>o,lk:()=>r,vD:()=>s,yS:()=>l});const i="randomUUID"in crypto;function r(){if(i)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function l(){return`{${r().toUpperCase()}}`}function s(){return`{${r()}}`}function o(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}},50654:(e,t,n)=>{n.d(t,{A:()=>d});var i,r=n(35143),l=n(46053),s=(n(81806),n(76460),n(47249),n(6409)),o=n(85842),a=n(44631);let u=i=class extends a.A{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,r._)([(0,l.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]},isRequired:!0}}})],u.prototype,"maxValue",void 0),(0,r._)([(0,l.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]},isRequired:!0}}})],u.prototype,"minValue",void 0),(0,r._)([(0,s.e)({range:"range"})],u.prototype,"type",void 0),u=i=(0,r._)([(0,o.$)("esri.layers.support.RangeDomain")],u);const d=u},72599:(e,t,n)=>{n.d(t,{A:()=>p});var i,r=n(35143),l=n(53084),s=n(46053),o=(n(81806),n(76460),n(6409)),a=n(85842),u=n(92115),d=n(44631);let c=i=class extends d.A{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new i({codedValues:(0,l.o8)(this.codedValues),name:this.name})}};(0,r._)([(0,s.MZ)({type:[u.H],json:{write:{isRequired:!0}}})],c.prototype,"codedValues",void 0),(0,r._)([(0,o.e)({codedValue:"coded-value"})],c.prototype,"type",void 0),c=i=(0,r._)([(0,a.$)("esri.layers.support.CodedValueDomain")],c);const p=c},72940:(e,t,n)=>{n.r(t),n.d(t,{Dictionary:()=>s.A,Voxel:()=>y,arcade:()=>i.h,arcadeFeature:()=>o.A,convertFeatureLayerToFeatureSet:()=>k,convertJsonToArcade:()=>P,convertMapToFeatureSetCollection:()=>z,convertServiceUrlToWorkspace:()=>j,createExecContext:()=>M,createFeature:()=>V,createFunction:()=>Z,createSyntaxTree:()=>x,dependsOnView:()=>C,enableFeatureSetOperations:()=>B,enableGeometryOperations:()=>E,evalSyntaxTree:()=>O,executeAsyncFunction:()=>N,executeFunction:()=>$,extractFieldNames:()=>R,getArcadeType:()=>A,getViewInfo:()=>L,hasGeometryFunctions:()=>X,hasGeometryOperations:()=>H,hasVariable:()=>J,loadScriptDependencies:()=>q,updateExecContext:()=>D});var i=n(69175),r=n(46405),l=n(66240),s=n(67253),o=n(48015),a=n(43036),u=n(9861),d=n(98264),c=n(85632);const p="Voxel.Position",m="Voxel.LocalTime";class y{constructor(e,t){this._graphic=e,this._timeZone=t,this.arcadeDeclaredClass="esri.arcade.Voxel",this._layer=e.layer}getPosition(){return void 0!==this._position?this._position:this._position=function(e){const t=e.getAttribute(p);if("string"!=typeof t)throw new u.D$(null,u.TX.InvalidParameter,null);const n=JSON.parse(t);if(!Array.isArray(n)||"number"!=typeof n[0]||"number"!=typeof n[1]||"number"!=typeof n[2])throw new u.D$(null,u.TX.InvalidParameter,null);return new d.A(n)}(this._graphic)}getLocalTime(){return void 0!==this._localTime?this._localTime:this._localTime=function(e,t){const n=e.getAttribute(m);if(null==n)return null;if(!(0,c.$P)(n))throw new u.D$(null,u.TX.InvalidParameter,null);return r.lY.dateJSAndZoneToArcadeDate(n,t)}(this._graphic,this._timeZone??"system")}keys(){return this._layer.fields.map((e=>e.name)).sort()}hasField(e){return this._layer.fieldsIndex.has(e)}field(e){const t=this._layer.fieldsIndex?.get(e)?.name;if(null==t)throw new u.D$(null,u.TX.FieldNotFound,null,{key:e});switch(t){case p:return this.getPosition();case m:return this.getLocalTime()}return this._graphic.attributes[t]??null}castToText(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={...this._graphic.attributes};t[p]=this.getPosition(),m in t&&(t[m]=this.getLocalTime());for(const n of Object.keys(t))this._layer.fieldsIndex?.has(n)||delete t[n];return(0,a.c)(t,{useNumbersForDates:e})}}var f=n(53084),h=n(16503),g=n(14902),v=n(76797),F=n(66388),T=n(19247),w=n(65215),_=n(23701);const S={vars:{$feature:"any",$view:"any"},spatialReference:null};function b(e){return e.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function A(e){return null==e?null:(0,c.cy)(e)||(0,a.m)(e)?"array":(0,a.g)(e)?"date":(0,c.Kg)(e)?"text":(0,c.Lm)(e)?"boolean":(0,c.Et)(e)?"number":e instanceof s.A?"dictionary":(0,a.n)(e)?"feature":e instanceof T.A?"point":e instanceof w.A?"polygon":e instanceof _.A?"polyline":e instanceof F.A?"multipoint":e instanceof v.A?"extent":e instanceof h.n?"dateOnly":e instanceof g.k?"time":(0,a.p)(e)?"featureSet":(0,a.o)(e)?"featureSetCollection":null}function x(e){if(!e)return null;try{return(0,i.p)(e)}catch(t){}return null}function Z(e,t){const n="string"==typeof e?x(e):e;if(!n)return null;try{return t=t||(0,f.o8)(S),(0,i.c)(n,t)}catch(r){}return null}function M(e,t,n){return{vars:{$feature:null==e?new o.A:o.A.createFromGraphic(e,n),$view:t?.view},spatialReference:t?.sr,timeZone:n??null}}function V(e,t,n){return o.A.createFromGraphicLikeObject(t,e,n,null)}function D(e,t){null!=e.vars&&(e.vars.$feature=t)}function O(e,t){let n;try{n=(0,i.e)(e,t)}catch(r){n=null}return n}function $(e,t){let n;try{n=e?e(t):null}catch(i){n=null}return n}function N(e,t){try{return e?e(t):Promise.resolve(null)}catch(n){return Promise.resolve(null)}}const I=new Set(["$feature","$aggregatedFeatures","$voxel"].map((e=>(0,l.X)(e))));function R(e,t){if(!e)return[];const n="string"==typeof e?x(e):e;if(!n)return[];const r=(0,i.a)(n).filter((e=>{let{varId:t}=e;return I.has(t)})).map((e=>{let{memberNamePattern:t}=e;return t})).flatMap((e=>{if(e.includes("*")){if(null==t)return[];const n=new RegExp(`^${e.split(/\*+/).map(b).join(".*")}$`,"i");return t.filter((e=>n.test(e)))}return e.toLowerCase()}));return[...new Set(r.sort())]}function C(e){return(0,i.r)(e,"$view")}function J(e,t){return!!e&&(0,i.r)(e,t)}function L(e){if(!e||null==e.spatialReference&&(null==e.scale||null==e.viewingMode))return;let t,n;const{timeProperties:i,timeZone:l}=e;if(null!=i){const{currentStart:e,currentEnd:s}=i;null!=l?(t=null!=e?r.lY.dateJSAndZoneToArcadeDate(e,l):null,n=null!=s?r.lY.dateJSAndZoneToArcadeDate(s,l):null):(t=null!=e?r.lY.dateJSToArcadeDate(e):null,n=null!=s?r.lY.dateJSToArcadeDate(s):null)}return{view:e.viewingMode&&null!=e.scale?new s.A({viewingMode:e.viewingMode,scale:e.scale,timeProperties:null!=t||null!=n?new s.A({currentStart:t,currentEnd:n,startIncluded:!0,endIncluded:!0}):null}):null,sr:e.spatialReference}}function j(e){let{url:t,spatialReference:n,lrucache:r,interceptor:l}=e;const s=(0,i.f)();return s?s.createFeatureSetCollectionFromService(t,n,r,l):null}function k(e){let{layer:t,spatialReference:n,outFields:r,returnGeometry:l,lrucache:s,interceptor:o}=e;if(null===t)return null;const a=(0,i.f)();return a?a.constructFeatureSet(t,n,r,l??!0,s,o):null}function z(e){if(null===e?.map)return null;const t=(0,i.f)();return t?t.createFeatureSetCollectionFromMap(e.map,e.spatialReference,e.lrucache,e.interceptor):null}function P(e,t){return s.A.convertJsonToArcade(e,t)}function q(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0,i.l)(e,t,n)}function E(){return(0,i.b)()}function B(){return(0,i.d)()}function G(e,t){if(!e)return!1;if("string"==typeof e)return t(e);const n=e;if(function(e){return"type"in e&&("class-breaks"===e.type||"dictionary"===e.type||"dot-density"===e.type||"pie-chart"===e.type||"simple"===e.type||"unique-value"===e.type)}(n)){if("dot-density"===n.type){const e=n.attributes?.some((e=>t(e.valueExpression)));if(e)return e}const e=n.visualVariables,i=!!e&&e.some((e=>{let n=t(e.valueExpression);return"size"===e.type&&(K(e.minSize)&&(n=n||t(e.minSize.valueExpression)),K(e.maxSize)&&(n=n||t(e.maxSize.valueExpression))),n}));return!(!("valueExpression"in n)||!t(n.valueExpression))||i}if(function(e){return"esri.layers.support.LabelClass"===e.declaredClass}(n)){const e=n.labelExpressionInfo?.expression;return!(!e||!t(e))||!1}return!!function(e){return"esri.PopupTemplate"===e.declaredClass}(n)&&(!!n.expressionInfos&&n.expressionInfos.some((e=>t(e.expression)))||Array.isArray(n.content)&&n.content.some((e=>"expression"===e.type&&t(e.expressionInfo?.expression))))}function U(e){const t=x(e);return!!t&&(0,i.s)(t)}function X(e){return G(e,U)}function Y(e){const t=x(e);return!!t&&(0,i.g)(t)}function H(e){return G(e,Y)}function K(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}},76866:(e,t,n)=>{n.d(t,{gK:()=>o,rS:()=>a});n(81806);var i=n(72599),r=n(44631),l=n(32173),s=n(50654);const o={key:"type",base:r.A,typeMap:{range:s.A,"coded-value":i.A,inherited:l.A}};function a(e){if(!e?.type)return null;switch(e.type){case"range":return s.A.fromJSON(e);case"codedValue":return i.A.fromJSON(e);case"inherited":return l.A.fromJSON(e)}return null}},92115:(e,t,n)=>{n.d(t,{H:()=>a});var i,r=n(35143),l=n(42553),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842));let a=i=class extends l.A{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};(0,r._)([(0,s.MZ)({type:String,json:{write:{isRequired:!0}}})],a.prototype,"name",void 0),(0,r._)([(0,s.MZ)({type:[String,Number],json:{write:{isRequired:!0}}})],a.prototype,"code",void 0),a=i=(0,r._)([(0,o.$)("esri.layers.support.CodedValue")],a)}}]);
//# sourceMappingURL=62315.063a00a5.chunk.js.map