"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[2630],{17555:(e,t,i)=>{i.d(t,{O:()=>n});var r=i(86560);const n=()=>r.A.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches},22098:(e,t,i)=>{i.d(t,{F:()=>l});var r=i(35143),n=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),s=i(37159),a=i(65240);let l=class extends((0,a.B)(s.w)){constructor(e){super(e),this.type="move-point",this.allFields.forEach((e=>{e.lockable=!1,e.setActual(null)}))}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,r._)([(0,n.MZ)()],l.prototype,"allFields",null),l=(0,r._)([(0,o.$)("esri.views.interactive.tooltip.infos.MovePointTooltipInfo")],l)},24355:(e,t,i)=>{i.d(t,{M:()=>l});var r=i(35143),n=i(24648),o=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),a=i(37159);let l=class extends a.w{constructor(e){super(e),this.type="translate",this.distance=n.r7}clear(){this.distance=n.r7}};(0,r._)([(0,o.MZ)()],l.prototype,"type",void 0),(0,r._)([(0,o.MZ)()],l.prototype,"distance",void 0),l=(0,r._)([(0,s.$)("esri.views.interactive.tooltip.infos.TranslateTooltipInfo")],l)},38983:(e,t,i)=>{function r(e,t,i){i=i||2;var r,o,a,l,h,c,d,y=t&&t.length,v=y?t[0]*i:e.length,u=n(e,0,v,i,!0),m=[];if(!u||u.next===u.prev)return m;if(y&&(u=p(e,t,u,i)),e.length>80*i){r=a=e[0],o=l=e[1];for(var x=i;x<v;x+=i)(h=e[x])<r&&(r=h),(c=e[x+1])<o&&(o=c),h>a&&(a=h),c>l&&(l=c);d=0!==(d=Math.max(a-r,l-o))?1/d:0}return s(u,m,i,r,o,d),m}function n(e,t,i,r,n){var o,s;if(n===O(e,t,i,r)>0)for(o=t;o<i;o+=r)s=C(o,e[o],e[o+1],s);else for(o=i-r;o>=t;o-=r)s=C(o,e[o],e[o+1],s);if(s&&w(s,s.next)){var a=s.next;I(s),s=a}return s}function o(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!w(r,r.next)&&0!==M(r.prev,r,r.next))r=r.next;else{var n=r.prev;if(I(r),(r=t=n)===r.next)break;i=!0}}while(i||r!==t);return t}function s(e,t,i,r,n,p,d){if(e){!d&&p&&m(e,r,n,p);for(var y,v,u=e;e.prev!==e.next;)if(y=e.prev,v=e.next,p?l(e,r,n,p):a(e))t.push(y.i/i),t.push(e.i/i),t.push(v.i/i),I(e),e=v.next,u=v.next;else if((e=v)===u){d?1===d?s(e=h(o(e),t,i),t,i,r,n,p,2):2===d&&c(e,t,i,r,n,p):s(o(e),t,i,r,n,p,1);break}}}function a(e){var t=e.prev,i=e,r=e.next;if(M(t,i,r)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(f(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&M(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function l(e,t,i,r){var n=e.prev,o=e,s=e.next;if(M(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,l=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,h=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,c=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,p=x(a,l,t,i,r),d=x(h,c,t,i,r),y=e.prevZ,v=e.nextZ;y&&y.z>=p&&v&&v.z<=d;){if(y!==e.prev&&y!==e.next&&f(n.x,n.y,o.x,o.y,s.x,s.y,y.x,y.y)&&M(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,v!==e.prev&&v!==e.next&&f(n.x,n.y,o.x,o.y,s.x,s.y,v.x,v.y)&&M(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;y&&y.z>=p;){if(y!==e.prev&&y!==e.next&&f(n.x,n.y,o.x,o.y,s.x,s.y,y.x,y.y)&&M(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;v&&v.z<=d;){if(v!==e.prev&&v!==e.next&&f(n.x,n.y,o.x,o.y,s.x,s.y,v.x,v.y)&&M(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function h(e,t,i){var r=e;do{var n=r.prev,s=r.next.next;!w(n,s)&&b(n,r,r.next,s)&&V(n,s)&&V(s,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(s.i/i),I(r),I(r.next),r=e=s),r=r.next}while(r!==e);return o(r)}function c(e,t,i,r,n,a){var l=e;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&_(l,h)){var c=A(l,h);return l=o(l,l.next),c=o(c,c.next),s(l,t,i,r,n,a),void s(c,t,i,r,n,a)}h=h.next}l=l.next}while(l!==e)}function p(e,t,i,r){var s,a,l,h=[];for(s=0,a=t.length;s<a;s++)(l=n(e,t[s]*r,s<a-1?t[s+1]*r:e.length,r,!1))===l.next&&(l.steiner=!0),h.push(g(l));for(h.sort(d),s=0;s<h.length;s++)i=o(i=v(h[s],i),i.next);return i}function d(e,t){return e.x-t.x}function y(e){if(e.next.prev===e)return e;let t=e;for(;;){const i=t.next;if(i.prev===t||i===t||i===e)break;t=i}return t}function v(e,t){var i=function(e,t){var i,r=t,n=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===s)return i;var l,h=i,c=i.x,p=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=c&&n!==r.x&&f(o<p?n:s,o,c,p,o<p?s:n,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(n-r.x),V(r,e)&&(l<d||l===d&&(r.x>i.x||r.x===i.x&&u(i,r)))&&(i=r,d=l)),r=r.next}while(r!==h);return i}(e,t);if(!i)return t;var r=A(i,e),n=o(i,i.next);let s=y(r);return o(s,s.next),n=y(n),y(t===i?n:t)}function u(e,t){return M(e.prev,e,t.prev)<0&&M(t.next,e,e.next)<0}function m(e,t,i,r){var n=e;do{null===n.z&&(n.z=x(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,r,n,o,s,a,l,h=1;do{for(i=e,e=null,o=null,s=0;i;){for(s++,r=i,a=0,t=0;t<h&&(a++,r=r.nextZ);t++);for(l=h;a>0||l>0&&r;)0!==a&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,l--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;i=r}o.nextZ=null,h*=2}while(s>1)}(n)}function x(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function g(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function f(e,t,i,r,n,o,s,a){return(n-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(i-s)*(t-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0}function _(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&b(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(V(e,t)&&V(t,e)&&function(e,t){var i=e,r=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(M(e.prev,e,t.prev)||M(e,t.prev,t))||w(e,t)&&M(e.prev,e,e.next)>0&&M(t.prev,t,t.next)>0)}function M(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,i,r){var n=S(M(e,t,i)),o=S(M(e,t,r)),s=S(M(i,r,e)),a=S(M(i,r,t));return n!==o&&s!==a||!(0!==n||!G(e,i,t))||!(0!==o||!G(e,r,t))||!(0!==s||!G(i,e,r))||!(0!==a||!G(i,t,r))}function G(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function S(e){return e>0?1:e<0?-1:0}function V(e,t){return M(e.prev,e,e.next)<0?M(e,t,e.next)>=0&&M(e,e.prev,t)>=0:M(e,t,e.prev)<0||M(e,e.next,t)<0}function A(e,t){var i=new k(e.i,e.x,e.y),r=new k(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function C(e,t,i,r){var n=new k(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function I(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,i,r){for(var n=0,o=t,s=i-r;o<i;o+=r)n+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return n}i.d(t,{e:()=>r}),r.deviation=function(e,t,i,r){var n=t&&t.length,o=n?t[0]*i:e.length,s=Math.abs(O(e,0,o,i));if(n)for(var a=0,l=t.length;a<l;a++){var h=t[a]*i,c=a<l-1?t[a+1]*i:e.length;s-=Math.abs(O(e,h,c,i))}var p=0;for(a=0;a<r.length;a+=3){var d=r[a]*i,y=r[a+1]*i,v=r[a+2]*i;p+=Math.abs((e[d]-e[v])*(e[y+1]-e[d+1])-(e[d]-e[y])*(e[v+1]-e[d+1]))}return 0===s&&0===p?0:Math.abs((p-s)/s)},r.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)for(var s=0;s<t;s++)i.vertices.push(e[n][o][s]);n>0&&(r+=e[n-1].length,i.holes.push(r))}return i}},39034:(e,t,i)=>{i.d(t,{d:()=>h});var r=i(35143),n=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),s=i(5512),a=i(37159),l=i(65240);let h=class extends((0,l.B)(a.w)){constructor(e){super(e),this.type="selected-vertex",this.area=(0,s.Am)(),this.totalLength=(0,s.fr)(),this.geometryType="polyline",this.allFields.forEach((e=>{e.lockable=!1,e.setActual(null)}))}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,"polygon"===this.geometryType?this.area:this.totalLength]}};(0,r._)([(0,n.MZ)()],h.prototype,"geometryType",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"allFields",null),h=(0,r._)([(0,o.$)("esri.views.interactive.tooltip.infos.SelectedVertexTooltipInfo")],h)},53181:(e,t,i)=>{i.d(t,{J:()=>_});var r=i(39356),n=i(54901),o=i(76931),s=i(40565),a=i(19555),l=i(72745),h=i(9392),c=i(19247),p=i(23701),d=i(13312),y=i(89465),v=i(7246),u=i(76940),m=i(28808),x=i(23862),g=i(63078),f=i(14727);class _ extends f.b{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new c.A({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol("intersectionPoint",t.view.effectiveTheme.accentColor))}visualizePoint(e,t){return this._visualizeSnappingIndicator(new c.A({x:e.point[0],y:e.point[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol("point",t.view.effectiveTheme.accentColor))}visualizeLine(e,t){return this._visualizeSnappingIndicator(new p.A({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:(0,s.PZ)(d.A,t.spatialReference)}),this._getOrCreateSymbol("line",t.view.effectiveTheme.accentColor))}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new p.A({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:(0,s.PZ)(d.A,t.spatialReference)}),this._getOrCreateSymbol("parallelSign",t.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(e,t){const i=(0,l.vt)(),r=(0,l.vt)(),n=(0,h.vt)();(0,a.Re)(i,(0,x.Xz)(e.centerVertex),(0,x.Xz)(e.previousVertex)),(0,a.Re)(r,(0,x.Xz)(e.nextVertex),(0,x.Xz)(e.previousVertex)),(0,a.$A)(n,i,r);const o="rightAngleQuad"+(n[2]<0?45:225);return this._visualizeSnappingIndicator(new p.A({paths:[[[...e.previousVertex],[...e.centerVertex],[...e.nextVertex]]],spatialReference:(0,s.PZ)(d.A,t.spatialReference)}),this._getOrCreateSymbol(o,t.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(e,t){const i=new r.A({geometry:e,symbol:t});return this._graphicsLayer.add(i),(0,n.hA)((()=>{this._graphicsLayer.remove(i)}))}_getOrCreateSymbol(e,t){const i=this._symbolPairingsByType;return i.get(e)?.color!==t&&i.set(e,{color:t,symbol:M(e,t)}),i.get(e).symbol}}function M(e,t){const i=[...t.toRgb(),255*t.a];switch(e){case"point":return new u.A({outline:{width:.5,color:[0,0,0,1]},size:10,color:t});case"intersectionPoint":return new u.A({outline:new v.A({width:1.5,color:t}),size:15,color:[0,0,0,0]});case"line":return new y.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:m.uT.Butt,joinStyle:m.wd.Round,miterLimit:10,width:(0,o.PN)(g.N.lineHintWidthTarget),color:i}]}}});case"parallelSign":return new y.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case"rightAngleQuad45":case"rightAngleQuad225":{const r="rightAngleQuad45"===e?45:225;return new y.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,o.PN)(g.N.rightAngleHintSize),rotation:r,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,o.PN)(g.N.rightAngleHintOutlineSize),color:i},{type:"CIMSolidFill",enable:!0,color:[...t.toRgb(),255*t.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}},60008:(e,t,i)=>{i.d(t,{A6:()=>m,B8:()=>y,Xd:()=>c,Xr:()=>v,Yc:()=>O,hZ:()=>g,lw:()=>p,t2:()=>I,x8:()=>h});var r=i(44680),n=i(4336),o=i(9392),s=i(53494),a=i(20664),l=i(43047);function h(e,t,i){i*=.5;const r=Math.sin(i);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(i),e}function c(e,t){const i=2*Math.acos(t[3]),r=Math.sin(i/2);return r>(0,s.FD)()?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),i}function p(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=i[0],l=i[1],h=i[2],c=i[3];return e[0]=r*c+s*a+n*h-o*l,e[1]=n*c+s*l+o*a-r*h,e[2]=o*c+s*h+r*l-n*a,e[3]=s*c-r*a-n*l-o*h,e}function d(e,t,i,r){const n=t[0],o=t[1],a=t[2],l=t[3];let h,c,p,d,y,v=i[0],u=i[1],m=i[2],x=i[3];return c=n*v+o*u+a*m+l*x,c<0&&(c=-c,v=-v,u=-u,m=-m,x=-x),1-c>(0,s.FD)()?(h=Math.acos(c),p=Math.sin(h),d=Math.sin((1-r)*h)/p,y=Math.sin(r*h)/p):(d=1-r,y=r),e[0]=d*n+y*v,e[1]=d*o+y*u,e[2]=d*a+y*m,e[3]=d*l+y*x,e}function y(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=i*i+r*r+n*n+o*o,a=s?1/s:0;return e[0]=-i*a,e[1]=-r*a,e[2]=-n*a,e[3]=o*a,e}function v(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function u(e,t){const i=t[0]+t[4]+t[8];let r;if(i>0)r=Math.sqrt(i+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);const n=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*n+n]-t[3*o+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*n+o]-t[3*o+n])*r,e[n]=(t[3*n+i]+t[3*i+n])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e}function m(e,t,i,r){const n=.5*Math.PI/180;t*=n,i*=n,r*=n;const o=Math.sin(t),s=Math.cos(t),a=Math.sin(i),l=Math.cos(i),h=Math.sin(r),c=Math.cos(r);return e[0]=o*l*c-s*a*h,e[1]=s*a*c+o*l*h,e[2]=s*l*h-o*a*c,e[3]=s*l*c+o*a*h,e}const x=l.c,g=l.s,f=l.g,_=p,M=l.b,w=l.h,b=l.l,G=l.j,S=G,V=l.f,A=V,C=l.n,I=l.a,k=l.e;function O(e,t,i){const r=(0,a.f)(t,i);return r<-.999999?((0,a.e)(T,E,t),(0,a.H)(T)<1e-6&&(0,a.e)(T,Z,t),(0,a.n)(T,T),h(e,T,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,a.e)(T,t,i),e[0]=T[0],e[1]=T[1],e[2]=T[2],e[3]=1+r,C(e,e))}const T=(0,o.vt)(),E=(0,o.fA)(1,0,0),Z=(0,o.fA)(0,1,0);const P=(0,n.vt)(),R=(0,n.vt)();const z=(0,r.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:f,calculateW:function(e,t){const i=t[0],r=t[1],n=t[2];return e[0]=i,e[1]=r,e[2]=n,e[3]=Math.sqrt(Math.abs(1-i*i-r*r-n*n)),e},conjugate:v,copy:x,dot:w,equals:k,exactEquals:I,fromEuler:m,fromMat3:u,getAxisAngle:c,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:y,len:S,length:G,lerp:b,mul:_,multiply:p,normalize:C,random:function(e){const t=s.Ov,i=t(),r=t(),n=t(),o=Math.sqrt(1-i),a=Math.sqrt(i);return e[0]=o*Math.sin(2*Math.PI*r),e[1]=o*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*n),e[3]=a*Math.cos(2*Math.PI*n),e},rotateX:function(e,t,i){i*=.5;const r=t[0],n=t[1],o=t[2],s=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=r*l+s*a,e[1]=n*l+o*a,e[2]=o*l-n*a,e[3]=s*l-r*a,e},rotateY:function(e,t,i){i*=.5;const r=t[0],n=t[1],o=t[2],s=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=r*l-o*a,e[1]=n*l+s*a,e[2]=o*l+r*a,e[3]=s*l-n*a,e},rotateZ:function(e,t,i){i*=.5;const r=t[0],n=t[1],o=t[2],s=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=r*l+n*a,e[1]=n*l-r*a,e[2]=o*l+s*a,e[3]=s*l-o*a,e},rotationTo:O,scale:M,set:g,setAxes:function(e,t,i,r){const n=z;return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=r[0],n[4]=r[1],n[7]=r[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],C(e,u(e,n))},setAxisAngle:h,slerp:d,sqlerp:function(e,t,i,r,n,o){return d(P,t,n,o),d(R,i,r,o),d(e,P,R,2*o*(1-o)),e},sqrLen:A,squaredLength:V,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},79103:(e,t,i)=>{i.d(t,{W:()=>p});var r=i(69539);const n={main:new r.A([255,127,0]),selected:new r.A([255,255,255]),outline:new r.A([0,0,0,.5]),selectedOutline:new r.A([255,255,255]),hoverOutline:new r.A([255,255,255]),secondary:new r.A([255,255,255]),secondaryOutline:new r.A([100,100,100]),transparent:new r.A([0,0,0,0])};function o(e,t){Object.assign(e,t)}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=n.main,this.hoverColor=n.main,this.outlineColor=n.outline,this.hoverOutlineColor=n.hoverOutline,o(this,e)}}class a{constructor(e){this.color=n.secondary,this.hoverColor=n.main,o(this,e)}}class l{constructor(e){this.color=n.transparent,this.hoverColor=n.transparent,this.outlineColor=n.main,this.hoverOutlineColor=n.main,this.stagedColor=n.transparent,this.stagedOutlineColor=n.secondary,o(this,e)}}class h{constructor(e){this.vertex=new s,this.midpoint=new s({color:n.secondary,outlineColor:n.secondaryOutline,size:6}),this.selected=new s({color:n.selected,hoverColor:n.selected,hoverOutlineColor:n.hoverOutline}),o(this,e)}}class c{constructor(e){this.center=new s({color:n.secondaryOutline}),this.fill=new l,this.line=new a,this.vertex=new s({color:n.selected,outlineColor:n.main,hoverColor:n.selected,hoverOutlineColor:n.secondaryOutline}),o(this,e)}}const p=new class{constructor(e){this.reshapeGraphics=new h,this.transformGraphics=new c,o(this,e)}}},90648:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ce});var r=i(35143),n=i(39356),o=i(98773),s=i(94643),a=i(50076),l=i(54099),h=i(76460),c=i(30726),p=i(68134),d=i(46053),y=(i(81806),i(47249),i(85842)),v=i(19247),u=i(23701),m=i(5262),x=i(63733),g=i(76940),f=i(64465),_=i(53181),M=i(71523),w=i(61472),b=i(20072),G=i(69120),S=i(54901),V=i(24648),A=i(76931),C=i(10535),I=i(22098),k=i(39034),O=i(24355),T=i(37159);let E=class extends T.w{constructor(e){super(e),this.type="translate-vertex",this.distance=V.r7,this.elevation=null,this.area=null,this.totalLength=null}clear(){this.distance=V.r7,this.elevation=null,this.area=null,this.totalLength=null}};(0,r._)([(0,d.MZ)()],E.prototype,"type",void 0),(0,r._)([(0,d.MZ)()],E.prototype,"distance",void 0),(0,r._)([(0,d.MZ)()],E.prototype,"elevation",void 0),(0,r._)([(0,d.MZ)()],E.prototype,"area",void 0),(0,r._)([(0,d.MZ)()],E.prototype,"totalLength",void 0),E=(0,r._)([(0,y.$)("esri.views.interactive.tooltip.infos.TranslateVertexTooltipInfo")],E);var Z=i(50621),P=i(68655),R=i(29772);function z(e,t){function i(){const e=t(),i=e.sketchOptions.tooltips.effectiveEnabled?e.activeTooltipInfo:null;return{...e,activeTooltipInfo:i}}let r=!1;function n(e){r||(r=!0,e(),r=!1)}return(0,S.vE)([(0,p.wB)((()=>{const e=i();return{context:e,geometry:e.graphic?.geometry,vertexGeometry:e.selectedVertex?.geometry}}),(t=>{let{context:i}=t;n((()=>{(function(e){const t=e.activeTooltipInfo;if(t){switch(t?.type){case"move-point":return function(e,t){let{graphic:i}=t;L(e,i,i?.geometry)}(t,e);case"selected-vertex":return function(e,t){let{graphic:i,selectedVertex:r}=t;L(e,i,r?.geometry);const n=i?.geometry;switch(n?.type){case"polygon":e.geometryType="polygon",e.totalLength.visible=!1,e.area.actual=(0,Z.n)(n);break;case"polyline":e.geometryType="polyline",e.totalLength.actual=(0,P.ob)(n),e.area.visible=!1}}(t,e)}t.sketchOptions=e.sketchOptions}})(i),e.info=i.activeTooltipInfo}))}),p.pc),(0,p.wB)((()=>{const e=i(),{activeTooltipInfo:t}=e;if(t&&"key"in t)return{context:e,key:t.key}}),((e,t)=>{e&&t&&e.key!==t.key&&n((()=>H(e.context)))}),p.OH),(0,C.sZ)(e,{onBeforePaste:()=>{r=!0},onAfterPaste:()=>{H(i()),r=!1}})])}function L(e,t,i){t&&"point"===i?.type&&(e.setLocationFromPoint(i),e.elevation.actual=(0,R.Of)(i),e.elevation.visible=!!t.geometry?.hasZ,e.elevation.readOnly=!1,e.elevation.showAsZ=!0)}function H(e){function t(t,i){const r=i?.geometry;if(!r||"point"!==r.type)return;const{dx:n,dy:o,dz:s}=(0,C.mu)(t,r);if(0===n&&0===o&&0===s)return;const{x:a,y:l,z:h,m:c,spatialReference:p}=r,d=new v.A({x:a+n,y:l+o,z:null!=h?h+s:void 0,m:c,spatialReference:p});e.updateGeometry(i,d,r,n,o)}const{activeTooltipInfo:i,graphic:r,selectedVertex:n}=e;switch(i?.type){case"move-point":return t(i,r);case"selected-vertex":return t(i,n)}}function F(e,t,i){if(!i)return;const{x:r,y:n}=i.origin,o=t.toMap(i),s=t.toMap((0,A.tc)(r,n)),a=(0,P.Kt)(s,o);e.distance=null!=a?a:V.r7}var U=i(79103),D=i(57308),B=i(89238),$=i(82307),q=i(59833),X=i(97513),K=i(13284);class N{constructor(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape-start"}}class j{constructor(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape"}}class Y{constructor(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape-stop"}}class Q{constructor(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move-start"}}class W{constructor(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move"}}class J{constructor(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move-stop"}}class ee{constructor(e){this.added=e,this.type="vertex-select"}}class te{constructor(e){this.removed=e,this.type="vertex-deselect"}}class ie{constructor(e,t,i,r){this.added=e,this.graphic=t,this.oldGraphic=i,this.vertices=r,this.type="vertex-add"}}class re{constructor(e,t,i,r){this.removed=e,this.graphic=t,this.oldGraphic=i,this.vertices=r,this.type="vertex-remove"}}const ne=U.W.reshapeGraphics,oe={vertices:{default:new g.A({style:"circle",size:ne.vertex.size,color:ne.vertex.color,outline:{color:ne.vertex.outlineColor,width:1}}),hover:new g.A({style:"circle",size:ne.vertex.hoverSize,color:ne.vertex.hoverColor,outline:{color:ne.vertex.hoverOutlineColor,width:1}}),selected:new g.A({style:"circle",size:ne.selected.size,color:ne.selected.color,outline:{color:ne.selected.outlineColor,width:1}})},midpoints:{default:new g.A({style:"circle",size:ne.midpoint.size,color:ne.midpoint.color,outline:{color:ne.midpoint.outlineColor,width:1}}),hover:new g.A({style:"circle",size:ne.midpoint.size,color:ne.midpoint.color,outline:{color:ne.midpoint.outlineColor,width:1}})}};let se=class extends l.A.EventedAccessor{constructor(e){super(e),this._updateHandlesOnExternalGeometryChange=null,this._activeOperationInfo=null,this._editGeometryOperations=null,this._graphicAttributes={esriSketchTool:"box"},this._mover=null,this._snappingContext=null,this._snappingGraphicsLayer=null,this._hoverGraphic=null,this._snappingTask=null,this._stagedVertex=null,this.tooltip=null,this.activeTooltipInfo=null,this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.enableMovement=!0,this.enableVertices=!0,this.graphic=null,this.layer=null,this.midpointGraphics=new s.A,this.midpointSymbol=new g.A({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedVertices=new s.A,this.snappingManager=null,this.symbols=oe,this.sketchOptions=new X.A,this.type="reshape",this.vertexGraphics=new s.A,this.view=null}initialize(){const e=this.view;this._highlightHelper=new b.A({view:e}),this._setup(),this._updateHandlesOnExternalGeometryChange=(0,p.C1)((()=>this.graphic?.geometry),(e=>{if(!e)return;const t=new Set(this.selectedVertices.map((e=>e.attributes?.pointIndex)));this._highlightHelper.removeAll(),this._setUpHighlights(),this._setupGraphics(),this._clearSelection(),this.vertexGraphics.filter((e=>t.has(e.attributes.pointIndex))).forEach((e=>this._addToSelection(e)));const{enableMovement:i,_mover:r,graphic:n,midpointGraphics:o,vertexGraphics:s}=this,a=s.concat(o).items;i&&a.push(n),r?.set("graphics",a)}),p.OH),this.tooltip=(0,C.A)((()=>({view:e,options:this.sketchOptions.tooltips}))),this.tooltipInfos=function(e){const t={sketchOptions:e,viewType:"2d"};return{movePoint:new I.F(t),selectedVertex:new k.d(t),translateGraphic:new O.M(t),translateVertices:new E(t)}}(this.sketchOptions),this.addHandles([(0,p.z7)((()=>e?.ready),(()=>{const{layer:e,view:t}=this;(0,G.Y)(t,e),this.addHandles(t.on("key-down",(e=>this._keyDownHandler(e)),D.o.TOOL))}),{once:!0,initial:!0}),(0,p.wB)((()=>this.graphic),(()=>this.refresh())),(0,p.wB)((()=>this.layer),((e,t)=>{t&&(this._clearSelection(),this._resetGraphics(t)),this.refresh()})),(0,p.wB)((()=>this.enableMidpoints),(()=>this.refresh())),z(this.tooltip,(()=>this._tooltipsContext)),(0,p.wB)((()=>this.view.effectiveTheme.accentColor),(()=>this._updateSymbolsForTheme()),p.Vh),this._updateHandlesOnExternalGeometryChange]),this._updateTooltip()}destroy(){this._reset(),this._mover?.destroy(),this._mover=null,this.tooltip=(0,c.pR)(this.tooltip)}get _coordinateHelper(){return this._editGeometryOperations?.data.coordinateHelper??(0,B.BV)(!!this.graphic.geometry?.hasZ,!!this.graphic.geometry?.hasM,this.view.spatialReference)}get _selectedVertex(){return 1===this.selectedVertices.length?this.selectedVertices.at(0):void 0}get _tooltipsContext(){return{sketchOptions:this.sketchOptions,activeTooltipInfo:this.activeTooltipInfo,graphic:this.graphic,selectedVertex:this._selectedVertex,updateGeometry:(e,t,i,r,n)=>{this._setUpGeometryHelper();const o=e===this.graphic;o?this._emitMoveStartEvent(0,0):this._emitReshapeStartEvent(e);if(this._syncGeometryAfterVertexMove(e,t,r,n,!0),o){const{view:e}=this,r=e.toScreen(i),n=e.toScreen(t),o=(n?.x??0)-(r?.x??0),s=(n?.y??0)-(r?.y??0);this._emitMoveEvent(o,s),this._emitMoveStopEvent(o,s)}else this._emitReshapeEvent(e),this._emitReshapeStopEvent(e);this._editGeometryOperations=(0,c.pR)(this._editGeometryOperations)}}}set highlightsEnabled(e){this._highlightHelper?.removeAll(),this._set("highlightsEnabled",e),this._setUpHighlights()}get state(){const e=this.view.ready,t=!(!this.graphic||!this.layer);return e&&t?"active":e?"ready":"disabled"}isUIGraphic(e){const t=[];return this.graphic&&t.push(this.graphic),t.concat(this.vertexGraphics.items,this.midpointGraphics.items),t.length>0&&t.includes(e)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedVertices(){const{selectedVertices:e}=this;e.length&&this._removeVertices(e)}_setup(){const{graphic:e,layer:t}=this;if(!t||null==e?.geometry)return;const i=e.geometry;"mesh"!==i.type&&"extent"!==i.type?("polygon"===i.type&&(0,m.uC)(i),this._setUpHighlights(),this._setupGraphics(),this._setupMover()):this._logGeometryTypeError()}_setUpHighlights(){this.highlightsEnabled&&this.graphic&&this._highlightHelper?.add(this.graphic)}_setUpGeometryHelper(){const e=this.graphic.geometry;if(null==e||"mesh"===e.type||"extent"===e.type)return void this._logGeometryTypeError();const t="multipoint"===e.type?new u.A({paths:[e.points],spatialReference:e.spatialReference}):e;this._editGeometryOperations=q.p.fromGeometry(t,f.RT.Local)}_saveSnappingContextForHandle(e,t){this._snappingGraphicsLayer=new x.default({listMode:"hide",internal:!0,title:"Reshape snapping layer"}),this.view.map.layers.add(this._snappingGraphicsLayer);const i=this._editGeometryOperations;(0,c.Lw)(i),this._snappingContext=new K.e({editGeometryOperations:i,elevationInfo:{mode:"on-the-ground",offset:0},pointer:t.viewEvent?.pointerType||"mouse",excludeFeature:this.graphic,feature:this.graphic,visualizer:new _.J(this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(e)})}_reset(){this._clearSelection(),this._highlightHelper?.removeAll(),this._updateTooltip(),this._resetGraphics(),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}_resetSnappingStateVars(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),null!=this._snappingGraphicsLayer&&(this.view?.map&&this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy()),this._editGeometryOperations=(0,c.pR)(this._editGeometryOperations),this._snappingTask=(0,c.DC)(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null}_resetGraphics(e){this._removeMidpointGraphics(e),this._removeVertexGraphics(e),this.selectedVertices.removeAll(),this._updateTooltip()}_removeMidpointGraphics(e){const t=e||this.layer;t&&t.removeMany(this.midpointGraphics.items),this.midpointGraphics.items.forEach((e=>e.destroy())),this.midpointGraphics.removeAll()}_removeVertexGraphics(e){const t=e||this.layer;t&&t.removeMany(this.vertexGraphics.items),this.vertexGraphics.items.forEach((e=>e.destroy())),this.vertexGraphics.removeAll()}_setupGraphics(){const e=this.graphic.geometry;if(null!=e&&("polyline"===e.type||"polygon"===e.type)){const t=ae(e);this.enableMidpoints&&this._setUpMidpointGraphics(t),this.enableVertices&&this._setUpVertexGraphics(t)}}_setUpMidpointGraphics(e){this._removeMidpointGraphics();const t=this._createMidpointGraphics(e);this.midpointGraphics.addMany(t),this.layer.addMany(t)}_setUpVertexGraphics(e){this._removeVertexGraphics();const t=this._createVertexGraphics(e);this.vertexGraphics.addMany(t),this._storeRelatedVertexIndices(),this.layer.addMany(t)}_createVertexGraphics(e){const{_graphicAttributes:t,symbols:i}=this,r=[];return e?.forEach(((e,o)=>{e.forEach(((e,s)=>{r.push(new n.A({geometry:this._coordinateHelper.arrayToPoint(e),symbol:i?.vertices?.default,attributes:{...t,pathIndex:o,pointIndex:s}}))}))})),r}_createMidpointGraphics(e){const{_graphicAttributes:t,symbols:i}=this,r=[];for(let o=0;o<e.length;o++){const s=e[o];for(let e=0;e<s.length;e++){const a=(e+1)%s.length;if("polyline"===this.graphic.geometry?.type&&0===a)continue;const l=s[e],h=s[a],c=this._getMidpoint(l,h);r.push(new n.A({geometry:c,symbol:i.midpoints.default,attributes:{...t,pathIndex:o,pointIndexStart:e,pointIndexEnd:a}}))}}return r}_updateSymbolsForTheme(){const e=this.view.effectiveTheme.accentColor;this.symbols={vertices:{...this.symbols.vertices,default:this.symbols.vertices.default.clone().set("color",e),hover:this.symbols.vertices.hover?.clone().set("color",e)},midpoints:{...this.symbols.midpoints}};for(const t of this.vertexGraphics)this._isSelected(t)?t.symbol=this.symbols.vertices.selected:this._hoverGraphic===t?t.symbol=this.symbols.vertices.hover:t.symbol=this.symbols.vertices.default}_storeRelatedVertexIndices(){const e=this.vertexGraphics.items;if(!e)return;const t=e.map((e=>{let{geometry:t}=e;return{x:t.x,y:t.y}}));for(let i=0;i<t.length;i++){const r=[];for(let e=0;e<t.length;e++){if(i===e)continue;const n=t[i],o=t[e];n.x===o.x&&n.y===o.y&&r.push(e)}e[i].attributes.relatedGraphicIndices=r}}_setupMover(){const{enableMovement:e,graphic:t,midpointGraphics:i,vertexGraphics:r,view:n}=this,o=r.concat(i).items;e&&o.push(t),this._mover=new w.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,graphics:o,view:n,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})}_onGraphicClickCallback(e){e.viewEvent.stopPropagation();const t=e.graphic;if(t===this.graphic)this.clearSelection(),this.emit("graphic-click",e),this.callbacks.onGraphicClick?.(e);else if(this._isMidpoint(t)){if(2===e.viewEvent.button)return;const i=this.graphic.clone(),r=this._createVertexFromMidpoint(t);this.refresh(),this._emitVertexAddEvent([t],i,r)}else this._isVertex(t)&&(e.viewEvent.stopPropagation(),2===e.viewEvent.button?this._removeVertices(t):(e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(t)?this._removeFromSelection(t,!0):this._addToSelection(t)))}_setUpOperation(e){const{graphic:t,dx:i,dy:r}=e,n=t===this.graphic;this._resetSnappingStateVars(),this._setUpGeometryHelper(),this._saveSnappingContextForHandle(t,e),this._activeOperationInfo={target:this.graphic,mover:t,operationType:n?"move":"reshape",totalDx:i,totalDy:r}}_onGraphicMoveStartCallback(e){const{dx:t,dy:i,graphic:r}=e;if(r===this.graphic){const{geometry:n}=r;return this._setUpOperation(e),this._emitMoveStartEvent(t,i),void(null!=n&&"point"===n.type&&this._onHandleMove(r,t,i,e,(()=>{this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(t,i)})))}if(!this.selectedVertices.includes(r)){if(this._clearSelection(),this._isMidpoint(r)){const e=this.graphic.clone(),t=this._createVertexFromMidpoint(r);this._emitVertexAddEvent([r],e,t)}this._addToSelection(r)}this._setUpOperation(e),this._emitReshapeStartEvent(r),this._onHandleMove(r,t,i,e,(()=>{this._updateTooltip(r,e.viewEvent),this._emitReshapeEvent(r)}))}_onGraphicMoveCallback(e){const t=this._activeOperationInfo;if(!t)return;const{dx:i,dy:r,graphic:n}=e;t.totalDx+=i,t.totalDy+=r;const{operationType:o}=t,{geometry:s}=n;if(null!=s)if("move"!==o)this._onHandleMove(n,i,r,e,(()=>{this._updateTooltip(n,e.viewEvent),this._emitReshapeEvent(n)}));else if("point"===s.type)this._onHandleMove(n,i,r,e,(()=>{this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(i,r)}));else if("polyline"===s.type||"polygon"===s.type){const t=ae(s);this._updateVertexGraphicLocations(t),this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(i,r)}}_onGraphicMoveStopCallback(e){const t=this._activeOperationInfo;if(!t)return;const{dx:i,dy:r,graphic:n}=e,{operationType:o}=t;t.totalDx+=i,t.totalDy+=r,this._onHandleMove(n,i,r,e,(()=>"move"===o?this._emitMoveStopEvent():this._emitReshapeStopEvent(n))),this._isMidpoint(n)?this.refresh():(this._updateTooltip(this._isVertex(n)?n:null),this._resetSnappingStateVars(),this._activeOperationInfo=null)}_updateVertexGraphicLocations(e){const{_coordinateHelper:t}=this;for(const i of this.vertexGraphics){const{pathIndex:r,pointIndex:n}=i.attributes;i.geometry=t.arrayToPoint(e[r][n])}this._updateMidpointGraphicLocations(e)}_updateMidpointGraphicLocations(e){for(const t of this.midpointGraphics){const{pathIndex:i,pointIndexStart:r,pointIndexEnd:n}=t.attributes,o=e[i];t.geometry=this._getMidpoint(o[r],o[n])}}_getMidpoint(e,t){const{_coordinateHelper:i}=this,r=i.arrayToVector(e),n=i.arrayToVector(t),o=i.toXYZ(r),s=i.toXYZ(n),[a,l,h]=(0,m.t9)(o,s),c=i.hasM()?0:void 0;return new v.A({x:a,y:l,z:h,m:c,spatialReference:i.spatialReference})}_getVertexFromEditGeometry(e){const[t,i]=le(e);return(0,c.Lw)(this._editGeometryOperations),this._editGeometryOperations.data.components[t].vertices[i]}_onHandleMove(e,t,i,r,n){(0,c.DC)(this._snappingTask);const s=this._snappingContext;if(!s)return;const a=e.geometry,l="graphic-move-stop"===r.type;if(null!=this.snappingManager&&this.selectedVertices.length<2&&!l){const r=this.snappingManager;this._stagedVertex=r.update({point:a,context:s}),this._syncGeometryAfterVertexMove(e,new v.A(this._stagedVertex),t,i,l),n(),this._snappingTask=(0,o.UT)((async o=>{const h=await r.snap({point:a,context:s,signal:o});h.valid&&(this._stagedVertex=h.apply(),this._syncGeometryAfterVertexMove(e,new v.A(this._stagedVertex),t,i,l),n())}))}else{const r=null!=this._stagedVertex?new v.A(this._stagedVertex):a;this._syncGeometryAfterVertexMove(e,r,t,i,l),n()}}_syncGeometryAfterVertexMove(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=this._editGeometryOperations?.data.geometry;if(o)if("point"===o.type)e.geometry=t;else if("mesh"===o.type)e.geometry=o.centerAt(t);else{const{_coordinateHelper:s}=this,[a,l]=le(e);let h=(0,m.$K)(o);const c=h[a].length-1,p=s.pointToArray(t);h[a][l]=p,"polygon"===o.type&&(0===l?h[a][c]=p:l===c&&(h[a][0]=p)),this._isVertex(e)&&(h=this._moveRelatedCoordinates(h,e,p),h=this._moveSelectedHandleCoordinates(h,e,i,r,"polygon"===o.type),this._updateMidpointGraphicLocations(h)),this._updateGraphicGeometry(o.clone());const d=s.pointToVector(t),y=this._getVertexFromEditGeometry(e),v=s.getZ(d),u=d[0]-y.pos[0],x=d[1]-y.pos[1],g=null!=v?v-y.pos[2]:0;this._editGeometryOperations?.moveVertices([y],u,x,g),n&&(this._mover?this._mover.updateGeometry(this._mover.graphics.indexOf(e),t):e.geometry=t)}}_moveRelatedCoordinates(e,t,i){const{relatedGraphicIndices:r}=t.attributes;for(const n of r){const r=this.vertexGraphics.at(n),{pathIndex:o,pointIndex:s}=r.attributes;e[o][s]=i,r.geometry=t.geometry}return e}_moveSelectedHandleCoordinates(e,t,i,r,n){for(const o of this.selectedVertices)if(o!==t){const{pathIndex:t,pointIndex:s,relatedGraphicIndices:a}=o.attributes,l=(0,M.lR)(o.geometry,i,r,this.view),h=(0,m.$K)(l),c=e[t].length-1;e[t][s]=h,o.geometry=l,n&&(0===s?e[t][c]=h:s===c&&(e[t][0]=h));for(const i of a){const t=this.vertexGraphics.at(i),{pathIndex:r,pointIndex:n}=t.attributes;e[r][n]=h,t.geometry=l}}return e}_onGraphicPointerOverCallback(e){const t=e.graphic;this._hoverGraphic=t;const i=this._isVertex(t);i&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateTooltip(i?t:null),this._updateHoverCursor(t)}_onGraphicPointerOutCallback(e){const t=e.graphic;this._hoverGraphic=null,this._isVertex(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor="default",this._updateTooltip()}_createVertexFromMidpoint(e){const{_graphicAttributes:t,graphic:i}=this,r=i.geometry;if(null==r||"polygon"!==r.type&&"polyline"!==r.type)return[];const n=r.clone(),o=[],{pathIndex:s,pointIndexStart:a,pointIndexEnd:l}=e.attributes,h=(0,m.$K)(e.geometry),c=0===l?a+1:l,p=(0,m.$K)(n);return p[s].splice(c,0,h),e.attributes={...t,pathIndex:s,pointIndex:c,relatedGraphicIndices:[]},o.push({coordinates:p[s][c],componentIndex:s,vertexIndex:c}),this._updateGraphicGeometry(n),o}_addToSelection(e){const t=he(e);for(const i of t)i.symbol=this.symbols.vertices.selected,this.selectedVertices.add(i),this._updateTooltip(i);this._emitSelectEvent(t)}_removeFromSelection(e,t){const{vertices:i}=this.symbols,r=t?i.hover:i.default;this.selectedVertices.remove(e),e.symbol=r,this._emitDeselectEvent([e]),this._updateTooltip()}_clearSelection(){const e=this.selectedVertices.toArray();if(e.length>0){for(const t of e)t.set("symbol",this.symbols.vertices.default);this.selectedVertices.removeAll(),this._emitDeselectEvent(e),this._updateTooltip()}}_keyDownHandler(e){null==this._activeOperationInfo&&(0,C.wG)(e,this.tooltip)||$.NE.delete.includes(e.key)&&!e.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}_removeVertices(e){const t=this.graphic.geometry;if(null==t||"polygon"!==t.type&&"polyline"!==t.type)return;if("polygon"===t.type&&this.vertexGraphics.length<4||this.vertexGraphics.length<3)return;const i=this.graphic.clone(),r=t.clone();let n=(0,m.$K)(r);const o=[],s=he(e);for(const a of s){const{x:e,y:t}=a.geometry;for(let i=0;i<n.length;i++){const r=n[i];for(let s=0;s<r.length;s++){const[a,l]=r[s];e===a&&t===l&&(o.push({coordinates:n[i][s],componentIndex:i,vertexIndex:s}),n[i].splice(Number(s),1))}}}if("polygon"===r.type)n=n.filter((e=>{if(e.length<2)return!1;const[t,i]=e[0],[r,n]=e[e.length-1];return(2!==e.length||t!==r||i!==n)&&(t===r&&i===n||e.push(e[0]),!0)})),r.rings=n;else{for(const e of n)1===e.length&&n.splice(n.indexOf(e),1);r.paths=n}this._updateGraphicGeometry(r),this.refresh(),this._emitVertexRemoveEvent(s,i,o)}_isVertex(e){return this.vertexGraphics.includes(e)}_isSelected(e){return this._isVertex(e)&&this.selectedVertices.includes(e)}_isMidpoint(e){return this.midpointGraphics.includes(e)}_updateHoverCursor(e){this.view.cursor=this._isMidpoint(e)?"copy":"move"}_updateTooltip(e,t){let i=null;const{graphic:r,view:n,tooltipInfos:o}=this,s=r?.geometry;"point"===s?.type?i=o.movePoint:this._selectedVertex?i=o.selectedVertex:e===this.graphic?(i=o.translateGraphic,function(e,t,i){e.clear(),F(e,t,i)}(i,n,t)):e&&this.selectedVertices.length>1&&(i=o.translateVertices,function(e,t,i,r){e.clear(),"polygon"===i?.type?e.area=(0,Z.n)(i):"polyline"===i?.type&&(e.totalLength=(0,P.ob)(i)),F(e,t,r)}(i,n,s,t)),this.activeTooltipInfo=i}_updateGraphicGeometry(e){this._updateHandlesOnExternalGeometryChange?.pause(),this.graphic.geometry=e,this._updateHandlesOnExternalGeometryChange?.resume()}_emitMoveStartEvent(e,t){const i=new Q(this.graphic,e,t);this.emit("move-start",i),this.callbacks.onMoveStart?.(i)}_emitMoveEvent(e,t){const i=new W(this.graphic,e,t);this.emit("move",i),this.callbacks.onMove?.(i)}_emitMoveStopEvent(e,t){if(null==e||null==t){const i=this._activeOperationInfo;if(!i)return;e=i.totalDx,t=i.totalDy}const i=new J(this.graphic,e,t);this.emit("move-stop",i),this.callbacks.onMoveStop?.(i)}_emitReshapeStartEvent(e){const t=new N(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape-start",t),this.callbacks.onReshapeStart?.(t)}_emitReshapeEvent(e){const t=new j(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape",t),this.callbacks.onReshape?.(t)}_emitReshapeStopEvent(e){const t=new Y(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape-stop",t),this.callbacks.onReshapeStop?.(t)}_emitSelectEvent(e){const t=new ee(e);this.emit("select",t),this.callbacks.onVertexSelect?.(t)}_emitDeselectEvent(e){const t=new te(e);this.emit("deselect",t),this.callbacks.onVertexDeselect?.(t)}_emitVertexAddEvent(e,t,i){const r=new ie(e,this.graphic,t,i);this.emit("vertex-add",r),this.callbacks.onVertexAdd?.(r)}_emitVertexRemoveEvent(e,t,i){const r=new re(e,this.graphic,t,i);this.emit("vertex-remove",r),this.callbacks.onVertexRemove?.(r)}_logGeometryTypeError(){h.A.getLogger(this).error(new a.A("reshape:invalid-geometry","Reshape operation not supported for the provided graphic. The geometry type is not supported."))}};function ae(e){const t=(0,m.$K)(e.clone());if("polygon"===e.type)for(const i of t){const e=i[i.length-1];i[0][0]===e[0]&&i[0][1]===e[1]&&i.length>2&&i.pop()}return t}function le(e){let{attributes:t}=e;return[t?.pathIndex||0,t?.pointIndex||0]}function he(e){return e instanceof n.A?[e]:[...e]}(0,r._)([(0,d.MZ)()],se.prototype,"_activeOperationInfo",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"_coordinateHelper",null),(0,r._)([(0,d.MZ)()],se.prototype,"_editGeometryOperations",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"tooltip",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"tooltipInfos",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"activeTooltipInfo",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"_selectedVertex",null),(0,r._)([(0,d.MZ)()],se.prototype,"_tooltipsContext",null),(0,r._)([(0,d.MZ)()],se.prototype,"callbacks",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"enableMidpoints",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"enableMovement",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"enableVertices",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"graphic",void 0),(0,r._)([(0,d.MZ)({value:!0})],se.prototype,"highlightsEnabled",null),(0,r._)([(0,d.MZ)()],se.prototype,"layer",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],se.prototype,"midpointGraphics",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"midpointSymbol",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],se.prototype,"selectedVertices",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"snappingManager",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],se.prototype,"state",null),(0,r._)([(0,d.MZ)()],se.prototype,"symbols",void 0),(0,r._)([(0,d.MZ)({type:X.A})],se.prototype,"sketchOptions",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],se.prototype,"type",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],se.prototype,"vertexGraphics",void 0),(0,r._)([(0,d.MZ)()],se.prototype,"view",void 0),se=(0,r._)([(0,y.$)("esri.views.draw.support.Reshape")],se);const ce=se},98510:(e,t,i)=>{i.d(t,{Y0:()=>h,lO:()=>c});var r=i(34111),n=i(13312),o=i(80963);const s=new n.A(r.fv),a=new n.A(r.FY),l=new n.A(r.LJ),h=new n.A(r.Ro);function c(e){const t=p.get(e);if(t)return t;let i=s;if(e)if(e===a)i=a;else if(e===l)i=l;else{const t=e.wkid,r=e.latestWkid;if(null!=t||null!=r)(0,o.tl)(t)||(0,o.tl)(r)?i=a:((0,o.ZL)(t)||(0,o.ZL)(r))&&(i=l);else{const t=e.wkt2??e.wkt;if(t){const e=t.toUpperCase();e===d?i=a:e===y&&(i=l)}}}return p.set(e,i),i}const p=new Map,d=a.wkt.toUpperCase(),y=l.wkt.toUpperCase()}}]);
//# sourceMappingURL=2630.b5c72800.chunk.js.map