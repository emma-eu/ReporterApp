"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[3347],{55:(e,t,n)=>{n.d(t,{cZ:()=>F,XW:()=>D,fe:()=>R});var r,i=n(3825),s=n(50076),o=n(87663),a=(n(98618),n(1484)),l=n(13312);class c{constructor(){this.version="",this.queryResult=new u}}class u{constructor(){this.featureResult=new d}}class d{constructor(){this.objectIdFieldName="",this.uniqueIdField=new p,this.globalIdFieldName="",this.geohashFieldName="",this.geometryProperties=new h,this.geometryType=null,this.spatialReference=new l.A,this.exceededTransferLimit=!1,this.hasZ=!1,this.hasM=!1,this.transform=new f,this.fields=[],this.fieldNameToAttributeIndexMap={},this.values=[],this.features=[],this.geometryFields=[]}}class p{constructor(){this.name="",this.isSystemMaintained=!1}}class h{constructor(){this.shapeAreaFieldName="",this.shapeLengthFieldName="",this.units=""}}class f{constructor(){this.quantizeOriginPosition="upperLeft",this.scale=new y,this.translate=new m}}class y{constructor(){this.xScale=0,this.yScale=0,this.mScale=0,this.zScale=0}}class m{constructor(){this.xTranslate=0,this.yTranslate=0,this.mTranslate=0,this.zTranslate=0}}class g{constructor(){this.name="",this.fieldType="esriFieldTypeString",this.alias="",this.sqlType="sqlTypeVarchar",this.domain="",this.defaultValue=""}}class b{constructor(){this.attributes=[],this.compressedGeometry=new I,this.centroid=new I,this.aggregateGeometries=[]}}class I{constructor(){this.geometryType=null,this.lengths=[],this.coords=[]}}!function(e){e.ELEMENTUID="ELEMENTUID",e.TYPENAME="TYPENAME"}(r||(r={}));const w=[r.ELEMENTUID,r.TYPENAME];var M,_;!function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME"}(M||(M={})),function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME",e[e.FROMUID=2]="FROMUID",e[e.TOUID=3]="TOUID"}(_||(_={}));var v,T,x,S,A=n(57502),E=n(31830);function C(e){const t=new I;t.geometryType=E.bV[e.geometry_type.value];const n=[],r=[];for(let i=0;i<e.lengths.length;i++)n.push(e.lengths[i]);for(let i=0;i<e.coords.length;i++)r.push(e.coords[i]);return t.lengths=n,t.coords=r,t}function k(e){const t=new g;return t.name=e.name,t.alias=e.alias,t.fieldType=E.r5[e.field_type.value],t.sqlType=x[e.sql_type.value],t.domain=e.domain,t.defaultValue=e.default_value,t}function N(e){const t=k(e);return t.geometryType=E.bV[e.geometry_type.value],t}function L(e){const t=new f;t.quantizeOriginPosition=T[e.quantizeOriginPosition.value];const n=t.scale,r=e.scale;n.xScale=r.xScale,n.yScale=r.yScale,n.mScale=r.mScale,n.zScale=r.zScale;const i=t.translate,s=e.translate;return i.xTranslate=s.xTranslate,i.yTranslate=s.yTranslate,i.mTranslate=s.mTranslate,i.zTranslate=s.zTranslate,t}async function F(e,t){t??=!1;const n={generateAllSublayers:t,namedTypeDefinitions:new Map};return await async function(e){const t=await(0,i.A)(e,{responseType:"array-buffer"}),n=await t.data;return async function(e){const t=new((await(0,A.I)()).MapOfObjectIdentifierSetsDecoder),n=t.decode(new Uint8Array(e)),r=new Map;if(0!==n.error_code)throw new s.A("knowledge-graph:layer-support-utils",n.error_message);const i=t.get_map_of_identifier_sets(),o=i.keys,a=o.size();for(let l=0;l<a;l++){const e=o.get(l),t=i.query_identifier_set(e),n=[];if(t.id_array_type.value===S.GLOBALID_ARRAY){const e=t.get_globalid_array(),r=e.count();for(let t=0;t<r;t++)n.push(e.get_globalid_at(t))}else if(t.id_array_type.value===S.IDENTIFIER_ARRAY){const e=t.get_identifier_array(),r=e.count();for(let t=0;t<r;t++)n.push(e.get_identifier_at(t).toString())}else if(t.id_array_type.value===S.STRING_ARRAY){const e=t.get_string_array(),r=e.count();for(let t=0;t<r;t++)n.push(e.get_string_at(t))}else{if(t.id_array_type.value!==S.OID_ARRAY)throw new s.A("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const e=t.get_oid_array(),r=e.count();for(let t=0;t<r;t++)n.push(e.get_objectid_at(t).toString())}}r.set(e,n)}return t.delete(),r}(new Uint8Array(n))}(e).then((e=>{!function(e,t){for(const[n,r]of e){const e=(0,o.tE)(t.namedTypeDefinitions,n,(()=>({useAllData:!1,members:new Map})));for(const t of r)e.members.has(t)||e.members.set(t,{id:t})}}(e,n)})),n}async function R(e){const t=await(0,A.I)(),n=new t.MapOfObjectIdentifierSets;!function(e,t,n){for(const[r,i]of n.namedTypeDefinitions){if(!i.members||i.useAllData)continue;const n=i.members.keys();let s=!1,o=!0;const a=new t.ObjectIdArray,l=new t.StringArray,c=new t.GlobalIdArray,u=new t.IdentifierArray,d=new t.ObjectIdentifierSet;for(const e of n)o&&(s=!isNaN(Number(e)),o=!1),s?a.add_objectid(Number(e)):(l.add_string(e),c.add_globalid(e)),u.add_identifier(e);d.set_oid_array(a),d.set_string_array(l),d.set_globalid_array(c),d.set_identifier_array(u),a.delete(),l.delete(),c.delete(),u.delete(),e.put_identifier_set(r,d),d.delete()}}(n,t,e);const r=new t.MapOfObjectIdentifierSetsEncoder;try{r.set_map_of_identifier_sets(n),r.encode();const e=r.get_encoding_result();if(0!==e.error.error_code)throw new s.A("knowledge-graph:layer-support-utils",e.error.error_message);const t=structuredClone(e.get_byte_buffer());return r.delete(),t}finally{n.delete()}}async function B(e){const t=await(0,i.A)(e,{responseType:"array-buffer"});return async function(e){const t=new((await(0,A.I)()).FeatureCollectionDecoder),n=t.decode(new Uint8Array(e));if(0!==n.error_code)throw new s.A("knowledge-graph:layer-support-utils",n.error_message);const r=t.get_feature_collection(),i=function(e){const t=new c;t.version=e.version;const n=e.get_query_result();if(0!==n.results_type.value)throw new Error("Got a non-feature collection type");const r=n.get_feature_result(),i=t.queryResult.featureResult;i.objectIdFieldName=r.objectid_field_name,i.exceededTransferLimit=r.exceeded_transfer_limit,i.hasM=r.has_m,i.hasZ=r.has_z,i.geometryType=E.bV[r.geometry_type.value],i.globalIdFieldName=r.globalid_field_name,i.geohashFieldName=r.geohash_field_name;const s=i.uniqueIdField,o=r.unique_id_field;s.name=o.name,s.isSystemMaintained=o.isSystemMaintained;const a=i.geometryProperties,l=r.geometry_properties;a.shapeAreaFieldName=l.shapeAreaFieldName,a.shapeLengthFieldName=l.shapeLengthFieldName,a.units=l.units;const u=i.spatialReference,d=r.spatial_reference;u.wkid=d.wkid,u.latestWkid=d.latestWkid,u.vcsWkid=d.vcsWkid,u.latestVcsWkid=d.latestVcsWkid,u.wkt=d.wkt,i.transform=L(r.transform);const p=i.fields,h=i.fieldNameToAttributeIndexMap,f=r.fields,y=f.size();for(let c=0;c<y;c++){const e=f.get(c),t=k(e);p.push(t),h[t.name]=c,e.delete()}f.delete();const m=i.values,g=r.values_count();for(let c=0;c<g;c++)m.push(r.get_value_at(c));const I=i.features,M=r.features,_=M.size();if(_>0)for(const c of w)if(void 0===h[c])throw new Error(`Feature collection missing required attribute: ${c}`);for(let c=0;c<_;c++){const e=new b,t=M.get(c),n=e.attributes,r=t.attributes_count();for(let l=0;l<r;l++)n.push(t.get_attribute_at(l));const i=t.get_compressed_geometry();i&&(e.compressedGeometry=C(i),e.centroid=C(t.get_centroid()));const s=e.aggregateGeometries,o=t.aggregate_geometries,a=o.size();for(let l=0;l<a;l++){const e=o.get(l),t=C(e);s.push(t),e.delete()}o.delete(),I.push(e),t.delete()}M.delete();const v=i.geometryFields,T=r.geometry_fields,x=T.size();for(let c=0;c<x;c++){const e=T.get(c),t=N(e);v.push(t),e.delete()}return T.delete(),t}(r);return t.delete(),i}(await t.data)}function O(e,t){if(!e?.queryResult?.featureResult)return t;const n=e.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const i of e.queryResult.featureResult.features){const e=i.attributes[n[r.TYPENAME]],s=(0,o.tE)(t.namedTypeDefinitions,e,(()=>({useAllData:!1,members:new Map}))),l=i.attributes[n[r.ELEMENTUID]];if(i.compressedGeometry?.coords?.length>0){let e=i.compressedGeometry.lengths;"esriGeometryPoint"===i.compressedGeometry.geometryType&&(e=[]),s.members.set(l,{id:l,linkChartLocation:new a.A(e,i.compressedGeometry.coords)})}else s.members.set(l,{id:l})}return t}!function(e){e[e.featureResult=0]="featureResult",e[e.countResult=1]="countResult",e[e.idsResult=2]="idsResult"}(v||(v={})),function(e){e[e.upperLeft=0]="upperLeft",e[e.lowerLeft=1]="lowerLeft"}(T||(T={})),function(e){e[e.sqlTypeBigInt=0]="sqlTypeBigInt",e[e.sqlTypeBinary=1]="sqlTypeBinary",e[e.sqlTypeBit=2]="sqlTypeBit",e[e.sqlTypeChar=3]="sqlTypeChar",e[e.sqlTypeDate=4]="sqlTypeDate",e[e.sqlTypeDecimal=5]="sqlTypeDecimal",e[e.sqlTypeDouble=6]="sqlTypeDouble",e[e.sqlTypeFloat=7]="sqlTypeFloat",e[e.sqlTypeGeometry=8]="sqlTypeGeometry",e[e.sqlTypeGUID=9]="sqlTypeGUID",e[e.sqlTypeInteger=10]="sqlTypeInteger",e[e.sqlTypeLongNVarchar=11]="sqlTypeLongNVarchar",e[e.sqlTypeLongVarbinary=12]="sqlTypeLongVarbinary",e[e.sqlTypeLongVarchar=13]="sqlTypeLongVarchar",e[e.sqlTypeNChar=14]="sqlTypeNChar",e[e.sqlTypeNVarChar=15]="sqlTypeNVarChar",e[e.sqlTypeOther=16]="sqlTypeOther",e[e.sqlTypeReal=17]="sqlTypeReal",e[e.sqlTypeSmallInt=18]="sqlTypeSmallInt",e[e.sqlTypeSqlXml=19]="sqlTypeSqlXml",e[e.sqlTypeTime=20]="sqlTypeTime",e[e.sqlTypeTimestamp=21]="sqlTypeTimestamp",e[e.sqlTypeTimestamp2=22]="sqlTypeTimestamp2",e[e.sqlTypeTinyInt=23]="sqlTypeTinyInt",e[e.sqlTypeVarbinary=24]="sqlTypeVarbinary",e[e.sqlTypeVarchar=25]="sqlTypeVarchar"}(x||(x={})),function(e){e[e.OID_ARRAY=0]="OID_ARRAY",e[e.GLOBALID_ARRAY=1]="GLOBALID_ARRAY",e[e.STRING_ARRAY=2]="STRING_ARRAY",e[e.IDENTIFIER_ARRAY=3]="IDENTIFIER_ARRAY"}(S||(S={}));const D={fetchAndConvertSerializedLinkChart:e=>async function(e){const t=[],n={generateAllSublayers:!1,namedTypeDefinitions:new Map};return e.entitiesUrl&&t.push(B(e.entitiesUrl).then((e=>{O(e,n)}))),e.relationshipsUrl&&t.push(B(e.relationshipsUrl).then((e=>{O(e,n)}))),await Promise.all(t),n}(e)}},1484:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(97255);class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new i(e.lengths,e.coords)}static fromRect(e){const[t,n,r,s]=e,o=r-t,a=s-n;return new i([5],[t,n,o,0,0,a,-o,0,0,-a])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}get usedMemory(){return 64+(0,r.Qf)(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];if(r<3)continue;let i=this.coords[2*t],s=this.coords[2*t+1];for(let n=1;n<r;n+=1){const r=this.coords[2*(n+t)],o=this.coords[2*(n+t)+1];e+=-.5*(r-i)*(o+s),i=r,s=o}t+=r}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=r}}deltaDecode(){const e=this.clone(),{coords:t,lengths:n}=e;let r=0;for(const i of n){for(let e=1;e<i;e++)t[2*(r+e)]+=t[2*(r+e)-2],t[2*(r+e)+1]+=t[2*(r+e)-1];r+=i}return e}clone(e){if(0===this.lengths.length)return new i([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),n=this.coords.slice(0,t);return e?(e.set(n),new i(this.lengths,e)):new i(Array.from(this.lengths),Array.from(n))}}},2948:(e,t,n)=>{n.d(t,{MY:()=>m,Td:()=>f,UT:()=>y,e$:()=>b,iW:()=>g,qN:()=>d});var r=n(69539),i=n(95114),s=n(57491),o=n(47703),a=n(89465),l=n(86659);const c={initializeLayersFromClientData:async(e,t,n)=>{if(t||(t=[...e.layers,...e.tables].map((e=>e.graphTypeName))),0===t?.length)return;const r=new Map;for(const s of t)r.set(s,u(e,s));const i=await(0,o.fetchClientDataAtKeys)(e.dataManager.knowledgeGraph,Array.from(r.values()),{requestOptions:{signal:n?.signal}});for(const s of[...e.layers,...e.tables]){const t=s.objectType.name;if(null==t)continue;const n=i.get(u(e,t));if(n){const e=JSON.parse(n);null===e||"object"!=typeof e||e.hasOwnProperty("showLabels")||(e.showLabels=!1),s.read(e,{origin:"service"})}}}},u=(e,t)=>"knowledge-graph"===e.type?`${t}/Map`:`${t}/LinkChart/LinkChartSubLayer`;async function d(e,t,n){return c.initializeLayersFromClientData(e,t,n)}const p=["#4a0932","#b31515","#18382e","#a64f1b","#102432","#8c213f","#ed9310","#2c6954","#144d59","#ffc730","#75351e","#454f4b","#78b1c2","#191921","#8f8f82","#9be0c0","#dbb658","#87b051","#11495c","#c43541","#9c5596","#44498b","#ad9d63","#86afb3","#5c98ca","#b0bfa2","#73241f","#b86b53","#d9d78c","#3e756d","#f260a1","#a0d17d","#c27c30","#eb82eb","#ffdf3c","#ffb259","#ab52b3","#3cccb4","#0095ba","#d92b30"],h="#8f8f82";function f(e){return e<0||e>=p.length?new r.A(h):new r.A(p[e])}function y(e){const t=e.toArray();return new a.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,style:"solid",width:.75,color:t},{type:"CIMVectorMarker",enable:!0,size:6,markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-10,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[1.96,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:t}]}}]}]}}})}function m(e){let t="ESRI__ID",n=4;for(const r of e)if(r.name){if("name"===r.name.toLowerCase()){t=r.name;break}r.name.toLowerCase().includes("name")?(t=r.name,n=2):"esriFieldTypeString"===r.fieldType&&n>3&&(t=r.name,n=3)}return t}function g(e,t,n){const r={color:[80,80,80],haloColor:[255,255,255],haloSize:.7,font:{size:10,weight:"normal"}},o=new i.A({labelExpressionInfo:new s.A({expression:"ESRI__ID"===n?`${t}`:`$feature.${n}`}),labelPlacement:"above-center",symbol:new l.A(r)}),a=new i.A({labelExpressionInfo:new s.A({expression:`'${t}' + IIf($feature.ESRI__AggregationCount>1, ' (' + $feature.ESRI__AggregationCount + ')', '')`}),labelPlacement:"center-along",labelPosition:"parallel",repeatLabel:!1,symbol:new l.A({...r,yoffset:"12px"})});return"entity"===e?[o]:[a]}function b(e,t,n){const r={color:[255,255,255],haloColor:[0,0,0],haloSize:.7,font:{size:10,weight:"bold"}},o="ESRI__ID"===n?`${e}`:`$feature.${n}`;return"point"===t?[new i.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"above-center",symbol:new l.A(r)})]:"polyline"===t?[new i.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"center-along",repeatLabel:!0,symbol:new l.A(r)})]:"polygon"===t?[new i.A({labelExpressionInfo:new s.A({expression:o}),labelPlacement:"always-horizontal",symbol:new l.A(r)})]:null}},5364:(e,t,n)=>{n.d(t,{C:()=>c,X:()=>l});var r=n(35143),i=n(94643),s=n(3975),o=(n(81806),n(76460),n(46053)),a=(n(47249),n(85842));let l=class extends i.A{constructor(e){super(e),this.addHandles([this.on("before-add",(e=>{null==e.item&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(i.A.ofType(this.itemType.Type))(e):new i.A(e)}};function c(e,t){return{type:e,cast:s.H,set(n){const r=(0,s.V)(n,this._get(t),e);r.owner=this,this._set(t,r)}}}(0,r._)([(0,o.MZ)()],l.prototype,"owner",null),l=(0,r._)([(0,a.$)("esri.core.support.OwningCollection")],l)},5682:(e,t,n)=>{n.d(t,{j:()=>o});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===e.minScale&&n.maxScale===e.maxScale?n:e}};return(0,r._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,r._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,r._)([(0,i.MZ)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,r._)([(0,s.$)("esri.layers.mixins.ScaleRangeLayer")],t),t}},8893:(e,t,n)=>{n.d(t,{k5:()=>u,aq:()=>c,Wq:()=>d});n(39356);var r=n(50076),i=(n(19247),n(65215),n(23701),n(63733),n(33750),n(85646),n(45802));(0,i.O)()({none:"none",startAndEnd:"start-and-end",startOnly:"start-only"}),(0,i.O)()({absoluteValue:"absolute-value",multiplier:"multiplier"});const s=new Map([["basic-grid","basic-grid"],["geographic-organic-standard","geographic-organic-standard"],["hierarchical-bottom-to-top","hierarchical-bottom-to-top"],["hierarchical-top-to-bottom","hierarchical-bottom-to-top"],["organic-community","organic-community"],["organic-fusiform","organic-standard"],["organic-leaf-circle","organic-standard"],["organic-standard","organic-standard"],["radial-node-centric","radial-root-centric"],["radial-root-centric","radial-root-centric"],["tree-bottom-to-top","tree-left-to-right"],["tree-left-to-right","tree-left-to-right"],["tree-right-to-left","tree-left-to-right"],["tree-top-to-bottom","tree-left-to-right"],["chronological-mono-timeline","chronological-mono-timeline"],["chronological-multi-timeline","chronological-multi-timeline"]]);var o=n(47703),a=n(35380);n(89465),n(86875),n(86659);function l(e,t){const n=new Map;if(t.dataModel?.relationshipTypes)for(const r of t.dataModel.relationshipTypes)r.name&&n.set(r.name,[]);for(const r of e)n.has(r.typeName)&&n.get(r.typeName)?.push(r.id);return n}async function c(e,t,n){const r=[],i=l(e,t),s={},c=[];for(const[o,a]of i){if(a.length<1)continue;const e=`${o}_ids`;s[e]=a,c.push(`MATCH (n)-[r:${o}]->(m) WHERE id(r) in $${e} RETURN id(n), labels(n)[0], id(m), labels(m)[0]`)}if(0===c.length)return[];const u=c.join(" UNION "),d=new a.A({openCypherQuery:u,bindParameters:s}),p=(await(0,o.executeQueryStreaming)(t,d,n?.requestOptions)).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await p.read();if(e)break;for(const n of t)r.push({id:n[0],typeName:n[1]}),r.push({id:n[2],typeName:n[3]})}return r}const u=e=>s.get(e)??"radial-root-centric";function d(e){if(!e.spatialReference.isWGS84)throw new r.A("knowledge-graph:layer-support-utils","The utilsExtentToInBoundsRings function only supports WGS84 spatial references.");return e.clone().normalize().map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}},9505:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(19247),a=n(27544);let l=class extends a.A{constructor(e){super(e),this.layoutGeometry=null}};(0,r._)([(0,i.MZ)({type:o.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.Entity")],l);const c=l},12718:(e,t,n)=>{n.d(t,{P:()=>_});var r=n(35143),i=n(91967),s=n(50076),o=n(76460),a=n(87663),l=n(50346),c=n(34154),u=n(46053),d=(n(81806),n(47249),n(85842)),p=n(76797),h=n(65215),f=n(9624),y=n(80963),m=n(21009),g=n(33750),b=n(8893),I=n(47703),w=n(35380),M=n(97015);let _=class extends i.A{constructor(e){super(e),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const t=new Map;e.knowledgeGraph.dataModel.entityTypes?.forEach((n=>{n.name&&(t.set(n.name,"entity"),this._processingCacheUpdatesLookup.set(n.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(n.name),n.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(n.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((n=>{n.name&&(t.set(n.name,"relationship"),this._processingCacheUpdatesLookup.set(n.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(n.name),n.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(n.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((n,r)=>{if("entity"===t.get(r))this.entityTypeNames.add(r);else{if("relationship"!==t.get(r))return o.A.getLogger(this).warn(`A named type, ${r}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(r);this.relationshipTypeNames.add(r)}const i=new Map;n.members?.forEach((e=>{(0,a.tE)(this.memberIdTypeLookup,e.id,(()=>new Set)).add(r);const t=this.getById(e.id);t&&i.set(e.id,t)})),this.sublayerCaches.set(r,i)}))}addToLayer(e){e.forEach((e=>{let{typeName:t,id:n}=e;if(!this.inclusionModeDefinition)throw new s.A("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){const e=this.inclusionModeDefinition.namedTypeDefinitions.get(t);e.members||(e.members=new Map),e.members.set(n,{id:n}),(0,a.tE)(this.memberIdTypeLookup,n,(()=>new Set)).add(t)}}else{const e=new Map;e.set(n,{id:n}),this.inclusionModeDefinition.namedTypeDefinitions.set(t,{useAllData:!1,members:e}),(0,a.tE)(this.memberIdTypeLookup,n,(()=>new Set)).add(t)}}))}getById(e){return g.A.getInstance().readFromStoreById(e)}async getData(e,t,n){if(t.objectType.name&&this.inclusionModeDefinition?.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(t.objectType.name))return[];let r;if(r=e||new M.A({where:"1=1",outFields:["*"]}),"link-chart"===t.parentCompositeLayer.type){const e=t.parentCompositeLayer,n=this._processingCacheUpdatesLookup.get(t.objectType.name??""),i=r.outFields;i&&1===i.length&&i[0]===m.dr&&"1=1"===r.where||await Promise.all(n??[]);const s=this.sublayerCaches.has(t.objectType.name??"")?Array.from(this.sublayerCaches.get(t.objectType.name)?.values()):[],o=[];return s.forEach((n=>{if(this.relationshipTypeNames.has(t.objectType.name)){n.geometry=e.relationshipLinkChartDiagramLookup.get(n.attributes[t.objectIdField]);const r=this.memberIdTypeLookup.get(n.attributes[m.Cz]),i=this.memberIdTypeLookup.get(n.attributes[m.KQ]),s=this._isEndEntitySpatial(r,n,m.Cz),o=this._isEndEntitySpatial(i,n,m.KQ);n.attributes[m.BL]=Number(s&&o)}else{n.geometry=e.entityLinkChartDiagramLookup.get(n.attributes[t.objectIdField]);const r=this.geographicLookup.get(t.objectType.name);r&&n.attributes[r.name]?n.attributes[m.BL]=1:n.attributes[m.BL]=0}n.attributes[m.T1]=n.geometry,o.push(n)})),o}return this.retrieveDataFromService(r,t,n)}async getConnectedRecordIds(e,t,n){const r=[];let i="";const s=this._getNamedTypeIdMapFromNodeIds(e);if(t&&0!==t?.length){for(const e of t)i=i+e+"|";i=i.slice(0,-1)}const o={},a=[];for(const[u,d]of s){const e=`${u}_ids`;o[e]=d,t&&0!==t?.length?a.push(`MATCH (n:${u}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r:${i}]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`):a.push(`MATCH (n:${u}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`)}if(!a.length)return r;const l=a.join(" UNION "),c=(await(0,I.executeQueryStreaming)(this.knowledgeGraph,new w.A({openCypherQuery:l,bindParameters:o}),{signal:n?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await c.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];r.push({id:e[0],typeName:e[1]}),r.push({id:e[2],typeName:e[3]})}}return r}async getRelationshipsBetweenNodes(e,t,n){const r=this._getNamedTypeIdMapFromNodeIds(e);if(0===r.size)return[];const i={relationshipExclusionIds:t,possibleConnectionEntityIds:e},s=[];for(const[c,u]of r.entries()){const e=`${c}_ids`;i[e]=u,s.push(`MATCH (n:${c}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]->(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const o=s.join(" UNION "),a=[],l=(await(0,I.executeQueryStreaming)(this.knowledgeGraph,new w.A({openCypherQuery:o,bindParameters:i}),{signal:n?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await l.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];a.push({id:e[0],typeName:e[1]})}}return a}async getRelationshipsFromNodes(e,t,n,r){const i=this._getNamedTypeIdMapFromNodeIds(e);if(0===i.size||0===t.length)return[];const s={relationshipExclusionIds:n,possibleConnectionEntityIds:t},o=[];for(const[d,p]of i.entries()){const e=`${d}_ids`;s[e]=p,o.push(`MATCH (n:${d}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]-(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const a=o.join(" UNION "),l=new Map,c=(await(0,I.executeQueryStreaming)(this.knowledgeGraph,new w.A({openCypherQuery:a,bindParameters:s}),{signal:r?.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await c.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];let r=l.get(e[1]);r||(r=new Set,l.set(e[1],r)),r.add(e[0])}}const u=[];for(const[d,p]of l)for(const e of p)u.push({id:e,typeName:d});return u}async refreshCacheContent(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0;const o=g.A.getInstance(),c=[],u=new Map,d=new Map;this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&d.set(e.name,e)})),this.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&d.set(e.name,e)})),e||this.inclusionModeDefinition?e?e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const t of this.memberIdTypeLookup.get(e))u.has(t)?u.get(t)?.push(e):u.set(t,[e])})):this.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e.useAllData?u.set(t,null):e.members&&e.members.forEach((e=>{u.has(t)&&null!==u.get(t)?u.get(t)?.push(e.id):u.set(t,[e.id])}))})):(this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&u.set(e.name,null)})),this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&u.set(e.name,null)})));for(const[l,p]of u){const e=new Set(p),u=new Promise(((c,u)=>{(async()=>{const c=new Set,u=[];let h,f="",y=!1;if(t||d.get(l)?.properties?.forEach((e=>{e.name&&c.add(e.name)})),n&&this.geographicLookup.has(l)){const e=this.geographicLookup.get(l)?.name;e&&c.add(e)}if(this.entityTypeNames.has(l))f=`MATCH (n:${l}) ${p?"WHERE id(n) IN $ids ":""}return ID(n)`,c.forEach((e=>{f+=`, n.${e}`,u.push(e)}));else{if(!this.relationshipTypeNames.has(l))throw new s.A("knowledge-graph:layer-data-manager",`The graph type of ${l} could not be determined. Was this type set in the KG data model and inclusion definition?`);y=!0,f=`MATCH ()-[n:${l}]->() ${p?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,c.forEach((e=>{f+=`, n.${e}`,u.push(e)}))}h=new w.A(p?{openCypherQuery:f,bindParameters:{ids:p}}:{openCypherQuery:f});const g=(await(0,I.executeQueryStreaming)(this.knowledgeGraph,h,{signal:i?.signal})).resultRowsStream.getReader();for(;;){const{done:t,value:n}=await g.read();if(t)break;const i=[];for(let r=0;r<n.length;r++){const t=n[r];let s=0,o=0;const l={properties:{}};for(l.id=t[s],s++,o++,y&&(l.originId=t[s],s++,o++,l.destinationId=t[s],s++,o++,(0,a.tE)(this.nodeConnectionsLookup,l.originId,(()=>new Set)).add(l.id),(0,a.tE)(this.nodeConnectionsLookup,l.destinationId,(()=>new Set)).add(l.id),(0,a.tE)(this.relationshipConnectionsLookup,l.id,(()=>[l.originId,l.destinationId])));s<t.length;s++)l.properties[u[s-o]]=t[s];e.delete(l.id),i.push(l)}const s=o.writeToStore(i,m.dr,this.geographicLookup.get(l)?.name);this.sublayerCaches.has(l)||this.sublayerCaches.set(l,new Map),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.has(l)&&this.inclusionModeDefinition?.namedTypeDefinitions.set(l,{useAllData:!1,members:new Map}),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members&&(this.inclusionModeDefinition.namedTypeDefinitions.get(l).members=new Map);const c=this.sublayerCaches.get(l);s.forEach((e=>{c?.set(e.attributes[m.dr],e),r&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members.has(e.attributes[m.dr])&&(this.inclusionModeDefinition?.namedTypeDefinitions.get(l).members.set(e.attributes[m.dr],{id:e.attributes[m.dr]}),(0,a.tE)(this.memberIdTypeLookup,e.attributes[m.dr],(()=>new Set)).add(l))}))}const b=this.inclusionModeDefinition?.namedTypeDefinitions.get(l);if(b)for(const t of e)b.members?.delete(t)})().then((()=>{c(null)})).catch((e=>{"AbortError"===e.name?c(null):u(e)}))}));c.push(u),this._processingCacheUpdatesLookup.get(l)?.push(u)}if(await Promise.all(c),i?.signal?.aborted)throw(0,l.NK)()}removeFromLayer(e){const t=new Set,n=new Set(e.map((e=>e.id)));for(const r of e)t.add(r.typeName),1===this.memberIdTypeLookup.get(r.id)?.size?this.memberIdTypeLookup.delete(r.id):this.memberIdTypeLookup.get(r.id)?.delete(r.typeName),this.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{t===r.typeName&&e.members?.has(r.id)&&e.members.delete(r.id)}));t.forEach((e=>{this.sublayerCaches.get(e)?.forEach(((t,r)=>{n.has(r)&&this.sublayerCaches.get(e)?.delete(r)}))}))}async retrieveDataFromService(e,t,n){const r=g.A.getInstance(),i=new Set,o=[];let a,l="",u=[];const d="relationship"===t.graphType,M=this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData,_=t.parentCompositeLayer.sublayerIdsCache.get(t.objectType.name);let v=!M&&_?Array.from(_).sort():null;if(this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData)this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData&&null!=e.objectIds&&(v=e.objectIds);else if(null!=e.objectIds&&v&&v.length>0){const t=e.objectIds;e.objectIds=v.filter((e=>t.includes(e)))}else if(null!=e.objectIds)v=e.objectIds;else{if(this.inclusionModeDefinition?.namedTypeDefinitions.has(t.objectType.name)&&(!this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members||this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members?.size<1))return e.objectIds=[],[];e.objectIds=v}if(null!=e.outFields){const n=e.outFields;n.includes("*")?t.fields.forEach((e=>{i.add(e.name)})):n.forEach((e=>{e!==m.dr&&e!==t.geometryFieldName&&i.add(e)}))}if(null!=e.geometry){const n=e.geometry;let r;const u=t.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,m=u?.spatialReference,g=u?.serviceCapabilities?.geometryCapabilities;let I=g?.geometryMaxBoundingRectangleSizeX,M=g?.geometryMaxBoundingRectangleSizeY;if("point"===n.type){let e=n;e.spatialReference?.isWGS84||(await(0,f.initializeProjection)(e.spatialReference,y.KK),e=(0,f.project)(e,y.KK)),r=new p.A({spatialReference:y.KK,xmin:e.x-1e-4,ymin:e.y-1e-4,xmax:e.x+1e-4,ymax:e.y+1e-4})}else n?.extent?.spatialReference&&!n.spatialReference?.isWGS84?(await(0,f.initializeProjection)(n.extent.spatialReference,y.KK),r=(0,f.project)(n.extent,y.KK)):r=n.extent;if(I&&M&&m){if(4326!==m.wkid){const e=new p.A({spatialReference:m,xmax:I,ymax:M}),t=(0,f.project)(e,y.KK);I=t.xmax,M=t.ymax}if(r.xmax-r.xmin>I)throw new s.A("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${I}\xb0 latitude, limit exceeded`);if(r.ymax-r.ymin>M)throw new s.A("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${M}\xb0 longitude, limit exceeded`)}if(null!=e.where&&"1=1"!==e.where){const n=await(0,c.GP)(e.where.toUpperCase(),t.fieldsIndex);t.fields.forEach((e=>{n.fieldNames.includes(e.name)&&i.add(e.name)}))}l=d?`Match ()-[n:${t.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${t.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n)`,t.geometryFieldName&&i.add(t.geometryFieldName),i.forEach((e=>{l+=`, n.${e}`,o.push(e)})),a=new w.A({openCypherQuery:l,bindParameters:{param_filter_geom:new h.A({rings:(0,b.Wq)(r)})}})}else{let n="";if(null!=e.where&&"1=1"!==e.where){const r=await(0,c.GP)(e.where,t.fieldsIndex);t.fields.forEach((e=>{r.fieldNames.includes(e.name)&&i.add(e.name)}));const s=new Set(["column-reference","string","number","binary-expression"]),o=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let a=!1;const l=e=>{if("column-reference"===e.type)return`n.${e.column}`;if("string"===e.type)return`'${e.value}'`;if("number"===e.type)return`${e.value}`;if("binary-expression"===e.type&&s.has(e.left.type)&&s.has(e.right.type)&&o.has(e.operator))return`${l(e.left)} ${e.operator} ${l(e.right)}`;if("binary-expression"===e.type&&"LIKE"===e.operator){let t="";if("function"===e.left.type&&"column-reference"===e.left.args.value[0].type)t+=`lower(n.${e.left.args.value[0].column})`;else{if("column-reference"!==e.left.type)return a=!0,"";t+=`lower(n.${e.left.column})`}if(t+=" CONTAINS (","string"!==e.right.type)return a=!0,"";{let n=e.right.value;"%"===n.charAt(0)&&(n=n.slice(1)),"%"===n.charAt(n.length-1)&&(n=n.slice(0,-1)),t+=`'${n.toLowerCase()}')`}return t}return a=!0,""};n=l(r.parseTree),a&&(n="")}let r="";r=d?`Match ()-[n:${t.objectType.name}]->()`:`Match (n:${t.objectType.name})`;let s=!1;v&&(s=!0,r+=" WHERE ID(n) IN $ids"),n&&(r+=s?" AND":" WHERE",r+=` ${n}`),r+=" return ID(n)",d&&(r+=", id(startNode(n)), id(endNode(n))"),e.returnGeometry&&t.geometryFieldName&&i.add(t.geometryFieldName),i.forEach((e=>{r+=`, n.${e}`,o.push(e)})),a=new w.A(v?{openCypherQuery:r,bindParameters:{ids:v}}:{openCypherQuery:r})}const T=(await(0,I.executeQueryStreaming)(t.parentCompositeLayer.dataManager.knowledgeGraph,a,n)).resultRowsStream.getReader();for(;;){const{done:e,value:n}=await T.read();if(e)break;const i=[];for(let t=0;t<n.length;t++){const e=n[t];let r=0,s=0;const a={properties:{}};for(a.id=e[r],r++,s++,d&&(a.originId=e[r],r++,s++,a.destinationId=e[r],r++,s++);r<e.length;r++)a.properties[o[r-s]]=e[r];i.push(a)}u=u.concat(r.writeToStore(i,m.dr,t.parentCompositeLayer.dataManager.geographicLookup.get(t.objectType.name)?.name))}return u}_isEndEntitySpatial(e,t,n){for(const r of e??[])if(this.entityTypeNames.has(r)){const e=this.geographicLookup.get(r),i=e&&this.sublayerCaches.get(r)?.get(t.attributes[n]);if(e&&i?.attributes[e.name])return!0}return!1}_getNamedTypeIdMapFromNodeIds(e){const t=new Map;return e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const n of this.memberIdTypeLookup.get(e)){if(!this.entityTypeNames.has(n))return;t.has(n)?t.get(n)?.push(e):t.set(n,[e])}})),t}};(0,r._)([(0,u.MZ)()],_.prototype,"knowledgeGraph",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"inclusionModeDefinition",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"entityTypeNames",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"relationshipTypeNames",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"geographicLookup",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"sublayerCaches",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"nodeConnectionsLookup",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"relationshipConnectionsLookup",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"memberIdTypeLookup",void 0),_=(0,r._)([(0,d.$)("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],_)},12831:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(35143),i=n(42553),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842));let a=class extends i.A{constructor(e){super(e),this.properties=null}};(0,r._)([(0,s.MZ)({json:{write:!0}})],a.prototype,"properties",void 0),a=(0,r._)([(0,o.$)("esri.rest.knowledgeGraph.GraphObject")],a);const l=a},20176:(e,t,n)=>{n.d(t,{N3:()=>a,Om:()=>o});var r=n(97255),i=n(90321),s=n(1484);class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.geometry=e,this.attributes=t,this.centroid=n,this.objectId=r,this.displayId=i}static fromJSON(e){const t=e.geometry?s.A.fromJSON(e.geometry):null,n=e.centroid?s.A.fromJSON(e.centroid):null,r=e.objectId;return new o(t,e.attributes,n,r)}weakClone(){const e=new o(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){const e=this.geometry?.clone(),t=new o(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t}ensureCentroid(e){return this.centroid??=(0,i.Q)(new s.A,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+(0,r.lM)(this.attributes)+(this.geometry?.usedMemory??0)}}function a(e){return!!e.geometry?.coords?.length}},21009:(e,t,n)=>{n.d(t,{BL:()=>l,Cz:()=>i,KQ:()=>s,M1:()=>a,T1:()=>o,dr:()=>r});const r="ESRI__ID",i="ESRI__OriginID",s="ESRI__DestID",o="ESRI__LayoutGeometry",a="ESRI__AggregationCount",l="LC.ESRI__IsSpatial"},21617:(e,t,n)=>{n.d(t,{J:()=>w});var r=n(35143),i=(n(81806),n(76460)),s=n(50346),o=n(46053),a=n(21403),l=(n(47249),n(85842)),c=n(80979),u=n(94643),d=n(68134),p=n(49281);const h=new u.A,f=new WeakMap;function y(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function m(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:m(t,e%t):0}let g=0,b=0;function I(){const e=Date.now();let t=!1;for(const n of h){const r=n.deref();r?r.refreshInterval&&e-(f.get(r)??0)+5>=6e4*r.refreshInterval&&(f.set(r,e),r.refresh(e)):t=!0}if(t)for(let n=h.length-1;n>=0;n--)h.at(n).deref()||h.removeAt(n)}(0,p.fm)((()=>{const e=Date.now();let t=0;for(const n of h){const r=n.deref();r&&(t=m(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?f.get(r)||f.set(r,e):f.delete(r))}if(t!==b){if(b=t,clearInterval(g),0===b)return void(g=0);g=setInterval(I,b)}}),d.OH);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,s.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){y(e)&&h.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=h.find((t=>t.deref()===e));t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,s.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{i.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,r._)([(0,o.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:c.K}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,a.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],t),t}},23908:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(23701),a=n(27544);let l=class extends a.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],l.prototype,"originId",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],l.prototype,"destinationId",void 0),(0,r._)([(0,i.MZ)({type:o.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.Relationship")],l);const c=l},27544:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(12831);let a=class extends o.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"typeName",void 0),(0,r._)([(0,i.MZ)({type:String,json:{write:!0}})],a.prototype,"id",void 0),a=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphNamedObject")],a);const l=a},29380:(e,t,n)=>{n.d(t,{A:()=>u});var r,i=n(35143),s=n(42553),o=n(46053),a=(n(81806),n(76460),n(47249),n(85842)),l=n(23243);let c=r=class extends s.A{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],c.prototype,"minValue",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],c.prototype,"maxValue",void 0),(0,i._)([(0,o.MZ)(l.Wp)],c.prototype,"symbol",void 0),c=r=(0,i._)([(0,a.$)("esri.renderers.support.ClassBreakInfo")],c);const u=c},29632:(e,t,n)=>{n.d(t,{Fe:()=>d,Km:()=>s,Nk:()=>l});var r=n(69539),i=n(97763);function s(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)a(n,t);if(e.symbolLayers)for(const n of e.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":o(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":s(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(const e of n.effects)a(e,t)}}else null!=e.height&&(e.height*=t)}function o(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,i.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||s(r.symbol,t,!0,n)}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function l(e){const t=[];return c((0,i.lW)(e),t),t.length?new r.A((0,i.e6)(t[0])):null}function c(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const s of n.symbolLayers)if(!(s.colorLocked||r&&((0,i.mA)(s)||(0,i.MM)(s)&&s.markerPlacement&&(0,i.zr)(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&u(t,s.tintColor);break;case"CIMVectorMarker":s.markerGraphics?.forEach((e=>{c(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":u(t,s.color);break;case"CIMHatchFill":c(s.lineSymbol,t)}}function u(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function d(e,t,n){t instanceof r.A||(t=new r.A(t));const s=(0,i.lW)(e);s&&p(s,t,n)}function p(e,t,n){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===r?.type;if(r?.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked)continue;if(s)if(n){const{layersToColor:e}=n;if(((0,i.mA)(o)||(0,i.MM)(o)&&o.markerPlacement&&(0,i.zr)(o.markerPlacement))&&"fill"===e||(0,i.jn)(o)&&"outline"===e)continue}else if((0,i.mA)(o)||(0,i.MM)(o)&&o.markerPlacement&&(0,i.zr)(o.markerPlacement))continue;const e=t.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=e;break;case"CIMVectorMarker":o.markerGraphics?.forEach((e=>{p(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":o.color=e;break;case"CIMHatchFill":p(o.lineSymbol,t,n)}}}},30218:(e,t,n)=>{n.d(t,{FJ:()=>w,Dp:()=>M,KV:()=>_});var r=n(35143),i=n(48611),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),a=n(80979),l=n(69098),c=n(94643),u=n(42553),d=n(17707),p=n(68002),h=n(49723);const f={write:{overridePolicy:(e,t,n)=>({enabled:!n||"scale"===n.filterMode})}};let y=class extends(l.A.ClonableMixin(u.A)){constructor(e){super(e),this.id=(0,h.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"id",void 0),(0,r._)([(0,s.MZ)({type:Number,json:f})],y.prototype,"maxScale",void 0),(0,r._)([(0,s.MZ)({type:Number,json:f})],y.prototype,"minScale",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"title",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"where",void 0),y=(0,r._)([(0,o.$)("esri.layers.support.DisplayFilter")],y);const m=y;var g=n(64810);let b=class extends(l.A.ClonableMixin(u.A)){constructor(e){super(e),this.activeFilterId=null,this.filters=new(c.A.ofType(m)),this.mode="manual"}writeFilters(e,t,n,r){const i=e.toArray();"scale"===this.mode&&i.sort(((e,t)=>{const n=(0,p.oW)(t.minScale,e.minScale),r=e.maxScale-t.maxScale;return 0===n?r:n})),t[n]=i.map((e=>e.toJSON(r)))}write(e,t){return super.write(e,(0,g.mW)(this,t))}};(0,r._)([(0,s.MZ)({type:String,json:{write:{overridePolicy:(e,t,n)=>({enabled:"manual"===n.filterMode,isRequired:!0})}}})],b.prototype,"activeFilterId",void 0),(0,r._)([(0,s.MZ)({type:c.A.ofType(m),nonNullable:!0,json:{write:!0}})],b.prototype,"filters",void 0),(0,r._)([(0,d.K)("filters")],b.prototype,"writeFilters",null),(0,r._)([(0,s.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],b.prototype,"mode",void 0),b=(0,r._)([(0,o.$)("esri.layers.support.DisplayFilterInfo")],b);const I=b,w=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,r._)([(0,s.MZ)(M)],t.prototype,"displayFilterEnabled",void 0),(0,r._)([(0,s.MZ)(_)],t.prototype,"displayFilterInfo",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.DisplayFilteredLayer")],t),t},M={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:a.K,writer(e,t,n){(0,i.sM)(n,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},_={type:I,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:a.K},origins:{"web-scene":{write:!1,read:!1}}}}},30973:(e,t,n)=>{n.d(t,{DQ:()=>u,tn:()=>c});var r=n(16868),i=n(53430),s=n(75900),o=(n(56362),n(87015),n(81940),n(6929)),a=(n(7198),n(93616),n(53539),n(91904),n(40585)),l=n(17542);function c(e,t){let{displayField:n,editFieldsInfo:a,fields:l,objectIdField:c,title:u}=e;if(!l)return null;const d=h({editFieldsInfo:a,fields:l,objectIdField:c},t);if(!d.length)return null;const p=function(e){const t=(0,i.mB)(e),{titleBase:n}=e;return t?`${n}: {${t.trim()}}`:n??""}({titleBase:u,fields:l,displayField:n}),f=[new o.A,new s.A];return new r.A({title:p,content:f,fieldInfos:d})}function u(e){const{title:t,graphic:n}=e??{},{attributes:r,sourceLayer:i}=n??{},s=i&&"displayField"in i?i.displayField:null,o=s?r?.[s]:null,a=null!=o?JSON.stringify(o):null,l=n?.getObjectId()?.toString();return t||a||l||""}const d=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,i.Bz)(e,t);function p(e,t){return"oid"===e.type?-1:"oid"===t.type?1:y(e)?-1:y(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h(e,t){const n=t?.visibleFieldNames;return function(e){let{fields:t,ignoreFieldTypes:n,sortDisabled:r}=e;const i=t;return n&&(t=t.filter((e=>!n.includes(e.type)))),t===i&&(t=t.slice()),!0!==r&&t.sort(p),t}({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||m,sortDisabled:t?.sortDisabled}).map((t=>new a.A({fieldName:t.name,isEditable:(0,i.R$)(t,e),label:t.alias,format:f(t),visible:d(t,{...e,visibleFieldNames:n})})))}function f(e){switch(e.type){case"small-integer":case"integer":case"single":return new l.A({digitSeparator:!0,places:0});case"double":return new l.A({digitSeparator:!0,places:2});case"string":return(0,i.JL)(e.name)?new l.A({digitSeparator:!0,places:0}):void 0;default:return}}function y(e){if("name"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return"name"===t}const m=["geometry","blob","raster","guid","xml"]},33328:(e,t,n)=>{n.d(t,{F:()=>l});var r=n(81806),i=n(70373),s=n(2413);const o={minX:0,minY:0,maxX:0,maxY:0};function a(e,t,n){(function(e){o.minX=e[0],o.minY=e[1],o.maxX=e[2],o.maxY=e[3]})(t),e.search(o,n)}class l{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.w(9,(0,r.A)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,r)=>{e[t++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,s.Ie)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),a(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},33376:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(20176);const i={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new r.Om(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>e.ensureCentroid(t)}},33750:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(19902),i=n(98618),s=n(20176),o=n(21009);class a{constructor(){this._featureLookup=new Map}static getInstance(){return a.instance||(a.instance=new a),a.instance}static resetInstance(){a.instance&&(a.instance=null)}deleteFromStore(e){e.forEach((e=>{this._featureLookup.delete(e)}))}readFromStoreByList(e){const t=[];return e.forEach((e=>{const n=this.readFromStoreById(e);n&&t.push(n)})),t}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(e,t,n){const a=[];return e.forEach((e=>{if(!e?.id)return;e.properties||(e.properties=[]);let l,c=null;if(n&&e.properties[n]&&(c=(0,i.Ux)(e.properties[n])),"originId"in e&&"destinationId"in e&&(e.properties[o.Cz]=e.originId,e.properties[o.KQ]=e.destinationId),e.properties[t]=e.id,e.id&&this._featureLookup.has(e.id)&&this._featureLookup.get(e.id).attributes){const i=this._featureLookup.get(e.id),o=JSON.parse(JSON.stringify(Object.assign(i.attributes,e.properties)));n&&e.properties[n]&&(o[n]=(0,r.rS)(e.properties[n])),l=new s.Om(c?JSON.parse(JSON.stringify(c)):i?.geometry?JSON.parse(JSON.stringify(i.geometry)):null,o,null,e.properties[t])}else l=new s.Om(c?JSON.parse(JSON.stringify(c)):null,e.properties,null,e.properties[t]);this._featureLookup.set(`${e.typeName?`${e.typeName}__${e.id}`:e.id}`,l),a.push(l)})),a}}},35380:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(13312),a=n(91967);let l=class extends a.A{constructor(e){super(e),this.openCypherQuery=""}};(0,r._)([(0,i.MZ)()],l.prototype,"openCypherQuery",void 0),l=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphQuery")],l);const c=l;let u=class extends c{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,r._)([(0,i.MZ)()],u.prototype,"bindParameters",void 0),(0,r._)([(0,i.MZ)()],u.prototype,"bindGeometryQuantizationParameters",void 0),(0,r._)([(0,i.MZ)()],u.prototype,"outputQuantizationParameters",void 0),(0,r._)([(0,i.MZ)({type:o.A})],u.prototype,"outputSpatialReference",void 0),(0,r._)([(0,i.MZ)()],u.prototype,"provenanceBehavior",void 0),u=(0,r._)([(0,s.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],u);const d=u},37534:(e,t,n)=>{n.d(t,{Rr:()=>l,fY:()=>u,ne:()=>c});var r=n(35143),i=n(48611),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),a=n(51162);function l(e,t,n){if(!e)return null;const r=e.find((e=>!!e.field));if(!r)return null;const i=new a.A;return i.read(r,n),[i]}const c={type:[a.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:l},write:{writer:function(e,t,n,r){const s=e.find((e=>!!e.field));s&&(0,i.sM)(n,[s.toJSON()],t)}}}},u=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,r._)([(0,s.MZ)(c)],t.prototype,"orderBy",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.OrderedLayer")],t),t}},38156:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(35143),i=(n(76460),n(81806),n(47249),n(50076),n(85842)),s=n(12831);let o=class extends s.A{constructor(e){super(e)}};o=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.ObjectValue")],o);const a=o},40296:(e,t,n)=>{n.d(t,{F0:()=>a,Vx:()=>u,e2:()=>p,f:()=>h});var r=n(81806),i=n(53084),s=n(8298),o=n(44460);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.Cb:"esriGeometryPolyline"===e?o.yM:o.WR}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let c=1;function u(e,t){if((0,r.A)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let n=`this${d(t)} = null;`;for(const t in e)n+=`this${d(t)} = ${JSON.stringify(e[t])};`;const r=new Function(`\n      return class AttributesClass$${c++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `)();return()=>new r}catch(n){return()=>({[t]:null,...e})}}function d(e){return l.test(e)?`.${e}`:`["${e}"]`}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,i.o8)(e)}}]}function h(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:s.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},44081:(e,t,n)=>{n.d(t,{LF:()=>a,M9:()=>l,zu:()=>c});var r=n(50076),i=n(48611),s=n(7847),o=n(58503);function a(e,t,n){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const n of e)t.push({scale:n.scale,value:c(n.value)});return t}return c(e)}(e)}catch(r){n?.messages?.push(r)}return null}function l(e,t,n,r){try{const r=function(e){const t=(0,s.q)(e);return t?(0,o.dw)(t)?t.map((e=>e.toJSON())):t.map((e=>{let{scale:t,effects:n}=e;return{scale:t,value:n.map((e=>e.toJSON()))}})):null}(e);(0,i.sM)(n,r,t)}catch(l){r.messages&&r.messages.push(l)}}function c(e){if(!e?.length)return"";const t=[];for(const n of e){let e=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[u(n,"amount")];break;case"blur":e=[u(n,"radius","pt")];break;case"hue-rotate":e=[u(n,"angle","deg")];break;case"drop-shadow":e=[u(n,"xoffset","pt"),u(n,"yoffset","pt"),u(n,"blurRadius","pt"),d(n,"color")];break;case"bloom":e=[u(n,"strength"),u(n,"radius","pt"),u(n,"threshold")]}const r=`${n.type}(${e.filter(Boolean).join(" ")})`;(0,s.q)(r),t.push(r)}return t.join(" ")}function u(e,t,n){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:""+e[t]}function d(e,t){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}},44460:(e,t,n)=>{n.d(t,{Cb:()=>s,HW:()=>u,JR:()=>i,JZ:()=>l,WR:()=>a,b6:()=>d,fT:()=>r,nC:()=>c,yM:()=>o});const r=[252,146,31,255],i=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},51162:(e,t,n)=>{n.d(t,{A:()=>d});var r,i=n(35143),s=n(45802),o=n(42553),a=n(46053),l=(n(81806),n(76460),n(47249),n(85842));const c=new s.J({asc:"ascending",desc:"descending"});let u=r=class extends o.A{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new r({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],u.prototype,"field",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],u.prototype,"valueExpression",void 0),(0,i._)([(0,a.MZ)({type:c.apiValues,json:{type:c.jsonValues,read:c.read,write:c.write}})],u.prototype,"order",void 0),u=r=(0,i._)([(0,l.$)("esri.layers.support.OrderByInfo")],u);const d=u},63733:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(5364),a=n(25515),l=n(65624),c=n(5682),u=n(64519),d=n(731);let p=class extends((0,l.dM)((0,c.j)(a.A))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new u.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,r._)([(0,i.MZ)({type:d.A})],p.prototype,"elevationInfo",void 0),(0,r._)([(0,i.MZ)((0,o.C)(u.Y,"graphics"))],p.prototype,"graphics",void 0),(0,r._)([(0,i.MZ)({type:["show","hide"]})],p.prototype,"listMode",void 0),(0,r._)([(0,i.MZ)()],p.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,i.MZ)({readOnly:!0})],p.prototype,"type",void 0),(0,r._)([(0,i.MZ)({constructOnly:!0})],p.prototype,"internal",void 0),p=(0,r._)([(0,s.$)("esri.layers.GraphicsLayer")],p);const h=p},63844:(e,t,n)=>{n.d(t,{A:()=>E});var r,i=n(35143),s=n(45802),o=n(53084),a=n(76460),l=n(46053),c=n(21403),u=n(6409),d=n(28379),p=n(85842),h=n(17707),f=n(40565),y=n(53430),m=n(71832),g=n(37287),b=n(29380),I=n(23243),w=n(84563),M=n(98976),_=n(94725);const v="percent-of-total",T="field",x=new s.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:v,esriNormalizeByField:T}),S=(0,f.dp)(b.A);let A=r=class extends((0,g.h)(m.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,n){if(!Array.isArray(e))return;let r=t.minValue;return e.map((e=>{const t=new b.A;return t.read(e,n),null==t.minValue&&(t.minValue=r),null==t.maxValue&&(t.maxValue=t.minValue),r=t.maxValue,t}))}writeClassBreakInfos(e,t,n,r){const i=e.map((e=>e.write({},r)));this._areClassBreaksConsecutive()&&i.forEach((e=>delete e.classMinValue)),t[n]=i}castField(e){return null==e?e:"function"==typeof e?(a.A.getLogger(this).error(".field: field must be a string value"),null):(0,f.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=t&&T||n&&v||null,t&&n&&a.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==T&&e!==v||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,n){let r=null;r="number"==typeof e?new b.A({minValue:e,maxValue:t,symbol:(0,_.dp)(n)}):S((0,o.o8)(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const n=this.classBreakInfos.length;for(let r=0;r<n;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&a.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let n=t;this.valueExpression&&null==t?.arcade&&(n={...n,arcade:await(0,M.lw)()});const r=this.getBreakIndex(e,n);return-1!==r?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void a.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&null==t?.arcade){const e=await(0,M.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),n={...n,arcade:e}}const r=this.getBreakIndex(e,n);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${n}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new r({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,o.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,o.o8)(this.visualVariables),legendOptions:(0,o.o8)(this.legendOptions),authoringInfo:(0,o.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){const n=[...this.symbols.map((n=>n.collectRequiredFields(e,t))),(0,y.Dx)(e,t,this.valueExpression)];(0,y.rq)(e,t,this.field),(0,y.rq)(e,t,this.normalizationField),await Promise.all(n)}_getBreakIndexForExpression(e,t){const{viewingMode:n,scale:r,spatialReference:i,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const e=c.createSyntaxTree(a);l=c.createFunction(e),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const u=c.executeFunction(l,c.createExecContext(e,c.getViewInfo({viewingMode:n,scale:r,spatialReference:i}),o));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){const t=this.field,n=e.attributes,r=this.normalizationType;let i=parseFloat(n[t]);if(r){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?n[this.normalizationField]:void 0);if("log"===r)i=Math.log(i)*Math.LOG10E;else if(r!==v||null==e||isNaN(e)){if(r===T&&!isNaN(t)){if(isNaN(i)||isNaN(t))return-1;i/=t}}else i=i/e*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let n=0;n<this.classBreakInfos.length;n++){const r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return n}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}};(0,i._)([(0,l.MZ)(I.As)],A.prototype,"backgroundFillSymbol",void 0),(0,i._)([(0,l.MZ)({type:[b.A],json:{write:{isRequired:!0}}})],A.prototype,"classBreakInfos",void 0),(0,i._)([(0,d.w)("classBreakInfos")],A.prototype,"readClassBreakInfos",null),(0,i._)([(0,h.K)("classBreakInfos")],A.prototype,"writeClassBreakInfos",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"defaultLabel",void 0),(0,i._)([(0,l.MZ)(I.z4)],A.prototype,"defaultSymbol",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"field",void 0),(0,i._)([(0,c.w)("field")],A.prototype,"castField",null),(0,i._)([(0,l.MZ)({type:Boolean})],A.prototype,"isMaxInclusive",void 0),(0,i._)([(0,l.MZ)({type:w.A,json:{write:!0}})],A.prototype,"legendOptions",void 0),(0,i._)([(0,l.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],A.prototype,"minValue",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"normalizationField",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],A.prototype,"normalizationTotal",void 0),(0,i._)([(0,l.MZ)({type:x.apiValues,value:null,json:{type:x.jsonValues,read:x.read,write:x.write}})],A.prototype,"normalizationType",null),(0,i._)([(0,u.e)({classBreaks:"class-breaks"})],A.prototype,"type",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"valueExpression",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"valueExpressionTitle",void 0),A=r=(0,i._)([(0,p.$)("esri.renderers.ClassBreaksRenderer")],A);const E=A},64519:(e,t,n)=>{n.d(t,{Y:()=>c});var r=n(35143),i=n(39356),s=(n(76460),n(40565)),o=(n(81806),n(47249),n(50076),n(29101)),a=n(85842),l=n(5364);let c=class extends l.X{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};(0,r._)([(0,o.u)({Type:i.A,ensureType:(0,s.dp)(i.A)})],c.prototype,"itemType",void 0),c=(0,r._)([(0,a.$)("esri.support.GraphicsCollection")],c)},64810:(e,t,n)=>{n.d(t,{Ch:()=>a,mW:()=>s,u2:()=>o});var r=n(15941),i=n(34154);function s(e,t){return{...t,filterMode:e.mode}}function o(e,t){return l(e,t).next().value??null}function a(e,t,n){const s=function(e){if("manual"===u(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:n,maxScale:r}of e.filters)t[0]=Math.max(t[0],d(n)),t[1]=Math.min(t[1],p(r));return t}(e);if(s&&((0,r.gg)(t,s[0])||(0,r.ZH)(n,s[1])))return"";const o=Array.from(l(e,t,n)),a=function(e,t,n){if(0===e.length)return!0;const i=d(e.at(0)?.minScale),s=p(e.at(-1)?.maxScale);if((0,r.ZH)(i,t)||(0,r.gg)(s,n))return!0;for(let o=0;o<e.length-1;o++){const t=e[o],n=e[o+1];if((0,r.ZH)(d(n.minScale),p(t.maxScale)))return!0}return!1}(o,t,n)?"1=1":o.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,i.IW)(e,t)),"");return a&&"1=1"!==a?a:""}function*l(e,t,n){if("manual"===u(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const r of e.filters)c(r.minScale,r.maxScale,t,n)&&(yield r)}}function c(e,t,n,i){return e=d(e),n=d(n),t=p(t),!(!(0,r.Sp)(n,e)&&(i??n)>e)&&!(0,r.Hx)(t,n)&&(void 0===i||!(0,r.Sp)(i,e))}function u(e){return"mode"in e?e.mode:e.filterMode}function d(e){return e||Number.POSITIVE_INFINITY}function p(e){return e||0}},65460:(e,t,n)=>{n.d(t,{BI:()=>m,D3:()=>f,XJ:()=>y,lc:()=>h,mX:()=>b,rU:()=>g,tH:()=>v});var r=n(88685);const i="__begin__",s="__end__",o=new RegExp(i,"ig"),a=new RegExp(s,"ig"),l=new RegExp("^"+i,"i"),c=new RegExp(s+"$","i"),u='"',d=u+" + ",p=" + "+u;function h(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function f(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function y(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=h(e.labelExpression),t.type="conventional"),t}function m(e){const t=y(e);switch(t.type){case"conventional":return b(t.expression);case"arcade":return t.expression}return null}function g(e){const t=y(e);switch(t.type){case"conventional":return function(e){const t=e?.match(I);return t?.[1].trim()||null}(t.expression);case"arcade":return v(t.expression)}return null}function b(e){let t;return e?(t=(0,r.HC)(e,(e=>i+'$feature["'+e+'"]'+s)),t=l.test(t)?t.replace(l,""):u+t,t=c.test(t)?t.replace(c,""):t+u,t=t.replaceAll(o,d).replaceAll(a,p)):t='""',t}const I=/^\s*\{([^}]+)\}\s*$/i;const w=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,M=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,_=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function v(e){if(!e)return null;let t=w.exec(e)||M.exec(e);return t?t[1]||t[3]:(t=_.exec(e),t?t[2]:null)}},65624:(e,t,n)=>{n.d(t,{LF:()=>u,dM:()=>d,sU:()=>l});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(80979),a=n(44081);const l={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:o.K}},"portal-item":{read:!0,write:{layerContainerTypes:o.K}}}}},c={read:{reader:a.LF},write:{allowNull:!0,writer:a.M9,layerContainerTypes:o.K}},u={json:{read:!1,write:!1,origins:{"web-map":c,"portal-item":c}}},d=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,i.MZ)(l)],t.prototype,"blendMode",void 0),(0,r._)([(0,i.MZ)(u)],t.prototype,"effect",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.BlendLayer")],t),t}},68002:(e,t,n)=>{n.d(t,{X_:()=>o,i1:()=>a,oW:()=>c,zx:()=>l});var r=n(15941),i=n(31633);const s=96;function o(e,t){const n=t||e.extent,r=e.width,o=(0,i.GA)(n?.spatialReference);return n&&r?n.width/r*o*i.dy*s:0}function a(e,t){return e/((0,i.GA)(t)*i.dy*s)}function l(e,t,n){return function(e,t){return 0===t||(0,r.Sp)(e,t)||e<t}(e,t)&&function(e,t){return 0===t||(0,r.Sp)(e,t)||e>t}(e,n)}function c(e,t){return(0,r.Sp)(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}},68325:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(35143),i=n(42553),s=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),a=n(12831);let l=class extends i.A{constructor(e){super(e),this.path=[]}};(0,r._)([(0,s.MZ)({type:[a.A],json:{write:!0}})],l.prototype,"path",void 0),l=(0,r._)([(0,o.$)("esri.rest.knowledgeGraph.Path")],l);const c=l},70373:(e,t,n)=>{n.d(t,{E:()=>x,w:()=>a});var r=n(18690),i=n(4212),s=(n(81806),n(30015)),o=n(61196);class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,t=arguments.length>1?arguments[1]:void 0;this._compareMinX=p,this._compareMinY=h,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),M.prune(),_.prune(),v.prune(),T.prune()}all(e){l(this._data,e)}search(e,t){let n=this._data;const r=this._toBBox;if(I(e,n))for(M.clear();n;){for(let i=0,s=n.children.length;i<s;i++){const s=n.children[i],o=n.leaf?r(s):s;I(e,o)&&(n.leaf?t(s):b(e,o)?l(s,t):M.push(s))}n=M.pop()}}collides(e){let t=this._data;const n=this._toBBox;if(!I(e,t))return!1;for(M.clear();t;){for(let r=0,i=t.children.length;r<i;r++){const i=t.children[r],s=t.leaf?n(i):i;if(I(e,s)){if(t.leaf||b(e,s))return!0;M.push(i)}}t=M.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new A([]),this}remove(e){if(!e)return this;let t,n=this._data,s=null,o=0,a=!1;const l=this._toBBox(e);for(v.clear(),T.clear();n||v.length>0;){if(n||(n=v.pop(),s=v.data[v.length-1],o=T.pop()??0,a=!0),n.leaf&&(t=(0,r.qh)(n.children,(0,i.zI)(e),n.children.length,n.indexHint),-1!==t))return n.children.splice(t,1),v.push(n),this._condense(v),this;a||n.leaf||!b(n,l)?s?(o++,n=s.children[o],a=!1):n=null:(v.push(n),T.push(o),o=0,s=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_build(e,t,n,r){const i=n-t+1;let s=this._maxEntries;if(i<=s){const r=new A(e.slice(t,n+1));return c(r,this._toBBox),r}r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(r-1)));const o=new E([]);o.height=r;const a=Math.ceil(i/s),l=a*Math.ceil(Math.sqrt(s));w(e,t,n,l,this._compareMinX);for(let c=t;c<=n;c+=l){const t=Math.min(c+l-1,n);w(e,c,t,a,this._compareMinY);for(let n=c;n<=t;n+=a){const i=Math.min(n+a-1,t);o.children.push(this._build(e,n,i,r-1))}}return c(o,this._toBBox),o}_insert(e,t,n){const r=this._toBBox,i=n?e:r(e);v.clear();const s=function(e,t,n,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==n;){let n,r=1/0,i=1/0;for(let s=0,o=t.children.length;s<o;s++){const o=t.children[s],a=f(o),l=m(e,o)-a;l<i?(i=l,r=a<r?a:r,n=o):l===i&&a<r&&(r=a,n=o)}t=n||t.children[0]}return t}(i,this._data,t,v);for(s.children.push(e),d(s,i);t>=0&&v.data[t].children.length>this._maxEntries;)this._split(v,t),t--;!function(e,t,n){for(let r=n;r>=0;r--)d(t.data[r],e)}(i,v,t)}_split(e,t){const n=e.data[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);const s=this._chooseSplitIndex(n,i,r);if(!s)return;const o=n.children.splice(s,n.children.length-s),a=n.leaf?new A(o):new E(o);a.height=n.height,c(n,this._toBBox),c(a,this._toBBox),t?e.data[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this._data=new E([e,t]),this._data.height=e.height+1,c(this._data,this._toBBox)}_chooseSplitIndex(e,t,n){let r,i,s;r=i=1/0;for(let o=t;o<=n-t;o++){const t=u(e,0,o,this._toBBox),a=u(e,o,n,this._toBBox),l=g(t,a),c=f(t)+f(a);l<r?(r=l,s=o,i=c<i?c:i):l===r&&c<i&&(i=c,s=o)}return s}_chooseSplitAxis(e,t,n){const r=e.leaf?this._compareMinX:p,i=e.leaf?this._compareMinY:h;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const i=this._toBBox,s=u(e,0,t,i),o=u(e,n-t,n,i);let a=y(s)+y(o);for(let l=t;l<n-t;l++){const t=e.children[l];d(s,e.leaf?i(t):t),a+=y(s)}for(let l=n-t-1;l>=t;l--){const t=e.children[l];d(o,e.leaf?i(t):t),a+=y(o)}return a}_condense(e){for(let t=e.length-1;t>=0;t--){const n=e.data[t];if(0===n.children.length)if(t>0){const i=e.data[t-1],s=i.children;s.splice((0,r.qh)(s,n,s.length,i.indexHint),1)}else this.clear();else c(n,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){let n=e;for(_.clear();n;){if(!0===n.leaf)for(const e of n.children)t((0,i.zI)(e));else _.pushArray(n.children);n=_.pop()??null}}function c(e,t){u(e,0,e.children.length,t,e)}function u(e,t,n,r,i){i||(i=new A([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,o=t;o<n;o++)s=e.children[o],d(i,e.leaf?r(s):s);return i}function d(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function p(e,t){return e.minX-t.minX}function h(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function y(e){return e.maxX-e.minX+(e.maxY-e.minY)}function m(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function g(e,t){const n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function b(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function I(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function w(e,t,n,r,i){const s=[t,n];for(;s.length;){const t=s.pop(),n=s.pop();if(t-n<=r)continue;const a=n+Math.ceil((t-n)/r/2)*r;(0,o.q)(e,a,n,t,i),s.push(n,a,a,t)}}const M=new s.A,_=new s.A,v=new s.A,T=new s.A({deallocator:void 0});class x{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class S extends x{constructor(){super(...arguments),this.height=1,this.indexHint=new r.vW}}class A extends S{constructor(e){super(),this.children=e,this.leaf=!0}}class E extends S{constructor(e){super(),this.children=e,this.leaf=!1}}},72547:(e,t,n)=>{n.d(t,{A:()=>f});var r=n(18690),i=n(50076),s=n(54099),o=n(76460),a=n(42294),l=n(2413),c=n(98618),u=n(33328),d=n(55167),p=n(33376);const h=(0,a.vt)();class f{constructor(e){this.geometryInfo=e,this._boundsStore=new u.F,this._featuresById=new Map,this._usedMemory=0,this.events=new s.A,this.featureAdapter=p.T}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,n,r,i]=this.fullBounds;return{xmin:t,ymin:n,xmax:r,ymax:i,spatialReference:(0,d.ag)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(e){const t=e.map((e=>this._upsert(e)));return this._emitChanged(),t.filter(r.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t((0,a.Jt)(h,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void o.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.A("featurestore:invalid-feature","feature id is missing",{feature:e}));const n=this._featuresById.get(t);let r;if(n?(e.displayId=n.displayId,r=this._boundsStore.get(t),this._boundsStore.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=(0,c.jQ)(null!=r?r:(0,l.vt)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=r&&this._boundsStore.set(t,r),this._featuresById.set(t,e),this._usedMemory+=this.estimateFeatureUsedMemory?.(e)??0}_upsert(e){const t=e?.objectId;if(null==t)return o.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.A("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const n=this._featuresById.get(t);if(!n)return this._add(e),e;this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0;const{geometry:r,attributes:s}=e;for(const i in s)n.attributes[i]=s[i];return r&&(n.geometry=r,this._boundsStore.set(t,(0,c.jQ)((0,l.vt)(),r,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(n)??0,n}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);const t=e.objectId;return this._boundsStore.delete(t),this._featuresById.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(e)??0,e}}},75146:(e,t,n)=>{n.d(t,{A:()=>r});class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new r;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},76350:(e,t,n)=>{n.d(t,{p:()=>l});var r=n(81806),i=n(76460),s=n(44135),o=n(1900),a=n(53430);function l(){return{fields:{type:[s.A],value:null,set:function(e){if(e&&(0,r.A)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");i.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return o.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const n=this.fieldsIndex?.has(t);n||i.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,a.DB)(this.fieldsIndex,e)}}}}},78817:(e,t,n)=>{n.d(t,{B:()=>h,e:()=>f});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(28379)),o=n(85842),a=n(80979),l=n(53430),c=n(83982),u=n(90115),d=n(59187),p=n(93030);const h={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:a.K}}},f=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const n=t.timeInfo.exportOptions;if(!n)return null;const r=n.timeOffset,i=u.j.fromJSON(n.timeOffsetUnits);return r&&i?new p.A({value:r,unit:i}):null}set timeInfo(e){(0,l.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,i.MZ)({type:d.A,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,i.MZ)({type:p.A})],t.prototype,"timeOffset",void 0),(0,r._)([(0,s.w)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,i.MZ)({value:null,type:c.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,i.MZ)(h)],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.TemporalLayer")],t),t}},83716:(e,t,n)=>{n.d(t,{A:()=>re});var r=n(35143),i=n(16868),s=n(53084),o=n(76460),a=n(77717),l=(n(16783),n(46053)),c=(n(81806),n(85842)),u=n(17707),d=n(49140),p=n(76797),h=n(19247),f=n(65215),y=n(23701),m=n(9624),g=n(13312),b=n(80963),I=n(31608),w=n(25515),M=n(72547),_=n(48094),v=n(40296),T=n(21009);n(47249);const x=(0,n(76350).p)(),S=e=>{let t=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,r._)([(0,l.MZ)(x.fields)],t.prototype,"fields",void 0),(0,r._)([(0,l.MZ)(x.fieldsIndex)],t.prototype,"fieldsIndex",void 0),t=(0,r._)([(0,c.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],t),t};var A=n(2948),E=n(65624),C=n(30218),k=n(74440),N=n(52908),L=n(37534),F=n(21617),R=n(5682),B=n(78817),O=n(95363),D=n(54490),j=n(44135),P=n(53430),$=n(95114),Z=n(27937),G=n(83982),z=n(5766),q=n(86616),V=n(49176),Y=n(77725),U=n(97015),H=n(30973),J=n(94439),X=n(59989);function Q(e){if(!e.json)return e;e.json.write=W(e.json.write);const t=e.json.origins;if(!t)return e;let n;for(n in t){const e=t[n];e&&(e.write=W(e.write))}return e}function W(e){return"object"==typeof e&&e?(!1!==e.enabled&&(e.overridePolicy=function(e){const{target:t,writer:n,overridePolicy:r,...i}=e;return function(e,t){const n=ee.call(this,e,t);return n.enabled?{...i,...n}:n}}(e)),e):!0===e?K():e}function K(){return{overridePolicy:ee}}function ee(e,t){const n=!!this.geometryType;let r={enabled:n};return n&&(r={...r,...te.call(this,e,t)}),r}function te(e,t){return{ignoreOrigin:this.originIdOf(t)>d.Gr.DEFAULTS}}let ne=class extends(S((0,C.FJ)((0,N.J)((0,k.F)((0,E.dM)((0,L.fY)((0,B.e)((0,R.j)((0,F.J)((0,a.P)(w.A))))))))))){constructor(e){var t;super(e),t=this,this.blendMode="normal",this.capabilities=(0,v.f)(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.displayFilterEnabled=!0,this.displayFilterInfo=null,this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=T.dr,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new X.A(e.port1,{channel:e,client:{queryFeatures:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=U.A.fromJSON(e);return t.queryFeaturesJSON(r,n)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}get fields(){const e=[];return this.objectType?.properties?.forEach((t=>{const n="esriFieldTypeOID"===t.fieldType?"esriFieldTypeInteger":t.fieldType;e.push(j.A.fromJSON({name:t.name,type:n,alias:t.alias,defaultValue:t.defaultValue,editable:t.editable,nullable:t.nullable}))})),e.push(j.A.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),j.A.fromJSON({name:T.M1,type:"esriFieldTypeInteger",alias:T.M1,editable:!1}),j.A.fromJSON({name:T.BL,type:"esriFieldTypeInteger",alias:T.BL,editable:!1})),e}get geometryType(){if("link-chart"===this.parentCompositeLayer?.type)return"relationship"===this.graphType?"polyline":"point";const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.geometryType;return t&&"esriGeometryNull"!==t?I.gy.fromJSON(t):null}get geometryFieldName(){if("link-chart"===this.parentCompositeLayer?.type)return T.T1;const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name);return e?.name??null}get graphTypeName(){return this.objectType?.name}get hasM(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,n=t?this.objectType?.properties?.[t]:null;return n?.hasM??!1}get hasZ(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,n=t?this.objectType?.properties?.[t]:null;return n?.hasZ??!1}set labelingInfo(e){this._set("labelingInfo",e)}get labelingInfo(){if(this._isOverridden("labelingInfo"))return this._get("labelingInfo");const e=this.objectType.properties?(0,A.MY)(this.objectType.properties):"ESRI__ID";return"link-chart"===this.parentCompositeLayer.type?(0,A.iW)(this.graphType,this.graphTypeName,e):(0,A.e$)(this.graphTypeName,this.geometryType,e)}set renderer(e){(0,P.yp)(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const e=this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel,t=[...e?.entityTypes??[],...e?.relationshipTypes??[]].map((e=>e.name)).indexOf(this.graphTypeName),n=(0,A.Td)(t);if("link-chart"===this.parentCompositeLayer?.type){if("relationship"===this.graphType)return new z.A({type:"simple",symbol:(0,A.UT)(n)});const e=(0,q.r)((0,v.F0)(I.gy.toJSON("point")).renderer);return(0,J.dt)(e.symbol,n),e}const r=(0,q.r)((0,v.F0)(I.gy.toJSON(this.geometryType)).renderer);return(0,J.dt)(r.symbol,n),r}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??g.A.WGS84}set timeInfo(e){this._set("timeInfo",e)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(e){this._set("title",e)}writeTitle(e,t){t.title=e??"Layer"}createPopupTemplate(e){return(0,H.tn)(this,e)}createQuery(){return new U.A({where:"1=1",outFields:["*"]})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){return null}async queryFeatures(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e),i=Y.A.fromJSON(await r.executeQuery(n.toJSON(),t?.signal));return i.features.forEach((e=>{e.sourceLayer=this})),i}async queryFeaturesJSON(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e);return await r.executeQuery(n.toJSON(),t?.signal)}async queryFeatureCount(e,t){await this.load();const{resolvedQuery:n,queryEngine:r}=await this._setupQueryObjects(e);return r.executeQueryForCount(n.toJSON(),t?.signal)}async queryExtent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;await this.load();const n={...e,returnGeometry:!0},{resolvedQuery:r,queryEngine:i}=await this._setupQueryObjects(n),s=await i.executeQueryForExtent(r.toJSON(),t?.signal);let o;return o=null!=s.extent?.xmin&&null!=s.extent?.xmax&&null!=s.extent?.ymin&&null!=s.extent?.ymax?new p.A(s.extent):new p.A,{count:s.count,extent:o}}async queryObjectIds(e,t){await this.load();const n=U.A.from(e);let r;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)r=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(n,this,t);r=this.loadQueryEngine(e)}return await r.executeQueryForIds(n.toJSON(),t?.signal)}loadQueryEngine(e){const t=new M.A({geometryType:I.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),n=new _.do({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:I.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:this.timeInfo?.toJSON(),featureStore:t});return n.featureStore.addMany(e),n}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new U.A({where:"1=1",outFields:[T.dr]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}load(e){return this.addResolvingPromise(this.parent.load(e).then((()=>(0,P.sv)(this.timeInfo,this.fieldsIndex)))),Promise.resolve(this)}async _setupQueryObjects(e,t){const n=U.A.from(e),r=n.geometry;if(r&&!r.spatialReference?.isWGS84&&(await(0,m.initializeProjection)(r.spatialReference,b.KK),n.geometry=(0,m.project)(r instanceof f.A||r instanceof y.A||r instanceof h.A?r:r.extent,b.KK)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)return{resolvedQuery:n,queryEngine:this._cachedQueryEngine};const i=await this.parentCompositeLayer.dataManager.getData(n,this,t);return{resolvedQuery:n,queryEngine:this.loadQueryEngine(i)}}};(0,r._)([(0,l.MZ)(Q((0,s.o8)(E.sU)))],ne.prototype,"blendMode",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"capabilities",void 0),(0,r._)([(0,l.MZ)({json:{origins:{"web-scene":{write:!1}},write:K()}})],ne.prototype,"charts",void 0),(0,r._)([(0,l.MZ)({readOnly:!0})],ne.prototype,"defaultPopupTemplate",null),(0,r._)([(0,l.MZ)({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],ne.prototype,"definitionExpression",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"displayField",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(C.Dp)))],ne.prototype,"displayFilterEnabled",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(C.KV)))],ne.prototype,"displayFilterInfo",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(E.LF)))],ne.prototype,"effect",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"elevationInfo",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(k.Y)))],ne.prototype,"featureEffect",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(D.d)))],ne.prototype,"featureReduction",null),(0,r._)([(0,l.MZ)()],ne.prototype,"fields",null),(0,r._)([(0,l.MZ)()],ne.prototype,"geometryType",null),(0,r._)([(0,l.MZ)()],ne.prototype,"geometryFieldName",null),(0,r._)([(0,l.MZ)({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],ne.prototype,"graphType",void 0),(0,r._)([(0,l.MZ)({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],ne.prototype,"graphTypeName",null),(0,r._)([(0,l.MZ)()],ne.prototype,"hasM",null),(0,r._)([(0,l.MZ)()],ne.prototype,"hasZ",null),(0,r._)([(0,l.MZ)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],ne.prototype,"id",void 0),(0,r._)([(0,l.MZ)({type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",default:!1,write:{overridePolicy(){return{enabled:!!this.geometryType,alwaysWriteDefaults:!0,ignoreOrigin:!0}}}}})],ne.prototype,"labelsVisible",void 0),(0,r._)([(0,l.MZ)({type:[$.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:function(e,t,n){const r=[["ESRI__AGGREGATION_COUNT",T.M1],["ESRI__ORIGIN_ID",T.Cz],["ESRI__DESTINATION_ID",T.KQ],["ESRI__LAYOUT_GEOMETRY",T.T1]];try{for(const t of e)for(const[e,n]of r)t.labelExpression=t.labelExpression?.replaceAll(e,n),t.labelExpressionInfo?.expression&&(t.labelExpressionInfo.expression=t.labelExpressionInfo.expression.replaceAll(e,n))}catch(i){o.A.getLogger(this).warn("Error updating labelingInfo",i)}return(0,Z.w)(e,t,n)},write:K()}})],ne.prototype,"labelingInfo",null),(0,r._)([(0,l.MZ)({readOnly:!0,json:{read:!1,write:{writer(e,t){switch(this.parentCompositeLayer?.type){case"link-chart":t.layerType="LinkChartSubLayer";break;case"knowledge-graph":t.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],ne.prototype,"layerType",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(O.fV)))],ne.prototype,"legendEnabled",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(O.hG)))],ne.prototype,"maxScale",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(O.hn)))],ne.prototype,"minScale",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"objectIdField",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"objectType",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(O.ke)))],ne.prototype,"opacity",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(L.ne)))],ne.prototype,"orderBy",void 0),(0,r._)([(0,l.MZ)({clonable:!1})],ne.prototype,"parent",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"parentCompositeLayer",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(O.M6)))],ne.prototype,"popupEnabled",void 0),(0,r._)([(0,l.MZ)({type:i.A,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],ne.prototype,"popupTemplate",void 0),(0,r._)([(0,l.MZ)({type:Number,json:{write:{overridePolicy:te}}})],ne.prototype,"refreshInterval",void 0),(0,r._)([(0,l.MZ)({types:V.Hg,json:{name:"layerDefinition.drawingInfo.renderer",write:K()}})],ne.prototype,"renderer",null),(0,r._)([(0,l.MZ)()],ne.prototype,"source",void 0),(0,r._)([(0,l.MZ)()],ne.prototype,"spatialReference",null),(0,r._)([(0,l.MZ)({type:G.A,json:{name:"layerDefinition.timeInfo",write:!0,origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:!0},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:!0}}}})],ne.prototype,"timeInfo",null),(0,r._)([(0,l.MZ)({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],ne.prototype,"title",null),(0,r._)([(0,u.K)("title")],ne.prototype,"writeTitle",null),(0,r._)([(0,l.MZ)({json:{read:!1}})],ne.prototype,"type",void 0),(0,r._)([(0,l.MZ)(Q((0,s.o8)(B.B)))],ne.prototype,"useViewTime",void 0),(0,r._)([(0,l.MZ)({type:Boolean,json:{name:"visibility",write:K()}})],ne.prototype,"visible",void 0),ne=(0,r._)([(0,c.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],ne);const re=ne},83982:(e,t,n)=>{n.d(t,{A:()=>y});var r=n(35143),i=n(69098),s=n(42553),o=n(46053),a=(n(81806),n(76460),n(47249),n(28379)),l=n(85842),c=n(17707),u=n(59187),d=n(93030),p=n(67478);function h(e,t){return d.A.fromJSON({value:e,unit:t})}let f=class extends(i.A.ClonableMixin(s.A)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?u.A.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?h(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?h(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,r._)([(0,o.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],f.prototype,"cumulative",void 0),(0,r._)([(0,o.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],f.prototype,"endField",void 0),(0,r._)([(0,o.MZ)({type:u.A,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"fullTimeExtent",void 0),(0,r._)([(0,a.w)("fullTimeExtent",["timeExtent"])],f.prototype,"readFullTimeExtent",null),(0,r._)([(0,c.K)("fullTimeExtent")],f.prototype,"writeFullTimeExtent",null),(0,r._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"hasLiveData",void 0),(0,r._)([(0,o.MZ)({type:d.A,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"interval",void 0),(0,r._)([(0,a.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],f.prototype,"readInterval",null),(0,r._)([(0,c.K)("interval")],f.prototype,"writeInterval",null),(0,r._)([(0,o.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],f.prototype,"startField",void 0),(0,r._)([(0,o.MZ)((0,p.P6)("timeReference",!0))],f.prototype,"timeZone",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"trackIdField",void 0),(0,r._)([(0,o.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],f.prototype,"useTime",void 0),(0,r._)([(0,o.MZ)({type:[Date],json:{read:!1}})],f.prototype,"stops",void 0),f=(0,r._)([(0,l.$)("esri.layers.support.TimeInfo")],f);const y=f},84202:(e,t,n)=>{n.d(t,{A7:()=>c,Cx:()=>u,Hk:()=>d,JJ:()=>y,SF:()=>p,UK:()=>l,jM:()=>h,x3:()=>f});n(81806);var r=n(86875),i=n(7246),s=n(76940),o=n(86659),a=n(44460);const l=s.A.fromJSON(a.Cb),c=i.A.fromJSON(a.yM),u=r.A.fromJSON(a.WR),d=o.A.fromJSON(a.JZ);function p(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return c;case"polygon":case"extent":return u}return null}const h=s.A.fromJSON(a.nC),f=i.A.fromJSON(a.HW),y=r.A.fromJSON(a.b6)},85646:(e,t,n)=>{n.d(t,{$C:()=>g,Hh:()=>o,J:()=>c,JT:()=>l,Tu:()=>y,Wg:()=>m,Xq:()=>I,i6:()=>w,pM:()=>f,tx:()=>a,vJ:()=>b});var r=n(28899);let i,s=null;function o(){return i||(i=n.e(3884).then(n.bind(n,83884)).then((e=>e.l)).then((e=>{let{default:t}=e;return t({locateFile:e=>(0,r.s)(`esri/libs/linkchartlayout/${e}`)})})).then((e=>{!function(e){s=e}(e)})),i)}var a,l,c,u;!function(e){e[e.None=0]="None",e[e.IsMovable=1]="IsMovable",e[e.IsGeographic=2]="IsGeographic",e[e.IsRoot=4]="IsRoot",e[e.IsOld=8]="IsOld"}(a||(a={})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Canceled=2]="Canceled"}(l||(l={})),function(e){e[e.Regular=0]="Regular",e[e.Curved=1]="Curved",e[e.Recursive=2]="Recursive"}(c||(c={})),function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.top=2]="top",e[e.bottom=3]="bottom"}(u||(u={}));const d={none:0,"start-only":1,"start-and-end":2};function p(e){const t={timeDirection:"right",timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:"start-and-end",showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0,...e?.toJSON()??{},eventsTicksVisualization:e?.eventsTicksVisualization??"start-and-end"};return{...t,timeDirection:{value:u[t.timeDirection]??u.right},eventsTicksVisualization:{value:d[t.eventsTicksVisualization]??d["start-and-end"]}}}function h(e,t,n,r,i,o){const a=n.length,c=i.length,u=Float64Array.BYTES_PER_ELEMENT,d=Uint32Array.BYTES_PER_ELEMENT,p=Uint8Array.BYTES_PER_ELEMENT,h=16+a*(p+2*u)+c*(2*d),f=s._malloc(h);try{const p=f+16-f%16,h=p+a*u,y=h+a*u,m=y+c*d,g=m+c*d,b=()=>[s.HEAPF64.subarray(p>>3,(p>>3)+a),s.HEAPF64.subarray(h>>3,(h>>3)+a),s.HEAPU32.subarray(y>>2,(y>>2)+c),s.HEAPU32.subarray(m>>2,(m>>2)+c),s.HEAPU8.subarray(g,g+a)],[I,w,M,_,v]=b();I.set(n),w.set(r),M.set(i),_.set(o),v.set(t);const T=e(a,g,p,h,c,y,m);let x=null,S=null;if(T.value===l.Success){const e=s.getLayoutLinksTypes(),t=s.getLayoutLinksVerticesEndIndices(),n=s.getLayoutLinksVertices(),r=s.countLayoutLinksVertices();!c||e&&t?r&&!n?T.value=l.Error:(x={types:new Uint8Array(s.HEAPU8.subarray(e,e+c)),vertexEndIndex:new Uint32Array(s.HEAPU32.subarray(t>>2,(t>>2)+c)),vertices:new Float64Array(s.HEAPF64.subarray(n>>3,(n>>3)+2*r))},S=s.getAuxiliaryGraphicElements()):T.value=l.Error}const[A,E,C,k,N]=b();return n.set(A),r.set(E),i.set(C),o.set(k),t.set(N),{status:T.value,links:x,graphics:S}}finally{s._free(f),s.cleanupLayout()}}var f,y,m,g,b,I,w,M,_;!function(e){e.getMinIdealEdgeLength=function(){return s.getMinIdealEdgeLength()},e.apply=function(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;return h(((t,n,r,i,o,u,d)=>s.applyForceDirectedLayout(e,t,n,r,i,o,u,d,a,l,c)),t,n,r,i,o)}}(f||(f={})),function(e){e.apply=function(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;return h(((t,n,r,i,o,u,d)=>s.applyCommunityLayout(e,t,n,r,i,o,u,d,a,l,c)),t,n,r,i,o)}}(y||(y={})),function(e){e.apply=function(e,t,n,r,i,o){return h(((t,n,r,i,o,a,l)=>s.applySimpleLayout(e,t,n,r,i,o,a,l)),t,n,r,i,o)}}(m||(m={})),function(e){e.apply=function(e,t,n,r,i,o){return h(((t,n,r,i,o,a,l)=>s.applyHierarchicalLayout(e,t,n,r,i,o,a,l)),t,n,r,i,o)}}(g||(g={})),function(e){e.apply=function(e,t,n,r,i,o){return h(((t,n,r,i,o,a,l)=>s.applyRadialTreeLayout(e,t,n,r,i,o,a,l)),t,n,r,i,o)}}(b||(b={})),function(e){e.apply=function(e,t,n,r,i,o){return h(((t,n,r,i,o,a,l)=>s.applySmartTreeLayout(e,t,n,r,i,o,a,l)),t,n,r,i,o)}}(I||(I={})),function(e){e.apply=function(e,t,n,r,i,o,a,c,u,d,f,y){return h(((t,n,r,a,c,h,m)=>{if(i.length!==t)return{value:l.Error};if(o.length!==t)return{value:l.Error};if(u.length!==c)return{value:l.Error};if(d.length!==c)return{value:l.Error};const g=Float64Array.BYTES_PER_ELEMENT,b=16,I=s._malloc(b+t*g),w=s._malloc(b+t*g),M=s._malloc(b+c*g),_=s._malloc(b+c*g),v=I+b-I%b,T=w+b-w%b,x=M+b-M%b,S=_+b-_%b;try{return s.HEAPF64.subarray(v>>3,(v>>3)+t).set(i),s.HEAPF64.subarray(T>>3,(T>>3)+t).set(o),s.HEAPF64.subarray(x>>3,(x>>3)+c).set(u),s.HEAPF64.subarray(S>>3,(S>>3)+c).set(d),s.applyChronologicalLayout(e,t,n,r,a,v,T,c,h,m,x,S,f,p(y))}finally{s._free(I),s._free(w),s._free(M),s._free(_)}}),t,n,r,a,c)}}(w||(w={})),function(e){e[e.Undirected=0]="Undirected",e[e.Directed=1]="Directed",e[e.Reversed=2]="Reversed"}(M||(M={})),function(e){e[e.ByCC_Raw=0]="ByCC_Raw",e[e.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",e[e.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(_||(_={}))},87840:(e,t,n)=>{n.d(t,{$4:()=>I,O0:()=>w,O1:()=>M,Sw:()=>_,eH:()=>g,rc:()=>b});var r=n(28899),i=n(69539),s=n(3825),o=n(53521),a=n(76931),l=n(29632);const c="picture-fill",u="simple-fill",d="simple-line",p="simple-marker",h="text",f="cim",y=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),m=new o.q(1e3);function g(e){const t=e.style;let n=null;if(e)switch(e.type){case p:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:t&&"solid"!==t?"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.s)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):n=e.color;break;case c:n={type:"pattern",src:e.url,width:(0,a.Lz)(e.width)*e.xscale,height:(0,a.Lz)(e.height)*e.yscale,x:(0,a.Lz)(e.xoffset),y:(0,a.Lz)(e.yoffset)};break;case h:n=e.color;break;case f:n=(0,l.Nk)(e)}return n}function b(e,t){const n=e+"-"+t;return void 0!==m.get(n)?Promise.resolve(m.get(n)):(0,s.A)(e,{responseType:"image"}).then((e=>{const r=e.data,i=r.naturalWidth,s=r.naturalHeight,o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d");a.fillStyle=t,a.fillRect(0,0,i,s),a.globalCompositeOperation="destination-in",a.drawImage(r,0,0);const l=o.toDataURL();return m.put(n,l),l}))}function I(e){if(!e)return null;let t=null;switch(e.type){case u:case c:case p:t=I(e.outline);break;case d:{const n=(0,a.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:M(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,a.Lz)(e.miterLimit):e.join},t.dashArray=w(t).join(",")||"none");break}default:t=null}return t}function w(e){if(!e?.style)return[];const{dashArray:t,style:n,width:r}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const i=r??0,s=y.has(n)?y.get(n).map((e=>e*i)):[];if("butt"!==e.cap)for(const[o,a]of s.entries())s[o]=o%2==1?a+i:Math.max(a-i,1);return s}const M=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),_=new i.A([128,128,128])},90115:(e,t,n)=>{n.d(t,{j:()=>r});const r=(0,n(45802).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},90321:(e,t,n)=>{function r(e,t){return e?t?4:3:t?3:2}function i(e,t,n,i){if(!t?.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const a=e.coords,l=[],c=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:u,coords:d}=t,p=r(n,i);let h=0;for(const r of u){const e=s(c,d,h,r,n,i);e&&l.push(e),h+=r*p}if(l.sort(((e,t)=>{let r=e[2]-t[2];return 0===r&&n&&(r=e[4]-t[4]),r})),l.length){let e=6*l[0][2];a[0]=l[0][0]/e,a[1]=l[0][1]/e,n&&(e=6*l[0][4],a[2]=0!==e?l[0][3]/e:0),(a[0]<c[0]||a[0]>c[1]||a[1]<c[2]||a[1]>c[3]||n&&(a[2]<c[4]||a[2]>c[5]))&&(a.length=0)}if(!a.length){const e=t.lengths[0]?o(d,0,u[0],n,i):null;if(!e)return null;a[0]=e[0],a[1]=e[1],n&&e.length>2&&(a[2]=e[2])}return e}function s(e,t,n,i,s,o){const a=r(s,o);let l=n,c=n+a,u=0,d=0,p=0,h=0,f=0;for(let r=0,m=i-1;r<m;r++,l+=a,c+=a){const n=t[l],r=t[l+1],i=t[l+2],o=t[c],a=t[c+1],y=t[c+2];let m=n*a-o*r;h+=m,u+=(n+o)*m,d+=(r+a)*m,s&&(m=n*y-o*i,p+=(i+y)*m,f+=m),n<e[0]&&(e[0]=n),n>e[1]&&(e[1]=n),r<e[2]&&(e[2]=r),r>e[3]&&(e[3]=r),s&&(i<e[4]&&(e[4]=i),i>e[5]&&(e[5]=i))}if(h>0&&(h*=-1),f>0&&(f*=-1),!h)return null;const y=[u,d,.5*h];return s&&(y[3]=p,y[4]=.5*f),y}function o(e,t,n,i,s){const o=r(i,s);let d=t,p=t+o,h=0,f=0,y=0,m=0;for(let r=0,g=n-1;r<g;r++,d+=o,p+=o){const t=e[d],n=e[d+1],r=e[d+2],s=e[p],o=e[p+1],g=e[p+2],b=i?l(t,n,r,s,o,g):a(t,n,s,o);if(b)if(h+=b,i){const e=u(t,n,r,s,o,g);f+=b*e[0],y+=b*e[1],m+=b*e[2]}else{const e=c(t,n,s,o);f+=b*e[0],y+=b*e[1]}}return h>0?i?[f/h,y/h,m/h]:[f/h,y/h]:n>0?i?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function a(e,t,n,r){const i=n-e,s=r-t;return Math.sqrt(i*i+s*s)}function l(e,t,n,r,i,s){const o=r-e,a=i-t,l=s-n;return Math.sqrt(o*o+a*a+l*l)}function c(e,t,n,r){return[e+.5*(n-e),t+.5*(r-t)]}function u(e,t,n,r,i,s){return[e+.5*(r-e),t+.5*(i-t),n+.5*(s-n)]}n.d(t,{Q:()=>i})},93030:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(35143),i=n(69098),s=n(42553),o=n(18288),a=n(46053),l=(n(81806),n(76460),n(47249),n(6409)),c=n(85842),u=n(90115);let d=class extends(i.A.ClonableMixin(s.A)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,o.t)(this.value,this.unit,"milliseconds")}};(0,r._)([(0,l.e)(u.j,{nonNullable:!0})],d.prototype,"unit",void 0),(0,r._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),d=(0,r._)([(0,c.$)("esri.time.TimeInterval")],d);const p=d},94439:(e,t,n)=>{n.d(t,{$d:()=>f,GG:()=>T,N7:()=>y,Sx:()=>m,UQ:()=>v,di:()=>x,dt:()=>b,f3:()=>S,k_:()=>h});var r=n(69539),i=n(98773),s=(n(81806),n(76931)),o=n(9392),a=n(44081),l=n(29632),c=n(87840),u=n(9994),d=n(94725);const p=new r.A("white");function h(e){if(!e)return 0;if((0,d.wk)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,s.PN)((0,c.$4)(e)?.width)}function f(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function y(e){return e.resource?.href??""}function m(e,t){if(!e)return null;let n=null;return(0,d.wk)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.A(n):null}(e):(0,d.$y)(e)&&(n="cim"===e.type?(0,l.Nk)(e):e.color?new r.A(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.A(n)}function b(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.A(t)),(0,d.wk)(e)?function(e,t,n){const r=e.symbolLayers;if(!r)return;const i=e=>g(t=t??e??(null!=n?p:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=i(e.color);else{const t=null!=e.material?e.material.color:null,r=i(t);null==e.material?e.material=new u.N({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,n))}}))}(e,t,n):(0,d.$y)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&e.outline?.color&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function I(e,t){const r=e.symbolLayers;r&&await(0,i.jJ)(r,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=w(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=M(t,o.Un,[e.width,void 0,e.height]);e.width=_(t[0],e.width,1,n),e.height=_(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:i}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(4374).then(n.bind(n,44374)),r=await t(e,10),{width:i,height:s,depth:o}=e,a=[i,o,s];let l=1;for(let n=0;n<3;n++){const e=a[n];if(null!=e){l=e/r[n];break}}for(let n=0;n<3;n++)null==a[n]&&(a[n]=r[n]*l);return{resourceSize:r,symbolSize:a}}(e),s=M(t,r,i);e.width=_(t[0],i[0],r[0],s),e.depth=_(t[1],i[1],r[1],s),e.height=_(t[2],i[2],r[2],s)}(e,t)}}(e,t)))}function w(e){for(const t of e)if("number"==typeof t)return t;return null}function M(e,t,n){for(let r=0;r<3;r++){const i=e[r];switch(i){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(i&&t[r])return i/t[r]}}return 1}function _(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}async function v(e,t){if(e&&t)return(0,d.wk)(e)?I(e,t):void((0,d.$y)(e)&&function(e,t){const n=w(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function T(e,t,n){if(e&&null!=t)if((0,d.wk)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if("object"===e.type)switch(n){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}"icon"===e.type&&(e.angle+=t)}))}else(0,d.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function x(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.zu)(t)}function S(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}},97255:(e,t,n)=>{n.d(t,{Qf:()=>l,Qh:()=>o,RS:()=>i,ez:()=>d,i5:()=>p,lM:()=>s,qK:()=>u});var r=n(78393);const i=16;function s(e){if(!e)return 0;let t=u;for(const n in e)e.hasOwnProperty(n)&&(t+=a(e[n],!1));return t}function o(e){if(!e)return 0;if("number"==typeof e[0])return l(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return c(e,8);let n=d;for(let r=0;r<t;r++)n+=a(e[r]);return n}(e);let t=u;for(const n in e)e.hasOwnProperty(n)&&(t+=a(e[n]));return t}function a(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof e){case"object":return t?o(e):u;case"string":return function(e){return 32+e.length}(e);case"number":return i;case"boolean":return 4;default:return 8}}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e+(t?(0,r.iu)(t)?t.byteLength+p:Array.isArray(t)?c(t,i):0:0)),0)}function c(e,t){return d+e.length*t}const u=32,d=16,p=145},97763:(e,t,n)=>{n.d(t,{$w:()=>g,Bu:()=>k,DW:()=>S,FH:()=>$,FM:()=>c,G9:()=>s,GV:()=>I,Go:()=>u,K3:()=>P,Kn:()=>T,MM:()=>h,MO:()=>z,Nl:()=>N,Ny:()=>w,O2:()=>L,UE:()=>F,YC:()=>G,YF:()=>B,ZO:()=>D,_1:()=>E,_H:()=>_,_W:()=>b,_d:()=>x,bs:()=>Z,dI:()=>J,e6:()=>d,gQ:()=>l,iA:()=>j,jn:()=>y,lW:()=>p,mA:()=>f,n5:()=>R,pM:()=>A,pV:()=>v,pk:()=>q,rB:()=>V,s4:()=>i,xo:()=>C,yH:()=>M,yX:()=>X,zb:()=>O,zr:()=>m});var r=n(13442);function i(e,t,n,r){return function(e){return"function"==typeof e}(e)?e(t,n,r):e}function s(e){return[e.r,e.g,e.b,e.a]}const o=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!o.includes(e.charAt(t)))return!1;return!0}function l(e,t){const n=[];let r=0,i=-1;do{if(i=e.indexOf("[",r),i>=r){if(i>r){const t=e.slice(r,i);n.push([t,null,a(t)])}if(r=i+1,i=e.indexOf("]",r),i>=r){if(i>r){const s=t[e.slice(r,i)];s&&n.push([null,s,!1])}r=i+1}}}while(-1!==i);if(r<e.length){const t=e.slice(r);n.push([t,null,a(t)])}return n}function c(e,t,n,r){let i="",s=null;for(const o of t){const[t,r,a]=o;if(t)a?s=t:(s&&(i+=s,s=null),i+=t);else{let t=r;null!=n&&(t=z(r,n));const o=e.attributes[t];o&&(s&&(i+=s,s=null),i+=o)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(i,r)}function u(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=t/i,l=n/s,c=Math.ceil(a/2),u=Math.ceil(l/2);for(let d=0;d<s;d++)for(let n=0;n<i;n++){const p=4*(n+(o?s-d-1:d)*i);let h=0,f=0,y=0,m=0,g=0,b=0,I=0;const w=(d+.5)*l;for(let r=Math.floor(d*l);r<(d+1)*l;r++){const i=Math.abs(w-(r+.5))/u,s=(n+.5)*a,o=i*i;for(let l=Math.floor(n*a);l<(n+1)*a;l++){let n=Math.abs(s-(l+.5))/c;const i=Math.sqrt(o+n*n);i>=-1&&i<=1&&(h=2*i*i*i-3*i*i+1,h>0&&(n=4*(l+r*t),I+=h*e[n+3],y+=h,e[n+3]<255&&(h=h*e[n+3]/250),m+=h*e[n],g+=h*e[n+1],b+=h*e[n+2],f+=h))}}r[p]=m/f,r[p+1]=g/f,r[p+2]=b/f,r[p+3]=I/y}}function d(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function p(e){return e.data?.symbol??null}function h(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function y(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function m(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e||isNaN(e)?t:e},b=(e,t)=>null!=e?e:t,I=(e,t)=>e??t,w=e=>e.tintColor?d(e.tintColor):[255,255,255,1],M=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function _(){return Promise.all([n.e(2612),n.e(7983)]).then(n.bind(n,1669))}function v(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function T(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function x(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function S(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function A(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=A(t);if(null!=e)return e}break;case"CIMTextSymbol":return A(e.symbol);case"CIMSolidFill":return e.color}return null}function E(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=E(e);if(null!=t)return t}break}case"CIMTextSymbol":return E(e.symbol);case"CIMSolidStroke":return e.color}}function C(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=C(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function k(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function N(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function L(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const F=e=>e.includes("data:image/svg+xml");function R(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function B(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function O(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const{infos:a}=s;let l=1,c=0,u=0,d=0,p=1;for(const{absoluteAnchorPoint:y,offsetX:m,offsetY:g,rotation:b,size:I,frameHeight:w,rotateClockWise:M,scaleSymbolsProportionally:_}of a)p=y?1:l,u=U(m,g,c,p,u),d=Y(m,g,c,p,d),w&&(_||o)&&(l*=I/w),c=H(b,M,c);const h=U(r,i,c,p,u),f=Y(r,i,c,p,d);return{size:e*l,rotation:H(t,n,c),offsetX:h,offsetY:f}}function D(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>D(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function j(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...r.K[t]];const n=r.D[e];if(!n)throw new Error(`InternalError: default value for type ${e}.`);return n[t]}function P(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function $(e){return e?.dashTemplate&&(e.dashTemplate=P(e.dashTemplate)),e}function Z(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return Z(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return Z(e.symbol)}}return"Normal"}function G(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const n of e.symbolLayers)if(n)switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=n.size??r.D.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const n of e.symbolLayers)if(n)switch(n.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=n.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(n.markerPlacement&&m(n.markerPlacement)){const e=n.size??r.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=n.height;null!=e&&e>t&&(t=e)}}return t}}}function z(e,t){if(null!==t){const n=t.get(e);return n?n.name:e}return e}function q(e){return e.map((e=>({...e,propertyName:B(e.propertyName)})))}function V(e){const t={};for(const n in e){const r=e[n];t[B(n)]=r}return t}function Y(e,t,n,r,i){const s=n*Math.PI/180;if(s){const n=Math.cos(s);return(Math.sin(s)*e+n*t)*r+i}return t*r+i}function U(e,t,n,r,i){const s=n*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*r+i:e*r+i}function H(e,t,n){return t?n-e:n+e}function J(e,t,n){const r="Color"===n||"TintColor"===n||"ToColor"===n,i="Rotation"===n||"Angle"===n||"ToRotation"===n;let s=t[B(n)];if(null!=s&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:i&&(s*=Math.PI/180)),null==s&&(s=j(t.type,n.toLowerCase()),null!=s&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:i&&(s*=Math.PI/180))),null!=t.primitiveName){const o=e[t.primitiveName];if(null!=o){const e=o[n];null==e||("string"==typeof e||"number"==typeof e||Array.isArray(e)?(s=e,null!=s&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:i&&(s*=Math.PI/180))):(s={valueExpressionInfo:e,defaultValue:s},null!=s&&(r?s={type:"Process",op:"ArcadeColor",value:s}:i&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(null==s)throw new Error(`Failed to derive a value or an expression for "${n}".`);return s}function X(e,t){return Math.max(Math.min((e??t)/100,1),0)}}}]);
//# sourceMappingURL=3347.5106e4b6.chunk.js.map