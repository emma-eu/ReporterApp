"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[61924],{61924:(e,n,t)=>{t.d(n,{OE:()=>p,getRampStops:()=>z,mh:()=>y});var l=t(69539),o=t(24921),i=t(99738),r=t(7246),s=t(76940),a=t(29632),u=t(94725),c=t(94439),f=t(60823),m=(t(76099),t(91896));const y=30,p=12,d=24,b=[255,255,255],h=[200,200,200],g=[128,128,128],v=20,w=5;async function z(e,n,t,l,i,r,s){const a=n.legendOptions,u=a?.customValues,m=s||await L(e,t),y=n.stops,p=!!m,b=!!u,h=null!=n.minSize&&null!=n.maxSize,g=y&&y.length>1,v=!!n.target;if(!p||!b&&!(h||g&&!v))return;const w=(0,c.$d)(m);let z=!1,x=null,C=null;x=w&&!g?(0,o.LI)([n.minDataValue,n.maxDataValue]):u??await M(n,m,l,i?.type);const D=e?.authoringInfo,P="univariate-color-size"===D?.type,R=P&&"above-and-below"===D?.univariateTheme,q=!!(0,f._l)(e);if(!x&&g&&(x=y.map((e=>e.value)),z=y.some((e=>!!e.label)),"flow"===e.type&&(x=(0,o.LI)(x)),z&&(C=y.map((e=>e.label)))),w&&null!=x&&x?.length>2&&!R&&(x=[x[0],x[x.length-1]]),!x)return null;P&&5!==x?.length&&(x=V({minSize:x[0],maxSize:x[x.length-1]}));const E=w?k(e,x):null,_=(0,c.k_)(m),B=z?null:function(e,n){const t=e.length-1;return e.map(((e,l)=>(0,f.Dd)(e,l,t,n)))}(x,r);return(await Promise.all(x.map((async(o,r)=>{const s=w?E[r]:await O(n,m,o,l,i?.type);return{value:o,symbol:!q||"class-breaks"!==e.type&&"unique-value"!==e.type?A(R&&"class-breaks"===e.type?I(e,r):m,s):S(e,s,n.maxSize,t)??m,label:z?C[r]:B[r],size:q?d:s,outlineSize:_}})))).reverse()}function k(e,n){const t=e?.authoringInfo,l="univariate-color-size"===t?.type;let o=[p,y];if(l){const e=n[0],t=n[n.length-1],l=p,i=y;o=n.map((n=>l+(n-e)/(t-e)*(i-l)))}return l&&"below"===t?.univariateTheme&&o.reverse(),o}function S(e,n,t,o){const r="class-breaks"===e.type,s=r?e.classBreakInfos?.[0]?.symbol?.clone():e.uniqueValueInfos?.[0]?.symbol?.clone();return s&&"type"in s&&"cim"===s.type?((0,i.oz)(s,{color:o??(r?null:new l.A(h)),innerDotSize:n*(d/t)||1,outerRingSize:d}),s):null}function I(e,n){const t=e.classBreakInfos,l=t.length,o=l<2||!(n>=2)?t[0].symbol.clone():t[l-1].symbol.clone(),i=e.visualVariables?.some((e=>"color"===e.type));return i&&(o.type.includes("3d")?x(o):C(o)),o}async function L(e,n){if("flow"===e.type)return(0,f.Zo)(e,n);if("pie-chart"===e.type)return new s.A({color:null,outline:e.outline?.width?e.outline:new r.A});let t=null,l=null;if("simple"===e.type)t=e.symbol;else if("class-breaks"===e.type){const n=e.classBreakInfos;t=n&&n[0]&&n[0].symbol,l=n.length>1}else if("unique-value"===e.type){const n=e.uniqueValueInfos;t=n?.[0]?.symbol,l=null!=n&&n.length>1}return!t||function(e){return(0,u.wk)(e)?e.symbolLayers?.some((e=>"fill"===e?.type))??!1:e?.type.includes("fill")??!1}(t)?null:(t=t.clone(),(n||l)&&(t.type.includes("3d")?x(t):C(t)),t)}function x(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:g}})):e.symbolLayers.forEach((e=>{"icon"!==e.type||e.resource?.href?e.material={color:h}:(e.material={color:b},e.outline={color:g,size:1.5})}))}function C(e){const n=(0,m.g4)();if("cim"===e.type)(0,a.Fe)(e,new l.A(h));else if(e.type.includes("line"))e.color=g;else if(e.color=n?g:b,"simple-marker"===e.type)if(e.outline){const n=e.outline?.color?.toHex();"#ffffff"===n&&(e.outline.color=g)}else e.outline={color:g,width:1.5}}async function M(e,n,l,i){const r=(await Promise.resolve().then(t.bind(t,15492))).getSizeRangeAtScale(e,l,i),s=r&&V(r);if(!r||!s)return;let a=s.map((n=>function(e,n,t){const l=t.minSize,o=t.maxSize,i=n.minDataValue,r=n.maxDataValue;let s;s=e<=l?i:e>=o?r:(e-l)/(o-l)*(r-i)+i;return s}(n,e,r)));a=(0,o.LI)(a);for(let t=1;t<a.length-1;t++){const o=await D(e,n,a[t],a[t-1],l,i);o&&(a[t]=o[0],s[t]=o[1])}return a}function V(e){const n=e.minSize,t=e.maxSize,l=w,o=(t-n)/(l-1),i=[];for(let r=0;r<l;r++)i.push(n+o*r);return i}async function D(e,n,t,l,i,r){const s=await O(e,n,t,i,r),a=await O(e,n,l,i,r),u=(0,o.lc)(t),c=u.fractional,f=v;let m=u.integer,y=null,p=null;t>0&&t<1&&(y=10**c,m=(0,o.lc)(t*=y).integer);for(let d=m-1;d>=0;d--){const l=10**d;let u=Math.floor(t/l)*l,c=Math.ceil(t/l)*l;null!=y&&(u/=y,c/=y);let m=(u+c)/2;[,m]=(0,o.LI)([u,m,c],{indexes:[1]});const b=await O(e,n,u,i,r),h=await O(e,n,c,i,r),g=await O(e,n,m,i,r),v=(0,o.u5)(s,b,a,null),w=(0,o.u5)(s,h,a,null),z=(0,o.u5)(s,g,a,null);let k=v.previous<=f,S=w.previous<=f;if(k&&S&&(v.previous<=w.previous?(k=!0,S=!1):(S=!0,k=!1)),k?p=[u,b]:S?p=[c,h]:z.previous<=f&&(p=[m,g]),p)break}return p}async function O(e,n,l,o,i){const{getSize:r}=await Promise.resolve().then(t.bind(t,15492));return r(e,l,{scale:o,view:i,shape:"simple-marker"===n.type?n.style:null})}function A(e,n){const t=e.clone();if((0,u.wk)(t))(0,c.$d)(t)||t.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=n)}));else if(function(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(t))t.size=n;else if(function(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(t)){const e=t.width,l=t.height;t.height=n,t.width=n*(e/l)}else!function(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(t)?function(e){return"esri.symbols.TextSymbol"===e.declaredClass}(t)&&t.font&&(t.font.size=n):t.width=n;return t}},99738:(e,n,t)=>{t.d(n,{oz:()=>m});t(50076);var l,o=t(53084);t(63040),t(89465),t(28808);function i(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function r(e){return"CIMVectorMarker"===e?.type?e.markerGraphics?.[0]:void 0}function s(e){return"CIMPolygonSymbol"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}function a(e,n){"CIMVectorMarker"===e?.type&&null!=n&&(e.size=n)}function u(e,n){const t=r(e);t&&null!=n&&(t.geometry=i(n))}function c(e,n){const t=s(r(e));t&&null!=n&&(t.color=n.toArray())}function f(e,n,t){const l=s(r(e));l&&null!=n&&t&&(l.colorLocked=n)}function m(e,n){const{outerRingSize:t,innerDotSize:i,type:r,color:s,colorLocked:m,primitiveOverrides:y}=n,p="CIMPolygonSymbol"===e.data.symbol?.type?e.data.symbol.symbolLayers:null;if(2===p?.length)for(const o of p){const e=o.primitiveName===l.OuterRing;a(o,e?t:i),u(o,r),c(o,s),f(o,m,e)}return null!=t&&null!=i&&(e.data.primitiveOverrides=null),void 0!==y&&(e.data.primitiveOverrides=(0,o.o8)(y)),e}!function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"}(l||(l={}))}}]);
//# sourceMappingURL=61924.19de8e5a.chunk.js.map