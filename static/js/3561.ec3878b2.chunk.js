"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[3561],{5682:(e,t,s)=>{s.d(t,{j:()=>n});var r=s(35143),i=s(46053),a=(s(81806),s(76460),s(47249),s(85842));const n=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===e.minScale&&s.maxScale===e.maxScale?s:e}};return(0,r._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,r._)([(0,i.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,r._)([(0,i.MZ)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,r._)([(0,a.$)("esri.layers.mixins.ScaleRangeLayer")],t),t}},15427:(e,t,s)=>{s.d(t,{A:()=>d});var r=s(35143),i=s(69098),a=s(45802),n=s(42553),l=s(46053),o=(s(81806),s(76460),s(47249),s(85842));const u=new a.J({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let c=class extends(i.A.ClonableMixin(n.A)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,r._)([(0,l.MZ)({json:{write:!0}})],c.prototype,"name",void 0),(0,r._)([(0,l.MZ)({json:{write:!0}})],c.prototype,"description",void 0),(0,r._)([(0,l.MZ)({json:{read:u.read,write:u.write}})],c.prototype,"drawingTool",void 0),(0,r._)([(0,l.MZ)({json:{write:!0}})],c.prototype,"prototype",void 0),(0,r._)([(0,l.MZ)({json:{write:!0}})],c.prototype,"thumbnail",void 0),c=(0,r._)([(0,o.$)("esri.layers.support.FeatureTemplate")],c);const d=c},21617:(e,t,s)=>{s.d(t,{J:()=>w});var r=s(35143),i=(s(81806),s(76460)),a=s(50346),n=s(46053),l=s(21403),o=(s(47249),s(85842)),u=s(80979),c=s(94643),d=s(68134),p=s(49281);const h=new c.A,m=new WeakMap;function f(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function y(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:y(t,e%t):0}let g=0,b=0;function v(){const e=Date.now();let t=!1;for(const s of h){const r=s.deref();r?r.refreshInterval&&e-(m.get(r)??0)+5>=6e4*r.refreshInterval&&(m.set(r,e),r.refresh(e)):t=!0}if(t)for(let s=h.length-1;s>=0;s--)h.at(s).deref()||h.removeAt(s)}(0,p.fm)((()=>{const e=Date.now();let t=0;for(const s of h){const r=s.deref();r&&(t=y(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?m.get(r)||m.set(r,e):m.delete(r))}if(t!==b){if(b=t,clearInterval(g),0===b)return void(g=0);g=setInterval(v,b)}}),d.OH);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,a.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){f(e)&&h.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=h.find((t=>t.deref()===e));t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,a.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{i.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,r._)([(0,n.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.K}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,l.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,n.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,o.$)("esri.layers.mixins.RefreshableLayer")],t),t}},29380:(e,t,s)=>{s.d(t,{A:()=>c});var r,i=s(35143),a=s(42553),n=s(46053),l=(s(81806),s(76460),s(47249),s(85842)),o=s(23243);let u=r=class extends a.A{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,i._)([(0,n.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,i._)([(0,n.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,i._)([(0,n.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],u.prototype,"minValue",void 0),(0,i._)([(0,n.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],u.prototype,"maxValue",void 0),(0,i._)([(0,n.MZ)(o.Wp)],u.prototype,"symbol",void 0),u=r=(0,i._)([(0,l.$)("esri.renderers.support.ClassBreakInfo")],u);const c=u},30973:(e,t,s)=>{s.d(t,{DQ:()=>c,tn:()=>u});var r=s(16868),i=s(53430),a=s(75900),n=(s(56362),s(87015),s(81940),s(6929)),l=(s(7198),s(93616),s(53539),s(91904),s(40585)),o=s(17542);function u(e,t){let{displayField:s,editFieldsInfo:l,fields:o,objectIdField:u,title:c}=e;if(!o)return null;const d=h({editFieldsInfo:l,fields:o,objectIdField:u},t);if(!d.length)return null;const p=function(e){const t=(0,i.mB)(e),{titleBase:s}=e;return t?`${s}: {${t.trim()}}`:s??""}({titleBase:c,fields:o,displayField:s}),m=[new n.A,new a.A];return new r.A({title:p,content:m,fieldInfos:d})}function c(e){const{title:t,graphic:s}=e??{},{attributes:r,sourceLayer:i}=s??{},a=i&&"displayField"in i?i.displayField:null,n=a?r?.[a]:null,l=null!=n?JSON.stringify(n):null,o=s?.getObjectId()?.toString();return t||l||o||""}const d=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,i.Bz)(e,t);function p(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h(e,t){const s=t?.visibleFieldNames;return function(e){let{fields:t,ignoreFieldTypes:s,sortDisabled:r}=e;const i=t;return s&&(t=t.filter((e=>!s.includes(e.type)))),t===i&&(t=t.slice()),!0!==r&&t.sort(p),t}({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||y,sortDisabled:t?.sortDisabled}).map((t=>new l.A({fieldName:t.name,isEditable:(0,i.R$)(t,e),label:t.alias,format:m(t),visible:d(t,{...e,visibleFieldNames:s})})))}function m(e){switch(e.type){case"small-integer":case"integer":case"single":return new o.A({digitSeparator:!0,places:0});case"double":return new o.A({digitSeparator:!0,places:2});case"string":return(0,i.JL)(e.name)?new o.A({digitSeparator:!0,places:0}):void 0;default:return}}function f(e){if("name"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return"name"===t}const y=["geometry","blob","raster","guid","xml"]},31362:(e,t,s)=>{s.d(t,{d:()=>n});var r=s(35143),i=s(46053),a=(s(81806),s(76460),s(47249),s(85842));const n=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,r._)([(0,i.MZ)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,r._)([(0,a.$)("esri.layers.mixins.CustomParametersMixin")],t),t}},44081:(e,t,s)=>{s.d(t,{LF:()=>l,M9:()=>o,zu:()=>u});var r=s(50076),i=s(48611),a=s(7847),n=s(58503);function l(e,t,s){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const s of e)t.push({scale:s.scale,value:u(s.value)});return t}return u(e)}(e)}catch(r){s?.messages?.push(r)}return null}function o(e,t,s,r){try{const r=function(e){const t=(0,a.q)(e);return t?(0,n.dw)(t)?t.map((e=>e.toJSON())):t.map((e=>{let{scale:t,effects:s}=e;return{scale:t,value:s.map((e=>e.toJSON()))}})):null}(e);(0,i.sM)(s,r,t)}catch(o){r.messages&&r.messages.push(o)}}function u(e){if(!e?.length)return"";const t=[];for(const s of e){let e=[];switch(s.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[c(s,"amount")];break;case"blur":e=[c(s,"radius","pt")];break;case"hue-rotate":e=[c(s,"angle","deg")];break;case"drop-shadow":e=[c(s,"xoffset","pt"),c(s,"yoffset","pt"),c(s,"blurRadius","pt"),d(s,"color")];break;case"bloom":e=[c(s,"strength"),c(s,"radius","pt"),c(s,"threshold")]}const r=`${s.type}(${e.filter(Boolean).join(" ")})`;(0,a.q)(r),t.push(r)}return t.join(" ")}function c(e,t,s){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return s?e[t]+s:""+e[t]}function d(e,t){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const s=e[t];return`rgba(${s[0]||0}, ${s[1]||0}, ${s[2]||0}, ${s[3]/255||0})`}},63844:(e,t,s)=>{s.d(t,{A:()=>B});var r,i=s(35143),a=s(45802),n=s(53084),l=s(76460),o=s(46053),u=s(21403),c=s(6409),d=s(28379),p=s(85842),h=s(17707),m=s(40565),f=s(53430),y=s(71832),g=s(37287),b=s(29380),v=s(23243),w=s(84563),x=s(98976),F=s(94725);const I="percent-of-total",k="field",S=new a.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:I,esriNormalizeByField:k}),_=(0,m.dp)(b.A);let M=r=class extends((0,g.h)(y.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,s){if(!Array.isArray(e))return;let r=t.minValue;return e.map((e=>{const t=new b.A;return t.read(e,s),null==t.minValue&&(t.minValue=r),null==t.maxValue&&(t.maxValue=t.minValue),r=t.maxValue,t}))}writeClassBreakInfos(e,t,s,r){const i=e.map((e=>e.write({},r)));this._areClassBreaksConsecutive()&&i.forEach((e=>delete e.classMinValue)),t[s]=i}castField(e){return null==e?e:"function"==typeof e?(l.A.getLogger(this).error(".field: field must be a string value"),null):(0,m.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,s=null!=this.normalizationTotal;return t||s?(e=t&&k||s&&I||null,t&&s&&l.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==k&&e!==I||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,s){let r=null;r="number"==typeof e?new b.A({minValue:e,maxValue:t,symbol:(0,F.dp)(s)}):_((0,n.o8)(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const s=this.classBreakInfos.length;for(let r=0;r<s;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&l.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let s=t;this.valueExpression&&null==t?.arcade&&(s={...s,arcade:await(0,x.lw)()});const r=this.getBreakIndex(e,s);return-1!==r?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void l.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const s=this.getBreakIndex(e,t);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let s=t;if(this.valueExpression&&null==t?.arcade){const e=await(0,x.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),s={...s,arcade:e}}const r=this.getBreakIndex(e,s);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),s=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${s}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new r({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,n.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,n.o8)(this.visualVariables),legendOptions:(0,n.o8)(this.legendOptions),authoringInfo:(0,n.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const s=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(s)}async collectSymbolFields(e,t){const s=[...this.symbols.map((s=>s.collectRequiredFields(e,t))),(0,f.Dx)(e,t,this.valueExpression)];(0,f.rq)(e,t,this.field),(0,f.rq)(e,t,this.normalizationField),await Promise.all(s)}_getBreakIndexForExpression(e,t){const{viewingMode:s,scale:r,spatialReference:i,arcade:a,timeZone:n}=t??{},{valueExpression:l}=this;let o=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const u=a.arcadeUtils;if(!o){const e=u.createSyntaxTree(l);o=u.createFunction(e),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=l;const c=u.executeFunction(o,u.createExecContext(e,u.getViewInfo({viewingMode:s,scale:r,spatialReference:i}),n));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const t=this.field,s=e.attributes,r=this.normalizationType;let i=parseFloat(s[t]);if(r){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?s[this.normalizationField]:void 0);if("log"===r)i=Math.log(i)*Math.LOG10E;else if(r!==I||null==e||isNaN(e)){if(r===k&&!isNaN(t)){if(isNaN(i)||isNaN(t))return-1;i/=t}}else i=i/e*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let s=0;s<this.classBreakInfos.length;s++){const r=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return s}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let s=1;s<t;s++)if(e[s-1].maxValue!==e[s].minValue)return!1;return!0}};(0,i._)([(0,o.MZ)(v.As)],M.prototype,"backgroundFillSymbol",void 0),(0,i._)([(0,o.MZ)({type:[b.A],json:{write:{isRequired:!0}}})],M.prototype,"classBreakInfos",void 0),(0,i._)([(0,d.w)("classBreakInfos")],M.prototype,"readClassBreakInfos",null),(0,i._)([(0,h.K)("classBreakInfos")],M.prototype,"writeClassBreakInfos",null),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],M.prototype,"defaultLabel",void 0),(0,i._)([(0,o.MZ)(v.z4)],M.prototype,"defaultSymbol",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],M.prototype,"field",void 0),(0,i._)([(0,u.w)("field")],M.prototype,"castField",null),(0,i._)([(0,o.MZ)({type:Boolean})],M.prototype,"isMaxInclusive",void 0),(0,i._)([(0,o.MZ)({type:w.A,json:{write:!0}})],M.prototype,"legendOptions",void 0),(0,i._)([(0,o.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],M.prototype,"minValue",null),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],M.prototype,"normalizationField",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{write:!0}})],M.prototype,"normalizationTotal",void 0),(0,i._)([(0,o.MZ)({type:S.apiValues,value:null,json:{type:S.jsonValues,read:S.read,write:S.write}})],M.prototype,"normalizationType",null),(0,i._)([(0,c.e)({classBreaks:"class-breaks"})],M.prototype,"type",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],M.prototype,"valueExpression",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],M.prototype,"valueExpressionTitle",void 0),M=r=(0,i._)([(0,p.$)("esri.renderers.ClassBreaksRenderer")],M);const B=M},65624:(e,t,s)=>{s.d(t,{LF:()=>c,dM:()=>d,sU:()=>o});var r=s(35143),i=s(46053),a=(s(81806),s(76460),s(47249),s(85842)),n=s(80979),l=s(44081);const o={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:n.K}},"portal-item":{read:!0,write:{layerContainerTypes:n.K}}}}},u={read:{reader:l.LF},write:{allowNull:!0,writer:l.M9,layerContainerTypes:n.K}},c={json:{read:!1,write:!1,origins:{"web-map":u,"portal-item":u}}},d=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,i.MZ)(o)],t.prototype,"blendMode",void 0),(0,r._)([(0,i.MZ)(c)],t.prototype,"effect",void 0),t=(0,r._)([(0,a.$)("esri.layers.mixins.BlendLayer")],t),t}}}]);
//# sourceMappingURL=3561.ec3878b2.chunk.js.map