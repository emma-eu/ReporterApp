"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[4992],{1900:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(50076),n=i(42553),s=i(76460),o=i(87663),a=i(64920),l=i(53430),u=i(36693),c=i(67478),d=i(24241);const p=new Map;class h{static fromJSON(e){return new h(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new h(e.fields??[],g(e))}static fromLayerJSON(e){return new h(e.fields??[],g(e))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const i=[];for(const r of this.fields){const e=r?.name,t=y(e);if(e&&t){const n=m(e);this._fieldsMap.set(e,r),this._fieldsMap.set(n,r),this._normalizedFieldsMap.set(t,r),i.push(`${n}:${r.type}:${this._timeZoneByFieldName?.get(e)}`),(0,l.vE)(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):(0,l.WA)(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),(0,l.te)(r)||(0,l.Xz)(r)||(r.editable=null==r.editable||!!r.editable,r.nullable=null==r.nullable||!!r.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,l.te)(e)||(0,l.Xz)(e)||e.nullable||void 0!==(0,l.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(m(e))??this._normalizedFieldsMap.get(y(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(s.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new r.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.n$):f.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?a.GB.instance:t===u.n$?d.mQ.utcInstance:(0,o.tE)(p,t,(()=>d.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,l.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>n.A.isSerializable(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function m(e){return e.trim().toLowerCase()}function y(e){return(0,l.rS)(e)?.toLowerCase()??""}const f=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function g(e){const t=new Map;if(!e.fields)return t;const i=!0===e.datesInUnknownTimezone,{timeInfo:r,editFieldsInfo:n}=e,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,c.ZS)(e.dateFieldsTimeReference):null,l=n?function(e){return"timeZone"in e}(n)?n.timeZone??a:n.dateFieldsTimeReference?(0,c.ZS)(n.dateFieldsTimeReference):a??u.n$:null,d=r?function(e){return"timeZone"in e}(r)?r.timeZone??a:r.timeReference?(0,c.ZS)(r.timeReference):a:null,p=new Map([[m(n?.creationDateField??""),l],[m(n?.editDateField??""),l],[m(s),d],[m(o),d]]);for(const{name:c,type:h}of e.fields)if(f.has(h))t.set(c,u.L5);else if("date"!==h&&"esriFieldTypeDate"!==h)t.set(c,null);else if(i)t.set(c,u.L5);else{const e=p.get(m(c??""))??a;t.set(c,e)}return t}},4414:(e,t,i)=>{i.d(t,{O3:()=>d,PU:()=>u,YW:()=>h,ex:()=>a,hv:()=>p,zp:()=>l});var r=i(15941),n=i(76931),s=i(43047),o=i(55855);const a=2.4;function l(e){return(0,n.PN)(e*a)}function u(e){return(0,n.Lz)(e)/a}function c(e,t,i,n){let{color:o,ratio:a}=t,{color:l,ratio:u}=i;if(u===a){const e=1e-6;1===u?a-=e:u+=e}const c=(0,r.qE)((n-a)/(u-a),0,1);(0,s.l)(e,o.toArray(),l.toArray(),c)}function d(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((e=>{let{ratio:t}=e;return t>=0&&t<=1})).sort(((e,t)=>e.ratio-t.ratio)).map((e=>{let{color:t,ratio:i}=e;return{color:t,ratio:Math.max(i,.001)}})),e.length<1)return t;let i=e[0],r=e[0],n=1;const s=(0,o.vt)();for(let o=0;o<512;o++){const a=(o+.5)/512;for(;a>r.ratio&&n<e.length;)i=r,r=e[n++];c(s,i,r,a),t.set(s,4*o)}return t}function p(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function h(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},5682:(e,t,i)=>{i.d(t,{j:()=>o});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===e.minScale&&i.maxScale===e.maxScale?i:e}};return(0,r._)([(0,n.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,r._)([(0,n.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,r._)([(0,s.$)("esri.layers.mixins.ScaleRangeLayer")],t),t}},6127:(e,t,i)=>{i.d(t,{m:()=>r});const r=new(i(45802).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},19898:(e,t,i)=>{i.d(t,{R:()=>n});var r=i(50076);let n=class e{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.major=e,this.minor=t,this._context=i}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",i=this._context&&this._context+" ";throw new r.A(t+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[n,s]=t.split("."),o=/^\s*\d+\s*$/;if(!n?.match||!o.test(n))throw new r.A((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s?.match||!o.test(s))throw new r.A((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(n,10),l=parseInt(s,10);return new e(a,l,i)}}},21617:(e,t,i)=>{i.d(t,{J:()=>_});var r=i(35143),n=(i(81806),i(76460)),s=i(50346),o=i(46053),a=i(21403),l=(i(47249),i(85842)),u=i(80979),c=i(94643),d=i(68134),p=i(49281);const h=new c.A,m=new WeakMap;function y(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function f(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:f(t,e%t):0}let g=0,v=0;function b(){const e=Date.now();let t=!1;for(const i of h){const r=i.deref();r?r.refreshInterval&&e-(m.get(r)??0)+5>=6e4*r.refreshInterval&&(m.set(r,e),r.refresh(e)):t=!0}if(t)for(let i=h.length-1;i>=0;i--)h.at(i).deref()||h.removeAt(i)}(0,p.fm)((()=>{const e=Date.now();let t=0;for(const i of h){const r=i.deref();r&&(t=f(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?m.get(r)||m.set(r,e):m.delete(r))}if(t!==v){if(v=t,clearInterval(g),0===v)return void(g=0);g=setInterval(b,v)}}),d.OH);const _=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,s.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){y(e)&&h.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=h.find((t=>t.deref()===e));t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,s.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{n.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,r._)([(0,o.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.K}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,a.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],t),t}},24329:(e,t,i)=>{i.d(t,{d:()=>w});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),o=i(16868),a=i(69098),l=i(42553),u=i(48611),c=i(17707),d=i(3522),p=i(95363),h=i(95114),m=i(49176);let y=class extends(a.A.ClonableMixin(l.A)){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};(0,r._)([(0,n.MZ)({type:[h.A],json:{write:!0}})],y.prototype,"labelingInfo",void 0),(0,r._)([(0,n.MZ)(p.kF)],y.prototype,"labelsVisible",void 0),(0,r._)([(0,n.MZ)({types:m.Hg,json:{write:!0}})],y.prototype,"renderer",void 0),(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"visible",void 0),y=(0,r._)([(0,s.$)("esri.layers.support.TrackPartInfo")],y);const f=y;var g=i(5766),v=i(84202),b=i(93030);let _=class extends(a.A.ClonableMixin(l.A)){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new f({renderer:new g.A({symbol:v.UK.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new f({renderer:new g.A({symbol:v.UK.clone()})}),this.trackLines=new f({renderer:new g.A({symbol:v.A7.clone()})}),this.timeField="startTimeField"}writeFields(e,t,i){const r=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,u.sM)(i,r,t)}};(0,r._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],_.prototype,"enabled",void 0),(0,r._)([(0,n.MZ)({type:[d.A],json:{write:!0}})],_.prototype,"fields",void 0),(0,r._)([(0,c.K)("fields")],_.prototype,"writeFields",null),(0,r._)([(0,n.MZ)({type:f,json:{write:!0}})],_.prototype,"latestObservations",void 0),(0,r._)([(0,n.MZ)({type:b.A,json:{write:!0}})],_.prototype,"maxDisplayDuration",void 0),(0,r._)([(0,n.MZ)({type:Number,json:{write:!0}})],_.prototype,"maxDisplayObservationsPerTrack",void 0),(0,r._)([(0,n.MZ)(p.M6)],_.prototype,"popupEnabled",void 0),(0,r._)([(0,n.MZ)({type:o.A,json:{name:"popupInfo",write:!0}})],_.prototype,"popupTemplate",void 0),(0,r._)([(0,n.MZ)({type:f,json:{write:!0}})],_.prototype,"previousObservations",void 0),(0,r._)([(0,n.MZ)({type:f,json:{write:!0}})],_.prototype,"trackLines",void 0),(0,r._)([(0,n.MZ)({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],_.prototype,"timeField",void 0),_=(0,r._)([(0,s.$)("esri.layers.support.TrackInfo")],_);const M=_,w=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return(0,r._)([(0,n.MZ)({type:M})],t.prototype,"trackInfo",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.TrackableLayer")],t),t}},25515:(e,t,i)=>{i.d(t,{A:()=>_});var r=i(35143),n=i(3825),s=i(50076),o=i(54099),a=i(5632),l=i(49304),u=i(76460),c=i(50346),d=i(90534),p=i(46053),h=(i(81806),i(47249),i(85842)),m=i(76797),y=i(13312),f=i(86560);var g=i(59187);let v=0,b=class extends(o.A.EventedMixin(a.A.IdentifiableMixin(l.A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new m.A(-180,-90,180,90,y.A.WGS84),this.id=Date.now().toString(16)+"-layer-"+v++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=y.A.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([i.e(652),i.e(2544)]).then(i.bind(i,62544))).fromUrl(t)}static fromPortalItem(e){return async function(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await Promise.all([i.e(9624),i.e(652),i.e(2487)]).then(i.bind(i,2487));try{return await r(t)}catch(n){const e=t?.portalItem,i=e?.id||"unset",r=e?.portal?.url||f.A.portalUrl;throw u.A.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+r+"', id: '"+i+"')",n),n}}(e)}initialize(){this.when().catch((e=>{(0,c.zf)(e)||u.A.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,d.An)(this.url)}createLayerView(e,t){return Promise.reject(new s.A("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,n.A)(e,{query:{f:"json"},responseType:"json"})).data;throw new s.A("layer:no-attribution-data","Layer does not have attribution data")}};(0,r._)([(0,p.MZ)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],b.prototype,"effectiveVisible",null),(0,r._)([(0,p.MZ)({type:m.A})],b.prototype,"fullExtent",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],b.prototype,"hasAttributionData",null),(0,r._)([(0,p.MZ)({type:String,clonable:!1})],b.prototype,"id",void 0),(0,r._)([(0,p.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,r._)([(0,p.MZ)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,r._)([(0,p.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,r._)([(0,p.MZ)({clonable:!1})],b.prototype,"parent",void 0),(0,r._)([(0,p.MZ)({readOnly:!0})],b.prototype,"parsedUrl",null),(0,r._)([(0,p.MZ)({type:Boolean,readOnly:!0})],b.prototype,"persistenceEnabled",void 0),(0,r._)([(0,p.MZ)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,r._)([(0,p.MZ)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,r._)([(0,p.MZ)({type:y.A})],b.prototype,"spatialReference",void 0),(0,r._)([(0,p.MZ)({type:String})],b.prototype,"title",void 0),(0,r._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,r._)([(0,p.MZ)()],b.prototype,"url",void 0),(0,r._)([(0,p.MZ)({type:g.A})],b.prototype,"visibilityTimeExtent",void 0),(0,r._)([(0,p.MZ)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0),b=(0,r._)([(0,h.$)("esri.layers.Layer")],b);const _=b},29380:(e,t,i)=>{i.d(t,{A:()=>c});var r,n=i(35143),s=i(42553),o=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),l=i(23243);let u=r=class extends s.A{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],u.prototype,"minValue",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],u.prototype,"maxValue",void 0),(0,n._)([(0,o.MZ)(l.Wp)],u.prototype,"symbol",void 0),u=r=(0,n._)([(0,a.$)("esri.renderers.support.ClassBreakInfo")],u);const c=u},30218:(e,t,i)=>{i.d(t,{FJ:()=>_,Dp:()=>M,KV:()=>w});var r=i(35143),n=i(48611),s=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),a=i(80979),l=i(69098),u=i(94643),c=i(42553),d=i(17707),p=i(68002),h=i(49723);const m={write:{overridePolicy:(e,t,i)=>({enabled:!i||"scale"===i.filterMode})}};let y=class extends(l.A.ClonableMixin(c.A)){constructor(e){super(e),this.id=(0,h.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"id",void 0),(0,r._)([(0,s.MZ)({type:Number,json:m})],y.prototype,"maxScale",void 0),(0,r._)([(0,s.MZ)({type:Number,json:m})],y.prototype,"minScale",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"title",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"where",void 0),y=(0,r._)([(0,o.$)("esri.layers.support.DisplayFilter")],y);const f=y;var g=i(64810);let v=class extends(l.A.ClonableMixin(c.A)){constructor(e){super(e),this.activeFilterId=null,this.filters=new(u.A.ofType(f)),this.mode="manual"}writeFilters(e,t,i,r){const n=e.toArray();"scale"===this.mode&&n.sort(((e,t)=>{const i=(0,p.oW)(t.minScale,e.minScale),r=e.maxScale-t.maxScale;return 0===i?r:i})),t[i]=n.map((e=>e.toJSON(r)))}write(e,t){return super.write(e,(0,g.mW)(this,t))}};(0,r._)([(0,s.MZ)({type:String,json:{write:{overridePolicy:(e,t,i)=>({enabled:"manual"===i.filterMode,isRequired:!0})}}})],v.prototype,"activeFilterId",void 0),(0,r._)([(0,s.MZ)({type:u.A.ofType(f),nonNullable:!0,json:{write:!0}})],v.prototype,"filters",void 0),(0,r._)([(0,d.K)("filters")],v.prototype,"writeFilters",null),(0,r._)([(0,s.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],v.prototype,"mode",void 0),v=(0,r._)([(0,o.$)("esri.layers.support.DisplayFilterInfo")],v);const b=v,_=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,r._)([(0,s.MZ)(M)],t.prototype,"displayFilterEnabled",void 0),(0,r._)([(0,s.MZ)(w)],t.prototype,"displayFilterInfo",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.DisplayFilteredLayer")],t),t},M={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:a.K,writer(e,t,i){(0,n.sM)(i,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},w={type:b,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:a.K},origins:{"web-scene":{write:!1,read:!1}}}}},30973:(e,t,i)=>{i.d(t,{DQ:()=>c,tn:()=>u});var r=i(16868),n=i(53430),s=i(75900),o=(i(56362),i(87015),i(81940),i(6929)),a=(i(7198),i(93616),i(53539),i(91904),i(40585)),l=i(17542);function u(e,t){let{displayField:i,editFieldsInfo:a,fields:l,objectIdField:u,title:c}=e;if(!l)return null;const d=h({editFieldsInfo:a,fields:l,objectIdField:u},t);if(!d.length)return null;const p=function(e){const t=(0,n.mB)(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}({titleBase:c,fields:l,displayField:i}),m=[new o.A,new s.A];return new r.A({title:p,content:m,fieldInfos:d})}function c(e){const{title:t,graphic:i}=e??{},{attributes:r,sourceLayer:n}=i??{},s=n&&"displayField"in n?n.displayField:null,o=s?r?.[s]:null,a=null!=o?JSON.stringify(o):null,l=i?.getObjectId()?.toString();return t||a||l||""}const d=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,n.Bz)(e,t);function p(e,t){return"oid"===e.type?-1:"oid"===t.type?1:y(e)?-1:y(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h(e,t){const i=t?.visibleFieldNames;return function(e){let{fields:t,ignoreFieldTypes:i,sortDisabled:r}=e;const n=t;return i&&(t=t.filter((e=>!i.includes(e.type)))),t===n&&(t=t.slice()),!0!==r&&t.sort(p),t}({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||f,sortDisabled:t?.sortDisabled}).map((t=>new a.A({fieldName:t.name,isEditable:(0,n.R$)(t,e),label:t.alias,format:m(t),visible:d(t,{...e,visibleFieldNames:i})})))}function m(e){switch(e.type){case"small-integer":case"integer":case"single":return new l.A({digitSeparator:!0,places:0});case"double":return new l.A({digitSeparator:!0,places:2});case"string":return(0,n.JL)(e.name)?new l.A({digitSeparator:!0,places:0}):void 0;default:return}}function y(e){if("name"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return"name"===t}const f=["geometry","blob","raster","guid","xml"]},31362:(e,t,i)=>{i.d(t,{d:()=>o});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,r._)([(0,n.MZ)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.CustomParametersMixin")],t),t}},32173:(e,t,i)=>{i.d(t,{A:()=>u});var r,n=i(35143),s=(i(76460),i(81806),i(47249),i(50076),i(6409)),o=i(85842),a=i(44631);let l=r=class extends a.A{constructor(e){super(e),this.type="inherited"}clone(){return new r}};(0,n._)([(0,s.e)({inherited:"inherited"})],l.prototype,"type",void 0),l=r=(0,n._)([(0,o.$)("esri.layers.support.InheritedDomain")],l);const u=l},44081:(e,t,i)=>{i.d(t,{LF:()=>a,M9:()=>l,zu:()=>u});var r=i(50076),n=i(48611),s=i(7847),o=i(58503);function a(e,t,i){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:u(i.value)});return t}return u(e)}(e)}catch(r){i?.messages?.push(r)}return null}function l(e,t,i,r){try{const r=function(e){const t=(0,s.q)(e);return t?(0,o.dw)(t)?t.map((e=>e.toJSON())):t.map((e=>{let{scale:t,effects:i}=e;return{scale:t,value:i.map((e=>e.toJSON()))}})):null}(e);(0,n.sM)(i,r,t)}catch(l){r.messages&&r.messages.push(l)}}function u(e){if(!e?.length)return"";const t=[];for(const i of e){let e=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[c(i,"amount")];break;case"blur":e=[c(i,"radius","pt")];break;case"hue-rotate":e=[c(i,"angle","deg")];break;case"drop-shadow":e=[c(i,"xoffset","pt"),c(i,"yoffset","pt"),c(i,"blurRadius","pt"),d(i,"color")];break;case"bloom":e=[c(i,"strength"),c(i,"radius","pt"),c(i,"threshold")]}const r=`${i.type}(${e.filter(Boolean).join(" ")})`;(0,s.q)(r),t.push(r)}return t.join(" ")}function c(e,t,i){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function d(e,t){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}},44135:(e,t,i)=>{i.d(t,{A:()=>f});var r,n=i(35143),s=i(45802),o=i(42553),a=i(46053),l=i(40565),u=(i(81806),i(47249),i(6409)),c=i(28379),d=i(85842),p=i(76866),h=i(6127);const m=new s.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let y=r=class extends o.A{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,t){let{description:i}=t,r=null;try{r=i?JSON.parse(i):null}catch(n){}return r?.value??null}readValueType(e,t){let{description:i}=t,r=null;try{r=i?JSON.parse(i):null}catch(n){}return r?m.fromJSON(r.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"alias",void 0),(0,n._)([(0,a.MZ)({type:[String,Number],json:{write:{allowNull:!0}}})],y.prototype,"defaultValue",void 0),(0,n._)([(0,a.MZ)()],y.prototype,"description",void 0),(0,n._)([(0,c.w)("description")],y.prototype,"readDescription",null),(0,n._)([(0,a.MZ)({types:p.gK,json:{read:{reader:p.rS},write:!0}})],y.prototype,"domain",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"editable",void 0),(0,n._)([(0,a.MZ)({type:l.jz,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],y.prototype,"length",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"nullable",void 0),(0,n._)([(0,u.e)(h.m)],y.prototype,"type",void 0),(0,n._)([(0,a.MZ)()],y.prototype,"valueType",void 0),(0,n._)([(0,c.w)("valueType",["description"])],y.prototype,"readValueType",null),(0,n._)([(0,a.MZ)({type:Boolean,json:{read:!1}})],y.prototype,"visible",void 0),y=r=(0,n._)([(0,d.$)("esri.layers.support.Field")],y);const f=y},44460:(e,t,i)=>{i.d(t,{Cb:()=>s,HW:()=>c,JR:()=>n,JZ:()=>l,WR:()=>a,b6:()=>d,fT:()=>r,nC:()=>u,yM:()=>o});const r=[252,146,31,255],n=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},44631:(e,t,i)=>{i.d(t,{A:()=>d});var r=i(35143),n=i(45802),s=i(42553),o=i(46053),a=(i(81806),i(76460),i(47249),i(6409)),l=i(85842);const u=new n.J({inherited:"inherited",codedValue:"coded-value",range:"range"});let c=class extends s.A{constructor(e){super(e),this.name=null,this.type=null}};(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,r._)([(0,a.e)(u),(0,o.MZ)({json:{write:{isRequired:!0}}})],c.prototype,"type",void 0),c=(0,r._)([(0,l.$)("esri.layers.support.Domain")],c);const d=c},49723:(e,t,i)=>{i.d(t,{AG:()=>a,lk:()=>n,vD:()=>o,yS:()=>s});const r="randomUUID"in crypto;function n(){if(r)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function s(){return`{${n().toUpperCase()}}`}function o(){return`{${n()}}`}function a(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}},50654:(e,t,i)=>{i.d(t,{A:()=>c});var r,n=i(35143),s=i(46053),o=(i(81806),i(76460),i(47249),i(6409)),a=i(85842),l=i(44631);let u=r=class extends l.A{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,n._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]},isRequired:!0}}})],u.prototype,"maxValue",void 0),(0,n._)([(0,s.MZ)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]},isRequired:!0}}})],u.prototype,"minValue",void 0),(0,n._)([(0,o.e)({range:"range"})],u.prototype,"type",void 0),u=r=(0,n._)([(0,a.$)("esri.layers.support.RangeDomain")],u);const c=u},53521:(e,t,i)=>{i.d(t,{q:()=>n});var r=i(79369);class n{constructor(e,t){this._storage=new r.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},58503:(e,t,i)=>{i.d(t,{O9:()=>s,dw:()=>o,mj:()=>n});var r=i(93103);function n(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((e,t)=>e.type===i[t].type))}function s(e,t){const i=e.length>t.length?e:t,n=e.length>t.length?t:e;for(let s=n.length;s<i.length;s++)n.push((0,r.sK)(i[s]))}function o(e){const t=e[0];return!!t&&"type"in t}},61701:(e,t,i)=>{var r;i.d(t,{X:()=>r}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(r||(r={}))},63844:(e,t,i)=>{i.d(t,{A:()=>T});var r,n=i(35143),s=i(45802),o=i(53084),a=i(76460),l=i(46053),u=i(21403),c=i(6409),d=i(28379),p=i(85842),h=i(17707),m=i(40565),y=i(53430),f=i(71832),g=i(37287),v=i(29380),b=i(23243),_=i(84563),M=i(98976),w=i(94725);const S="percent-of-total",x="field",I=new s.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:S,esriNormalizeByField:x}),F=(0,m.dp)(v.A);let A=r=class extends((0,g.h)(f.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map((e=>{const t=new v.A;return t.read(e,i),null==t.minValue&&(t.minValue=r),null==t.maxValue&&(t.maxValue=t.minValue),r=t.maxValue,t}))}writeClassBreakInfos(e,t,i,r){const n=e.map((e=>e.write({},r)));this._areClassBreaksConsecutive()&&n.forEach((e=>delete e.classMinValue)),t[i]=n}castField(e){return null==e?e:"function"==typeof e?(a.A.getLogger(this).error(".field: field must be a string value"),null):(0,m.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=null!=this.normalizationTotal;return t||i?(e=t&&x||i&&S||null,t&&i&&a.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==x&&e!==S||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r="number"==typeof e?new v.A({minValue:e,maxValue:t,symbol:(0,w.dp)(i)}):F((0,o.o8)(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&a.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&null==t?.arcade&&(i={...i,arcade:await(0,M.lw)()});const r=this.getBreakIndex(e,i);return-1!==r?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void a.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&null==t?.arcade){const e=await(0,M.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),i={...i,arcade:e}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new r({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,o.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,o.o8)(this.visualVariables),legendOptions:(0,o.o8)(this.legendOptions),authoringInfo:(0,o.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.symbols.map((i=>i.collectRequiredFields(e,t))),(0,y.Dx)(e,t,this.valueExpression)];(0,y.rq)(e,t,this.field),(0,y.rq)(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=s.arcadeUtils;if(!l){const e=u.createSyntaxTree(a);l=u.createFunction(e),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const c=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if("log"===r)n=Math.log(n)*Math.LOG10E;else if(r!==S||null==e||isNaN(e)){if(r===x&&!isNaN(t)){if(isNaN(n)||isNaN(t))return-1;n/=t}}else n=n/e*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};(0,n._)([(0,l.MZ)(b.As)],A.prototype,"backgroundFillSymbol",void 0),(0,n._)([(0,l.MZ)({type:[v.A],json:{write:{isRequired:!0}}})],A.prototype,"classBreakInfos",void 0),(0,n._)([(0,d.w)("classBreakInfos")],A.prototype,"readClassBreakInfos",null),(0,n._)([(0,h.K)("classBreakInfos")],A.prototype,"writeClassBreakInfos",null),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"defaultLabel",void 0),(0,n._)([(0,l.MZ)(b.z4)],A.prototype,"defaultSymbol",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"field",void 0),(0,n._)([(0,u.w)("field")],A.prototype,"castField",null),(0,n._)([(0,l.MZ)({type:Boolean})],A.prototype,"isMaxInclusive",void 0),(0,n._)([(0,l.MZ)({type:_.A,json:{write:!0}})],A.prototype,"legendOptions",void 0),(0,n._)([(0,l.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],A.prototype,"minValue",null),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"normalizationField",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],A.prototype,"normalizationTotal",void 0),(0,n._)([(0,l.MZ)({type:I.apiValues,value:null,json:{type:I.jsonValues,read:I.read,write:I.write}})],A.prototype,"normalizationType",null),(0,n._)([(0,c.e)({classBreaks:"class-breaks"})],A.prototype,"type",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"valueExpression",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"valueExpressionTitle",void 0),A=r=(0,n._)([(0,p.$)("esri.renderers.ClassBreaksRenderer")],A);const T=A},64810:(e,t,i)=>{i.d(t,{Ch:()=>a,mW:()=>s,u2:()=>o});var r=i(15941),n=i(34154);function s(e,t){return{...t,filterMode:e.mode}}function o(e,t){return l(e,t).next().value??null}function a(e,t,i){const s=function(e){if("manual"===c(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of e.filters)t[0]=Math.max(t[0],d(i)),t[1]=Math.min(t[1],p(r));return t}(e);if(s&&((0,r.gg)(t,s[0])||(0,r.ZH)(i,s[1])))return"";const o=Array.from(l(e,t,i)),a=function(e,t,i){if(0===e.length)return!0;const n=d(e.at(0)?.minScale),s=p(e.at(-1)?.maxScale);if((0,r.ZH)(n,t)||(0,r.gg)(s,i))return!0;for(let o=0;o<e.length-1;o++){const t=e[o],i=e[o+1];if((0,r.ZH)(d(i.minScale),p(t.maxScale)))return!0}return!1}(o,t,i)?"1=1":o.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,n.IW)(e,t)),"");return a&&"1=1"!==a?a:""}function*l(e,t,i){if("manual"===c(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const r of e.filters)u(r.minScale,r.maxScale,t,i)&&(yield r)}}function u(e,t,i,n){return e=d(e),i=d(i),t=p(t),!(!(0,r.Sp)(i,e)&&(n??i)>e)&&!(0,r.Hx)(t,i)&&(void 0===n||!(0,r.Sp)(n,e))}function c(e){return"mode"in e?e.mode:e.filterMode}function d(e){return e||Number.POSITIVE_INFINITY}function p(e){return e||0}},65460:(e,t,i)=>{i.d(t,{BI:()=>f,D3:()=>m,XJ:()=>y,lc:()=>h,mX:()=>v,rU:()=>g,tH:()=>S});var r=i(88685);const n="__begin__",s="__end__",o=new RegExp(n,"ig"),a=new RegExp(s,"ig"),l=new RegExp("^"+n,"i"),u=new RegExp(s+"$","i"),c='"',d=c+" + ",p=" + "+c;function h(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function m(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function y(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=h(e.labelExpression),t.type="conventional"),t}function f(e){const t=y(e);switch(t.type){case"conventional":return v(t.expression);case"arcade":return t.expression}return null}function g(e){const t=y(e);switch(t.type){case"conventional":return function(e){const t=e?.match(b);return t?.[1].trim()||null}(t.expression);case"arcade":return S(t.expression)}return null}function v(e){let t;return e?(t=(0,r.HC)(e,(e=>n+'$feature["'+e+'"]'+s)),t=l.test(t)?t.replace(l,""):c+t,t=u.test(t)?t.replace(u,""):t+c,t=t.replaceAll(o,d).replaceAll(a,p)):t='""',t}const b=/^\s*\{([^}]+)\}\s*$/i;const _=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,M=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,w=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function S(e){if(!e)return null;let t=_.exec(e)||M.exec(e);return t?t[1]||t[3]:(t=w.exec(e),t?t[2]:null)}},65624:(e,t,i)=>{i.d(t,{LF:()=>c,dM:()=>d,sU:()=>l});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(85842)),o=i(80979),a=i(44081);const l={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:o.K}},"portal-item":{read:!0,write:{layerContainerTypes:o.K}}}}},u={read:{reader:a.LF},write:{allowNull:!0,writer:a.M9,layerContainerTypes:o.K}},c={json:{read:!1,write:!1,origins:{"web-map":u,"portal-item":u}}},d=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,n.MZ)(l)],t.prototype,"blendMode",void 0),(0,r._)([(0,n.MZ)(c)],t.prototype,"effect",void 0),t=(0,r._)([(0,s.$)("esri.layers.mixins.BlendLayer")],t),t}},68002:(e,t,i)=>{i.d(t,{X_:()=>o,i1:()=>a,oW:()=>u,zx:()=>l});var r=i(15941),n=i(31633);const s=96;function o(e,t){const i=t||e.extent,r=e.width,o=(0,n.GA)(i?.spatialReference);return i&&r?i.width/r*o*n.dy*s:0}function a(e,t){return e/((0,n.GA)(t)*n.dy*s)}function l(e,t,i){return function(e,t){return 0===t||(0,r.Sp)(e,t)||e<t}(e,t)&&function(e,t){return 0===t||(0,r.Sp)(e,t)||e>t}(e,i)}function u(e,t){return(0,r.Sp)(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}},72599:(e,t,i)=>{i.d(t,{A:()=>p});var r,n=i(35143),s=i(53084),o=i(46053),a=(i(81806),i(76460),i(6409)),l=i(85842),u=i(92115),c=i(44631);let d=r=class extends c.A{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some((e=>(String(e.code)===i&&(t=e.name),!!t)))}return t}clone(){return new r({codedValues:(0,s.o8)(this.codedValues),name:this.name})}};(0,n._)([(0,o.MZ)({type:[u.H],json:{write:{isRequired:!0}}})],d.prototype,"codedValues",void 0),(0,n._)([(0,a.e)({codedValue:"coded-value"})],d.prototype,"type",void 0),d=r=(0,n._)([(0,l.$)("esri.layers.support.CodedValueDomain")],d);const p=d},76350:(e,t,i)=>{i.d(t,{p:()=>l});var r=i(81806),n=i(76460),s=i(44135),o=i(1900),a=i(53430);function l(){return{fields:{type:[s.A],value:null,set:function(e){if(e&&(0,r.A)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");n.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return o.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const i=this.fieldsIndex?.has(t);i||n.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,a.DB)(this.fieldsIndex,e)}}}}},76866:(e,t,i)=>{i.d(t,{gK:()=>a,rS:()=>l});i(81806);var r=i(72599),n=i(44631),s=i(32173),o=i(50654);const a={key:"type",base:n.A,typeMap:{range:o.A,"coded-value":r.A,inherited:s.A}};function l(e){if(!e?.type)return null;switch(e.type){case"range":return o.A.fromJSON(e);case"codedValue":return r.A.fromJSON(e);case"inherited":return s.A.fromJSON(e)}return null}},78817:(e,t,i)=>{i.d(t,{B:()=>h,e:()=>m});var r=i(35143),n=i(46053),s=(i(81806),i(76460),i(47249),i(28379)),o=i(85842),a=i(80979),l=i(53430),u=i(83982),c=i(90115),d=i(59187),p=i(93030);const h={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:a.K}}},m=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const i=t.timeInfo.exportOptions;if(!i)return null;const r=i.timeOffset,n=c.j.fromJSON(i.timeOffsetUnits);return r&&n?new p.A({value:r,unit:n}):null}set timeInfo(e){(0,l.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,n.MZ)({type:d.A,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,n.MZ)({type:p.A})],t.prototype,"timeOffset",void 0),(0,r._)([(0,s.w)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,n.MZ)({value:null,type:u.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,n.MZ)(h)],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,o.$)("esri.layers.mixins.TemporalLayer")],t),t}},79369:(e,t,i)=>{i.d(t,{F:()=>a,Ti:()=>n});var r=i(30015);const n=-3,s=n-1;var o;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"}(o||(o={}));class a{get size(){return this._size}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.A,this._users=new r.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){const i=this._db.get(e.id+t);return i?.size??0}put(e,t,i,r,a){t=e.id+t;const u=this._db.get(t);if(u&&(this._size-=u.size,e.size-=u.size,this._db.delete(t),u.entry!==i&&this._notifyRemove(t,u.entry,u.size,o.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,r,o.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return console.warn(`Refusing to cache entry with size ${r} for key ${t}`),void this._notifyRemove(t,i,0,o.ALL);const c=1+Math.max(a,s)-n;this._db.set(t,new l(i,r,c)),this._size+=r,e.size+=r,this._checkSize()}updateSize(e,t,i,r){t=e.id+t;const n=this._db.get(t);if(n&&n.entry===i){for(this._size-=n.size,e.size-=n.size;r>this._maxSize;){const e=this._notifyRemove(t,i,r,o.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);r=e}n.size=r,this._size+=r,e.size+=r,this._checkSize()}}pop(e,t){t=e.id+t;const i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(e,t){t=e.id+t;const i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}peek(e,t){const i=this._db.get(e.id+t);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,r)=>{const n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll((i=>{const{id:n,name:s}=i;if(r.startsWith(n)){const i=t[s]||0;t[s]=i+e.size}}))}));const r={};this._users.forAll((e=>{const i=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"}));const s=Object.keys(t);s.sort(((e,i)=>t[i]-t[e])),s.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+r[i]));for(let o=i.length-1;o>=0;--o){const t=i[o];t&&(e["Priority "+(o+n-1)]=Math.round(t/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemove(i,e.entry,e.size,o.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,o.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i,r){let n;return this._removeFuncs.some((s=>{if(e.startsWith(s[0])){const e=s[1](t,r,i);return"number"==typeof e&&(n=e),!0}return!1})),n}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;const i=e?.id;let r=!0;for(;r;){r=!1;for(const[n,s]of this._db)if(0===s.lifetime&&(!i||n.startsWith(i))){if(this._purgeItem(n,s,e),t.size<=.9*t.maxSize)return;r||=this._db.has(n)}}for(const[n,s]of this._db)if((!i||n.startsWith(i))&&(this._purgeItem(n,s,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((t=>e.startsWith(t.id)));if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);const r=this._notifyRemove(e,t.entry,t.size,o.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),t.lives=t.lifetime,t.size=r,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}class l{constructor(e,t,i){this.entry=e,this.size=t,this.lifetime=i,this.lives=i}}},81589:(e,t,i)=>{i.d(t,{L:()=>o});var r=i(98773),n=i(50346),s=i(62754);async function o(e,t,i){const o=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(o&&"unique-value"===o.type&&o.styleOrigin){const a=await(0,r.Ke)(o.populateFromStyle());if((0,n.Te)(i),!1===a.ok){const i=a.error;t?.messages&&t.messages.push(new s.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${i.message}`,{error:i,context:t})),e.clear("renderer",t?.origin)}}}},83982:(e,t,i)=>{i.d(t,{A:()=>y});var r=i(35143),n=i(69098),s=i(42553),o=i(46053),a=(i(81806),i(76460),i(47249),i(28379)),l=i(85842),u=i(17707),c=i(59187),d=i(93030),p=i(67478);function h(e,t){return d.A.fromJSON({value:e,unit:t})}let m=class extends(n.A.ClonableMixin(s.A)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?c.A.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?h(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?h(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,r._)([(0,o.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],m.prototype,"cumulative",void 0),(0,r._)([(0,o.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],m.prototype,"endField",void 0),(0,r._)([(0,o.MZ)({type:c.A,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"fullTimeExtent",void 0),(0,r._)([(0,a.w)("fullTimeExtent",["timeExtent"])],m.prototype,"readFullTimeExtent",null),(0,r._)([(0,u.K)("fullTimeExtent")],m.prototype,"writeFullTimeExtent",null),(0,r._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"hasLiveData",void 0),(0,r._)([(0,o.MZ)({type:d.A,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"interval",void 0),(0,r._)([(0,a.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],m.prototype,"readInterval",null),(0,r._)([(0,u.K)("interval")],m.prototype,"writeInterval",null),(0,r._)([(0,o.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],m.prototype,"startField",void 0),(0,r._)([(0,o.MZ)((0,p.P6)("timeReference",!0))],m.prototype,"timeZone",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"trackIdField",void 0),(0,r._)([(0,o.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],m.prototype,"useTime",void 0),(0,r._)([(0,o.MZ)({type:[Date],json:{read:!1}})],m.prototype,"stops",void 0),m=(0,r._)([(0,l.$)("esri.layers.support.TimeInfo")],m);const y=m},84202:(e,t,i)=>{i.d(t,{A7:()=>u,Cx:()=>c,Hk:()=>d,JJ:()=>y,SF:()=>p,UK:()=>l,jM:()=>h,x3:()=>m});i(81806);var r=i(86875),n=i(7246),s=i(76940),o=i(86659),a=i(44460);const l=s.A.fromJSON(a.Cb),u=n.A.fromJSON(a.yM),c=r.A.fromJSON(a.WR),d=o.A.fromJSON(a.JZ);function p(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return c}return null}const h=s.A.fromJSON(a.nC),m=n.A.fromJSON(a.HW),y=r.A.fromJSON(a.b6)},84369:(e,t,i)=>{i.r(t),i.d(t,{default:()=>te});var r,n=i(35143),s=i(16868),o=i(3825),a=i(69098),l=i(50076),u=i(54901),c=i(53084),d=i(76460),p=i(77717),h=i(50346),m=i(46053),y=i(40565),f=i(28379),g=i(85842),v=i(76797),b=i(13312),_=i(31608),M=i(25515),w=i(19502),S=i(65624),x=i(31362),I=i(30218),F=i(74440),A=i(52908),T=i(11270),k=i(94729),Z=i(21617),z=i(5682),C=i(78817),N=i(24329),j=i(95363),O=i(91447),E=i(44135),L=i(76350),V=i(53430),R=i(95114),P=i(27937),B=i(42553);i(81806),i(47249);let $=r=class extends B.A{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new r({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,n._)([(0,m.MZ)({type:Number,json:{write:!0}})],$.prototype,"age",void 0),(0,n._)([(0,m.MZ)({type:Number,json:{write:!0}})],$.prototype,"ageReceived",void 0),(0,n._)([(0,m.MZ)({type:Number,json:{write:!0}})],$.prototype,"displayCount",void 0),(0,n._)([(0,m.MZ)({type:Number,json:{write:!0}})],$.prototype,"maxObservations",void 0),$=r=(0,n._)([(0,g.$)("esri.layers.support.PurgeOptions")],$);const D=$;var U=i(92045),J=i(86616),q=i(81589),G=i(49176),H=i(97015),W=i(30973),K=i(731),X=i(61701);const Y=(0,L.p)();function Q(e,t){return new l.A("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}let ee=class extends((0,I.FJ)((0,A.J)((0,F.F)((0,S.dM)((0,C.e)((0,N.d)((0,z.j)((0,Z.J)((0,w.b)((0,T.q)((0,k.A)((0,p.P)((0,x.d)(a.A.ClonableMixin(M.A))))))))))))))){constructor(){super(...arguments),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.outFields=["*"],this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new D,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=b.A.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null,this._debouncedSaveOperations=(0,h.sg)((async(e,t,r)=>{const{save:n,saveAs:s}=await i.e(9367).then(i.bind(i,99367));switch(e){case X.X.SAVE:return n(this,t);case X.X.SAVE_AS:return s(this,r,t)}}))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new l.A("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(h.QP).then((()=>this._fetchService(t)))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){(0,V.yp)(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){t=t.layerDefinition||t;const r=t.drawingInfo?.renderer;if(r){const e=(0,J.L)(r,t,i)||void 0;return e||d.A.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),e}return(0,O.PD)(t,i)}async connect(e){const[{createConnection:t}]=await Promise.all([Promise.all([i.e(9122),i.e(7420),i.e(2142)]).then(i.bind(i,55039)),this.load()]),r=this.geometryType?_.gy.toJSON(this.geometryType):null,{customParameters:n=null,definitionExpression:s=null,geometryDefinition:o=null,maxReconnectionAttempts:a=0,maxReconnectionInterval:l=20,spatialReference:c=this.spatialReference}=e||this.createConnectionParameters(),d=t(this.parsedUrl,this.spatialReference,c,r,s,o,a,l,n??void 0),p=(0,u.vE)([this.on("send-message-to-socket",(e=>d.sendMessageToSocket(e))),this.on("send-message-to-client",(e=>d.sendMessageToClient(e)))]);return d.once("destroy",p.remove),d}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(e){return(0,W.tn)(this,e)}createQuery(){const e=new H.A;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}getFieldDomain(e,t){if(!this.fields)return null;let i=null;return this.fields.some((t=>(t.name===e&&(i=t.domain),!!i))),i}getField(e){return this.fieldsIndex.get(e)}serviceSupportsSpatialReference(e){return!0}sendMessageToSocket(e){this.emit("send-message-to-socket",e)}sendMessageToClient(e){this.emit("send-message-to-client",e)}async save(e){return this._debouncedSaveOperations(X.X.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(X.X.SAVE_AS,t,e)}write(e,t){const i=t?.messages;return this.webSocketUrl?(i?.push(Q(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?super.write(e,t):(i?.push(Q(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}async _fetchService(e){if(!this.webSocketUrl&&this.parsedUrl){if(!this.sourceJSON){const{data:t}=await(0,o.A)(this.parsedUrl.path,{query:{f:"json",...this.customParameters,...this.parsedUrl.query},responseType:"json",signal:e});this.sourceJSON=t}}else{if(!this.timeInfo?.trackIdField)throw new l.A("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!this.objectIdField){const e=this.fields.find((e=>"oid"===e.type))?.name;if(!e)throw new l.A("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");this.objectIdField=e}if(!this.fields)throw new l.A("stream-layer:missing-metadata","The stream layer fields must be specified.");if(this.fields.some((e=>e.name===this.objectIdField))||this.fields.push(new E.A({name:this.objectIdField,alias:this.objectIdField,type:"oid"})),!this.geometryType)throw new l.A("stream-layer:missing-metadata","The stream layer geometryType must be specified.");this.webSocketUrl&&(this.url=this.webSocketUrl)}return this.read(this.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}),(0,V.yp)(this.renderer,this.fieldsIndex),(0,V.sv)(this.timeInfo,this.fieldsIndex),this.objectIdField||(this.objectIdField=U.DN),(0,q.L)(this,{origin:"service"})}};(0,n._)([(0,m.MZ)({type:String})],ee.prototype,"copyright",void 0),(0,n._)([(0,m.MZ)({readOnly:!0})],ee.prototype,"defaultPopupTemplate",null),(0,n._)([(0,m.MZ)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ee.prototype,"definitionExpression",void 0),(0,n._)([(0,m.MZ)({type:String})],ee.prototype,"displayField",void 0),(0,n._)([(0,m.MZ)({type:K.A})],ee.prototype,"elevationInfo",void 0),(0,n._)([(0,m.MZ)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],ee.prototype,"featureReduction",null),(0,n._)([(0,m.MZ)(Y.fields)],ee.prototype,"fields",void 0),(0,n._)([(0,m.MZ)(Y.fieldsIndex)],ee.prototype,"fieldsIndex",void 0),(0,n._)([(0,m.MZ)({type:v.A,json:{name:"layerDefinition.definitionGeometry",write:!0}})],ee.prototype,"geometryDefinition",void 0),(0,n._)([(0,m.MZ)({type:_.gy.apiValues,json:{read:{reader:_.gy.read}}})],ee.prototype,"geometryType",void 0),(0,n._)([(0,m.MZ)(j.kF)],ee.prototype,"labelsVisible",void 0),(0,n._)([(0,m.MZ)({type:[R.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:P.w},write:!0}})],ee.prototype,"labelingInfo",void 0),(0,n._)([(0,m.MZ)(j.fV)],ee.prototype,"legendEnabled",void 0),(0,n._)([(0,m.MZ)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],ee.prototype,"listMode",void 0),(0,n._)([(0,m.MZ)({type:y.jz})],ee.prototype,"maxReconnectionAttempts",void 0),(0,n._)([(0,m.MZ)({type:y.jz})],ee.prototype,"maxReconnectionInterval",void 0),(0,n._)([(0,m.MZ)(j.hG)],ee.prototype,"maxScale",void 0),(0,n._)([(0,m.MZ)(j.hn)],ee.prototype,"minScale",void 0),(0,n._)([(0,m.MZ)({type:String})],ee.prototype,"objectIdField",void 0),(0,n._)([(0,m.MZ)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],ee.prototype,"operationalLayerType",void 0),(0,n._)([(0,m.MZ)({readOnly:!0})],ee.prototype,"outFields",void 0),(0,n._)([(0,m.MZ)(j.M6)],ee.prototype,"popupEnabled",void 0),(0,n._)([(0,m.MZ)({type:s.A,json:{name:"popupInfo",write:!0}})],ee.prototype,"popupTemplate",void 0),(0,n._)([(0,m.MZ)({type:D})],ee.prototype,"purgeOptions",void 0),(0,n._)([(0,m.MZ)({json:{read:!1,write:!1}})],ee.prototype,"refreshInterval",void 0),(0,n._)([(0,m.MZ)({types:G.Hg,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:G.XJ,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],ee.prototype,"renderer",null),(0,n._)([(0,f.w)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,f.w)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],ee.prototype,"readRenderer",null),(0,n._)([(0,m.MZ)((()=>{const e=(0,c.o8)(j.PY);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],ee.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,m.MZ)()],ee.prototype,"sourceJSON",void 0),(0,n._)([(0,m.MZ)({type:b.A,json:{origins:{service:{read:{source:"spatialReference"}}}}})],ee.prototype,"spatialReference",void 0),(0,n._)([(0,m.MZ)({json:{read:!1}})],ee.prototype,"type",void 0),(0,n._)([(0,m.MZ)(j.OZ)],ee.prototype,"url",void 0),(0,n._)([(0,m.MZ)({type:Number})],ee.prototype,"updateInterval",void 0),(0,n._)([(0,m.MZ)({json:{read:!1,write:!1}})],ee.prototype,"useViewTime",void 0),(0,n._)([(0,m.MZ)({type:String})],ee.prototype,"webSocketUrl",void 0),ee=(0,n._)([(0,g.$)("esri.layers.StreamLayer")],ee);const te=ee},90115:(e,t,i)=>{i.d(t,{j:()=>r});const r=(0,i(45802).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},91524:(e,t,i)=>{i.d(t,{K:()=>p,Q:()=>u});var r=i(35143),n=i(45802),s=i(76460),o=i(46053),a=(i(81806),i(47249),i(6409)),l=i(85842);const u=(0,n.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),c="percent-of-total",d="field",p=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=null!=this.normalizationTotal;return t||i?(e=t&&d||i&&c||null,t&&i&&s.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==d&&e!==c||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,r._)([(0,o.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,r._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,r._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,r._)([(0,o.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,r._)([(0,a.e)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,r._)([(0,l.$)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},92045:(e,t,i)=>{i.d(t,{Aw:()=>o,DN:()=>r,EA:()=>s,Gm:()=>n,t0:()=>l,xq:()=>a});const r="__esri_stream_id__",n="__esri_timestamp__",s="__esri_track_part__",o="__esri_time_received__",a="__esri_track_line__";var l;!function(e){e[e.TrackLine=0]="TrackLine",e[e.LatestObservation=1]="LatestObservation",e[e.PreviousObservation=2]="PreviousObservation"}(l||(l={}))},92115:(e,t,i)=>{i.d(t,{H:()=>l});var r,n=i(35143),s=i(42553),o=i(46053),a=(i(81806),i(76460),i(47249),i(85842));let l=r=class extends s.A{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,n._)([(0,o.MZ)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"name",void 0),(0,n._)([(0,o.MZ)({type:[String,Number],json:{write:{isRequired:!0}}})],l.prototype,"code",void 0),l=r=(0,n._)([(0,a.$)("esri.layers.support.CodedValue")],l)},93030:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(35143),n=i(69098),s=i(42553),o=i(18288),a=i(46053),l=(i(81806),i(76460),i(47249),i(6409)),u=i(85842),c=i(90115);let d=class extends(n.A.ClonableMixin(s.A)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,o.t)(this.value,this.unit,"milliseconds")}};(0,r._)([(0,l.e)(c.j,{nonNullable:!0})],d.prototype,"unit",void 0),(0,r._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),d=(0,r._)([(0,u.$)("esri.time.TimeInterval")],d);const p=d},93103:(e,t,i)=>{i.d(t,{bv:()=>l,Fk:()=>u,yG:()=>c,$b:()=>d,Nd:()=>p,jm:()=>h,sK:()=>f});var r=i(99746),n=i(76931);function s(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}const o=s();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:function(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},create:s,createView:function(e,t){return new Float32Array(e,t,16)},fromValues:function(e,t,i,r,n,s,o,a,l,u,c,d,p,h,m,y){const f=new Float32Array(16);return f[0]=e,f[1]=t,f[2]=i,f[3]=r,f[4]=n,f[5]=s,f[6]=o,f[7]=a,f[8]=l,f[9]=u,f[10]=c,f[11]=d,f[12]=p,f[13]=h,f[14]=m,f[15]=y,f}},Symbol.toStringTag,{value:"Module"}));var a=i(34761);class l{constructor(e,t,i){this.strength=e,this.radius=t,this.threshold=i,this.type="bloom"}interpolate(e,t,i){this.strength=m(e.strength,t.strength,i),this.radius=m(e.radius,t.radius,i),this.threshold=m(e.threshold,t.threshold,i)}clone(){return new l(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:y(this.radius),strength:this.strength,threshold:this.threshold}}}class u{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,i){this.radius=Math.round(m(e.radius,t.radius,i))}clone(){return new u(this.radius)}toJSON(){return{type:"blur",radius:y(this.radius)}}}class c{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,i){this.amount=m(e.amount,t.amount,i),this._updateMatrix()}clone(){return new c(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||s();switch(this.type){case"brightness":this._colorMatrix=((e,t)=>{const i=(0,a.hZ)(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount);break;case"contrast":this._colorMatrix=((e,t)=>{const i=(0,a.hZ)(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount);break;case"grayscale":this._colorMatrix=((e,t)=>{const i=1-t,r=(0,a.hZ)(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return(0,a.mg)(r,r)})(e,this.amount);break;case"invert":this._colorMatrix=((e,t)=>{const i=1-2*t,r=(0,a.hZ)(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return(0,a.mg)(r,r)})(e,this.amount);break;case"saturate":this._colorMatrix=((e,t)=>{const i=(0,a.hZ)(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return(0,a.mg)(i,i)})(e,this.amount);break;case"sepia":this._colorMatrix=((e,t)=>{const i=1-t,r=(0,a.hZ)(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return(0,a.mg)(r,r)})(e,this.amount)}}}class d{constructor(e,t,i,r){this.offsetX=e,this.offsetY=t,this.blurRadius=i,this.color=r,this.type="drop-shadow"}interpolate(e,t,i){this.offsetX=m(e.offsetX,t.offsetX,i),this.offsetY=m(e.offsetY,t.offsetY,i),this.blurRadius=m(e.blurRadius,t.blurRadius,i),this.color[0]=Math.round(m(e.color[0],t.color[0],i)),this.color[1]=Math.round(m(e.color[1],t.color[1],i)),this.color[2]=Math.round(m(e.color[2],t.color[2],i)),this.color[3]=m(e.color[3],t.color[3],i)}clone(){return new d(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:y(this.offsetX),yoffset:y(this.offsetY),blurRadius:y(this.blurRadius),color:e}}}class p{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,i){this.angle=m(e.angle,t.angle,i),this._updateMatrix()}clone(){return new p(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||s();this._colorMatrix=((e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=(0,a.hZ)(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return(0,a.mg)(n,n)})(e,this.angle)}}class h{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,i){this.amount=m(e.amount,t.amount,i)}clone(){return new h(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function m(e,t,i){return e+(t-e)*i}function y(e){return Math.round(1e3*(0,n.PN)(e))/1e3}function f(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new c(e.type,0);case"saturate":case"brightness":case"contrast":return new c(e.type,1);case"opacity":return new h(1);case"hue-rotate":return new p(0);case"blur":return new u(0);case"drop-shadow":return new d(0,0,0,[...(0,r.TS)("transparent")]);case"bloom":return new l(0,0,1)}}},97763:(e,t,i)=>{i.d(t,{$w:()=>g,Bu:()=>Z,DW:()=>F,FH:()=>P,FM:()=>u,G9:()=>s,GV:()=>b,Go:()=>c,K3:()=>R,Kn:()=>x,MM:()=>h,MO:()=>D,Nl:()=>z,Ny:()=>_,O2:()=>C,UE:()=>N,YC:()=>$,YF:()=>O,ZO:()=>L,_1:()=>T,_H:()=>w,_W:()=>v,_d:()=>I,bs:()=>B,dI:()=>W,e6:()=>d,gQ:()=>l,iA:()=>V,jn:()=>y,lW:()=>p,mA:()=>m,n5:()=>j,pM:()=>A,pV:()=>S,pk:()=>U,rB:()=>J,s4:()=>n,xo:()=>k,yH:()=>M,yX:()=>K,zb:()=>E,zr:()=>f});var r=i(13442);function n(e,t,i,r){return function(e){return"function"==typeof e}(e)?e(t,i,r):e}function s(e){return[e.r,e.g,e.b,e.a]}const o=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!o.includes(e.charAt(t)))return!1;return!0}function l(e,t){const i=[];let r=0,n=-1;do{if(n=e.indexOf("[",r),n>=r){if(n>r){const t=e.slice(r,n);i.push([t,null,a(t)])}if(r=n+1,n=e.indexOf("]",r),n>=r){if(n>r){const s=t[e.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}}while(-1!==n);if(r<e.length){const t=e.slice(r);i.push([t,null,a(t)])}return i}function u(e,t,i,r){let n="",s=null;for(const o of t){const[t,r,a]=o;if(t)a?s=t:(s&&(n+=s,s=null),n+=t);else{let t=r;null!=i&&(t=D(r,i));const o=e.attributes[t];o&&(s&&(n+=s,s=null),n+=o)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(n,r)}function c(e,t,i,r,n,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=t/n,l=i/s,u=Math.ceil(a/2),c=Math.ceil(l/2);for(let d=0;d<s;d++)for(let i=0;i<n;i++){const p=4*(i+(o?s-d-1:d)*n);let h=0,m=0,y=0,f=0,g=0,v=0,b=0;const _=(d+.5)*l;for(let r=Math.floor(d*l);r<(d+1)*l;r++){const n=Math.abs(_-(r+.5))/c,s=(i+.5)*a,o=n*n;for(let l=Math.floor(i*a);l<(i+1)*a;l++){let i=Math.abs(s-(l+.5))/u;const n=Math.sqrt(o+i*i);n>=-1&&n<=1&&(h=2*n*n*n-3*n*n+1,h>0&&(i=4*(l+r*t),b+=h*e[i+3],y+=h,e[i+3]<255&&(h=h*e[i+3]/250),f+=h*e[i],g+=h*e[i+1],v+=h*e[i+2],m+=h))}}r[p]=f/m,r[p+1]=g/m,r[p+2]=v/m,r[p+3]=b/y}}function d(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function p(e){return e.data?.symbol??null}function h(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function m(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function y(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function f(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e||isNaN(e)?t:e},v=(e,t)=>null!=e?e:t,b=(e,t)=>e??t,_=e=>e.tintColor?d(e.tintColor):[255,255,255,1],M=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function w(){return Promise.all([i.e(2612),i.e(7983)]).then(i.bind(i,1669))}function S(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function x(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function I(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function F(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function A(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=A(t);if(null!=e)return e}break;case"CIMTextSymbol":return A(e.symbol);case"CIMSolidFill":return e.color}return null}function T(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=T(e);if(null!=t)return t}break}case"CIMTextSymbol":return T(e.symbol);case"CIMSolidStroke":return e.color}}function k(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=k(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return k(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function Z(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function z(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function C(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const N=e=>e.includes("data:image/svg+xml");function j(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function O(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function E(e,t,i,r,n,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const{infos:a}=s;let l=1,u=0,c=0,d=0,p=1;for(const{absoluteAnchorPoint:y,offsetX:f,offsetY:g,rotation:v,size:b,frameHeight:_,rotateClockWise:M,scaleSymbolsProportionally:w}of a)p=y?1:l,c=G(f,g,u,p,c),d=q(f,g,u,p,d),_&&(w||o)&&(l*=b/_),u=H(v,M,u);const h=G(r,n,u,p,c),m=q(r,n,u,p,d);return{size:e*l,rotation:H(t,i,u),offsetX:h,offsetY:m}}function L(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>L(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function V(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...r.K[t]];const i=r.D[e];if(!i)throw new Error(`InternalError: default value for type ${e}.`);return i[t]}function R(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function P(e){return e?.dashTemplate&&(e.dashTemplate=R(e.dashTemplate)),e}function B(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return B(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return B(e.symbol)}}return"Normal"}function $(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=i.size??r.D.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=i.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&f(i.markerPlacement)){const e=i.size??r.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=i.height;null!=e&&e>t&&(t=e)}}return t}}}function D(e,t){if(null!==t){const i=t.get(e);return i?i.name:e}return e}function U(e){return e.map((e=>({...e,propertyName:O(e.propertyName)})))}function J(e){const t={};for(const i in e){const r=e[i];t[O(i)]=r}return t}function q(e,t,i,r,n){const s=i*Math.PI/180;if(s){const i=Math.cos(s);return(Math.sin(s)*e+i*t)*r+n}return t*r+n}function G(e,t,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*r+n:e*r+n}function H(e,t,i){return t?i-e:i+e}function W(e,t,i){const r="Color"===i||"TintColor"===i||"ToColor"===i,n="Rotation"===i||"Angle"===i||"ToRotation"===i;let s=t[O(i)];if(null!=s&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),null==s&&(s=V(t.type,i.toLowerCase()),null!=s&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),null!=t.primitiveName){const o=e[t.primitiveName];if(null!=o){const e=o[i];null==e||("string"==typeof e||"number"==typeof e||Array.isArray(e)?(s=e,null!=s&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:e,defaultValue:s},null!=s&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(null==s)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function K(e,t){return Math.max(Math.min((e??t)/100,1),0)}}}]);
//# sourceMappingURL=4992.9d524719.chunk.js.map