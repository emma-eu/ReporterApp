"use strict";(self.webpackChunkfeedback_map=self.webpackChunkfeedback_map||[]).push([[22362,73836],{11265:(e,t,i)=>{i(65256),i(50265),i(39348),i(38042);var r=i(63860),s=i(3825),n=i(50076);async function a(e){if(null!=l.fetchBundleAsset)return l.fetchBundleAsset(e);const t=await(0,s.A)(e,{responseType:"text"});return JSON.parse(t.data)}class o{constructor(e){let t,{base:i="",pattern:r,location:s=new URL(window.location.href)}=e;t="string"==typeof s?e=>new URL(e,new URL(s,window.location.href)).href:s instanceof URL?e=>new URL(e,s).href:s,this.pattern="string"==typeof r?new RegExp(`^${r}`):r,this.getAssetUrl=t,i=i?i.endsWith("/")?i:i+"/":"",this.matcher=new RegExp(`^${i}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return async function(e,t,i,s){const o=t.exec(i);if(!o)throw new n.A("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const l=o[1]?`${o[1]}/`:"",u=o[2],c=(0,r.xO)(s),d=`${l}${u}.json`,h=c?`${l}${u}_${c}.json`:d;let f;try{f=await a(e(h))}catch(p){if(h===d)throw new n.A("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p});try{f=await a(e(d))}catch(p){throw new n.A("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p})}}return f}(this.getAssetUrl,this.matcher,e,t)}}const l={};var u,c=i(28899);(0,r.ao)((u={pattern:"esri/",location:c.s},new o(u)))},20665:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(35143),s=i(91967),n=i(98773),a=i(94643),o=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),u=i(53430),c=i(98976);let d=class extends s.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,n.UT)((()=>(0,c.lw)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??Promise.all([i.e(86300),i.e(9912),i.e(73836)]).then(i.bind(i,9912)).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new a.A;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const i=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(i.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:i,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(i,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const i of this.calculatedExpressions?.toArray()??[])try{const t=this._arcadeTask.value.arcade.extractFieldLiterals(i.syntax);for(const i of t){const t=i.split("."),r=this.fieldsIndex.get(t.at(-1)??"");r&&e.add(r.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const i of t){const t=this.fieldsIndex.get(i);t&&e.add(t.name)}return e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,i){try{const{attributes:r}=t,s=i?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:n}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);if(i.fetchMissingFields&&(t=await this._checkAndReQueryGraphic(e,t)),this.workingTitle&&this.fieldInfoMap){const i=this._createFormattedAttributes(e,t,s).global;return n({attributes:r,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:i,layer:e,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(e,t){const i=t.getObjectId();if(null==i)return t;if(!(0,u.Kl)(this.requiredFields,t)){const t=e.createQuery();t.where="1=1",t.outFields=[...this.requiredFields],t.objectIds=[i];const r=await e.queryFeatures(t);if(1===r?.features.length)return r.features[0]}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const i of e){if(!i.fieldName)continue;const e=this.fieldsIndex.get(i.fieldName),r=e?.name??i.fieldName;i.fieldName=r,t.set(r.toLowerCase(),i)}return t}_createFormattedAttributes(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"system";const r=this.effectivePopupTemplate?.fieldInfos??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const i=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{s[`expression/${e.name}`]=e.func({vars:{$feature:i}})}catch{}}const n={...t.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:r,attributes:n,graphic:t,timeZone:i,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,u.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"_arcadeTask",null),(0,r._)([(0,o.MZ)()],d.prototype,"_featureUtils",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"featureUtilsPromise",null),(0,r._)([(0,o.MZ)({readOnly:!0})],d.prototype,"calculatedExpressions",null),(0,r._)([(0,o.MZ)()],d.prototype,"displayField",void 0),(0,r._)([(0,o.MZ)()],d.prototype,"effectivePopupTemplate",void 0),(0,r._)([(0,o.MZ)()],d.prototype,"expressionsUsedInTitle",null),(0,r._)([(0,o.MZ)()],d.prototype,"fieldsIndex",void 0),(0,r._)([(0,o.MZ)()],d.prototype,"fieldInfoMap",null),(0,r._)([(0,o.MZ)()],d.prototype,"fields",void 0),(0,r._)([(0,o.MZ)()],d.prototype,"objectIdField",void 0),(0,r._)([(0,o.MZ)()],d.prototype,"requiredFields",null),d=(0,r._)([(0,l.$)("esri.layers.support.TitleCreator")],d);const h=d},39348:(e,t,i)=>{i.d(t,{V:()=>u});var r=i(76460),s=i(48611),n=i(88685),a=i(65256),o=i(50265);const l=()=>r.A.getLogger("esri.intl.substitute");function u(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{format:r={}}=i;return(0,n.HC)(e,(e=>function(e,t,i){let r,n;const a=e.indexOf(":");if(-1===a?r=e.trim():(r=e.slice(0,a).trim(),n=e.slice(a+1).trim()),!r)return"";const o=(0,s.wc)(r,t);if(null==o)return"";const l=(n?i?.[n]:null)??i?.[r];return l?c(o,l):n?d(o,n):h(o)}(e,t,r)))}function c(e,t){switch(t.type){case"date":return(0,a.Yq)(e,t.intlOptions);case"number":return(0,o.ZV)(e,t.intlOptions);default:return l().warn("missing format descriptor for key {key}"),h(e)}}function d(e,t){switch(t.toLowerCase()){case"dateformat":return(0,a.Yq)(e);case"numberformat":return(0,o.ZV)(e);default:return l().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?(0,a.Yq)(e):/^numberformat/i.test(t)?(0,o.ZV)(e):h(e)}}function h(e){switch(typeof e){case"string":return e;case"number":return(0,o.ZV)(e);case"boolean":return""+e;default:return e instanceof Date?(0,a.Yq)(e):""}}},50265:(e,t,i)=>{i.d(t,{$J:()=>c,ZV:()=>u,yx:()=>l});var r=i(38042);const s={ar:"ar-u-nu-latn"};let n=new WeakMap,a={};function o(e){const t=e||a;if(!n.has(t)){const i=(0,r.JK)(),a=s[(0,r.JK)()]||i;n.set(t,new Intl.NumberFormat(a,e))}return n.get(t)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function u(e,t){return Object.is(e,-0)&&(e=0),o(t).format(e)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.JK)();if(!e)return null;let i=d.get(t);if(!i){const e=o().formatToParts(12345.6),r=[...o({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(r.map(((e,t)=>[e,t]))),n=new RegExp(`[${e.find((e=>"group"===e.type))?.value}]`,"g"),a=new RegExp(`[${e.find((e=>"decimal"===e.type))?.value}]`),l=new RegExp(`[${r.join("")}]`,"g"),u=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,c=/[-\u2212\u2013\u2014\u2015]/g;i=e=>{if(""===(e=e.trim().replaceAll(n,"").replace(a,".").replace(l,(e=>String(s.get(e)))).replaceAll(u,"").replaceAll(c,"-")))return null;const t=Number(e);return isNaN(t)?null:t},d.set(t,i)}return i(e)}(0,r.Ml)((()=>{n=new WeakMap,a={}}));const d=new Map},59649:(e,t,i)=>{i.d(t,{A:()=>n});var r=i(99486),s=i(99702);class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.values().next().value;this._peeker=e,this._observable=new s.I,this._items=new Set}get length(){return(0,r.gc)(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return(0,r.gc)(this._observable),this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach((t=>{e(t)||this._items.delete(t)})),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){(0,r.gc)(this._observable),yield*this._items}}},61701:(e,t,i)=>{var r;i.d(t,{X:()=>r}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(r||(r={}))},63860:(e,t,i)=>{i.d(t,{ao:()=>f,ud:()=>p,xO:()=>g});var r=i(50076),s=i(54901),n=i(50346),a=i(38042);const o=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,l={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function u(e){if(function(e){return e in l}(e)){const t=l[e];return!0===t?e:t}return null}const c=[],d=new Map;function h(e){for(const t of d.keys())m(e.pattern,t)&&d.delete(t)}function f(e){return c.includes(e)||(h(e),c.unshift(e)),(0,s.hA)((()=>{const t=c.indexOf(e);t>-1&&(c.splice(t,1),h(e))}))}async function p(e){const t=(0,a.JK)();d.has(e)||d.set(e,async function(e,t){const i=[];for(const r of c)if(m(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}if(i.length)throw new r.A("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i});throw new r.A("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const i=d.get(e);return i&&await y.add(i),i}function g(e){if(!o.test(e))return null;const t=o.exec(e);if(null===t)return null;const[,i,r]=t;return u(i+(r?"-"+r.toUpperCase():""))??u(i)}function m(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}(0,a.Ml)((()=>{d.clear()}));const y=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,n.Tw)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},64810:(e,t,i)=>{i.d(t,{Ch:()=>o,mW:()=>n,u2:()=>a});var r=i(15941),s=i(34154);function n(e,t){return{...t,filterMode:e.mode}}function a(e,t){return l(e,t).next().value??null}function o(e,t,i){const n=function(e){if("manual"===c(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of e.filters)t[0]=Math.max(t[0],d(i)),t[1]=Math.min(t[1],h(r));return t}(e);if(n&&((0,r.gg)(t,n[0])||(0,r.ZH)(i,n[1])))return"";const a=Array.from(l(e,t,i)),o=function(e,t,i){if(0===e.length)return!0;const s=d(e.at(0)?.minScale),n=h(e.at(-1)?.maxScale);if((0,r.ZH)(s,t)||(0,r.gg)(n,i))return!0;for(let a=0;a<e.length-1;a++){const t=e[a],i=e[a+1];if((0,r.ZH)(d(i.minScale),h(t.maxScale)))return!0}return!1}(a,t,i)?"1=1":a.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,s.IW)(e,t)),"");return o&&"1=1"!==o?o:""}function*l(e,t,i){if("manual"===c(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const r of e.filters)u(r.minScale,r.maxScale,t,i)&&(yield r)}}function u(e,t,i,s){return e=d(e),i=d(i),t=h(t),!(!(0,r.Sp)(i,e)&&(s??i)>e)&&!(0,r.Hx)(t,i)&&(void 0===s||!(0,r.Sp)(s,e))}function c(e){return"mode"in e?e.mode:e.filterMode}function d(e){return e||Number.POSITIVE_INFINITY}function h(e){return e||0}},91605:(e,t,i)=>{i.d(t,{A:()=>w});var r,s=i(35143),n=i(18690),a=i(45802),o=i(42553),l=i(31633),u=i(62754),c=i(46053),d=(i(81806),i(76460),i(28379)),h=i(85842),f=i(17707);const p=(0,a.O)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),g=p.jsonValues.slice();(0,n.Xy)(g,"orthometric");const m=(0,a.O)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let y=r=class extends o.A{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return p.write(e,t,i)}readHeightModel(e,t,i){return p.read(e)||(i?.messages&&i.messages.push(function(e,t){return new u.A("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:i})),null)}readHeightUnit(e,t,i){return m.read(e)||(i?.messages&&i.messages.push(_(e,{context:i})),null)}readHeightUnitService(e,t,i){return(0,l.LA)(e)||m.read(e)||(i?.messages&&i.messages.push(_(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new r({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=(0,l.k1)(t);return new r({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new r;return t.read(e,{origin:"web-scene"}),t}};function _(e,t){return new u.A("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,s._)([(0,c.MZ)({type:p.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g,default:"ellipsoidal",write:{isRequired:!0}}}}})],y.prototype,"heightModel",void 0),(0,s._)([(0,f.K)("web-scene","heightModel")],y.prototype,"writeHeightModel",null),(0,s._)([(0,d.w)(["web-scene","service"],"heightModel")],y.prototype,"readHeightModel",null),(0,s._)([(0,c.MZ)({type:m.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m.jsonValues,write:{writer:m.write,isRequired:!0}}}}})],y.prototype,"heightUnit",void 0),(0,s._)([(0,d.w)("web-scene","heightUnit")],y.prototype,"readHeightUnit",null),(0,s._)([(0,d.w)("service","heightUnit")],y.prototype,"readHeightUnitService",null),(0,s._)([(0,c.MZ)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],y.prototype,"vertCRS",void 0),(0,s._)([(0,d.w)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],y.prototype,"readVertCRS",null),y=r=(0,s._)([(0,h.$)("esri.geometry.HeightModelInfo")],y);const w=y}}]);
//# sourceMappingURL=22362.00f81477.chunk.js.map